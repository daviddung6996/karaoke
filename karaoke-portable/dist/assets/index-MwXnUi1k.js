import{j as h,m as f1}from"./framer-C6LSZW6A.js";import{a as h1,b as m1,R as de,r as N,c as m0,B as g1,d as p1,e as g0}from"./vendor-BXPh05SW.js";import{Y as y1}from"./youtube-RE07ALOe.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function l(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=l(o);fetch(o.href,u)}})();var Rd={exports:{}},Ra={},kd={exports:{}},jd={};var p0;function b1(){return p0||(p0=1,(function(i){function n(R,H){var E=R.length;R.push(H);e:for(;0<E;){var ge=E-1>>>1,ue=R[ge];if(0<o(ue,H))R[ge]=H,R[E]=ue,E=ge;else break e}}function l(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var H=R[0],E=R.pop();if(E!==H){R[0]=E;e:for(var ge=0,ue=R.length,we=ue>>>1;ge<we;){var J=2*(ge+1)-1,ee=R[J],pe=J+1,Te=R[pe];if(0>o(ee,E))pe<ue&&0>o(Te,ee)?(R[ge]=Te,R[pe]=E,ge=pe):(R[ge]=ee,R[J]=E,ge=J);else if(pe<ue&&0>o(Te,E))R[ge]=Te,R[pe]=E,ge=pe;else break e}}return H}function o(R,H){var E=R.sortIndex-H.sortIndex;return E!==0?E:R.id-H.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],y=[],x=1,v=null,_=3,T=!1,O=!1,D=!1,V=!1,X=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function W(R){for(var H=l(y);H!==null;){if(H.callback===null)a(y);else if(H.startTime<=R)a(y),H.sortIndex=H.expirationTime,n(p,H);else break;H=l(y)}}function ae(R){if(D=!1,W(R),!O)if(l(p)!==null)O=!0,oe||(oe=!0,Ee());else{var H=l(y);H!==null&&me(ae,H.startTime-R)}}var oe=!1,U=-1,K=5,Se=-1;function ye(){return V?!0:!(i.unstable_now()-Se<K)}function he(){if(V=!1,oe){var R=i.unstable_now();Se=R;var H=!0;try{e:{O=!1,D&&(D=!1,P(U),U=-1),T=!0;var E=_;try{t:{for(W(R),v=l(p);v!==null&&!(v.expirationTime>R&&ye());){var ge=v.callback;if(typeof ge=="function"){v.callback=null,_=v.priorityLevel;var ue=ge(v.expirationTime<=R);if(R=i.unstable_now(),typeof ue=="function"){v.callback=ue,W(R),H=!0;break t}v===l(p)&&a(p),W(R)}else a(p);v=l(p)}if(v!==null)H=!0;else{var we=l(y);we!==null&&me(ae,we.startTime-R),H=!1}}break e}finally{v=null,_=E,T=!1}H=void 0}}finally{H?Ee():oe=!1}}}var Ee;if(typeof q=="function")Ee=function(){q(he)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,be=Re.port2;Re.port1.onmessage=he,Ee=function(){be.postMessage(null)}}else Ee=function(){X(he,0)};function me(R,H){U=X(function(){R(i.unstable_now())},H)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(R){R.callback=null},i.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<R?Math.floor(1e3/R):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(R){switch(_){case 1:case 2:case 3:var H=3;break;default:H=_}var E=_;_=H;try{return R()}finally{_=E}},i.unstable_requestPaint=function(){V=!0},i.unstable_runWithPriority=function(R,H){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var E=_;_=R;try{return H()}finally{_=E}},i.unstable_scheduleCallback=function(R,H,E){var ge=i.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?ge+E:ge):E=ge,R){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=E+ue,R={id:x++,callback:H,priorityLevel:R,startTime:E,expirationTime:ue,sortIndex:-1},E>ge?(R.sortIndex=E,n(y,R),l(p)===null&&R===l(y)&&(D?(P(U),U=-1):D=!0,me(ae,E-ge))):(R.sortIndex=ue,n(p,R),O||T||(O=!0,oe||(oe=!0,Ee()))),R},i.unstable_shouldYield=ye,i.unstable_wrapCallback=function(R){var H=_;return function(){var E=_;_=H;try{return R.apply(this,arguments)}finally{_=E}}}})(jd)),jd}var y0;function v1(){return y0||(y0=1,kd.exports=b1()),kd.exports}var b0;function _1(){if(b0)return Ra;b0=1;var i=v1(),n=h1(),l=m1();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(a(188))}function y(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(a(188));return t!==e?null:e}for(var s=e,r=t;;){var c=s.return;if(c===null)break;var d=c.alternate;if(d===null){if(r=c.return,r!==null){s=r;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===s)return p(c),e;if(d===r)return p(c),t;d=d.sibling}throw Error(a(188))}if(s.return!==r.return)s=c,r=d;else{for(var g=!1,b=c.child;b;){if(b===s){g=!0,s=c,r=d;break}if(b===r){g=!0,r=c,s=d;break}b=b.sibling}if(!g){for(b=d.child;b;){if(b===s){g=!0,s=d,r=c;break}if(b===r){g=!0,r=d,s=c;break}b=b.sibling}if(!g)throw Error(a(189))}}if(s.alternate!==r)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),q=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Se=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function Ee(e){return e===null||typeof e!="object"?null:(e=he&&e[he]||e["@@iterator"],typeof e=="function"?e:null)}var Re=Symbol.for("react.client.reference");function be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case X:return"Profiler";case V:return"StrictMode";case ae:return"Suspense";case oe:return"SuspenseList";case Se:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case O:return"Portal";case q:return e.displayName||"Context";case P:return(e._context.displayName||"Context")+".Consumer";case W:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return t=e.displayName||null,t!==null?t:be(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return be(e(t))}catch{}}return null}var me=Array.isArray,R=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E={pending:!1,data:null,method:null,action:null},ge=[],ue=-1;function we(e){return{current:e}}function J(e){0>ue||(e.current=ge[ue],ge[ue]=null,ue--)}function ee(e,t){ue++,ge[ue]=e.current,e.current=t}var pe=we(null),Te=we(null),ke=we(null),Q=we(null);function _e(e,t){switch(ee(ke,t),ee(Te,e),ee(pe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Bp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Bp(t),e=Lp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(pe),ee(pe,e)}function fe(){J(pe),J(Te),J(ke)}function Ce(e){e.memoizedState!==null&&ee(Q,e);var t=pe.current,s=Lp(t,e.type);t!==s&&(ee(Te,e),ee(pe,s))}function Ye(e){Te.current===e&&(J(pe),J(Te)),Q.current===e&&(J(Q),Na._currentValue=E)}var tt,rn;function at(e){if(tt===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);tt=t&&t[1]||"",rn=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+e+rn}var Mt=!1;function ct(e,t){if(!e||Mt)return"";Mt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var L=function(){throw Error()};if(Object.defineProperty(L.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(L,[])}catch(z){var k=z}Reflect.construct(e,[],L)}else{try{L.call()}catch(z){k=z}e.call(L.prototype)}}else{try{throw Error()}catch(z){k=z}(L=e())&&typeof L.catch=="function"&&L.catch(function(){})}}catch(z){if(z&&k&&typeof z.stack=="string")return[z.stack,k.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=r.DetermineComponentFrameRoot(),g=d[0],b=d[1];if(g&&b){var S=g.split(`
`),M=b.split(`
`);for(c=r=0;r<S.length&&!S[r].includes("DetermineComponentFrameRoot");)r++;for(;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;if(r===S.length||c===M.length)for(r=S.length-1,c=M.length-1;1<=r&&0<=c&&S[r]!==M[c];)c--;for(;1<=r&&0<=c;r--,c--)if(S[r]!==M[c]){if(r!==1||c!==1)do if(r--,c--,0>c||S[r]!==M[c]){var I=`
`+S[r].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=r&&0<=c);break}}}finally{Mt=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?at(s):""}function We(e,t){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return e.child!==t&&t!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return ct(e.type,!1);case 11:return ct(e.type.render,!1);case 1:return ct(e.type,!0);case 31:return at("Activity");default:return""}}function Y(e){try{var t="",s=null;do t+=We(e,s),s=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Z=Object.prototype.hasOwnProperty,se=i.unstable_scheduleCallback,Ae=i.unstable_cancelCallback,qe=i.unstable_shouldYield,Ke=i.unstable_requestPaint,He=i.unstable_now,pt=i.unstable_getCurrentPriorityLevel,on=i.unstable_ImmediatePriority,qn=i.unstable_UserBlockingPriority,zt=i.unstable_NormalPriority,Ki=i.unstable_LowPriority,Es=i.unstable_IdlePriority,Il=i.log,j=i.unstable_setDisableYieldValue,$=null,re=null;function Xe(e){if(typeof Il=="function"&&j(e),re&&typeof re.setStrictMode=="function")try{re.setStrictMode($,e)}catch{}}var xt=Math.clz32?Math.clz32:Ll,yh=Math.log,Bl=Math.LN2;function Ll(e){return e>>>=0,e===0?32:31-(yh(e)/Bl|0)|0}var Xi=256,dr=262144,fr=4194304;function Fi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function hr(e,t,s){var r=e.pendingLanes;if(r===0)return 0;var c=0,d=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var b=r&134217727;return b!==0?(r=b&~d,r!==0?c=Fi(r):(g&=b,g!==0?c=Fi(g):s||(s=b&~e,s!==0&&(c=Fi(s))))):(b=r&~d,b!==0?c=Fi(b):g!==0?c=Fi(g):s||(s=r&~e,s!==0&&(c=Fi(s)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,s=t&-t,d>=s||d===32&&(s&4194048)!==0)?t:c}function Hl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Jv(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bh(){var e=fr;return fr<<=1,(fr&62914560)===0&&(fr=4194304),e}function bc(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ul(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function e_(e,t,s,r,c,d){var g=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var b=e.entanglements,S=e.expirationTimes,M=e.hiddenUpdates;for(s=g&~s;0<s;){var I=31-xt(s),L=1<<I;b[I]=0,S[I]=-1;var k=M[I];if(k!==null)for(M[I]=null,I=0;I<k.length;I++){var z=k[I];z!==null&&(z.lane&=-536870913)}s&=~L}r!==0&&vh(e,r,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(g&~t))}function vh(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|s&261930}function _h(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-xt(s),c=1<<r;c&t|e[r]&t&&(e[r]|=t),s&=~c}}function xh(e,t){var s=t&-t;return s=(s&42)!==0?1:vc(s),(s&(e.suspendedLanes|t))!==0?0:s}function vc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _c(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Sh(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:r0(e.type))}function Th(e,t){var s=H.p;try{return H.p=e,t()}finally{H.p=s}}var hi=Math.random().toString(36).slice(2),Vt="__reactFiber$"+hi,Wt="__reactProps$"+hi,As="__reactContainer$"+hi,xc="__reactEvents$"+hi,t_="__reactListeners$"+hi,n_="__reactHandles$"+hi,wh="__reactResources$"+hi,Vl="__reactMarker$"+hi;function Sc(e){delete e[Vt],delete e[Wt],delete e[xc],delete e[t_],delete e[n_]}function Ms(e){var t=e[Vt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[As]||s[Vt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Yp(e);e!==null;){if(s=e[Vt])return s;e=Yp(e)}return t}e=s,s=e.parentNode}return null}function Rs(e){if(e=e[Vt]||e[As]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Gl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function ks(e){var t=e[wh];return t||(t=e[wh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function It(e){e[Vl]=!0}var Ch=new Set,Nh={};function Pi(e,t){js(e,t),js(e+"Capture",t)}function js(e,t){for(Nh[e]=t,e=0;e<t.length;e++)Ch.add(t[e])}var i_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Eh={},Ah={};function s_(e){return Z.call(Ah,e)?!0:Z.call(Eh,e)?!1:i_.test(e)?Ah[e]=!0:(Eh[e]=!0,!1)}function mr(e,t,s){if(s_(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function gr(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Qn(e,t,s,r){if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+r)}}function pn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function l_(e,t,s){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){s=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(g){s=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tc(e){if(!e._valueTracker){var t=Mh(e)?"checked":"value";e._valueTracker=l_(e,t,""+e[t])}}function Rh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=Mh(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function pr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var a_=/[\n"\\]/g;function yn(e){return e.replace(a_,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function wc(e,t,s,r,c,d,g,b){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+pn(t)):e.value!==""+pn(t)&&(e.value=""+pn(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Cc(e,g,pn(t)):s!=null?Cc(e,g,pn(s)):r!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+pn(b):e.removeAttribute("name")}function kh(e,t,s,r,c,d,g,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Tc(e);return}s=s!=null?""+pn(s):"",t=t!=null?""+pn(t):s,b||t===e.value||(e.value=t),e.defaultValue=t}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=b?e.checked:!!r,e.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),Tc(e)}function Cc(e,t,s){t==="number"&&pr(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ds(e,t,s,r){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&r&&(e[s].defaultSelected=!0)}else{for(s=""+pn(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function jh(e,t,s){if(t!=null&&(t=""+pn(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+pn(s):""}function Dh(e,t,s,r){if(t==null){if(r!=null){if(s!=null)throw Error(a(92));if(me(r)){if(1<r.length)throw Error(a(93));r=r[0]}s=r}s==null&&(s=""),t=s}s=pn(t),e.defaultValue=s,r=e.textContent,r===s&&r!==""&&r!==null&&(e.value=r),Tc(e)}function Os(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var r_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oh(e,t,s){var r=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,s):typeof s!="number"||s===0||r_.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function zh(e,t,s){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,s!=null){for(var r in s)!s.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in t)r=t[c],t.hasOwnProperty(c)&&s[c]!==r&&Oh(e,c,r)}else for(var d in t)t.hasOwnProperty(d)&&Oh(e,d,t[d])}function Nc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),c_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yr(e){return c_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Yn(){}var Ec=null;function Ac(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zs=null,Is=null;function Ih(e){var t=Rs(e);if(t&&(e=t.stateNode)){var s=e[Wt]||null;e:switch(e=t.stateNode,t.type){case"input":if(wc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+yn(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var c=r[Wt]||null;if(!c)throw Error(a(90));wc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<s.length;t++)r=s[t],r.form===e.form&&Rh(r)}break e;case"textarea":jh(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Ds(e,!!s.multiple,t,!1)}}}var Mc=!1;function Bh(e,t,s){if(Mc)return e(t,s);Mc=!0;try{var r=e(t);return r}finally{if(Mc=!1,(zs!==null||Is!==null)&&(so(),zs&&(t=zs,e=Is,Is=zs=null,Ih(t),e)))for(t=0;t<e.length;t++)Ih(e[t])}}function ql(e,t){var s=e.stateNode;if(s===null)return null;var r=s[Wt]||null;if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,t,typeof s));return s}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rc=!1;if(Kn)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Rc=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{Rc=!1}var mi=null,kc=null,br=null;function Lh(){if(br)return br;var e,t=kc,s=t.length,r,c="value"in mi?mi.value:mi.textContent,d=c.length;for(e=0;e<s&&t[e]===c[e];e++);var g=s-e;for(r=1;r<=g&&t[s-r]===c[d-r];r++);return br=c.slice(e,1<r?1-r:void 0)}function vr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _r(){return!0}function Hh(){return!1}function Jt(e){function t(s,r,c,d,g){this._reactName=s,this._targetInst=c,this.type=r,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?_r:Hh,this.isPropagationStopped=Hh,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),t}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xr=Jt(Zi),Yl=v({},Zi,{view:0,detail:0}),u_=Jt(Yl),jc,Dc,Kl,Sr=v({},Yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kl&&(Kl&&e.type==="mousemove"?(jc=e.screenX-Kl.screenX,Dc=e.screenY-Kl.screenY):Dc=jc=0,Kl=e),jc)},movementY:function(e){return"movementY"in e?e.movementY:Dc}}),Uh=Jt(Sr),d_=v({},Sr,{dataTransfer:0}),f_=Jt(d_),h_=v({},Yl,{relatedTarget:0}),Oc=Jt(h_),m_=v({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),g_=Jt(m_),p_=v({},Zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),y_=Jt(p_),b_=v({},Zi,{data:0}),Vh=Jt(b_),v_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},__={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=x_[e])?!!t[e]:!1}function zc(){return S_}var T_=v({},Yl,{key:function(e){if(e.key){var t=v_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?__[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zc,charCode:function(e){return e.type==="keypress"?vr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),w_=Jt(T_),C_=v({},Sr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gh=Jt(C_),N_=v({},Yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zc}),E_=Jt(N_),A_=v({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),M_=Jt(A_),R_=v({},Sr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),k_=Jt(R_),j_=v({},Zi,{newState:0,oldState:0}),D_=Jt(j_),O_=[9,13,27,32],Ic=Kn&&"CompositionEvent"in window,Xl=null;Kn&&"documentMode"in document&&(Xl=document.documentMode);var z_=Kn&&"TextEvent"in window&&!Xl,qh=Kn&&(!Ic||Xl&&8<Xl&&11>=Xl),Qh=" ",Yh=!1;function Kh(e,t){switch(e){case"keyup":return O_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bs=!1;function I_(e,t){switch(e){case"compositionend":return Xh(t);case"keypress":return t.which!==32?null:(Yh=!0,Qh);case"textInput":return e=t.data,e===Qh&&Yh?null:e;default:return null}}function B_(e,t){if(Bs)return e==="compositionend"||!Ic&&Kh(e,t)?(e=Lh(),br=kc=mi=null,Bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qh&&t.locale!=="ko"?null:t.data;default:return null}}var L_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!L_[e.type]:t==="textarea"}function Ph(e,t,s,r){zs?Is?Is.push(r):Is=[r]:zs=r,t=fo(t,"onChange"),0<t.length&&(s=new xr("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Fl=null,Pl=null;function H_(e){kp(e,0)}function Tr(e){var t=Gl(e);if(Rh(t))return e}function Zh(e,t){if(e==="change")return t}var $h=!1;if(Kn){var Bc;if(Kn){var Lc="oninput"in document;if(!Lc){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),Lc=typeof Wh.oninput=="function"}Bc=Lc}else Bc=!1;$h=Bc&&(!document.documentMode||9<document.documentMode)}function Jh(){Fl&&(Fl.detachEvent("onpropertychange",em),Pl=Fl=null)}function em(e){if(e.propertyName==="value"&&Tr(Pl)){var t=[];Ph(t,Pl,e,Ac(e)),Bh(H_,t)}}function U_(e,t,s){e==="focusin"?(Jh(),Fl=t,Pl=s,Fl.attachEvent("onpropertychange",em)):e==="focusout"&&Jh()}function V_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tr(Pl)}function G_(e,t){if(e==="click")return Tr(t)}function q_(e,t){if(e==="input"||e==="change")return Tr(t)}function Q_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:Q_;function Zl(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var c=s[r];if(!Z.call(t,c)||!cn(e[c],t[c]))return!1}return!0}function tm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nm(e,t){var s=tm(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=tm(s)}}function im(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?im(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=pr(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=pr(e.document)}return t}function Hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Y_=Kn&&"documentMode"in document&&11>=document.documentMode,Ls=null,Uc=null,$l=null,Vc=!1;function lm(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Vc||Ls==null||Ls!==pr(r)||(r=Ls,"selectionStart"in r&&Hc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$l&&Zl($l,r)||($l=r,r=fo(Uc,"onSelect"),0<r.length&&(t=new xr("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=Ls)))}function $i(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Hs={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},Gc={},am={};Kn&&(am=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function Wi(e){if(Gc[e])return Gc[e];if(!Hs[e])return e;var t=Hs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in am)return Gc[e]=t[s];return e}var rm=Wi("animationend"),om=Wi("animationiteration"),cm=Wi("animationstart"),K_=Wi("transitionrun"),X_=Wi("transitionstart"),F_=Wi("transitioncancel"),um=Wi("transitionend"),dm=new Map,qc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qc.push("scrollEnd");function An(e,t){dm.set(e,t),Pi(t,[e])}var wr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},bn=[],Us=0,Qc=0;function Cr(){for(var e=Us,t=Qc=Us=0;t<e;){var s=bn[t];bn[t++]=null;var r=bn[t];bn[t++]=null;var c=bn[t];bn[t++]=null;var d=bn[t];if(bn[t++]=null,r!==null&&c!==null){var g=r.pending;g===null?c.next=c:(c.next=g.next,g.next=c),r.pending=c}d!==0&&fm(s,c,d)}}function Nr(e,t,s,r){bn[Us++]=e,bn[Us++]=t,bn[Us++]=s,bn[Us++]=r,Qc|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Yc(e,t,s,r){return Nr(e,t,s,r),Er(e)}function Ji(e,t){return Nr(e,null,null,t),Er(e)}function fm(e,t,s){e.lanes|=s;var r=e.alternate;r!==null&&(r.lanes|=s);for(var c=!1,d=e.return;d!==null;)d.childLanes|=s,r=d.alternate,r!==null&&(r.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-xt(s),e=d.hiddenUpdates,r=e[c],r===null?e[c]=[t]:r.push(t),t.lane=s|536870912),d):null}function Er(e){if(50<va)throw va=0,ed=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Vs={};function P_(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(e,t,s,r){return new P_(e,t,s,r)}function Kc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xn(e,t){var s=e.alternate;return s===null?(s=un(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function hm(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ar(e,t,s,r,c,d){var g=0;if(r=e,typeof e=="function")Kc(e)&&(g=1);else if(typeof e=="string")g=e1(e,s,pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Se:return e=un(31,s,t,c),e.elementType=Se,e.lanes=d,e;case D:return es(s.children,c,d,t);case V:g=8,c|=24;break;case X:return e=un(12,s,t,c|2),e.elementType=X,e.lanes=d,e;case ae:return e=un(13,s,t,c),e.elementType=ae,e.lanes=d,e;case oe:return e=un(19,s,t,c),e.elementType=oe,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:g=10;break e;case P:g=9;break e;case W:g=11;break e;case U:g=14;break e;case K:g=16,r=null;break e}g=29,s=Error(a(130,e===null?"null":typeof e,"")),r=null}return t=un(g,s,t,c),t.elementType=e,t.type=r,t.lanes=d,t}function es(e,t,s,r){return e=un(7,e,r,t),e.lanes=s,e}function Xc(e,t,s){return e=un(6,e,null,t),e.lanes=s,e}function mm(e){var t=un(18,null,null,0);return t.stateNode=e,t}function Fc(e,t,s){return t=un(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gm=new WeakMap;function vn(e,t){if(typeof e=="object"&&e!==null){var s=gm.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Y(t)},gm.set(e,t),t)}return{value:e,source:t,stack:Y(t)}}var Gs=[],qs=0,Mr=null,Wl=0,_n=[],xn=0,gi=null,zn=1,In="";function Fn(e,t){Gs[qs++]=Wl,Gs[qs++]=Mr,Mr=e,Wl=t}function pm(e,t,s){_n[xn++]=zn,_n[xn++]=In,_n[xn++]=gi,gi=e;var r=zn;e=In;var c=32-xt(r)-1;r&=~(1<<c),s+=1;var d=32-xt(t)+c;if(30<d){var g=c-c%5;d=(r&(1<<g)-1).toString(32),r>>=g,c-=g,zn=1<<32-xt(t)+c|s<<c|r,In=d+e}else zn=1<<d|s<<c|r,In=e}function Pc(e){e.return!==null&&(Fn(e,1),pm(e,1,0))}function Zc(e){for(;e===Mr;)Mr=Gs[--qs],Gs[qs]=null,Wl=Gs[--qs],Gs[qs]=null;for(;e===gi;)gi=_n[--xn],_n[xn]=null,In=_n[--xn],_n[xn]=null,zn=_n[--xn],_n[xn]=null}function ym(e,t){_n[xn++]=zn,_n[xn++]=In,_n[xn++]=gi,zn=t.id,In=t.overflow,gi=e}var Gt=null,ht=null,Ge=!1,pi=null,Sn=!1,$c=Error(a(519));function yi(e){var t=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(vn(t,e)),$c}function bm(e){var t=e.stateNode,s=e.type,r=e.memoizedProps;switch(t[Vt]=e,t[Wt]=r,s){case"dialog":Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":case"embed":Ie("load",t);break;case"video":case"audio":for(s=0;s<xa.length;s++)Ie(xa[s],t);break;case"source":Ie("error",t);break;case"img":case"image":case"link":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"input":Ie("invalid",t),kh(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ie("invalid",t);break;case"textarea":Ie("invalid",t),Dh(t,r.value,r.defaultValue,r.children)}s=r.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||r.suppressHydrationWarning===!0||zp(t.textContent,s)?(r.popover!=null&&(Ie("beforetoggle",t),Ie("toggle",t)),r.onScroll!=null&&Ie("scroll",t),r.onScrollEnd!=null&&Ie("scrollend",t),r.onClick!=null&&(t.onclick=Yn),t=!0):t=!1,t||yi(e,!0)}function vm(e){for(Gt=e.return;Gt;)switch(Gt.tag){case 5:case 31:case 13:Sn=!1;return;case 27:case 3:Sn=!0;return;default:Gt=Gt.return}}function Qs(e){if(e!==Gt)return!1;if(!Ge)return vm(e),Ge=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||gd(e.type,e.memoizedProps)),s=!s),s&&ht&&yi(e),vm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));ht=Qp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));ht=Qp(e)}else t===27?(t=ht,ki(e.type)?(e=_d,_d=null,ht=e):ht=t):ht=Gt?wn(e.stateNode.nextSibling):null;return!0}function ts(){ht=Gt=null,Ge=!1}function Wc(){var e=pi;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),pi=null),e}function Jl(e){pi===null?pi=[e]:pi.push(e)}var Jc=we(null),ns=null,Pn=null;function bi(e,t,s){ee(Jc,t._currentValue),t._currentValue=s}function Zn(e){e._currentValue=Jc.current,J(Jc)}function eu(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function tu(e,t,s,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var g=c.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=c;for(var S=0;S<t.length;S++)if(b.context===t[S]){d.lanes|=s,b=d.alternate,b!==null&&(b.lanes|=s),eu(d.return,s,e),r||(g=null);break e}d=b.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(a(341));g.lanes|=s,d=g.alternate,d!==null&&(d.lanes|=s),eu(g,s,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function Ys(e,t,s,r){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(a(387));if(g=g.memoizedProps,g!==null){var b=c.type;cn(c.pendingProps.value,g.value)||(e!==null?e.push(b):e=[b])}}else if(c===Q.current){if(g=c.alternate,g===null)throw Error(a(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Na):e=[Na])}c=c.return}e!==null&&tu(t,e,s,r),t.flags|=262144}function Rr(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function is(e){ns=e,Pn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function qt(e){return _m(ns,e)}function kr(e,t){return ns===null&&is(e),_m(e,t)}function _m(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Pn===null){if(e===null)throw Error(a(308));Pn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Pn=Pn.next=t;return s}var Z_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},$_=i.unstable_scheduleCallback,W_=i.unstable_NormalPriority,wt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nu(){return{controller:new Z_,data:new Map,refCount:0}}function ea(e){e.refCount--,e.refCount===0&&$_(W_,function(){e.controller.abort()})}var ta=null,iu=0,Ks=0,Xs=null;function J_(e,t){if(ta===null){var s=ta=[];iu=0,Ks=ad(),Xs={status:"pending",value:void 0,then:function(r){s.push(r)}}}return iu++,t.then(xm,xm),t}function xm(){if(--iu===0&&ta!==null){Xs!==null&&(Xs.status="fulfilled");var e=ta;ta=null,Ks=0,Xs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ex(e,t){var s=[],r={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var c=0;c<s.length;c++)(0,s[c])(t)},function(c){for(r.status="rejected",r.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),r}var Sm=R.S;R.S=function(e,t){lp=He(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&J_(e,t),Sm!==null&&Sm(e,t)};var ss=we(null);function su(){var e=ss.current;return e!==null?e:rt.pooledCache}function jr(e,t){t===null?ee(ss,ss.current):ee(ss,t.pool)}function Tm(){var e=su();return e===null?null:{parent:wt._currentValue,pool:e}}var Fs=Error(a(460)),lu=Error(a(474)),Dr=Error(a(542)),Or={then:function(){}};function wm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cm(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Yn,Yn),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Em(e),e;default:if(typeof t.status=="string")t.then(Yn,Yn);else{if(e=rt,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=r}},function(r){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Em(e),e}throw as=t,Fs}}function ls(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(as=s,Fs):s}}var as=null;function Nm(){if(as===null)throw Error(a(459));var e=as;return as=null,e}function Em(e){if(e===Fs||e===Dr)throw Error(a(483))}var Ps=null,na=0;function zr(e){var t=na;return na+=1,Ps===null&&(Ps=[]),Cm(Ps,e,t)}function ia(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ir(e,t){throw t.$$typeof===_?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Am(e){function t(C,w){if(e){var A=C.deletions;A===null?(C.deletions=[w],C.flags|=16):A.push(w)}}function s(C,w){if(!e)return null;for(;w!==null;)t(C,w),w=w.sibling;return null}function r(C){for(var w=new Map;C!==null;)C.key!==null?w.set(C.key,C):w.set(C.index,C),C=C.sibling;return w}function c(C,w){return C=Xn(C,w),C.index=0,C.sibling=null,C}function d(C,w,A){return C.index=A,e?(A=C.alternate,A!==null?(A=A.index,A<w?(C.flags|=67108866,w):A):(C.flags|=67108866,w)):(C.flags|=1048576,w)}function g(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function b(C,w,A,B){return w===null||w.tag!==6?(w=Xc(A,C.mode,B),w.return=C,w):(w=c(w,A),w.return=C,w)}function S(C,w,A,B){var ce=A.type;return ce===D?I(C,w,A.props.children,B,A.key):w!==null&&(w.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===K&&ls(ce)===w.type)?(w=c(w,A.props),ia(w,A),w.return=C,w):(w=Ar(A.type,A.key,A.props,null,C.mode,B),ia(w,A),w.return=C,w)}function M(C,w,A,B){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Fc(A,C.mode,B),w.return=C,w):(w=c(w,A.children||[]),w.return=C,w)}function I(C,w,A,B,ce){return w===null||w.tag!==7?(w=es(A,C.mode,B,ce),w.return=C,w):(w=c(w,A),w.return=C,w)}function L(C,w,A){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Xc(""+w,C.mode,A),w.return=C,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case T:return A=Ar(w.type,w.key,w.props,null,C.mode,A),ia(A,w),A.return=C,A;case O:return w=Fc(w,C.mode,A),w.return=C,w;case K:return w=ls(w),L(C,w,A)}if(me(w)||Ee(w))return w=es(w,C.mode,A,null),w.return=C,w;if(typeof w.then=="function")return L(C,zr(w),A);if(w.$$typeof===q)return L(C,kr(C,w),A);Ir(C,w)}return null}function k(C,w,A,B){var ce=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return ce!==null?null:b(C,w,""+A,B);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case T:return A.key===ce?S(C,w,A,B):null;case O:return A.key===ce?M(C,w,A,B):null;case K:return A=ls(A),k(C,w,A,B)}if(me(A)||Ee(A))return ce!==null?null:I(C,w,A,B,null);if(typeof A.then=="function")return k(C,w,zr(A),B);if(A.$$typeof===q)return k(C,w,kr(C,A),B);Ir(C,A)}return null}function z(C,w,A,B,ce){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return C=C.get(A)||null,b(w,C,""+B,ce);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case T:return C=C.get(B.key===null?A:B.key)||null,S(w,C,B,ce);case O:return C=C.get(B.key===null?A:B.key)||null,M(w,C,B,ce);case K:return B=ls(B),z(C,w,A,B,ce)}if(me(B)||Ee(B))return C=C.get(A)||null,I(w,C,B,ce,null);if(typeof B.then=="function")return z(C,w,A,zr(B),ce);if(B.$$typeof===q)return z(C,w,A,kr(w,B),ce);Ir(w,B)}return null}function te(C,w,A,B){for(var ce=null,Fe=null,le=w,Me=w=0,Ve=null;le!==null&&Me<A.length;Me++){le.index>Me?(Ve=le,le=null):Ve=le.sibling;var Pe=k(C,le,A[Me],B);if(Pe===null){le===null&&(le=Ve);break}e&&le&&Pe.alternate===null&&t(C,le),w=d(Pe,w,Me),Fe===null?ce=Pe:Fe.sibling=Pe,Fe=Pe,le=Ve}if(Me===A.length)return s(C,le),Ge&&Fn(C,Me),ce;if(le===null){for(;Me<A.length;Me++)le=L(C,A[Me],B),le!==null&&(w=d(le,w,Me),Fe===null?ce=le:Fe.sibling=le,Fe=le);return Ge&&Fn(C,Me),ce}for(le=r(le);Me<A.length;Me++)Ve=z(le,C,Me,A[Me],B),Ve!==null&&(e&&Ve.alternate!==null&&le.delete(Ve.key===null?Me:Ve.key),w=d(Ve,w,Me),Fe===null?ce=Ve:Fe.sibling=Ve,Fe=Ve);return e&&le.forEach(function(Ii){return t(C,Ii)}),Ge&&Fn(C,Me),ce}function ve(C,w,A,B){if(A==null)throw Error(a(151));for(var ce=null,Fe=null,le=w,Me=w=0,Ve=null,Pe=A.next();le!==null&&!Pe.done;Me++,Pe=A.next()){le.index>Me?(Ve=le,le=null):Ve=le.sibling;var Ii=k(C,le,Pe.value,B);if(Ii===null){le===null&&(le=Ve);break}e&&le&&Ii.alternate===null&&t(C,le),w=d(Ii,w,Me),Fe===null?ce=Ii:Fe.sibling=Ii,Fe=Ii,le=Ve}if(Pe.done)return s(C,le),Ge&&Fn(C,Me),ce;if(le===null){for(;!Pe.done;Me++,Pe=A.next())Pe=L(C,Pe.value,B),Pe!==null&&(w=d(Pe,w,Me),Fe===null?ce=Pe:Fe.sibling=Pe,Fe=Pe);return Ge&&Fn(C,Me),ce}for(le=r(le);!Pe.done;Me++,Pe=A.next())Pe=z(le,C,Me,Pe.value,B),Pe!==null&&(e&&Pe.alternate!==null&&le.delete(Pe.key===null?Me:Pe.key),w=d(Pe,w,Me),Fe===null?ce=Pe:Fe.sibling=Pe,Fe=Pe);return e&&le.forEach(function(d1){return t(C,d1)}),Ge&&Fn(C,Me),ce}function st(C,w,A,B){if(typeof A=="object"&&A!==null&&A.type===D&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case T:e:{for(var ce=A.key;w!==null;){if(w.key===ce){if(ce=A.type,ce===D){if(w.tag===7){s(C,w.sibling),B=c(w,A.props.children),B.return=C,C=B;break e}}else if(w.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===K&&ls(ce)===w.type){s(C,w.sibling),B=c(w,A.props),ia(B,A),B.return=C,C=B;break e}s(C,w);break}else t(C,w);w=w.sibling}A.type===D?(B=es(A.props.children,C.mode,B,A.key),B.return=C,C=B):(B=Ar(A.type,A.key,A.props,null,C.mode,B),ia(B,A),B.return=C,C=B)}return g(C);case O:e:{for(ce=A.key;w!==null;){if(w.key===ce)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){s(C,w.sibling),B=c(w,A.children||[]),B.return=C,C=B;break e}else{s(C,w);break}else t(C,w);w=w.sibling}B=Fc(A,C.mode,B),B.return=C,C=B}return g(C);case K:return A=ls(A),st(C,w,A,B)}if(me(A))return te(C,w,A,B);if(Ee(A)){if(ce=Ee(A),typeof ce!="function")throw Error(a(150));return A=ce.call(A),ve(C,w,A,B)}if(typeof A.then=="function")return st(C,w,zr(A),B);if(A.$$typeof===q)return st(C,w,kr(C,A),B);Ir(C,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,w!==null&&w.tag===6?(s(C,w.sibling),B=c(w,A),B.return=C,C=B):(s(C,w),B=Xc(A,C.mode,B),B.return=C,C=B),g(C)):s(C,w)}return function(C,w,A,B){try{na=0;var ce=st(C,w,A,B);return Ps=null,ce}catch(le){if(le===Fs||le===Dr)throw le;var Fe=un(29,le,null,C.mode);return Fe.lanes=B,Fe.return=C,Fe}}}var rs=Am(!0),Mm=Am(!1),vi=!1;function au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ru(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _i(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xi(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,($e&2)!==0){var c=r.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),r.pending=t,t=Er(e),fm(e,null,s),t}return Nr(e,r,t,s),Er(e)}function sa(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,_h(e,s)}}function ou(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var c=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var g={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?c=d=g:d=d.next=g,s=s.next}while(s!==null);d===null?c=d=t:d=d.next=t}else c=d=t;s={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:r.shared,callbacks:r.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var cu=!1;function la(){if(cu){var e=Xs;if(e!==null)throw e}}function aa(e,t,s,r){cu=!1;var c=e.updateQueue;vi=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var S=b,M=S.next;S.next=null,g===null?d=M:g.next=M,g=S;var I=e.alternate;I!==null&&(I=I.updateQueue,b=I.lastBaseUpdate,b!==g&&(b===null?I.firstBaseUpdate=M:b.next=M,I.lastBaseUpdate=S))}if(d!==null){var L=c.baseState;g=0,I=M=S=null,b=d;do{var k=b.lane&-536870913,z=k!==b.lane;if(z?(Ue&k)===k:(r&k)===k){k!==0&&k===Ks&&(cu=!0),I!==null&&(I=I.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var te=e,ve=b;k=t;var st=s;switch(ve.tag){case 1:if(te=ve.payload,typeof te=="function"){L=te.call(st,L,k);break e}L=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ve.payload,k=typeof te=="function"?te.call(st,L,k):te,k==null)break e;L=v({},L,k);break e;case 2:vi=!0}}k=b.callback,k!==null&&(e.flags|=64,z&&(e.flags|=8192),z=c.callbacks,z===null?c.callbacks=[k]:z.push(k))}else z={lane:k,tag:b.tag,payload:b.payload,callback:b.callback,next:null},I===null?(M=I=z,S=L):I=I.next=z,g|=k;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;z=b,b=z.next,z.next=null,c.lastBaseUpdate=z,c.shared.pending=null}}while(!0);I===null&&(S=L),c.baseState=S,c.firstBaseUpdate=M,c.lastBaseUpdate=I,d===null&&(c.shared.lanes=0),Ni|=g,e.lanes=g,e.memoizedState=L}}function Rm(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function km(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Rm(s[e],t)}var Zs=we(null),Br=we(0);function jm(e,t){e=li,ee(Br,e),ee(Zs,t),li=e|t.baseLanes}function uu(){ee(Br,li),ee(Zs,Zs.current)}function du(){li=Br.current,J(Zs),J(Br)}var dn=we(null),Tn=null;function Si(e){var t=e.alternate;ee(St,St.current&1),ee(dn,e),Tn===null&&(t===null||Zs.current!==null||t.memoizedState!==null)&&(Tn=e)}function fu(e){ee(St,St.current),ee(dn,e),Tn===null&&(Tn=e)}function Dm(e){e.tag===22?(ee(St,St.current),ee(dn,e),Tn===null&&(Tn=e)):Ti()}function Ti(){ee(St,St.current),ee(dn,dn.current)}function fn(e){J(dn),Tn===e&&(Tn=null),J(St)}var St=we(0);function Lr(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||bd(s)||vd(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $n=0,Ne=null,nt=null,Ct=null,Hr=!1,$s=!1,os=!1,Ur=0,ra=0,Ws=null,tx=0;function yt(){throw Error(a(321))}function hu(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!cn(e[s],t[s]))return!1;return!0}function mu(e,t,s,r,c,d){return $n=d,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=e===null||e.memoizedState===null?pg:Mu,os=!1,d=s(r,c),os=!1,$s&&(d=zm(t,s,r,c)),Om(e),d}function Om(e){R.H=ua;var t=nt!==null&&nt.next!==null;if($n=0,Ct=nt=Ne=null,Hr=!1,ra=0,Ws=null,t)throw Error(a(300));e===null||Nt||(e=e.dependencies,e!==null&&Rr(e)&&(Nt=!0))}function zm(e,t,s,r){Ne=e;var c=0;do{if($s&&(Ws=null),ra=0,$s=!1,25<=c)throw Error(a(301));if(c+=1,Ct=nt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}R.H=yg,d=t(s,r)}while($s);return d}function nx(){var e=R.H,t=e.useState()[0];return t=typeof t.then=="function"?oa(t):t,e=e.useState()[0],(nt!==null?nt.memoizedState:null)!==e&&(Ne.flags|=1024),t}function gu(){var e=Ur!==0;return Ur=0,e}function pu(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function yu(e){if(Hr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Hr=!1}$n=0,Ct=nt=Ne=null,$s=!1,ra=Ur=0,Ws=null}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ne.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function Tt(){if(nt===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=Ct===null?Ne.memoizedState:Ct.next;if(t!==null)Ct=t,nt=e;else{if(e===null)throw Ne.alternate===null?Error(a(467)):Error(a(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Ct===null?Ne.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function Vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oa(e){var t=ra;return ra+=1,Ws===null&&(Ws=[]),e=Cm(Ws,e,t),t=Ne,(Ct===null?t.memoizedState:Ct.next)===null&&(t=t.alternate,R.H=t===null||t.memoizedState===null?pg:Mu),e}function Gr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return oa(e);if(e.$$typeof===q)return qt(e)}throw Error(a(438,String(e)))}function bu(e){var t=null,s=Ne.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var r=Ne.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Vr(),Ne.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),r=0;r<e;r++)s[r]=ye;return t.index++,s}function Wn(e,t){return typeof t=="function"?t(e):t}function qr(e){var t=Tt();return vu(t,nt,e)}function vu(e,t,s){var r=e.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=s;var c=e.baseQueue,d=r.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}t.baseQueue=c=d,r.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var b=g=null,S=null,M=t,I=!1;do{var L=M.lane&-536870913;if(L!==M.lane?(Ue&L)===L:($n&L)===L){var k=M.revertLane;if(k===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),L===Ks&&(I=!0);else if(($n&k)===k){M=M.next,k===Ks&&(I=!0);continue}else L={lane:0,revertLane:M.revertLane,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},S===null?(b=S=L,g=d):S=S.next=L,Ne.lanes|=k,Ni|=k;L=M.action,os&&s(d,L),d=M.hasEagerState?M.eagerState:s(d,L)}else k={lane:L,revertLane:M.revertLane,gesture:M.gesture,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},S===null?(b=S=k,g=d):S=S.next=k,Ne.lanes|=L,Ni|=L;M=M.next}while(M!==null&&M!==t);if(S===null?g=d:S.next=b,!cn(d,e.memoizedState)&&(Nt=!0,I&&(s=Xs,s!==null)))throw s;e.memoizedState=d,e.baseState=g,e.baseQueue=S,r.lastRenderedState=d}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function _u(e){var t=Tt(),s=t.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var r=s.dispatch,c=s.pending,d=t.memoizedState;if(c!==null){s.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);cn(d,t.memoizedState)||(Nt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,r]}function Im(e,t,s){var r=Ne,c=Tt(),d=Ge;if(d){if(s===void 0)throw Error(a(407));s=s()}else s=t();var g=!cn((nt||c).memoizedState,s);if(g&&(c.memoizedState=s,Nt=!0),c=c.queue,Tu(Hm.bind(null,r,c,e),[e]),c.getSnapshot!==t||g||Ct!==null&&Ct.memoizedState.tag&1){if(r.flags|=2048,Js(9,{destroy:void 0},Lm.bind(null,r,c,s,t),null),rt===null)throw Error(a(349));d||($n&127)!==0||Bm(r,t,s)}return s}function Bm(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ne.updateQueue,t===null?(t=Vr(),Ne.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Lm(e,t,s,r){t.value=s,t.getSnapshot=r,Um(t)&&Vm(e)}function Hm(e,t,s){return s(function(){Um(t)&&Vm(e)})}function Um(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!cn(e,s)}catch{return!0}}function Vm(e){var t=Ji(e,2);t!==null&&ln(t,e,2)}function xu(e){var t=Ft();if(typeof e=="function"){var s=e;if(e=s(),os){Xe(!0);try{s()}finally{Xe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:e},t}function Gm(e,t,s,r){return e.baseState=s,vu(e,nt,typeof r=="function"?r:Wn)}function ix(e,t,s,r,c){if(Kr(e))throw Error(a(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){d.listeners.push(g)}};R.T!==null?s(!0):d.isTransition=!1,r(d),s=t.pending,s===null?(d.next=t.pending=d,qm(t,d)):(d.next=s.next,t.pending=s.next=d)}}function qm(e,t){var s=t.action,r=t.payload,c=e.state;if(t.isTransition){var d=R.T,g={};R.T=g;try{var b=s(c,r),S=R.S;S!==null&&S(g,b),Qm(e,t,b)}catch(M){Su(e,t,M)}finally{d!==null&&g.types!==null&&(d.types=g.types),R.T=d}}else try{d=s(c,r),Qm(e,t,d)}catch(M){Su(e,t,M)}}function Qm(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(r){Ym(e,t,r)},function(r){return Su(e,t,r)}):Ym(e,t,s)}function Ym(e,t,s){t.status="fulfilled",t.value=s,Km(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,qm(e,s)))}function Su(e,t,s){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=s,Km(t),t=t.next;while(t!==r)}e.action=null}function Km(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xm(e,t){return t}function Fm(e,t){if(Ge){var s=rt.formState;if(s!==null){e:{var r=Ne;if(Ge){if(ht){t:{for(var c=ht,d=Sn;c.nodeType!==8;){if(!d){c=null;break t}if(c=wn(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){ht=wn(c.nextSibling),r=c.data==="F!";break e}}yi(r)}r=!1}r&&(t=s[0])}}return s=Ft(),s.memoizedState=s.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:t},s.queue=r,s=hg.bind(null,Ne,r),r.dispatch=s,r=xu(!1),d=Au.bind(null,Ne,!1,r.queue),r=Ft(),c={state:t,dispatch:null,action:e,pending:null},r.queue=c,s=ix.bind(null,Ne,c,d,s),c.dispatch=s,r.memoizedState=e,[t,s,!1]}function Pm(e){var t=Tt();return Zm(t,nt,e)}function Zm(e,t,s){if(t=vu(e,t,Xm)[0],e=qr(Wn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=oa(t)}catch(g){throw g===Fs?Dr:g}else r=t;t=Tt();var c=t.queue,d=c.dispatch;return s!==t.memoizedState&&(Ne.flags|=2048,Js(9,{destroy:void 0},sx.bind(null,c,s),null)),[r,d,e]}function sx(e,t){e.action=t}function $m(e){var t=Tt(),s=nt;if(s!==null)return Zm(t,s,e);Tt(),t=t.memoizedState,s=Tt();var r=s.queue.dispatch;return s.memoizedState=e,[t,r,!1]}function Js(e,t,s,r){return e={tag:e,create:s,deps:r,inst:t,next:null},t=Ne.updateQueue,t===null&&(t=Vr(),Ne.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e),e}function Wm(){return Tt().memoizedState}function Qr(e,t,s,r){var c=Ft();Ne.flags|=e,c.memoizedState=Js(1|t,{destroy:void 0},s,r===void 0?null:r)}function Yr(e,t,s,r){var c=Tt();r=r===void 0?null:r;var d=c.memoizedState.inst;nt!==null&&r!==null&&hu(r,nt.memoizedState.deps)?c.memoizedState=Js(t,d,s,r):(Ne.flags|=e,c.memoizedState=Js(1|t,d,s,r))}function Jm(e,t){Qr(8390656,8,e,t)}function Tu(e,t){Yr(2048,8,e,t)}function lx(e){Ne.flags|=4;var t=Ne.updateQueue;if(t===null)t=Vr(),Ne.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function eg(e){var t=Tt().memoizedState;return lx({ref:t,nextImpl:e}),function(){if(($e&2)!==0)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function tg(e,t){return Yr(4,2,e,t)}function ng(e,t){return Yr(4,4,e,t)}function ig(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sg(e,t,s){s=s!=null?s.concat([e]):null,Yr(4,4,ig.bind(null,t,e),s)}function wu(){}function lg(e,t){var s=Tt();t=t===void 0?null:t;var r=s.memoizedState;return t!==null&&hu(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function ag(e,t){var s=Tt();t=t===void 0?null:t;var r=s.memoizedState;if(t!==null&&hu(t,r[1]))return r[0];if(r=e(),os){Xe(!0);try{e()}finally{Xe(!1)}}return s.memoizedState=[r,t],r}function Cu(e,t,s){return s===void 0||($n&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=rp(),Ne.lanes|=e,Ni|=e,s)}function rg(e,t,s,r){return cn(s,t)?s:Zs.current!==null?(e=Cu(e,s,r),cn(e,t)||(Nt=!0),e):($n&42)===0||($n&1073741824)!==0&&(Ue&261930)===0?(Nt=!0,e.memoizedState=s):(e=rp(),Ne.lanes|=e,Ni|=e,t)}function og(e,t,s,r,c){var d=H.p;H.p=d!==0&&8>d?d:8;var g=R.T,b={};R.T=b,Au(e,!1,t,s);try{var S=c(),M=R.S;if(M!==null&&M(b,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var I=ex(S,r);ca(e,t,I,gn(e))}else ca(e,t,r,gn(e))}catch(L){ca(e,t,{then:function(){},status:"rejected",reason:L},gn())}finally{H.p=d,g!==null&&b.types!==null&&(g.types=b.types),R.T=g}}function ax(){}function Nu(e,t,s,r){if(e.tag!==5)throw Error(a(476));var c=cg(e).queue;og(e,c,t,E,s===null?ax:function(){return ug(e),s(r)})}function cg(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:E},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ug(e){var t=cg(e);t.next===null&&(t=e.alternate.memoizedState),ca(e,t.next.queue,{},gn())}function Eu(){return qt(Na)}function dg(){return Tt().memoizedState}function fg(){return Tt().memoizedState}function rx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=gn();e=_i(s);var r=xi(t,e,s);r!==null&&(ln(r,t,s),sa(r,t,s)),t={cache:nu()},e.payload=t;return}t=t.return}}function ox(e,t,s){var r=gn();s={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Kr(e)?mg(t,s):(s=Yc(e,t,s,r),s!==null&&(ln(s,e,r),gg(s,t,r)))}function hg(e,t,s){var r=gn();ca(e,t,s,r)}function ca(e,t,s,r){var c={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Kr(e))mg(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,b=d(g,s);if(c.hasEagerState=!0,c.eagerState=b,cn(b,g))return Nr(e,t,c,0),rt===null&&Cr(),!1}catch{}if(s=Yc(e,t,c,r),s!==null)return ln(s,e,r),gg(s,t,r),!0}return!1}function Au(e,t,s,r){if(r={lane:2,revertLane:ad(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Kr(e)){if(t)throw Error(a(479))}else t=Yc(e,s,r,2),t!==null&&ln(t,e,2)}function Kr(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function mg(e,t){$s=Hr=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function gg(e,t,s){if((s&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,_h(e,s)}}var ua={readContext:qt,use:Gr,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};ua.useEffectEvent=yt;var pg={readContext:qt,use:Gr,useCallback:function(e,t){return Ft().memoizedState=[e,t===void 0?null:t],e},useContext:qt,useEffect:Jm,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Qr(4194308,4,ig.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Qr(4194308,4,e,t)},useInsertionEffect:function(e,t){Qr(4,2,e,t)},useMemo:function(e,t){var s=Ft();t=t===void 0?null:t;var r=e();if(os){Xe(!0);try{e()}finally{Xe(!1)}}return s.memoizedState=[r,t],r},useReducer:function(e,t,s){var r=Ft();if(s!==void 0){var c=s(t);if(os){Xe(!0);try{s(t)}finally{Xe(!1)}}}else c=t;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=ox.bind(null,Ne,e),[r.memoizedState,e]},useRef:function(e){var t=Ft();return e={current:e},t.memoizedState=e},useState:function(e){e=xu(e);var t=e.queue,s=hg.bind(null,Ne,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:wu,useDeferredValue:function(e,t){var s=Ft();return Cu(s,e,t)},useTransition:function(){var e=xu(!1);return e=og.bind(null,Ne,e.queue,!0,!1),Ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var r=Ne,c=Ft();if(Ge){if(s===void 0)throw Error(a(407));s=s()}else{if(s=t(),rt===null)throw Error(a(349));(Ue&127)!==0||Bm(r,t,s)}c.memoizedState=s;var d={value:s,getSnapshot:t};return c.queue=d,Jm(Hm.bind(null,r,d,e),[e]),r.flags|=2048,Js(9,{destroy:void 0},Lm.bind(null,r,d,s,t),null),s},useId:function(){var e=Ft(),t=rt.identifierPrefix;if(Ge){var s=In,r=zn;s=(r&~(1<<32-xt(r)-1)).toString(32)+s,t="_"+t+"R_"+s,s=Ur++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=tx++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Eu,useFormState:Fm,useActionState:Fm,useOptimistic:function(e){var t=Ft();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Au.bind(null,Ne,!0,s),s.dispatch=t,[e,t]},useMemoCache:bu,useCacheRefresh:function(){return Ft().memoizedState=rx.bind(null,Ne)},useEffectEvent:function(e){var t=Ft(),s={impl:e};return t.memoizedState=s,function(){if(($e&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},Mu={readContext:qt,use:Gr,useCallback:lg,useContext:qt,useEffect:Tu,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:ag,useReducer:qr,useRef:Wm,useState:function(){return qr(Wn)},useDebugValue:wu,useDeferredValue:function(e,t){var s=Tt();return rg(s,nt.memoizedState,e,t)},useTransition:function(){var e=qr(Wn)[0],t=Tt().memoizedState;return[typeof e=="boolean"?e:oa(e),t]},useSyncExternalStore:Im,useId:dg,useHostTransitionStatus:Eu,useFormState:Pm,useActionState:Pm,useOptimistic:function(e,t){var s=Tt();return Gm(s,nt,e,t)},useMemoCache:bu,useCacheRefresh:fg};Mu.useEffectEvent=eg;var yg={readContext:qt,use:Gr,useCallback:lg,useContext:qt,useEffect:Tu,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:ag,useReducer:_u,useRef:Wm,useState:function(){return _u(Wn)},useDebugValue:wu,useDeferredValue:function(e,t){var s=Tt();return nt===null?Cu(s,e,t):rg(s,nt.memoizedState,e,t)},useTransition:function(){var e=_u(Wn)[0],t=Tt().memoizedState;return[typeof e=="boolean"?e:oa(e),t]},useSyncExternalStore:Im,useId:dg,useHostTransitionStatus:Eu,useFormState:$m,useActionState:$m,useOptimistic:function(e,t){var s=Tt();return nt!==null?Gm(s,nt,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:bu,useCacheRefresh:fg};yg.useEffectEvent=eg;function Ru(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:v({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var ku={enqueueSetState:function(e,t,s){e=e._reactInternals;var r=gn(),c=_i(r);c.payload=t,s!=null&&(c.callback=s),t=xi(e,c,r),t!==null&&(ln(t,e,r),sa(t,e,r))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=gn(),c=_i(r);c.tag=1,c.payload=t,s!=null&&(c.callback=s),t=xi(e,c,r),t!==null&&(ln(t,e,r),sa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=gn(),r=_i(s);r.tag=2,t!=null&&(r.callback=t),t=xi(e,r,s),t!==null&&(ln(t,e,s),sa(t,e,s))}};function bg(e,t,s,r,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,d,g):t.prototype&&t.prototype.isPureReactComponent?!Zl(s,r)||!Zl(c,d):!0}function vg(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&ku.enqueueReplaceState(t,t.state,null)}function cs(e,t){var s=t;if("ref"in t){s={};for(var r in t)r!=="ref"&&(s[r]=t[r])}if(e=e.defaultProps){s===t&&(s=v({},s));for(var c in e)s[c]===void 0&&(s[c]=e[c])}return s}function _g(e){wr(e)}function xg(e){console.error(e)}function Sg(e){wr(e)}function Xr(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Tg(e,t,s){try{var r=e.onCaughtError;r(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function ju(e,t,s){return s=_i(s),s.tag=3,s.payload={element:null},s.callback=function(){Xr(e,t)},s}function wg(e){return e=_i(e),e.tag=3,e}function Cg(e,t,s,r){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;e.payload=function(){return c(d)},e.callback=function(){Tg(t,s,r)}}var g=s.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){Tg(t,s,r),typeof c!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})})}function cx(e,t,s,r,c){if(s.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=s.alternate,t!==null&&Ys(t,s,c,!0),s=dn.current,s!==null){switch(s.tag){case 31:case 13:return Tn===null?lo():s.alternate===null&&bt===0&&(bt=3),s.flags&=-257,s.flags|=65536,s.lanes=c,r===Or?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([r]):t.add(r),id(e,r,c)),!1;case 22:return s.flags|=65536,r===Or?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([r]):s.add(r)),id(e,r,c)),!1}throw Error(a(435,s.tag))}return id(e,r,c),lo(),!1}if(Ge)return t=dn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,r!==$c&&(e=Error(a(422),{cause:r}),Jl(vn(e,s)))):(r!==$c&&(t=Error(a(423),{cause:r}),Jl(vn(t,s))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=vn(r,s),c=ju(e.stateNode,r,c),ou(e,c),bt!==4&&(bt=2)),!1;var d=Error(a(520),{cause:r});if(d=vn(d,s),ba===null?ba=[d]:ba.push(d),bt!==4&&(bt=2),t===null)return!0;r=vn(r,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=c&-c,s.lanes|=e,e=ju(s.stateNode,r,e),ou(s,e),!1;case 1:if(t=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ei===null||!Ei.has(d))))return s.flags|=65536,c&=-c,s.lanes|=c,c=wg(c),Cg(c,e,s,r),ou(s,c),!1}s=s.return}while(s!==null);return!1}var Du=Error(a(461)),Nt=!1;function Qt(e,t,s,r){t.child=e===null?Mm(t,null,s,r):rs(t,e.child,s,r)}function Ng(e,t,s,r,c){s=s.render;var d=t.ref;if("ref"in r){var g={};for(var b in r)b!=="ref"&&(g[b]=r[b])}else g=r;return is(t),r=mu(e,t,s,g,d,c),b=gu(),e!==null&&!Nt?(pu(e,t,c),Jn(e,t,c)):(Ge&&b&&Pc(t),t.flags|=1,Qt(e,t,r,c),t.child)}function Eg(e,t,s,r,c){if(e===null){var d=s.type;return typeof d=="function"&&!Kc(d)&&d.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=d,Ag(e,t,d,r,c)):(e=Ar(s.type,null,r,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Vu(e,c)){var g=d.memoizedProps;if(s=s.compare,s=s!==null?s:Zl,s(g,r)&&e.ref===t.ref)return Jn(e,t,c)}return t.flags|=1,e=Xn(d,r),e.ref=t.ref,e.return=t,t.child=e}function Ag(e,t,s,r,c){if(e!==null){var d=e.memoizedProps;if(Zl(d,r)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=r=d,Vu(e,c))(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,Jn(e,t,c)}return Ou(e,t,s,r,c)}function Mg(e,t,s,r){var c=r.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,e!==null){for(r=t.child=e.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;r=c&~d}else r=0,t.child=null;return Rg(e,t,d,s,r)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&jr(t,d!==null?d.cachePool:null),d!==null?jm(t,d):uu(),Dm(t);else return r=t.lanes=536870912,Rg(e,t,d!==null?d.baseLanes|s:s,s,r)}else d!==null?(jr(t,d.cachePool),jm(t,d),Ti(),t.memoizedState=null):(e!==null&&jr(t,null),uu(),Ti());return Qt(e,t,c,s),t.child}function da(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Rg(e,t,s,r,c){var d=su();return d=d===null?null:{parent:wt._currentValue,pool:d},t.memoizedState={baseLanes:s,cachePool:d},e!==null&&jr(t,null),uu(),Dm(t),e!==null&&Ys(e,t,r,!0),t.childLanes=c,null}function Fr(e,t){return t=Zr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function kg(e,t,s){return rs(t,e.child,null,s),e=Fr(t,t.pendingProps),e.flags|=2,fn(t),t.memoizedState=null,e}function ux(e,t,s){var r=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ge){if(r.mode==="hidden")return e=Fr(t,r),t.lanes=536870912,da(null,e);if(fu(t),(e=ht)?(e=qp(e,Sn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:gi!==null?{id:zn,overflow:In}:null,retryLane:536870912,hydrationErrors:null},s=mm(e),s.return=t,t.child=s,Gt=t,ht=null)):e=null,e===null)throw yi(t);return t.lanes=536870912,null}return Fr(t,r)}var d=e.memoizedState;if(d!==null){var g=d.dehydrated;if(fu(t),c)if(t.flags&256)t.flags&=-257,t=kg(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(a(558));else if(Nt||Ys(e,t,s,!1),c=(s&e.childLanes)!==0,Nt||c){if(r=rt,r!==null&&(g=xh(r,s),g!==0&&g!==d.retryLane))throw d.retryLane=g,Ji(e,g),ln(r,e,g),Du;lo(),t=kg(e,t,s)}else e=d.treeContext,ht=wn(g.nextSibling),Gt=t,Ge=!0,pi=null,Sn=!1,e!==null&&ym(t,e),t=Fr(t,r),t.flags|=4096;return t}return e=Xn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Pr(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Ou(e,t,s,r,c){return is(t),s=mu(e,t,s,r,void 0,c),r=gu(),e!==null&&!Nt?(pu(e,t,c),Jn(e,t,c)):(Ge&&r&&Pc(t),t.flags|=1,Qt(e,t,s,c),t.child)}function jg(e,t,s,r,c,d){return is(t),t.updateQueue=null,s=zm(t,r,s,c),Om(e),r=gu(),e!==null&&!Nt?(pu(e,t,d),Jn(e,t,d)):(Ge&&r&&Pc(t),t.flags|=1,Qt(e,t,s,d),t.child)}function Dg(e,t,s,r,c){if(is(t),t.stateNode===null){var d=Vs,g=s.contextType;typeof g=="object"&&g!==null&&(d=qt(g)),d=new s(r,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ku,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=r,d.state=t.memoizedState,d.refs={},au(t),g=s.contextType,d.context=typeof g=="object"&&g!==null?qt(g):Vs,d.state=t.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Ru(t,s,g,r),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(g=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&ku.enqueueReplaceState(d,d.state,null),aa(t,r,d,c),la(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){d=t.stateNode;var b=t.memoizedProps,S=cs(s,b);d.props=S;var M=d.context,I=s.contextType;g=Vs,typeof I=="object"&&I!==null&&(g=qt(I));var L=s.getDerivedStateFromProps;I=typeof L=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,I||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||M!==g)&&vg(t,d,r,g),vi=!1;var k=t.memoizedState;d.state=k,aa(t,r,d,c),la(),M=t.memoizedState,b||k!==M||vi?(typeof L=="function"&&(Ru(t,s,L,r),M=t.memoizedState),(S=vi||bg(t,s,S,r,k,M,g))?(I||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=M),d.props=r,d.state=M,d.context=g,r=S):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,ru(e,t),g=t.memoizedProps,I=cs(s,g),d.props=I,L=t.pendingProps,k=d.context,M=s.contextType,S=Vs,typeof M=="object"&&M!==null&&(S=qt(M)),b=s.getDerivedStateFromProps,(M=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==L||k!==S)&&vg(t,d,r,S),vi=!1,k=t.memoizedState,d.state=k,aa(t,r,d,c),la();var z=t.memoizedState;g!==L||k!==z||vi||e!==null&&e.dependencies!==null&&Rr(e.dependencies)?(typeof b=="function"&&(Ru(t,s,b,r),z=t.memoizedState),(I=vi||bg(t,s,I,r,k,z,S)||e!==null&&e.dependencies!==null&&Rr(e.dependencies))?(M||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,z,S),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,z,S)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=z),d.props=r,d.state=z,d.context=S,r=I):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),r=!1)}return d=r,Pr(e,t),r=(t.flags&128)!==0,d||r?(d=t.stateNode,s=r&&typeof s.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&r?(t.child=rs(t,e.child,null,c),t.child=rs(t,null,s,c)):Qt(e,t,s,c),t.memoizedState=d.state,e=t.child):e=Jn(e,t,c),e}function Og(e,t,s,r){return ts(),t.flags|=256,Qt(e,t,s,r),t.child}var zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Iu(e){return{baseLanes:e,cachePool:Tm()}}function Bu(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=mn),e}function zg(e,t,s){var r=t.pendingProps,c=!1,d=(t.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(St.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ge){if(c?Si(t):Ti(),(e=ht)?(e=qp(e,Sn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:gi!==null?{id:zn,overflow:In}:null,retryLane:536870912,hydrationErrors:null},s=mm(e),s.return=t,t.child=s,Gt=t,ht=null)):e=null,e===null)throw yi(t);return vd(e)?t.lanes=32:t.lanes=536870912,null}var b=r.children;return r=r.fallback,c?(Ti(),c=t.mode,b=Zr({mode:"hidden",children:b},c),r=es(r,c,s,null),b.return=t,r.return=t,b.sibling=r,t.child=b,r=t.child,r.memoizedState=Iu(s),r.childLanes=Bu(e,g,s),t.memoizedState=zu,da(null,r)):(Si(t),Lu(t,b))}var S=e.memoizedState;if(S!==null&&(b=S.dehydrated,b!==null)){if(d)t.flags&256?(Si(t),t.flags&=-257,t=Hu(e,t,s)):t.memoizedState!==null?(Ti(),t.child=e.child,t.flags|=128,t=null):(Ti(),b=r.fallback,c=t.mode,r=Zr({mode:"visible",children:r.children},c),b=es(b,c,s,null),b.flags|=2,r.return=t,b.return=t,r.sibling=b,t.child=r,rs(t,e.child,null,s),r=t.child,r.memoizedState=Iu(s),r.childLanes=Bu(e,g,s),t.memoizedState=zu,t=da(null,r));else if(Si(t),vd(b)){if(g=b.nextSibling&&b.nextSibling.dataset,g)var M=g.dgst;g=M,r=Error(a(419)),r.stack="",r.digest=g,Jl({value:r,source:null,stack:null}),t=Hu(e,t,s)}else if(Nt||Ys(e,t,s,!1),g=(s&e.childLanes)!==0,Nt||g){if(g=rt,g!==null&&(r=xh(g,s),r!==0&&r!==S.retryLane))throw S.retryLane=r,Ji(e,r),ln(g,e,r),Du;bd(b)||lo(),t=Hu(e,t,s)}else bd(b)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,ht=wn(b.nextSibling),Gt=t,Ge=!0,pi=null,Sn=!1,e!==null&&ym(t,e),t=Lu(t,r.children),t.flags|=4096);return t}return c?(Ti(),b=r.fallback,c=t.mode,S=e.child,M=S.sibling,r=Xn(S,{mode:"hidden",children:r.children}),r.subtreeFlags=S.subtreeFlags&65011712,M!==null?b=Xn(M,b):(b=es(b,c,s,null),b.flags|=2),b.return=t,r.return=t,r.sibling=b,t.child=r,da(null,r),r=t.child,b=e.child.memoizedState,b===null?b=Iu(s):(c=b.cachePool,c!==null?(S=wt._currentValue,c=c.parent!==S?{parent:S,pool:S}:c):c=Tm(),b={baseLanes:b.baseLanes|s,cachePool:c}),r.memoizedState=b,r.childLanes=Bu(e,g,s),t.memoizedState=zu,da(e.child,r)):(Si(t),s=e.child,e=s.sibling,s=Xn(s,{mode:"visible",children:r.children}),s.return=t,s.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=s,t.memoizedState=null,s)}function Lu(e,t){return t=Zr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Zr(e,t){return e=un(22,e,null,t),e.lanes=0,e}function Hu(e,t,s){return rs(t,e.child,null,s),e=Lu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ig(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),eu(e.return,t,s)}function Uu(e,t,s,r,c,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:c,treeForkCount:d}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=s,g.tailMode=c,g.treeForkCount=d)}function Bg(e,t,s){var r=t.pendingProps,c=r.revealOrder,d=r.tail;r=r.children;var g=St.current,b=(g&2)!==0;if(b?(g=g&1|2,t.flags|=128):g&=1,ee(St,g),Qt(e,t,r,s),r=Ge?Wl:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ig(e,s,t);else if(e.tag===19)Ig(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&Lr(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),Uu(t,!1,c,s,d,r);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Lr(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Uu(t,!0,s,null,d,r);break;case"together":Uu(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Jn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ni|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Ys(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,s=Xn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Xn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Vu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Rr(e)))}function dx(e,t,s){switch(t.tag){case 3:_e(t,t.stateNode.containerInfo),bi(t,wt,e.memoizedState.cache),ts();break;case 27:case 5:Ce(t);break;case 4:_e(t,t.stateNode.containerInfo);break;case 10:bi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,fu(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Si(t),t.flags|=128,null):(s&t.child.childLanes)!==0?zg(e,t,s):(Si(t),e=Jn(e,t,s),e!==null?e.sibling:null);Si(t);break;case 19:var c=(e.flags&128)!==0;if(r=(s&t.childLanes)!==0,r||(Ys(e,t,s,!1),r=(s&t.childLanes)!==0),c){if(r)return Bg(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ee(St,St.current),r)break;return null;case 22:return t.lanes=0,Mg(e,t,s,t.pendingProps);case 24:bi(t,wt,e.memoizedState.cache)}return Jn(e,t,s)}function Lg(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!Vu(e,s)&&(t.flags&128)===0)return Nt=!1,dx(e,t,s);Nt=(e.flags&131072)!==0}else Nt=!1,Ge&&(t.flags&1048576)!==0&&pm(t,Wl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ls(t.elementType),t.type=e,typeof e=="function")Kc(e)?(r=cs(e,r),t.tag=1,t=Dg(null,t,e,r,s)):(t.tag=0,t=Ou(null,t,e,r,s));else{if(e!=null){var c=e.$$typeof;if(c===W){t.tag=11,t=Ng(null,t,e,r,s);break e}else if(c===U){t.tag=14,t=Eg(null,t,e,r,s);break e}}throw t=be(e)||e,Error(a(306,t,""))}}return t;case 0:return Ou(e,t,t.type,t.pendingProps,s);case 1:return r=t.type,c=cs(r,t.pendingProps),Dg(e,t,r,c,s);case 3:e:{if(_e(t,t.stateNode.containerInfo),e===null)throw Error(a(387));r=t.pendingProps;var d=t.memoizedState;c=d.element,ru(e,t),aa(t,r,null,s);var g=t.memoizedState;if(r=g.cache,bi(t,wt,r),r!==d.cache&&tu(t,[wt],s,!0),la(),r=g.element,d.isDehydrated)if(d={element:r,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=Og(e,t,r,s);break e}else if(r!==c){c=vn(Error(a(424)),t),Jl(c),t=Og(e,t,r,s);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ht=wn(e.firstChild),Gt=t,Ge=!0,pi=null,Sn=!0,s=Mm(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ts(),r===c){t=Jn(e,t,s);break e}Qt(e,t,r,s)}t=t.child}return t;case 26:return Pr(e,t),e===null?(s=Pp(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ge||(s=t.type,e=t.pendingProps,r=ho(ke.current).createElement(s),r[Vt]=t,r[Wt]=e,Yt(r,s,e),It(r),t.stateNode=r):t.memoizedState=Pp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ce(t),e===null&&Ge&&(r=t.stateNode=Kp(t.type,t.pendingProps,ke.current),Gt=t,Sn=!0,c=ht,ki(t.type)?(_d=c,ht=wn(r.firstChild)):ht=c),Qt(e,t,t.pendingProps.children,s),Pr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ge&&((c=r=ht)&&(r=Vx(r,t.type,t.pendingProps,Sn),r!==null?(t.stateNode=r,Gt=t,ht=wn(r.firstChild),Sn=!1,c=!0):c=!1),c||yi(t)),Ce(t),c=t.type,d=t.pendingProps,g=e!==null?e.memoizedProps:null,r=d.children,gd(c,d)?r=null:g!==null&&gd(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=mu(e,t,nx,null,null,s),Na._currentValue=c),Pr(e,t),Qt(e,t,r,s),t.child;case 6:return e===null&&Ge&&((e=s=ht)&&(s=Gx(s,t.pendingProps,Sn),s!==null?(t.stateNode=s,Gt=t,ht=null,e=!0):e=!1),e||yi(t)),null;case 13:return zg(e,t,s);case 4:return _e(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=rs(t,null,r,s):Qt(e,t,r,s),t.child;case 11:return Ng(e,t,t.type,t.pendingProps,s);case 7:return Qt(e,t,t.pendingProps,s),t.child;case 8:return Qt(e,t,t.pendingProps.children,s),t.child;case 12:return Qt(e,t,t.pendingProps.children,s),t.child;case 10:return r=t.pendingProps,bi(t,t.type,r.value),Qt(e,t,r.children,s),t.child;case 9:return c=t.type._context,r=t.pendingProps.children,is(t),c=qt(c),r=r(c),t.flags|=1,Qt(e,t,r,s),t.child;case 14:return Eg(e,t,t.type,t.pendingProps,s);case 15:return Ag(e,t,t.type,t.pendingProps,s);case 19:return Bg(e,t,s);case 31:return ux(e,t,s);case 22:return Mg(e,t,s,t.pendingProps);case 24:return is(t),r=qt(wt),e===null?(c=su(),c===null&&(c=rt,d=nu(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=s),c=d),t.memoizedState={parent:r,cache:c},au(t),bi(t,wt,c)):((e.lanes&s)!==0&&(ru(e,t),aa(t,null,null,s),la()),c=e.memoizedState,d=t.memoizedState,c.parent!==r?(c={parent:r,cache:r},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),bi(t,wt,r)):(r=d.cache,bi(t,wt,r),r!==c.cache&&tu(t,[wt],s,!0))),Qt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ei(e){e.flags|=4}function Gu(e,t,s,r,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(dp())e.flags|=8192;else throw as=Or,lu}else e.flags&=-16777217}function Hg(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!e0(t))if(dp())e.flags|=8192;else throw as=Or,lu}function $r(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?bh():536870912,e.lanes|=t,il|=t)}function fa(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function fx(e,t,s){var r=t.pendingProps;switch(Zc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return mt(t),null;case 3:return s=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Zn(wt),fe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Qs(t)?ei(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wc())),mt(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(ei(t),d!==null?(mt(t),Hg(t,d)):(mt(t),Gu(t,c,null,r,s))):d?d!==e.memoizedState?(ei(t),mt(t),Hg(t,d)):(mt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&ei(t),mt(t),Gu(t,c,e,r,s)),null;case 27:if(Ye(t),s=ke.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&ei(t);else{if(!r){if(t.stateNode===null)throw Error(a(166));return mt(t),null}e=pe.current,Qs(t)?bm(t):(e=Kp(c,r,s),t.stateNode=e,ei(t))}return mt(t),null;case 5:if(Ye(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&ei(t);else{if(!r){if(t.stateNode===null)throw Error(a(166));return mt(t),null}if(d=pe.current,Qs(t))bm(t);else{var g=ho(ke.current);switch(d){case 1:d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=g.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof r.is=="string"?g.createElement("select",{is:r.is}):g.createElement("select"),r.multiple?d.multiple=!0:r.size&&(d.size=r.size);break;default:d=typeof r.is=="string"?g.createElement(c,{is:r.is}):g.createElement(c)}}d[Vt]=t,d[Wt]=r;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)d.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=d;e:switch(Yt(d,c,r),c){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ei(t)}}return mt(t),Gu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&ei(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(a(166));if(e=ke.current,Qs(t)){if(e=t.stateNode,s=t.memoizedProps,r=null,c=Gt,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[Vt]=t,e=!!(e.nodeValue===s||r!==null&&r.suppressHydrationWarning===!0||zp(e.nodeValue,s)),e||yi(t,!0)}else e=ho(e).createTextNode(r),e[Vt]=t,t.stateNode=e}return mt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(r=Qs(t),s!==null){if(e===null){if(!r)throw Error(a(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[Vt]=t}else ts(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;mt(t),e=!1}else s=Wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(fn(t),t):(fn(t),null);if((t.flags&128)!==0)throw Error(a(558))}return mt(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Qs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(a(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[Vt]=t}else ts(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;mt(t),c=!1}else c=Wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(fn(t),t):(fn(t),null)}return fn(t),(t.flags&128)!==0?(t.lanes=s,t):(s=r!==null,e=e!==null&&e.memoizedState!==null,s&&(r=t.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),$r(t,t.updateQueue),mt(t),null);case 4:return fe(),e===null&&ud(t.stateNode.containerInfo),mt(t),null;case 10:return Zn(t.type),mt(t),null;case 19:if(J(St),r=t.memoizedState,r===null)return mt(t),null;if(c=(t.flags&128)!==0,d=r.rendering,d===null)if(c)fa(r,!1);else{if(bt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=Lr(e),d!==null){for(t.flags|=128,fa(r,!1),e=d.updateQueue,t.updateQueue=e,$r(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)hm(s,e),s=s.sibling;return ee(St,St.current&1|2),Ge&&Fn(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&He()>no&&(t.flags|=128,c=!0,fa(r,!1),t.lanes=4194304)}else{if(!c)if(e=Lr(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,$r(t,e),fa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!d.alternate&&!Ge)return mt(t),null}else 2*He()-r.renderingStartTime>no&&s!==536870912&&(t.flags|=128,c=!0,fa(r,!1),t.lanes=4194304);r.isBackwards?(d.sibling=t.child,t.child=d):(e=r.last,e!==null?e.sibling=d:t.child=d,r.last=d)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=He(),e.sibling=null,s=St.current,ee(St,c?s&1|2:s&1),Ge&&Fn(t,r.treeForkCount),e):(mt(t),null);case 22:case 23:return fn(t),du(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(s&536870912)!==0&&(t.flags&128)===0&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),s=t.updateQueue,s!==null&&$r(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==s&&(t.flags|=2048),e!==null&&J(ss),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Zn(wt),mt(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function hx(e,t){switch(Zc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zn(wt),fe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ye(t),null;case 31:if(t.memoizedState!==null){if(fn(t),t.alternate===null)throw Error(a(340));ts()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(fn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));ts()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(St),null;case 4:return fe(),null;case 10:return Zn(t.type),null;case 22:case 23:return fn(t),du(),e!==null&&J(ss),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Zn(wt),null;case 25:return null;default:return null}}function Ug(e,t){switch(Zc(t),t.tag){case 3:Zn(wt),fe();break;case 26:case 27:case 5:Ye(t);break;case 4:fe();break;case 31:t.memoizedState!==null&&fn(t);break;case 13:fn(t);break;case 19:J(St);break;case 10:Zn(t.type);break;case 22:case 23:fn(t),du(),e!==null&&J(ss);break;case 24:Zn(wt)}}function ha(e,t){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var c=r.next;s=c;do{if((s.tag&e)===e){r=void 0;var d=s.create,g=s.inst;r=d(),g.destroy=r}s=s.next}while(s!==c)}}catch(b){et(t,t.return,b)}}function wi(e,t,s){try{var r=t.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var d=c.next;r=d;do{if((r.tag&e)===e){var g=r.inst,b=g.destroy;if(b!==void 0){g.destroy=void 0,c=t;var S=s,M=b;try{M()}catch(I){et(c,S,I)}}}r=r.next}while(r!==d)}}catch(I){et(t,t.return,I)}}function Vg(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{km(t,s)}catch(r){et(e,e.return,r)}}}function Gg(e,t,s){s.props=cs(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(r){et(e,t,r)}}function ma(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof s=="function"?e.refCleanup=s(r):s.current=r}}catch(c){et(e,t,c)}}function Bn(e,t){var s=e.ref,r=e.refCleanup;if(s!==null)if(typeof r=="function")try{r()}catch(c){et(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){et(e,t,c)}else s.current=null}function qg(e){var t=e.type,s=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break e;case"img":s.src?r.src=s.src:s.srcSet&&(r.srcset=s.srcSet)}}catch(c){et(e,e.return,c)}}function qu(e,t,s){try{var r=e.stateNode;zx(r,e.type,s,t),r[Wt]=t}catch(c){et(e,e.return,c)}}function Qg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ki(e.type)||e.tag===4}function Qu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ki(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yu(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Yn));else if(r!==4&&(r===27&&ki(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Yu(e,t,s),e=e.sibling;e!==null;)Yu(e,t,s),e=e.sibling}function Wr(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(r===27&&ki(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Wr(e,t,s),e=e.sibling;e!==null;)Wr(e,t,s),e=e.sibling}function Yg(e){var t=e.stateNode,s=e.memoizedProps;try{for(var r=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Yt(t,r,s),t[Vt]=e,t[Wt]=s}catch(d){et(e,e.return,d)}}var ti=!1,Et=!1,Ku=!1,Kg=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function mx(e,t){if(e=e.containerInfo,hd=_o,e=sm(e),Hc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var c=r.anchorOffset,d=r.focusNode;r=r.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var g=0,b=-1,S=-1,M=0,I=0,L=e,k=null;t:for(;;){for(var z;L!==s||c!==0&&L.nodeType!==3||(b=g+c),L!==d||r!==0&&L.nodeType!==3||(S=g+r),L.nodeType===3&&(g+=L.nodeValue.length),(z=L.firstChild)!==null;)k=L,L=z;for(;;){if(L===e)break t;if(k===s&&++M===c&&(b=g),k===d&&++I===r&&(S=g),(z=L.nextSibling)!==null)break;L=k,k=L.parentNode}L=z}s=b===-1||S===-1?null:{start:b,end:S}}else s=null}s=s||{start:0,end:0}}else s=null;for(md={focusedElem:e,selectionRange:s},_o=!1,Bt=t;Bt!==null;)if(t=Bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Bt=e;else for(;Bt!==null;){switch(t=Bt,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)c=e[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=t,c=d.memoizedProps,d=d.memoizedState,r=s.stateNode;try{var te=cs(s.type,c);e=r.getSnapshotBeforeUpdate(te,d),r.__reactInternalSnapshotBeforeUpdate=e}catch(ve){et(s,s.return,ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)yd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,Bt=e;break}Bt=t.return}}function Xg(e,t,s){var r=s.flags;switch(s.tag){case 0:case 11:case 15:ii(e,s),r&4&&ha(5,s);break;case 1:if(ii(e,s),r&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(g){et(s,s.return,g)}else{var c=cs(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){et(s,s.return,g)}}r&64&&Vg(s),r&512&&ma(s,s.return);break;case 3:if(ii(e,s),r&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{km(e,t)}catch(g){et(s,s.return,g)}}break;case 27:t===null&&r&4&&Yg(s);case 26:case 5:ii(e,s),t===null&&r&4&&qg(s),r&512&&ma(s,s.return);break;case 12:ii(e,s);break;case 31:ii(e,s),r&4&&Zg(e,s);break;case 13:ii(e,s),r&4&&$g(e,s),r&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Tx.bind(null,s),qx(e,s))));break;case 22:if(r=s.memoizedState!==null||ti,!r){t=t!==null&&t.memoizedState!==null||Et,c=ti;var d=Et;ti=r,(Et=t)&&!d?si(e,s,(s.subtreeFlags&8772)!==0):ii(e,s),ti=c,Et=d}break;case 30:break;default:ii(e,s)}}function Fg(e){var t=e.alternate;t!==null&&(e.alternate=null,Fg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Sc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var gt=null,en=!1;function ni(e,t,s){for(s=s.child;s!==null;)Pg(e,t,s),s=s.sibling}function Pg(e,t,s){if(re&&typeof re.onCommitFiberUnmount=="function")try{re.onCommitFiberUnmount($,s)}catch{}switch(s.tag){case 26:Et||Bn(s,t),ni(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Et||Bn(s,t);var r=gt,c=en;ki(s.type)&&(gt=s.stateNode,en=!1),ni(e,t,s),Ta(s.stateNode),gt=r,en=c;break;case 5:Et||Bn(s,t);case 6:if(r=gt,c=en,gt=null,ni(e,t,s),gt=r,en=c,gt!==null)if(en)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(s.stateNode)}catch(d){et(s,t,d)}else try{gt.removeChild(s.stateNode)}catch(d){et(s,t,d)}break;case 18:gt!==null&&(en?(e=gt,Vp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),dl(e)):Vp(gt,s.stateNode));break;case 4:r=gt,c=en,gt=s.stateNode.containerInfo,en=!0,ni(e,t,s),gt=r,en=c;break;case 0:case 11:case 14:case 15:wi(2,s,t),Et||wi(4,s,t),ni(e,t,s);break;case 1:Et||(Bn(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"&&Gg(s,t,r)),ni(e,t,s);break;case 21:ni(e,t,s);break;case 22:Et=(r=Et)||s.memoizedState!==null,ni(e,t,s),Et=r;break;default:ni(e,t,s)}}function Zg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{dl(e)}catch(s){et(t,t.return,s)}}}function $g(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{dl(e)}catch(s){et(t,t.return,s)}}function gx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kg),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kg),t;default:throw Error(a(435,e.tag))}}function Jr(e,t){var s=gx(e);t.forEach(function(r){if(!s.has(r)){s.add(r);var c=wx.bind(null,e,r);r.then(c,c)}})}function tn(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var c=s[r],d=e,g=t,b=g;e:for(;b!==null;){switch(b.tag){case 27:if(ki(b.type)){gt=b.stateNode,en=!1;break e}break;case 5:gt=b.stateNode,en=!1;break e;case 3:case 4:gt=b.stateNode.containerInfo,en=!0;break e}b=b.return}if(gt===null)throw Error(a(160));Pg(d,g,c),gt=null,en=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Wg(t,e),t=t.sibling}var Mn=null;function Wg(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(t,e),nn(e),r&4&&(wi(3,e,e.return),ha(3,e),wi(5,e,e.return));break;case 1:tn(t,e),nn(e),r&512&&(Et||s===null||Bn(s,s.return)),r&64&&ti&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?r:s.concat(r))));break;case 26:var c=Mn;if(tn(t,e),nn(e),r&512&&(Et||s===null||Bn(s,s.return)),r&4){var d=s!==null?s.memoizedState:null;if(r=e.memoizedState,s===null)if(r===null)if(e.stateNode===null){e:{r=e.type,s=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":d=c.getElementsByTagName("title")[0],(!d||d[Vl]||d[Vt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(r),c.head.insertBefore(d,c.querySelector("head > title"))),Yt(d,r,s),d[Vt]=e,It(d),r=d;break e;case"link":var g=Wp("link","href",c).get(r+(s.href||""));if(g){for(var b=0;b<g.length;b++)if(d=g[b],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){g.splice(b,1);break t}}d=c.createElement(r),Yt(d,r,s),c.head.appendChild(d);break;case"meta":if(g=Wp("meta","content",c).get(r+(s.content||""))){for(b=0;b<g.length;b++)if(d=g[b],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){g.splice(b,1);break t}}d=c.createElement(r),Yt(d,r,s),c.head.appendChild(d);break;default:throw Error(a(468,r))}d[Vt]=e,It(d),r=d}e.stateNode=r}else Jp(c,e.type,e.stateNode);else e.stateNode=$p(c,r,e.memoizedProps);else d!==r?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,r===null?Jp(c,e.type,e.stateNode):$p(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&qu(e,e.memoizedProps,s.memoizedProps)}break;case 27:tn(t,e),nn(e),r&512&&(Et||s===null||Bn(s,s.return)),s!==null&&r&4&&qu(e,e.memoizedProps,s.memoizedProps);break;case 5:if(tn(t,e),nn(e),r&512&&(Et||s===null||Bn(s,s.return)),e.flags&32){c=e.stateNode;try{Os(c,"")}catch(te){et(e,e.return,te)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,qu(e,c,s!==null?s.memoizedProps:c)),r&1024&&(Ku=!0);break;case 6:if(tn(t,e),nn(e),r&4){if(e.stateNode===null)throw Error(a(162));r=e.memoizedProps,s=e.stateNode;try{s.nodeValue=r}catch(te){et(e,e.return,te)}}break;case 3:if(po=null,c=Mn,Mn=mo(t.containerInfo),tn(t,e),Mn=c,nn(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{dl(t.containerInfo)}catch(te){et(e,e.return,te)}Ku&&(Ku=!1,Jg(e));break;case 4:r=Mn,Mn=mo(e.stateNode.containerInfo),tn(t,e),nn(e),Mn=r;break;case 12:tn(t,e),nn(e);break;case 31:tn(t,e),nn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Jr(e,r)));break;case 13:tn(t,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(to=He()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Jr(e,r)));break;case 22:c=e.memoizedState!==null;var S=s!==null&&s.memoizedState!==null,M=ti,I=Et;if(ti=M||c,Et=I||S,tn(t,e),Et=I,ti=M,nn(e),r&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(s===null||S||ti||Et||us(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){S=s=t;try{if(d=S.stateNode,c)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=S.stateNode;var L=S.memoizedProps.style,k=L!=null&&L.hasOwnProperty("display")?L.display:null;b.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(te){et(S,S.return,te)}}}else if(t.tag===6){if(s===null){S=t;try{S.stateNode.nodeValue=c?"":S.memoizedProps}catch(te){et(S,S.return,te)}}}else if(t.tag===18){if(s===null){S=t;try{var z=S.stateNode;c?Gp(z,!0):Gp(S.stateNode,!1)}catch(te){et(S,S.return,te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(s=r.retryQueue,s!==null&&(r.retryQueue=null,Jr(e,s))));break;case 19:tn(t,e),nn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Jr(e,r)));break;case 30:break;case 21:break;default:tn(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{for(var s,r=e.return;r!==null;){if(Qg(r)){s=r;break}r=r.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var c=s.stateNode,d=Qu(e);Wr(e,d,c);break;case 5:var g=s.stateNode;s.flags&32&&(Os(g,""),s.flags&=-33);var b=Qu(e);Wr(e,b,g);break;case 3:case 4:var S=s.stateNode.containerInfo,M=Qu(e);Yu(e,M,S);break;default:throw Error(a(161))}}catch(I){et(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ii(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xg(e,t.alternate,t),t=t.sibling}function us(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:wi(4,t,t.return),us(t);break;case 1:Bn(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Gg(t,t.return,s),us(t);break;case 27:Ta(t.stateNode);case 26:case 5:Bn(t,t.return),us(t);break;case 22:t.memoizedState===null&&us(t);break;case 30:us(t);break;default:us(t)}e=e.sibling}}function si(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,c=e,d=t,g=d.flags;switch(d.tag){case 0:case 11:case 15:si(c,d,s),ha(4,d);break;case 1:if(si(c,d,s),r=d,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(M){et(r,r.return,M)}if(r=d,c=r.updateQueue,c!==null){var b=r.stateNode;try{var S=c.shared.hiddenCallbacks;if(S!==null)for(c.shared.hiddenCallbacks=null,c=0;c<S.length;c++)Rm(S[c],b)}catch(M){et(r,r.return,M)}}s&&g&64&&Vg(d),ma(d,d.return);break;case 27:Yg(d);case 26:case 5:si(c,d,s),s&&r===null&&g&4&&qg(d),ma(d,d.return);break;case 12:si(c,d,s);break;case 31:si(c,d,s),s&&g&4&&Zg(c,d);break;case 13:si(c,d,s),s&&g&4&&$g(c,d);break;case 22:d.memoizedState===null&&si(c,d,s),ma(d,d.return);break;case 30:break;default:si(c,d,s)}t=t.sibling}}function Xu(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&ea(s))}function Fu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ea(e))}function Rn(e,t,s,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ep(e,t,s,r),t=t.sibling}function ep(e,t,s,r){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Rn(e,t,s,r),c&2048&&ha(9,t);break;case 1:Rn(e,t,s,r);break;case 3:Rn(e,t,s,r),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ea(e)));break;case 12:if(c&2048){Rn(e,t,s,r),e=t.stateNode;try{var d=t.memoizedProps,g=d.id,b=d.onPostCommit;typeof b=="function"&&b(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){et(t,t.return,S)}}else Rn(e,t,s,r);break;case 31:Rn(e,t,s,r);break;case 13:Rn(e,t,s,r);break;case 23:break;case 22:d=t.stateNode,g=t.alternate,t.memoizedState!==null?d._visibility&2?Rn(e,t,s,r):ga(e,t):d._visibility&2?Rn(e,t,s,r):(d._visibility|=2,el(e,t,s,r,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Xu(g,t);break;case 24:Rn(e,t,s,r),c&2048&&Fu(t.alternate,t);break;default:Rn(e,t,s,r)}}function el(e,t,s,r,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,g=t,b=s,S=r,M=g.flags;switch(g.tag){case 0:case 11:case 15:el(d,g,b,S,c),ha(8,g);break;case 23:break;case 22:var I=g.stateNode;g.memoizedState!==null?I._visibility&2?el(d,g,b,S,c):ga(d,g):(I._visibility|=2,el(d,g,b,S,c)),c&&M&2048&&Xu(g.alternate,g);break;case 24:el(d,g,b,S,c),c&&M&2048&&Fu(g.alternate,g);break;default:el(d,g,b,S,c)}t=t.sibling}}function ga(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,r=t,c=r.flags;switch(r.tag){case 22:ga(s,r),c&2048&&Xu(r.alternate,r);break;case 24:ga(s,r),c&2048&&Fu(r.alternate,r);break;default:ga(s,r)}t=t.sibling}}var pa=8192;function tl(e,t,s){if(e.subtreeFlags&pa)for(e=e.child;e!==null;)tp(e,t,s),e=e.sibling}function tp(e,t,s){switch(e.tag){case 26:tl(e,t,s),e.flags&pa&&e.memoizedState!==null&&t1(s,Mn,e.memoizedState,e.memoizedProps);break;case 5:tl(e,t,s);break;case 3:case 4:var r=Mn;Mn=mo(e.stateNode.containerInfo),tl(e,t,s),Mn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=pa,pa=16777216,tl(e,t,s),pa=r):tl(e,t,s));break;default:tl(e,t,s)}}function np(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ya(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];Bt=r,sp(r,e)}np(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ip(e),e=e.sibling}function ip(e){switch(e.tag){case 0:case 11:case 15:ya(e),e.flags&2048&&wi(9,e,e.return);break;case 3:ya(e);break;case 12:ya(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,eo(e)):ya(e);break;default:ya(e)}}function eo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];Bt=r,sp(r,e)}np(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:wi(8,t,t.return),eo(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,eo(t));break;default:eo(t)}e=e.sibling}}function sp(e,t){for(;Bt!==null;){var s=Bt;switch(s.tag){case 0:case 11:case 15:wi(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var r=s.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ea(s.memoizedState.cache)}if(r=s.child,r!==null)r.return=s,Bt=r;else e:for(s=e;Bt!==null;){r=Bt;var c=r.sibling,d=r.return;if(Fg(r),r===s){Bt=null;break e}if(c!==null){c.return=d,Bt=c;break e}Bt=d}}}var px={getCacheForType:function(e){var t=qt(wt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return qt(wt).controller.signal}},yx=typeof WeakMap=="function"?WeakMap:Map,$e=0,rt=null,ze=null,Ue=0,Je=0,hn=null,Ci=!1,nl=!1,Pu=!1,li=0,bt=0,Ni=0,ds=0,Zu=0,mn=0,il=0,ba=null,sn=null,$u=!1,to=0,lp=0,no=1/0,io=null,Ei=null,Rt=0,Ai=null,sl=null,ai=0,Wu=0,Ju=null,ap=null,va=0,ed=null;function gn(){return($e&2)!==0&&Ue!==0?Ue&-Ue:R.T!==null?ad():Sh()}function rp(){if(mn===0)if((Ue&536870912)===0||Ge){var e=dr;dr<<=1,(dr&3932160)===0&&(dr=262144),mn=e}else mn=536870912;return e=dn.current,e!==null&&(e.flags|=32),mn}function ln(e,t,s){(e===rt&&(Je===2||Je===9)||e.cancelPendingCommit!==null)&&(ll(e,0),Mi(e,Ue,mn,!1)),Ul(e,s),(($e&2)===0||e!==rt)&&(e===rt&&(($e&2)===0&&(ds|=s),bt===4&&Mi(e,Ue,mn,!1)),Ln(e))}function op(e,t,s){if(($e&6)!==0)throw Error(a(327));var r=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Hl(e,t),c=r?_x(e,t):nd(e,t,!0),d=r;do{if(c===0){nl&&!r&&Mi(e,t,0,!1);break}else{if(s=e.current.alternate,d&&!bx(s)){c=nd(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var b=e;c=ba;var S=b.current.memoizedState.isDehydrated;if(S&&(ll(b,g).flags|=256),g=nd(b,g,!1),g!==2){if(Pu&&!S){b.errorRecoveryDisabledLanes|=d,ds|=d,c=4;break e}d=sn,sn=c,d!==null&&(sn===null?sn=d:sn.push.apply(sn,d))}c=g}if(d=!1,c!==2)continue}}if(c===1){ll(e,0),Mi(e,t,0,!0);break}e:{switch(r=e,d=c,d){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:Mi(r,t,mn,!Ci);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(c=to+300-He(),10<c)){if(Mi(r,t,mn,!Ci),hr(r,0,!0)!==0)break e;ai=t,r.timeoutHandle=Hp(cp.bind(null,r,s,sn,io,$u,t,mn,ds,il,Ci,d,"Throttled",-0,0),c);break e}cp(r,s,sn,io,$u,t,mn,ds,il,Ci,d,null,-0,0)}}break}while(!0);Ln(e)}function cp(e,t,s,r,c,d,g,b,S,M,I,L,k,z){if(e.timeoutHandle=-1,L=t.subtreeFlags,L&8192||(L&16785408)===16785408){L={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},tp(t,d,L);var te=(d&62914560)===d?to-He():(d&4194048)===d?lp-He():0;if(te=n1(L,te),te!==null){ai=d,e.cancelPendingCommit=te(yp.bind(null,e,t,d,s,r,c,g,b,S,I,L,null,k,z)),Mi(e,d,g,!M);return}}yp(e,t,d,s,r,c,g,b,S)}function bx(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var r=0;r<s.length;r++){var c=s[r],d=c.getSnapshot;c=c.value;try{if(!cn(d(),c))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mi(e,t,s,r){t&=~Zu,t&=~ds,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var c=t;0<c;){var d=31-xt(c),g=1<<d;r[d]=-1,c&=~g}s!==0&&vh(e,s,t)}function so(){return($e&6)===0?(_a(0),!1):!0}function td(){if(ze!==null){if(Je===0)var e=ze.return;else e=ze,Pn=ns=null,yu(e),Ps=null,na=0,e=ze;for(;e!==null;)Ug(e.alternate,e),e=e.return;ze=null}}function ll(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Lx(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),ai=0,td(),rt=e,ze=s=Xn(e.current,null),Ue=t,Je=0,hn=null,Ci=!1,nl=Hl(e,t),Pu=!1,il=mn=Zu=ds=Ni=bt=0,sn=ba=null,$u=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var c=31-xt(r),d=1<<c;t|=e[c],r&=~d}return li=t,Cr(),s}function up(e,t){Ne=null,R.H=ua,t===Fs||t===Dr?(t=Nm(),Je=3):t===lu?(t=Nm(),Je=4):Je=t===Du?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,hn=t,ze===null&&(bt=1,Xr(e,vn(t,e.current)))}function dp(){var e=dn.current;return e===null?!0:(Ue&4194048)===Ue?Tn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===Tn:!1}function fp(){var e=R.H;return R.H=ua,e===null?ua:e}function hp(){var e=R.A;return R.A=px,e}function lo(){bt=4,Ci||(Ue&4194048)!==Ue&&dn.current!==null||(nl=!0),(Ni&134217727)===0&&(ds&134217727)===0||rt===null||Mi(rt,Ue,mn,!1)}function nd(e,t,s){var r=$e;$e|=2;var c=fp(),d=hp();(rt!==e||Ue!==t)&&(io=null,ll(e,t)),t=!1;var g=bt;e:do try{if(Je!==0&&ze!==null){var b=ze,S=hn;switch(Je){case 8:td(),g=6;break e;case 3:case 2:case 9:case 6:dn.current===null&&(t=!0);var M=Je;if(Je=0,hn=null,al(e,b,S,M),s&&nl){g=0;break e}break;default:M=Je,Je=0,hn=null,al(e,b,S,M)}}vx(),g=bt;break}catch(I){up(e,I)}while(!0);return t&&e.shellSuspendCounter++,Pn=ns=null,$e=r,R.H=c,R.A=d,ze===null&&(rt=null,Ue=0,Cr()),g}function vx(){for(;ze!==null;)mp(ze)}function _x(e,t){var s=$e;$e|=2;var r=fp(),c=hp();rt!==e||Ue!==t?(io=null,no=He()+500,ll(e,t)):nl=Hl(e,t);e:do try{if(Je!==0&&ze!==null){t=ze;var d=hn;t:switch(Je){case 1:Je=0,hn=null,al(e,t,d,1);break;case 2:case 9:if(wm(d)){Je=0,hn=null,gp(t);break}t=function(){Je!==2&&Je!==9||rt!==e||(Je=7),Ln(e)},d.then(t,t);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:wm(d)?(Je=0,hn=null,gp(t)):(Je=0,hn=null,al(e,t,d,7));break;case 5:var g=null;switch(ze.tag){case 26:g=ze.memoizedState;case 5:case 27:var b=ze;if(g?e0(g):b.stateNode.complete){Je=0,hn=null;var S=b.sibling;if(S!==null)ze=S;else{var M=b.return;M!==null?(ze=M,ao(M)):ze=null}break t}}Je=0,hn=null,al(e,t,d,5);break;case 6:Je=0,hn=null,al(e,t,d,6);break;case 8:td(),bt=6;break e;default:throw Error(a(462))}}xx();break}catch(I){up(e,I)}while(!0);return Pn=ns=null,R.H=r,R.A=c,$e=s,ze!==null?0:(rt=null,Ue=0,Cr(),bt)}function xx(){for(;ze!==null&&!qe();)mp(ze)}function mp(e){var t=Lg(e.alternate,e,li);e.memoizedProps=e.pendingProps,t===null?ao(e):ze=t}function gp(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=jg(s,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=jg(s,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:yu(t);default:Ug(s,t),t=ze=hm(t,li),t=Lg(s,t,li)}e.memoizedProps=e.pendingProps,t===null?ao(e):ze=t}function al(e,t,s,r){Pn=ns=null,yu(t),Ps=null,na=0;var c=t.return;try{if(cx(e,c,t,s,Ue)){bt=1,Xr(e,vn(s,e.current)),ze=null;return}}catch(d){if(c!==null)throw ze=c,d;bt=1,Xr(e,vn(s,e.current)),ze=null;return}t.flags&32768?(Ge||r===1?e=!0:nl||(Ue&536870912)!==0?e=!1:(Ci=e=!0,(r===2||r===9||r===3||r===6)&&(r=dn.current,r!==null&&r.tag===13&&(r.flags|=16384))),pp(t,e)):ao(t)}function ao(e){var t=e;do{if((t.flags&32768)!==0){pp(t,Ci);return}e=t.return;var s=fx(t.alternate,t,li);if(s!==null){ze=s;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);bt===0&&(bt=5)}function pp(e,t){do{var s=hx(e.alternate,e);if(s!==null){s.flags&=32767,ze=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){ze=e;return}ze=e=s}while(e!==null);bt=6,ze=null}function yp(e,t,s,r,c,d,g,b,S){e.cancelPendingCommit=null;do ro();while(Rt!==0);if(($e&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(d=t.lanes|t.childLanes,d|=Qc,e_(e,s,d,g,b,S),e===rt&&(ze=rt=null,Ue=0),sl=t,Ai=e,ai=s,Wu=d,Ju=c,ap=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Cx(zt,function(){return Sp(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=R.T,R.T=null,c=H.p,H.p=2,g=$e,$e|=4;try{mx(e,t,s)}finally{$e=g,H.p=c,R.T=r}}Rt=1,bp(),vp(),_p()}}function bp(){if(Rt===1){Rt=0;var e=Ai,t=sl,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=R.T,R.T=null;var r=H.p;H.p=2;var c=$e;$e|=4;try{Wg(t,e);var d=md,g=sm(e.containerInfo),b=d.focusedElem,S=d.selectionRange;if(g!==b&&b&&b.ownerDocument&&im(b.ownerDocument.documentElement,b)){if(S!==null&&Hc(b)){var M=S.start,I=S.end;if(I===void 0&&(I=M),"selectionStart"in b)b.selectionStart=M,b.selectionEnd=Math.min(I,b.value.length);else{var L=b.ownerDocument||document,k=L&&L.defaultView||window;if(k.getSelection){var z=k.getSelection(),te=b.textContent.length,ve=Math.min(S.start,te),st=S.end===void 0?ve:Math.min(S.end,te);!z.extend&&ve>st&&(g=st,st=ve,ve=g);var C=nm(b,ve),w=nm(b,st);if(C&&w&&(z.rangeCount!==1||z.anchorNode!==C.node||z.anchorOffset!==C.offset||z.focusNode!==w.node||z.focusOffset!==w.offset)){var A=L.createRange();A.setStart(C.node,C.offset),z.removeAllRanges(),ve>st?(z.addRange(A),z.extend(w.node,w.offset)):(A.setEnd(w.node,w.offset),z.addRange(A))}}}}for(L=[],z=b;z=z.parentNode;)z.nodeType===1&&L.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<L.length;b++){var B=L[b];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}_o=!!hd,md=hd=null}finally{$e=c,H.p=r,R.T=s}}e.current=t,Rt=2}}function vp(){if(Rt===2){Rt=0;var e=Ai,t=sl,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=R.T,R.T=null;var r=H.p;H.p=2;var c=$e;$e|=4;try{Xg(e,t.alternate,t)}finally{$e=c,H.p=r,R.T=s}}Rt=3}}function _p(){if(Rt===4||Rt===3){Rt=0,Ke();var e=Ai,t=sl,s=ai,r=ap;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Rt=5:(Rt=0,sl=Ai=null,xp(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ei=null),_c(s),t=t.stateNode,re&&typeof re.onCommitFiberRoot=="function")try{re.onCommitFiberRoot($,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=R.T,c=H.p,H.p=2,R.T=null;try{for(var d=e.onRecoverableError,g=0;g<r.length;g++){var b=r[g];d(b.value,{componentStack:b.stack})}}finally{R.T=t,H.p=c}}(ai&3)!==0&&ro(),Ln(e),c=e.pendingLanes,(s&261930)!==0&&(c&42)!==0?e===ed?va++:(va=0,ed=e):va=0,_a(0)}}function xp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ea(t)))}function ro(){return bp(),vp(),_p(),Sp()}function Sp(){if(Rt!==5)return!1;var e=Ai,t=Wu;Wu=0;var s=_c(ai),r=R.T,c=H.p;try{H.p=32>s?32:s,R.T=null,s=Ju,Ju=null;var d=Ai,g=ai;if(Rt=0,sl=Ai=null,ai=0,($e&6)!==0)throw Error(a(331));var b=$e;if($e|=4,ip(d.current),ep(d,d.current,g,s),$e=b,_a(0,!1),re&&typeof re.onPostCommitFiberRoot=="function")try{re.onPostCommitFiberRoot($,d)}catch{}return!0}finally{H.p=c,R.T=r,xp(e,t)}}function Tp(e,t,s){t=vn(s,t),t=ju(e.stateNode,t,2),e=xi(e,t,2),e!==null&&(Ul(e,2),Ln(e))}function et(e,t,s){if(e.tag===3)Tp(e,e,s);else for(;t!==null;){if(t.tag===3){Tp(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ei===null||!Ei.has(r))){e=vn(s,e),s=wg(2),r=xi(t,s,2),r!==null&&(Cg(s,r,t,e),Ul(r,2),Ln(r));break}}t=t.return}}function id(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new yx;var c=new Set;r.set(t,c)}else c=r.get(t),c===void 0&&(c=new Set,r.set(t,c));c.has(s)||(Pu=!0,c.add(s),e=Sx.bind(null,e,t,s),t.then(e,e))}function Sx(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,rt===e&&(Ue&s)===s&&(bt===4||bt===3&&(Ue&62914560)===Ue&&300>He()-to?($e&2)===0&&ll(e,0):Zu|=s,il===Ue&&(il=0)),Ln(e)}function wp(e,t){t===0&&(t=bh()),e=Ji(e,t),e!==null&&(Ul(e,t),Ln(e))}function Tx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),wp(e,s)}function wx(e,t){var s=0;switch(e.tag){case 31:case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}r!==null&&r.delete(t),wp(e,s)}function Cx(e,t){return se(e,t)}var oo=null,rl=null,sd=!1,co=!1,ld=!1,Ri=0;function Ln(e){e!==rl&&e.next===null&&(rl===null?oo=rl=e:rl=rl.next=e),co=!0,sd||(sd=!0,Ex())}function _a(e,t){if(!ld&&co){ld=!0;do for(var s=!1,r=oo;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var d=0;else{var g=r.suspendedLanes,b=r.pingedLanes;d=(1<<31-xt(42|e)+1)-1,d&=c&~(g&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,Ap(r,d))}else d=Ue,d=hr(r,r===rt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(d&3)===0||Hl(r,d)||(s=!0,Ap(r,d));r=r.next}while(s);ld=!1}}function Nx(){Cp()}function Cp(){co=sd=!1;var e=0;Ri!==0&&Bx()&&(e=Ri);for(var t=He(),s=null,r=oo;r!==null;){var c=r.next,d=Np(r,t);d===0?(r.next=null,s===null?oo=c:s.next=c,c===null&&(rl=s)):(s=r,(e!==0||(d&3)!==0)&&(co=!0)),r=c}Rt!==0&&Rt!==5||_a(e),Ri!==0&&(Ri=0)}function Np(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var g=31-xt(d),b=1<<g,S=c[g];S===-1?((b&s)===0||(b&r)!==0)&&(c[g]=Jv(b,t)):S<=t&&(e.expiredLanes|=b),d&=~b}if(t=rt,s=Ue,s=hr(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,s===0||e===t&&(Je===2||Je===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ae(r),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Hl(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(r!==null&&Ae(r),_c(s)){case 2:case 8:s=qn;break;case 32:s=zt;break;case 268435456:s=Es;break;default:s=zt}return r=Ep.bind(null,e),s=se(s,r),e.callbackPriority=t,e.callbackNode=s,t}return r!==null&&r!==null&&Ae(r),e.callbackPriority=2,e.callbackNode=null,2}function Ep(e,t){if(Rt!==0&&Rt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ro()&&e.callbackNode!==s)return null;var r=Ue;return r=hr(e,e===rt?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(op(e,r,t),Np(e,He()),e.callbackNode!=null&&e.callbackNode===s?Ep.bind(null,e):null)}function Ap(e,t){if(ro())return null;op(e,t,!0)}function Ex(){Hx(function(){($e&6)!==0?se(on,Nx):Cp()})}function ad(){if(Ri===0){var e=Ks;e===0&&(e=Xi,Xi<<=1,(Xi&261888)===0&&(Xi=256)),Ri=e}return Ri}function Mp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:yr(""+e)}function Rp(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Ax(e,t,s,r,c){if(t==="submit"&&s&&s.stateNode===c){var d=Mp((c[Wt]||null).action),g=r.submitter;g&&(t=(t=g[Wt]||null)?Mp(t.formAction):g.getAttribute("formAction"),t!==null&&(d=t,g=null));var b=new xr("action","action",null,r,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ri!==0){var S=g?Rp(c,g):new FormData(c);Nu(s,{pending:!0,data:S,method:c.method,action:d},null,S)}}else typeof d=="function"&&(b.preventDefault(),S=g?Rp(c,g):new FormData(c),Nu(s,{pending:!0,data:S,method:c.method,action:d},d,S))},currentTarget:c}]})}}for(var rd=0;rd<qc.length;rd++){var od=qc[rd],Mx=od.toLowerCase(),Rx=od[0].toUpperCase()+od.slice(1);An(Mx,"on"+Rx)}An(rm,"onAnimationEnd"),An(om,"onAnimationIteration"),An(cm,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(K_,"onTransitionRun"),An(X_,"onTransitionStart"),An(F_,"onTransitionCancel"),An(um,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xa));function kp(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],c=r.event;r=r.listeners;e:{var d=void 0;if(t)for(var g=r.length-1;0<=g;g--){var b=r[g],S=b.instance,M=b.currentTarget;if(b=b.listener,S!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=M;try{d(c)}catch(I){wr(I)}c.currentTarget=null,d=S}else for(g=0;g<r.length;g++){if(b=r[g],S=b.instance,M=b.currentTarget,b=b.listener,S!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=M;try{d(c)}catch(I){wr(I)}c.currentTarget=null,d=S}}}}function Ie(e,t){var s=t[xc];s===void 0&&(s=t[xc]=new Set);var r=e+"__bubble";s.has(r)||(jp(t,e,2,!1),s.add(r))}function cd(e,t,s){var r=0;t&&(r|=4),jp(s,e,r,t)}var uo="_reactListening"+Math.random().toString(36).slice(2);function ud(e){if(!e[uo]){e[uo]=!0,Ch.forEach(function(s){s!=="selectionchange"&&(kx.has(s)||cd(s,!1,e),cd(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uo]||(t[uo]=!0,cd("selectionchange",!1,t))}}function jp(e,t,s,r){switch(r0(t)){case 2:var c=l1;break;case 8:c=a1;break;default:c=Cd}s=c.bind(null,t,s,e),c=void 0,!Rc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function dd(e,t,s,r,c){var d=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var b=r.stateNode.containerInfo;if(b===c)break;if(g===4)for(g=r.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;b!==null;){if(g=Ms(b),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){r=d=g;continue e}b=b.parentNode}}r=r.return}Bh(function(){var M=d,I=Ac(s),L=[];e:{var k=dm.get(e);if(k!==void 0){var z=xr,te=e;switch(e){case"keypress":if(vr(s)===0)break e;case"keydown":case"keyup":z=w_;break;case"focusin":te="focus",z=Oc;break;case"focusout":te="blur",z=Oc;break;case"beforeblur":case"afterblur":z=Oc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=f_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=E_;break;case rm:case om:case cm:z=g_;break;case um:z=M_;break;case"scroll":case"scrollend":z=u_;break;case"wheel":z=k_;break;case"copy":case"cut":case"paste":z=y_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Gh;break;case"toggle":case"beforetoggle":z=D_}var ve=(t&4)!==0,st=!ve&&(e==="scroll"||e==="scrollend"),C=ve?k!==null?k+"Capture":null:k;ve=[];for(var w=M,A;w!==null;){var B=w;if(A=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||A===null||C===null||(B=ql(w,C),B!=null&&ve.push(Sa(w,B,A))),st)break;w=w.return}0<ve.length&&(k=new z(k,te,null,s,I),L.push({event:k,listeners:ve}))}}if((t&7)===0){e:{if(k=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",k&&s!==Ec&&(te=s.relatedTarget||s.fromElement)&&(Ms(te)||te[As]))break e;if((z||k)&&(k=I.window===I?I:(k=I.ownerDocument)?k.defaultView||k.parentWindow:window,z?(te=s.relatedTarget||s.toElement,z=M,te=te?Ms(te):null,te!==null&&(st=u(te),ve=te.tag,te!==st||ve!==5&&ve!==27&&ve!==6)&&(te=null)):(z=null,te=M),z!==te)){if(ve=Uh,B="onMouseLeave",C="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(ve=Gh,B="onPointerLeave",C="onPointerEnter",w="pointer"),st=z==null?k:Gl(z),A=te==null?k:Gl(te),k=new ve(B,w+"leave",z,s,I),k.target=st,k.relatedTarget=A,B=null,Ms(I)===M&&(ve=new ve(C,w+"enter",te,s,I),ve.target=A,ve.relatedTarget=st,B=ve),st=B,z&&te)t:{for(ve=jx,C=z,w=te,A=0,B=C;B;B=ve(B))A++;B=0;for(var ce=w;ce;ce=ve(ce))B++;for(;0<A-B;)C=ve(C),A--;for(;0<B-A;)w=ve(w),B--;for(;A--;){if(C===w||w!==null&&C===w.alternate){ve=C;break t}C=ve(C),w=ve(w)}ve=null}else ve=null;z!==null&&Dp(L,k,z,ve,!1),te!==null&&st!==null&&Dp(L,st,te,ve,!0)}}e:{if(k=M?Gl(M):window,z=k.nodeName&&k.nodeName.toLowerCase(),z==="select"||z==="input"&&k.type==="file")var Fe=Zh;else if(Fh(k))if($h)Fe=q_;else{Fe=V_;var le=U_}else z=k.nodeName,!z||z.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?M&&Nc(M.elementType)&&(Fe=Zh):Fe=G_;if(Fe&&(Fe=Fe(e,M))){Ph(L,Fe,s,I);break e}le&&le(e,k,M),e==="focusout"&&M&&k.type==="number"&&M.memoizedProps.value!=null&&Cc(k,"number",k.value)}switch(le=M?Gl(M):window,e){case"focusin":(Fh(le)||le.contentEditable==="true")&&(Ls=le,Uc=M,$l=null);break;case"focusout":$l=Uc=Ls=null;break;case"mousedown":Vc=!0;break;case"contextmenu":case"mouseup":case"dragend":Vc=!1,lm(L,s,I);break;case"selectionchange":if(Y_)break;case"keydown":case"keyup":lm(L,s,I)}var Me;if(Ic)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Bs?Kh(e,s)&&(Ve="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ve="onCompositionStart");Ve&&(qh&&s.locale!=="ko"&&(Bs||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Bs&&(Me=Lh()):(mi=I,kc="value"in mi?mi.value:mi.textContent,Bs=!0)),le=fo(M,Ve),0<le.length&&(Ve=new Vh(Ve,e,null,s,I),L.push({event:Ve,listeners:le}),Me?Ve.data=Me:(Me=Xh(s),Me!==null&&(Ve.data=Me)))),(Me=z_?I_(e,s):B_(e,s))&&(Ve=fo(M,"onBeforeInput"),0<Ve.length&&(le=new Vh("onBeforeInput","beforeinput",null,s,I),L.push({event:le,listeners:Ve}),le.data=Me)),Ax(L,e,M,s,I)}kp(L,t)})}function Sa(e,t,s){return{instance:e,listener:t,currentTarget:s}}function fo(e,t){for(var s=t+"Capture",r=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=ql(e,s),c!=null&&r.unshift(Sa(e,c,d)),c=ql(e,t),c!=null&&r.push(Sa(e,c,d))),e.tag===3)return r;e=e.return}return[]}function jx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dp(e,t,s,r,c){for(var d=t._reactName,g=[];s!==null&&s!==r;){var b=s,S=b.alternate,M=b.stateNode;if(b=b.tag,S!==null&&S===r)break;b!==5&&b!==26&&b!==27||M===null||(S=M,c?(M=ql(s,d),M!=null&&g.unshift(Sa(s,M,S))):c||(M=ql(s,d),M!=null&&g.push(Sa(s,M,S)))),s=s.return}g.length!==0&&e.push({event:t,listeners:g})}var Dx=/\r\n?/g,Ox=/\u0000|\uFFFD/g;function Op(e){return(typeof e=="string"?e:""+e).replace(Dx,`
`).replace(Ox,"")}function zp(e,t){return t=Op(t),Op(e)===t}function it(e,t,s,r,c,d){switch(s){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Os(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Os(e,""+r);break;case"className":gr(e,"class",r);break;case"tabIndex":gr(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":gr(e,s,r);break;case"style":zh(e,r,d);break;case"data":if(t!=="object"){gr(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(s);break}r=yr(""+r),e.setAttribute(s,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(t!=="input"&&it(e,t,"name",c.name,c,null),it(e,t,"formEncType",c.formEncType,c,null),it(e,t,"formMethod",c.formMethod,c,null),it(e,t,"formTarget",c.formTarget,c,null)):(it(e,t,"encType",c.encType,c,null),it(e,t,"method",c.method,c,null),it(e,t,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(s);break}r=yr(""+r),e.setAttribute(s,r);break;case"onClick":r!=null&&(e.onclick=Yn);break;case"onScroll":r!=null&&Ie("scroll",e);break;case"onScrollEnd":r!=null&&Ie("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(s=r.__html,s!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}s=yr(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,""+r):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":r===!0?e.setAttribute(s,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,r):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(s,r):e.removeAttribute(s);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(s):e.setAttribute(s,r);break;case"popover":Ie("beforetoggle",e),Ie("toggle",e),mr(e,"popover",r);break;case"xlinkActuate":Qn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Qn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Qn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Qn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Qn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Qn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Qn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":mr(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=o_.get(s)||s,mr(e,s,r))}}function fd(e,t,s,r,c,d){switch(s){case"style":zh(e,r,d);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(s=r.__html,s!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"children":typeof r=="string"?Os(e,r):(typeof r=="number"||typeof r=="bigint")&&Os(e,""+r);break;case"onScroll":r!=null&&Ie("scroll",e);break;case"onScrollEnd":r!=null&&Ie("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nh.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),t=s.slice(2,c?s.length-7:void 0),d=e[Wt]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof r=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,r,c);break e}s in e?e[s]=r:r===!0?e.setAttribute(s,""):mr(e,s,r)}}}function Yt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",e),Ie("load",e);var r=!1,c=!1,d;for(d in s)if(s.hasOwnProperty(d)){var g=s[d];if(g!=null)switch(d){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:it(e,t,d,g,s,null)}}c&&it(e,t,"srcSet",s.srcSet,s,null),r&&it(e,t,"src",s.src,s,null);return;case"input":Ie("invalid",e);var b=d=g=c=null,S=null,M=null;for(r in s)if(s.hasOwnProperty(r)){var I=s[r];if(I!=null)switch(r){case"name":c=I;break;case"type":g=I;break;case"checked":S=I;break;case"defaultChecked":M=I;break;case"value":d=I;break;case"defaultValue":b=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(a(137,t));break;default:it(e,t,r,I,s,null)}}kh(e,d,b,S,M,g,c,!1);return;case"select":Ie("invalid",e),r=g=d=null;for(c in s)if(s.hasOwnProperty(c)&&(b=s[c],b!=null))switch(c){case"value":d=b;break;case"defaultValue":g=b;break;case"multiple":r=b;default:it(e,t,c,b,s,null)}t=d,s=g,e.multiple=!!r,t!=null?Ds(e,!!r,t,!1):s!=null&&Ds(e,!!r,s,!0);return;case"textarea":Ie("invalid",e),d=c=r=null;for(g in s)if(s.hasOwnProperty(g)&&(b=s[g],b!=null))switch(g){case"value":r=b;break;case"defaultValue":c=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:it(e,t,g,b,s,null)}Dh(e,r,c,d);return;case"option":for(S in s)s.hasOwnProperty(S)&&(r=s[S],r!=null)&&(S==="selected"?e.selected=r&&typeof r!="function"&&typeof r!="symbol":it(e,t,S,r,s,null));return;case"dialog":Ie("beforetoggle",e),Ie("toggle",e),Ie("cancel",e),Ie("close",e);break;case"iframe":case"object":Ie("load",e);break;case"video":case"audio":for(r=0;r<xa.length;r++)Ie(xa[r],e);break;case"image":Ie("error",e),Ie("load",e);break;case"details":Ie("toggle",e);break;case"embed":case"source":case"link":Ie("error",e),Ie("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in s)if(s.hasOwnProperty(M)&&(r=s[M],r!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:it(e,t,M,r,s,null)}return;default:if(Nc(t)){for(I in s)s.hasOwnProperty(I)&&(r=s[I],r!==void 0&&fd(e,t,I,r,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(r=s[b],r!=null&&it(e,t,b,r,s,null))}function zx(e,t,s,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,g=null,b=null,S=null,M=null,I=null;for(z in s){var L=s[z];if(s.hasOwnProperty(z)&&L!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":S=L;default:r.hasOwnProperty(z)||it(e,t,z,null,r,L)}}for(var k in r){var z=r[k];if(L=s[k],r.hasOwnProperty(k)&&(z!=null||L!=null))switch(k){case"type":d=z;break;case"name":c=z;break;case"checked":M=z;break;case"defaultChecked":I=z;break;case"value":g=z;break;case"defaultValue":b=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,t));break;default:z!==L&&it(e,t,k,z,r,L)}}wc(e,g,b,S,M,I,d,c);return;case"select":z=g=b=k=null;for(d in s)if(S=s[d],s.hasOwnProperty(d)&&S!=null)switch(d){case"value":break;case"multiple":z=S;default:r.hasOwnProperty(d)||it(e,t,d,null,r,S)}for(c in r)if(d=r[c],S=s[c],r.hasOwnProperty(c)&&(d!=null||S!=null))switch(c){case"value":k=d;break;case"defaultValue":b=d;break;case"multiple":g=d;default:d!==S&&it(e,t,c,d,r,S)}t=b,s=g,r=z,k!=null?Ds(e,!!s,k,!1):!!r!=!!s&&(t!=null?Ds(e,!!s,t,!0):Ds(e,!!s,s?[]:"",!1));return;case"textarea":z=k=null;for(b in s)if(c=s[b],s.hasOwnProperty(b)&&c!=null&&!r.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(e,t,b,null,r,c)}for(g in r)if(c=r[g],d=s[g],r.hasOwnProperty(g)&&(c!=null||d!=null))switch(g){case"value":k=c;break;case"defaultValue":z=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==d&&it(e,t,g,c,r,d)}jh(e,k,z);return;case"option":for(var te in s)k=s[te],s.hasOwnProperty(te)&&k!=null&&!r.hasOwnProperty(te)&&(te==="selected"?e.selected=!1:it(e,t,te,null,r,k));for(S in r)k=r[S],z=s[S],r.hasOwnProperty(S)&&k!==z&&(k!=null||z!=null)&&(S==="selected"?e.selected=k&&typeof k!="function"&&typeof k!="symbol":it(e,t,S,k,r,z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in s)k=s[ve],s.hasOwnProperty(ve)&&k!=null&&!r.hasOwnProperty(ve)&&it(e,t,ve,null,r,k);for(M in r)if(k=r[M],z=s[M],r.hasOwnProperty(M)&&k!==z&&(k!=null||z!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(a(137,t));break;default:it(e,t,M,k,r,z)}return;default:if(Nc(t)){for(var st in s)k=s[st],s.hasOwnProperty(st)&&k!==void 0&&!r.hasOwnProperty(st)&&fd(e,t,st,void 0,r,k);for(I in r)k=r[I],z=s[I],!r.hasOwnProperty(I)||k===z||k===void 0&&z===void 0||fd(e,t,I,k,r,z);return}}for(var C in s)k=s[C],s.hasOwnProperty(C)&&k!=null&&!r.hasOwnProperty(C)&&it(e,t,C,null,r,k);for(L in r)k=r[L],z=s[L],!r.hasOwnProperty(L)||k===z||k==null&&z==null||it(e,t,L,k,r,z)}function Ip(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ix(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),r=0;r<s.length;r++){var c=s[r],d=c.transferSize,g=c.initiatorType,b=c.duration;if(d&&b&&Ip(g)){for(g=0,b=c.responseEnd,r+=1;r<s.length;r++){var S=s[r],M=S.startTime;if(M>b)break;var I=S.transferSize,L=S.initiatorType;I&&Ip(L)&&(S=S.responseEnd,g+=I*(S<b?1:(b-M)/(S-M)))}if(--r,t+=8*(d+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hd=null,md=null;function ho(e){return e.nodeType===9?e:e.ownerDocument}function Bp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function gd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pd=null;function Bx(){var e=window.event;return e&&e.type==="popstate"?e===pd?!1:(pd=e,!0):(pd=null,!1)}var Hp=typeof setTimeout=="function"?setTimeout:void 0,Lx=typeof clearTimeout=="function"?clearTimeout:void 0,Up=typeof Promise=="function"?Promise:void 0,Hx=typeof queueMicrotask=="function"?queueMicrotask:typeof Up<"u"?function(e){return Up.resolve(null).then(e).catch(Ux)}:Hp;function Ux(e){setTimeout(function(){throw e})}function ki(e){return e==="head"}function Vp(e,t){var s=t,r=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(r===0){e.removeChild(c),dl(t);return}r--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")r++;else if(s==="html")Ta(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Ta(s);for(var d=s.firstChild;d;){var g=d.nextSibling,b=d.nodeName;d[Vl]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=g}}else s==="body"&&Ta(e.ownerDocument.body);s=c}while(s);dl(t)}function Gp(e,t){var s=e;e=0;do{var r=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=r}while(s)}function yd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":yd(s),Sc(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Vx(e,t,s,r){for(;e.nodeType===1;){var c=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Vl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=wn(e.nextSibling),e===null)break}return null}function Gx(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=wn(e.nextSibling),e===null))return null;return e}function qp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=wn(e.nextSibling),e===null))return null;return e}function bd(e){return e.data==="$?"||e.data==="$~"}function vd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function qx(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var r=function(){t(),s.removeEventListener("DOMContentLoaded",r)};s.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _d=null;function Qp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return wn(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Yp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Kp(e,t,s){switch(t=ho(s),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Ta(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Sc(e)}var Cn=new Map,Xp=new Set;function mo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ri=H.d;H.d={f:Qx,r:Yx,D:Kx,C:Xx,L:Fx,m:Px,X:$x,S:Zx,M:Wx};function Qx(){var e=ri.f(),t=so();return e||t}function Yx(e){var t=Rs(e);t!==null&&t.tag===5&&t.type==="form"?ug(t):ri.r(e)}var ol=typeof document>"u"?null:document;function Fp(e,t,s){var r=ol;if(r&&typeof t=="string"&&t){var c=yn(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Xp.has(c)||(Xp.add(c),e={rel:e,crossOrigin:s,href:t},r.querySelector(c)===null&&(t=r.createElement("link"),Yt(t,"link",e),It(t),r.head.appendChild(t)))}}function Kx(e){ri.D(e),Fp("dns-prefetch",e,null)}function Xx(e,t){ri.C(e,t),Fp("preconnect",e,t)}function Fx(e,t,s){ri.L(e,t,s);var r=ol;if(r&&e&&t){var c='link[rel="preload"][as="'+yn(t)+'"]';t==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+yn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+yn(s.imageSizes)+'"]')):c+='[href="'+yn(e)+'"]';var d=c;switch(t){case"style":d=cl(e);break;case"script":d=ul(e)}Cn.has(d)||(e=v({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Cn.set(d,e),r.querySelector(c)!==null||t==="style"&&r.querySelector(wa(d))||t==="script"&&r.querySelector(Ca(d))||(t=r.createElement("link"),Yt(t,"link",e),It(t),r.head.appendChild(t)))}}function Px(e,t){ri.m(e,t);var s=ol;if(s&&e){var r=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+yn(r)+'"][href="'+yn(e)+'"]',d=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ul(e)}if(!Cn.has(d)&&(e=v({rel:"modulepreload",href:e},t),Cn.set(d,e),s.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ca(d)))return}r=s.createElement("link"),Yt(r,"link",e),It(r),s.head.appendChild(r)}}}function Zx(e,t,s){ri.S(e,t,s);var r=ol;if(r&&e){var c=ks(r).hoistableStyles,d=cl(e);t=t||"default";var g=c.get(d);if(!g){var b={loading:0,preload:null};if(g=r.querySelector(wa(d)))b.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Cn.get(d))&&xd(e,s);var S=g=r.createElement("link");It(S),Yt(S,"link",e),S._p=new Promise(function(M,I){S.onload=M,S.onerror=I}),S.addEventListener("load",function(){b.loading|=1}),S.addEventListener("error",function(){b.loading|=2}),b.loading|=4,go(g,t,r)}g={type:"stylesheet",instance:g,count:1,state:b},c.set(d,g)}}}function $x(e,t){ri.X(e,t);var s=ol;if(s&&e){var r=ks(s).hoistableScripts,c=ul(e),d=r.get(c);d||(d=s.querySelector(Ca(c)),d||(e=v({src:e,async:!0},t),(t=Cn.get(c))&&Sd(e,t),d=s.createElement("script"),It(d),Yt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},r.set(c,d))}}function Wx(e,t){ri.M(e,t);var s=ol;if(s&&e){var r=ks(s).hoistableScripts,c=ul(e),d=r.get(c);d||(d=s.querySelector(Ca(c)),d||(e=v({src:e,async:!0,type:"module"},t),(t=Cn.get(c))&&Sd(e,t),d=s.createElement("script"),It(d),Yt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},r.set(c,d))}}function Pp(e,t,s,r){var c=(c=ke.current)?mo(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=cl(s.href),s=ks(c).hoistableStyles,r=s.get(t),r||(r={type:"style",instance:null,count:0,state:null},s.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=cl(s.href);var d=ks(c).hoistableStyles,g=d.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,g),(d=c.querySelector(wa(e)))&&!d._p&&(g.instance=d,g.state.loading=5),Cn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Cn.set(e,s),d||Jx(c,e,s,g.state))),t&&r===null)throw Error(a(528,""));return g}if(t&&r!==null)throw Error(a(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ul(s),s=ks(c).hoistableScripts,r=s.get(t),r||(r={type:"script",instance:null,count:0,state:null},s.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function cl(e){return'href="'+yn(e)+'"'}function wa(e){return'link[rel="stylesheet"]['+e+"]"}function Zp(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Jx(e,t,s,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Yt(t,"link",s),It(t),e.head.appendChild(t))}function ul(e){return'[src="'+yn(e)+'"]'}function Ca(e){return"script[async]"+e}function $p(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yn(s.href)+'"]');if(r)return t.instance=r,It(r),r;var c=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),It(r),Yt(r,"style",c),go(r,s.precedence,e),t.instance=r;case"stylesheet":c=cl(s.href);var d=e.querySelector(wa(c));if(d)return t.state.loading|=4,t.instance=d,It(d),d;r=Zp(s),(c=Cn.get(c))&&xd(r,c),d=(e.ownerDocument||e).createElement("link"),It(d);var g=d;return g._p=new Promise(function(b,S){g.onload=b,g.onerror=S}),Yt(d,"link",r),t.state.loading|=4,go(d,s.precedence,e),t.instance=d;case"script":return d=ul(s.src),(c=e.querySelector(Ca(d)))?(t.instance=c,It(c),c):(r=s,(c=Cn.get(d))&&(r=v({},s),Sd(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),It(c),Yt(c,"link",r),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,go(r,s.precedence,e));return t.instance}function go(e,t,s){for(var r=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,d=c,g=0;g<r.length;g++){var b=r[g];if(b.dataset.precedence===t)d=b;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function xd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var po=null;function Wp(e,t,s){if(po===null){var r=new Map,c=po=new Map;c.set(s,r)}else c=po,r=c.get(s),r||(r=new Map,c.set(s,r));if(r.has(e))return r;for(r.set(e,null),s=s.getElementsByTagName(e),c=0;c<s.length;c++){var d=s[c];if(!(d[Vl]||d[Vt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var g=d.getAttribute(t)||"";g=e+g;var b=r.get(g);b?b.push(d):r.set(g,[d])}}return r}function Jp(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function e1(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function e0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function t1(e,t,s,r){if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=cl(r.href),d=t.querySelector(wa(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=yo.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=d,It(d);return}d=t.ownerDocument||t,r=Zp(r),(c=Cn.get(c))&&xd(r,c),d=d.createElement("link"),It(d);var g=d;g._p=new Promise(function(b,S){g.onload=b,g.onerror=S}),Yt(d,"link",r),s.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=yo.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var Td=0;function n1(e,t){return e.stylesheets&&e.count===0&&vo(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var r=setTimeout(function(){if(e.stylesheets&&vo(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&Td===0&&(Td=62500*Ix());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&vo(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Td?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(c)}}:null}function yo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var bo=null;function vo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,bo=new Map,t.forEach(i1,e),bo=null,yo.call(e))}function i1(e,t){if(!(t.state.loading&4)){var s=bo.get(e);if(s)var r=s.get(null);else{s=new Map,bo.set(e,s);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var g=c[d];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(s.set(g.dataset.precedence,g),r=g)}r&&s.set(null,r)}c=t.instance,g=c.getAttribute("data-precedence"),d=s.get(g)||r,d===r&&s.set(null,c),s.set(g,c),this.count++,r=yo.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var Na={$$typeof:q,Provider:null,Consumer:null,_currentValue:E,_currentValue2:E,_threadCount:0};function s1(e,t,s,r,c,d,g,b,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bc(0),this.hiddenUpdates=bc(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function t0(e,t,s,r,c,d,g,b,S,M,I,L){return e=new s1(e,t,s,g,S,M,I,L,b),t=1,d===!0&&(t|=24),d=un(3,null,null,t),e.current=d,d.stateNode=e,t=nu(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:r,isDehydrated:s,cache:t},au(d),e}function n0(e){return e?(e=Vs,e):Vs}function i0(e,t,s,r,c,d){c=n0(c),r.context===null?r.context=c:r.pendingContext=c,r=_i(t),r.payload={element:s},d=d===void 0?null:d,d!==null&&(r.callback=d),s=xi(e,r,t),s!==null&&(ln(s,e,t),sa(s,e,t))}function s0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function wd(e,t){s0(e,t),(e=e.alternate)&&s0(e,t)}function l0(e){if(e.tag===13||e.tag===31){var t=Ji(e,67108864);t!==null&&ln(t,e,67108864),wd(e,67108864)}}function a0(e){if(e.tag===13||e.tag===31){var t=gn();t=vc(t);var s=Ji(e,t);s!==null&&ln(s,e,t),wd(e,t)}}var _o=!0;function l1(e,t,s,r){var c=R.T;R.T=null;var d=H.p;try{H.p=2,Cd(e,t,s,r)}finally{H.p=d,R.T=c}}function a1(e,t,s,r){var c=R.T;R.T=null;var d=H.p;try{H.p=8,Cd(e,t,s,r)}finally{H.p=d,R.T=c}}function Cd(e,t,s,r){if(_o){var c=Nd(r);if(c===null)dd(e,t,r,xo,s),o0(e,r);else if(o1(c,e,t,s,r))r.stopPropagation();else if(o0(e,r),t&4&&-1<r1.indexOf(e)){for(;c!==null;){var d=Rs(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=Fi(d.pendingLanes);if(g!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;g;){var S=1<<31-xt(g);b.entanglements[1]|=S,g&=~S}Ln(d),($e&6)===0&&(no=He()+500,_a(0))}}break;case 31:case 13:b=Ji(d,2),b!==null&&ln(b,d,2),so(),wd(d,2)}if(d=Nd(r),d===null&&dd(e,t,r,xo,s),d===c)break;c=d}c!==null&&r.stopPropagation()}else dd(e,t,r,null,s)}}function Nd(e){return e=Ac(e),Ed(e)}var xo=null;function Ed(e){if(xo=null,e=Ms(e),e!==null){var t=u(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return xo=e,null}function r0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pt()){case on:return 2;case qn:return 8;case zt:case Ki:return 32;case Es:return 268435456;default:return 32}default:return 32}}var Ad=!1,ji=null,Di=null,Oi=null,Ea=new Map,Aa=new Map,zi=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o0(e,t){switch(e){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":Ea.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Aa.delete(t.pointerId)}}function Ma(e,t,s,r,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Rs(t),t!==null&&l0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function o1(e,t,s,r,c){switch(t){case"focusin":return ji=Ma(ji,e,t,s,r,c),!0;case"dragenter":return Di=Ma(Di,e,t,s,r,c),!0;case"mouseover":return Oi=Ma(Oi,e,t,s,r,c),!0;case"pointerover":var d=c.pointerId;return Ea.set(d,Ma(Ea.get(d)||null,e,t,s,r,c)),!0;case"gotpointercapture":return d=c.pointerId,Aa.set(d,Ma(Aa.get(d)||null,e,t,s,r,c)),!0}return!1}function c0(e){var t=Ms(e.target);if(t!==null){var s=u(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Th(e.priority,function(){a0(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,Th(e.priority,function(){a0(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function So(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Nd(e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Ec=r,s.target.dispatchEvent(r),Ec=null}else return t=Rs(s),t!==null&&l0(t),e.blockedOn=s,!1;t.shift()}return!0}function u0(e,t,s){So(e)&&s.delete(t)}function c1(){Ad=!1,ji!==null&&So(ji)&&(ji=null),Di!==null&&So(Di)&&(Di=null),Oi!==null&&So(Oi)&&(Oi=null),Ea.forEach(u0),Aa.forEach(u0)}function To(e,t){e.blockedOn===t&&(e.blockedOn=null,Ad||(Ad=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,c1)))}var wo=null;function d0(e){wo!==e&&(wo=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){wo===e&&(wo=null);for(var t=0;t<e.length;t+=3){var s=e[t],r=e[t+1],c=e[t+2];if(typeof r!="function"){if(Ed(r||s)===null)continue;break}var d=Rs(s);d!==null&&(e.splice(t,3),t-=3,Nu(d,{pending:!0,data:c,method:s.method,action:r},r,c))}}))}function dl(e){function t(S){return To(S,e)}ji!==null&&To(ji,e),Di!==null&&To(Di,e),Oi!==null&&To(Oi,e),Ea.forEach(t),Aa.forEach(t);for(var s=0;s<zi.length;s++){var r=zi[s];r.blockedOn===e&&(r.blockedOn=null)}for(;0<zi.length&&(s=zi[0],s.blockedOn===null);)c0(s),s.blockedOn===null&&zi.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(r=0;r<s.length;r+=3){var c=s[r],d=s[r+1],g=c[Wt]||null;if(typeof d=="function")g||d0(s);else if(g){var b=null;if(d&&d.hasAttribute("formAction")){if(c=d,g=d[Wt]||null)b=g.formAction;else if(Ed(c)!==null)continue}else b=g.action;typeof b=="function"?s[r+1]=b:(s.splice(r,3),r-=3),d0(s)}}}function f0(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),r||setTimeout(s,20)}function s(){if(!r&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Md(e){this._internalRoot=e}Co.prototype.render=Md.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var s=t.current,r=gn();i0(s,r,e,t,null,null)},Co.prototype.unmount=Md.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;i0(e.current,2,null,e,null,null),so(),t[As]=null}};function Co(e){this._internalRoot=e}Co.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sh();e={blockedOn:null,target:e,priority:t};for(var s=0;s<zi.length&&t!==0&&t<zi[s].priority;s++);zi.splice(s,0,e),s===0&&c0(e)}};var h0=n.version;if(h0!=="19.2.4")throw Error(a(527,h0,"19.2.4"));H.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=y(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var u1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var No=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!No.isDisabled&&No.supportsFiber)try{$=No.inject(u1),re=No}catch{}}return Ra.createRoot=function(e,t){if(!o(e))throw Error(a(299));var s=!1,r="",c=_g,d=xg,g=Sg;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=t0(e,1,!1,null,null,s,r,null,c,d,g,f0),e[As]=t.current,ud(e),new Md(t)},Ra.hydrateRoot=function(e,t,s){if(!o(e))throw Error(a(299));var r=!1,c="",d=_g,g=xg,b=Sg,S=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(S=s.formState)),t=t0(e,1,!0,t,s??null,r,c,S,d,g,b,f0),t.context=n0(null),s=t.current,r=gn(),r=vc(r),c=_i(r),c.callback=null,xi(s,c,r),s=r,t.current.lanes=s,Ul(t,s),Ln(t),e[As]=t.current,ud(e),new Co(t)},Ra.version="19.2.4",Ra}var v0;function x1(){if(v0)return Rd.exports;v0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Rd.exports=_1(),Rd.exports}var S1=x1();const T1="modulepreload",w1=function(i){return"/"+i},_0={},Ba=function(n,l,a){let o=Promise.resolve();if(l&&l.length>0){let p=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");o=p(l.map(y=>{if(y=w1(y),y in _0)return;_0[y]=!0;const x=y.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${v}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":T1,x||(_.as="script"),_.crossOrigin="",_.href=y,m&&_.setAttribute("nonce",m),document.head.appendChild(_),x)return new Promise((T,O)=>{_.addEventListener("load",T),_.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return o.then(f=>{for(const m of f||[])m.status==="rejected"&&u(m.reason);return n().catch(u)})},x0=i=>{let n;const l=new Set,a=(y,x)=>{const v=typeof y=="function"?y(n):y;if(!Object.is(v,n)){const _=n;n=x??(typeof v!="object"||v===null)?v:Object.assign({},n,v),l.forEach(T=>T(n,_))}},o=()=>n,m={setState:a,getState:o,getInitialState:()=>p,subscribe:y=>(l.add(y),()=>l.delete(y))},p=n=i(a,o,m);return m},C1=(i=>i?x0(i):x0),N1=i=>i;function E1(i,n=N1){const l=de.useSyncExternalStore(i.subscribe,de.useCallback(()=>n(i.getState()),[i,n]),de.useCallback(()=>n(i.getInitialState()),[i,n]));return de.useDebugValue(l),l}const S0=i=>{const n=C1(i),l=a=>E1(n,a);return Object.assign(l,n),l},A1=(i=>i?S0(i):S0),G=A1(i=>({queue:[],addToQueue:n=>i(l=>n?{queue:[...l.queue,n]}:l),insertToQueue:(n,l)=>i(a=>{if(!n)return a;const o=[...a.queue];return l<0&&(l=0),l>o.length&&(l=o.length),o.splice(l,0,n),{queue:o}}),removeFromQueue:n=>i(l=>({queue:l.queue.filter(a=>a.id!==n)})),updateQueueItem:(n,l)=>i(a=>({queue:a.queue.map(o=>o.id===n?{...o,...l}:o)})),reorderQueue:n=>i({queue:n}),manualOrder:JSON.parse(localStorage.getItem("karaoke_manualOrder")||"null"),setManualOrder:n=>{localStorage.setItem("karaoke_manualOrder",JSON.stringify(n)),i({manualOrder:n})},clearManualOrder:()=>{localStorage.removeItem("karaoke_manualOrder"),i({manualOrder:null})},queueMode:"auto",toggleQueueMode:()=>i(n=>({queueMode:n.queueMode==="auto"?"manual":"auto"})),invitedSongId:null,setInvitedSongId:n=>i({invitedSongId:n}),currentSong:null,isPlaying:!1,waitingForGuest:!1,setWaitingForGuest:n=>i({waitingForGuest:n}),waitCountdown:30,setWaitCountdown:n=>i({waitCountdown:n}),countdownPaused:!1,setCountdownPaused:n=>i({countdownPaused:n}),micAttemptHint:null,setMicAttemptHint:n=>i({micAttemptHint:n}),restartTrigger:0,setCurrentSong:n=>i({currentSong:n}),setIsPlaying:n=>i({isPlaying:n}),triggerRestart:()=>i(n=>({restartTrigger:n.restartTrigger+1,isPlaying:!0})),volume:100,isMuted:!1,setVolume:n=>i({volume:n}),setIsMuted:n=>i({isMuted:n}),beatSearchResults:[],setBeatSearchResults:n=>i({beatSearchResults:n}),isProjectionOpen:!1,setProjectionOpen:n=>i({isProjectionOpen:n}),songHistory:[],showHistoryModal:!1,setShowHistoryModal:n=>i({showHistoryModal:n}),showMicSettingsModal:!1,setShowMicSettingsModal:n=>i({showMicSettingsModal:n}),micSensitivity:Number(localStorage.getItem("karaoke_micSensitivity")||6),micDelay:Number(localStorage.getItem("karaoke_micDelay")||.8),micMinVol:Number(localStorage.getItem("karaoke_micMinVol")||-100),micBassFilter:Number(localStorage.getItem("karaoke_micBassFilter")||2),micTransient:Number(localStorage.getItem("karaoke_micTransient")||2.5),micAdaptation:Number(localStorage.getItem("karaoke_micAdaptation")||.02),setMicSensitivity:n=>{localStorage.setItem("karaoke_micSensitivity",n),i({micSensitivity:n})},setMicDelay:n=>{localStorage.setItem("karaoke_micDelay",n),i({micDelay:n})},setMicMinVol:n=>{localStorage.setItem("karaoke_micMinVol",n),i({micMinVol:n})},setMicBassFilter:n=>{localStorage.setItem("karaoke_micBassFilter",n),i({micBassFilter:n})},setMicTransient:n=>{localStorage.setItem("karaoke_micTransient",n),i({micTransient:n})},setMicAdaptation:n=>{localStorage.setItem("karaoke_micAdaptation",n),i({micAdaptation:n})},addToHistory:n=>i(l=>{if(!n||!n.videoId)return l;const a=[n,...l.songHistory],o=`karaoke_history_${new Date().toISOString().slice(0,10)}`;try{localStorage.setItem(o,JSON.stringify(a))}catch(u){console.warn("[History] Failed to persist:",u)}return{songHistory:a}}),loadHistory:()=>{const n=new Date,l=`karaoke_history_${n.toISOString().slice(0,10)}`;try{const a=localStorage.getItem(l);if(a){const o=JSON.parse(a);i({songHistory:Array.isArray(o)?o:[]})}else i({songHistory:[]});for(let o=localStorage.length-1;o>=0;o--){const u=localStorage.key(o);if(u&&u.startsWith("karaoke_history_")&&u!==l){const f=u.replace("karaoke_history_",""),m=new Date(f);(n-m)/(1e3*60*60*24)>7&&localStorage.removeItem(u)}}}catch(a){console.warn("[History] Failed to load:",a),i({songHistory:[]})}},clearHistory:()=>{const n=`karaoke_history_${new Date().toISOString().slice(0,10)}`;localStorage.removeItem(n),i({songHistory:[]})}})),M1=(i,n)=>{const l=new Array(i.length+n.length);for(let a=0;a<i.length;a++)l[a]=i[a];for(let a=0;a<n.length;a++)l[i.length+a]=n[a];return l},R1=(i,n)=>({classGroupId:i,validator:n}),Oy=(i=new Map,n=null,l)=>({nextPart:i,validators:n,classGroupId:l}),jo="-",T0=[],k1="arbitrary..",j1=i=>{const n=O1(i),{conflictingClassGroups:l,conflictingClassGroupModifiers:a}=i;return{getClassGroupId:f=>{if(f.startsWith("[")&&f.endsWith("]"))return D1(f);const m=f.split(jo),p=m[0]===""&&m.length>1?1:0;return zy(m,p,n)},getConflictingClassGroupIds:(f,m)=>{if(m){const p=a[f],y=l[f];return p?y?M1(y,p):p:y||T0}return l[f]||T0}}},zy=(i,n,l)=>{if(i.length-n===0)return l.classGroupId;const o=i[n],u=l.nextPart.get(o);if(u){const y=zy(i,n+1,u);if(y)return y}const f=l.validators;if(f===null)return;const m=n===0?i.join(jo):i.slice(n).join(jo),p=f.length;for(let y=0;y<p;y++){const x=f[y];if(x.validator(m))return x.classGroupId}},D1=i=>i.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const n=i.slice(1,-1),l=n.indexOf(":"),a=n.slice(0,l);return a?k1+a:void 0})(),O1=i=>{const{theme:n,classGroups:l}=i;return z1(l,n)},z1=(i,n)=>{const l=Oy();for(const a in i){const o=i[a];Ef(o,l,a,n)}return l},Ef=(i,n,l,a)=>{const o=i.length;for(let u=0;u<o;u++){const f=i[u];I1(f,n,l,a)}},I1=(i,n,l,a)=>{if(typeof i=="string"){B1(i,n,l);return}if(typeof i=="function"){L1(i,n,l,a);return}H1(i,n,l,a)},B1=(i,n,l)=>{const a=i===""?n:Iy(n,i);a.classGroupId=l},L1=(i,n,l,a)=>{if(U1(i)){Ef(i(a),n,l,a);return}n.validators===null&&(n.validators=[]),n.validators.push(R1(l,i))},H1=(i,n,l,a)=>{const o=Object.entries(i),u=o.length;for(let f=0;f<u;f++){const[m,p]=o[f];Ef(p,Iy(n,m),l,a)}},Iy=(i,n)=>{let l=i;const a=n.split(jo),o=a.length;for(let u=0;u<o;u++){const f=a[u];let m=l.nextPart.get(f);m||(m=Oy(),l.nextPart.set(f,m)),l=m}return l},U1=i=>"isThemeGetter"in i&&i.isThemeGetter===!0,V1=i=>{if(i<1)return{get:()=>{},set:()=>{}};let n=0,l=Object.create(null),a=Object.create(null);const o=(u,f)=>{l[u]=f,n++,n>i&&(n=0,a=l,l=Object.create(null))};return{get(u){let f=l[u];if(f!==void 0)return f;if((f=a[u])!==void 0)return o(u,f),f},set(u,f){u in l?l[u]=f:o(u,f)}}},Wd="!",w0=":",G1=[],C0=(i,n,l,a,o)=>({modifiers:i,hasImportantModifier:n,baseClassName:l,maybePostfixModifierPosition:a,isExternal:o}),q1=i=>{const{prefix:n,experimentalParseClassName:l}=i;let a=o=>{const u=[];let f=0,m=0,p=0,y;const x=o.length;for(let D=0;D<x;D++){const V=o[D];if(f===0&&m===0){if(V===w0){u.push(o.slice(p,D)),p=D+1;continue}if(V==="/"){y=D;continue}}V==="["?f++:V==="]"?f--:V==="("?m++:V===")"&&m--}const v=u.length===0?o:o.slice(p);let _=v,T=!1;v.endsWith(Wd)?(_=v.slice(0,-1),T=!0):v.startsWith(Wd)&&(_=v.slice(1),T=!0);const O=y&&y>p?y-p:void 0;return C0(u,T,_,O)};if(n){const o=n+w0,u=a;a=f=>f.startsWith(o)?u(f.slice(o.length)):C0(G1,!1,f,void 0,!0)}if(l){const o=a;a=u=>l({className:u,parseClassName:o})}return a},Q1=i=>{const n=new Map;return i.orderSensitiveModifiers.forEach((l,a)=>{n.set(l,1e6+a)}),l=>{const a=[];let o=[];for(let u=0;u<l.length;u++){const f=l[u],m=f[0]==="[",p=n.has(f);m||p?(o.length>0&&(o.sort(),a.push(...o),o=[]),a.push(f)):o.push(f)}return o.length>0&&(o.sort(),a.push(...o)),a}},Y1=i=>({cache:V1(i.cacheSize),parseClassName:q1(i),sortModifiers:Q1(i),...j1(i)}),K1=/\s+/,X1=(i,n)=>{const{parseClassName:l,getClassGroupId:a,getConflictingClassGroupIds:o,sortModifiers:u}=n,f=[],m=i.trim().split(K1);let p="";for(let y=m.length-1;y>=0;y-=1){const x=m[y],{isExternal:v,modifiers:_,hasImportantModifier:T,baseClassName:O,maybePostfixModifierPosition:D}=l(x);if(v){p=x+(p.length>0?" "+p:p);continue}let V=!!D,X=a(V?O.substring(0,D):O);if(!X){if(!V){p=x+(p.length>0?" "+p:p);continue}if(X=a(O),!X){p=x+(p.length>0?" "+p:p);continue}V=!1}const P=_.length===0?"":_.length===1?_[0]:u(_).join(":"),q=T?P+Wd:P,W=q+X;if(f.indexOf(W)>-1)continue;f.push(W);const ae=o(X,V);for(let oe=0;oe<ae.length;++oe){const U=ae[oe];f.push(q+U)}p=x+(p.length>0?" "+p:p)}return p},F1=(...i)=>{let n=0,l,a,o="";for(;n<i.length;)(l=i[n++])&&(a=By(l))&&(o&&(o+=" "),o+=a);return o},By=i=>{if(typeof i=="string")return i;let n,l="";for(let a=0;a<i.length;a++)i[a]&&(n=By(i[a]))&&(l&&(l+=" "),l+=n);return l},P1=(i,...n)=>{let l,a,o,u;const f=p=>{const y=n.reduce((x,v)=>v(x),i());return l=Y1(y),a=l.cache.get,o=l.cache.set,u=m,m(p)},m=p=>{const y=a(p);if(y)return y;const x=X1(p,l);return o(p,x),x};return u=f,(...p)=>u(F1(...p))},Z1=[],kt=i=>{const n=l=>l[i]||Z1;return n.isThemeGetter=!0,n},Ly=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Hy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,$1=/^\d+\/\d+$/,W1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eS=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tS=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fl=i=>$1.test(i),je=i=>!!i&&!Number.isNaN(Number(i)),Bi=i=>!!i&&Number.isInteger(Number(i)),Dd=i=>i.endsWith("%")&&je(i.slice(0,-1)),oi=i=>W1.test(i),iS=()=>!0,sS=i=>J1.test(i)&&!eS.test(i),Uy=()=>!1,lS=i=>tS.test(i),aS=i=>nS.test(i),rS=i=>!ne(i)&&!ie(i),oS=i=>Ml(i,qy,Uy),ne=i=>Ly.test(i),fs=i=>Ml(i,Qy,sS),Od=i=>Ml(i,hS,je),N0=i=>Ml(i,Vy,Uy),cS=i=>Ml(i,Gy,aS),Eo=i=>Ml(i,Yy,lS),ie=i=>Hy.test(i),ka=i=>Rl(i,Qy),uS=i=>Rl(i,mS),E0=i=>Rl(i,Vy),dS=i=>Rl(i,qy),fS=i=>Rl(i,Gy),Ao=i=>Rl(i,Yy,!0),Ml=(i,n,l)=>{const a=Ly.exec(i);return a?a[1]?n(a[1]):l(a[2]):!1},Rl=(i,n,l=!1)=>{const a=Hy.exec(i);return a?a[1]?n(a[1]):l:!1},Vy=i=>i==="position"||i==="percentage",Gy=i=>i==="image"||i==="url",qy=i=>i==="length"||i==="size"||i==="bg-size",Qy=i=>i==="length",hS=i=>i==="number",mS=i=>i==="family-name",Yy=i=>i==="shadow",gS=()=>{const i=kt("color"),n=kt("font"),l=kt("text"),a=kt("font-weight"),o=kt("tracking"),u=kt("leading"),f=kt("breakpoint"),m=kt("container"),p=kt("spacing"),y=kt("radius"),x=kt("shadow"),v=kt("inset-shadow"),_=kt("text-shadow"),T=kt("drop-shadow"),O=kt("blur"),D=kt("perspective"),V=kt("aspect"),X=kt("ease"),P=kt("animate"),q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ae=()=>[...W(),ie,ne],oe=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],K=()=>[ie,ne,p],Se=()=>[fl,"full","auto",...K()],ye=()=>[Bi,"none","subgrid",ie,ne],he=()=>["auto",{span:["full",Bi,ie,ne]},Bi,ie,ne],Ee=()=>[Bi,"auto",ie,ne],Re=()=>["auto","min","max","fr",ie,ne],be=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],me=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...K()],H=()=>[fl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...K()],E=()=>[i,ie,ne],ge=()=>[...W(),E0,N0,{position:[ie,ne]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],we=()=>["auto","cover","contain",dS,oS,{size:[ie,ne]}],J=()=>[Dd,ka,fs],ee=()=>["","none","full",y,ie,ne],pe=()=>["",je,ka,fs],Te=()=>["solid","dashed","dotted","double"],ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>[je,Dd,E0,N0],_e=()=>["","none",O,ie,ne],fe=()=>["none",je,ie,ne],Ce=()=>["none",je,ie,ne],Ye=()=>[je,ie,ne],tt=()=>[fl,"full",...K()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[oi],breakpoint:[oi],color:[iS],container:[oi],"drop-shadow":[oi],ease:["in","out","in-out"],font:[rS],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[oi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[oi],shadow:[oi],spacing:["px",je],text:[oi],"text-shadow":[oi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",fl,ne,ie,V]}],container:["container"],columns:[{columns:[je,ne,ie,m]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ae()}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Se()}],"inset-x":[{"inset-x":Se()}],"inset-y":[{"inset-y":Se()}],start:[{start:Se()}],end:[{end:Se()}],top:[{top:Se()}],right:[{right:Se()}],bottom:[{bottom:Se()}],left:[{left:Se()}],visibility:["visible","invisible","collapse"],z:[{z:[Bi,"auto",ie,ne]}],basis:[{basis:[fl,"full","auto",m,...K()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,fl,"auto","initial","none",ne]}],grow:[{grow:["",je,ie,ne]}],shrink:[{shrink:["",je,ie,ne]}],order:[{order:[Bi,"first","last","none",ie,ne]}],"grid-cols":[{"grid-cols":ye()}],"col-start-end":[{col:he()}],"col-start":[{"col-start":Ee()}],"col-end":[{"col-end":Ee()}],"grid-rows":[{"grid-rows":ye()}],"row-start-end":[{row:he()}],"row-start":[{"row-start":Ee()}],"row-end":[{"row-end":Ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Re()}],"auto-rows":[{"auto-rows":Re()}],gap:[{gap:K()}],"gap-x":[{"gap-x":K()}],"gap-y":[{"gap-y":K()}],"justify-content":[{justify:[...be(),"normal"]}],"justify-items":[{"justify-items":[...me(),"normal"]}],"justify-self":[{"justify-self":["auto",...me()]}],"align-content":[{content:["normal",...be()]}],"align-items":[{items:[...me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...me(),{baseline:["","last"]}]}],"place-content":[{"place-content":be()}],"place-items":[{"place-items":[...me(),"baseline"]}],"place-self":[{"place-self":["auto",...me()]}],p:[{p:K()}],px:[{px:K()}],py:[{py:K()}],ps:[{ps:K()}],pe:[{pe:K()}],pt:[{pt:K()}],pr:[{pr:K()}],pb:[{pb:K()}],pl:[{pl:K()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":K()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":K()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[m,"screen",...H()]}],"min-w":[{"min-w":[m,"screen","none",...H()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[f]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",l,ka,fs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,ie,Od]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Dd,ne]}],"font-family":[{font:[uS,ne,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ie,ne]}],"line-clamp":[{"line-clamp":[je,"none",ie,Od]}],leading:[{leading:[u,...K()]}],"list-image":[{"list-image":["none",ie,ne]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ie,ne]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",ie,fs]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[je,"auto",ie,ne]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ie,ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ie,ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ge()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:we()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bi,ie,ne],radial:["",ie,ne],conic:[Bi,ie,ne]},fS,cS]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:pe()}],"border-w-x":[{"border-x":pe()}],"border-w-y":[{"border-y":pe()}],"border-w-s":[{"border-s":pe()}],"border-w-e":[{"border-e":pe()}],"border-w-t":[{"border-t":pe()}],"border-w-r":[{"border-r":pe()}],"border-w-b":[{"border-b":pe()}],"border-w-l":[{"border-l":pe()}],"divide-x":[{"divide-x":pe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":pe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Te(),"hidden","none"]}],"divide-style":[{divide:[...Te(),"hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:[...Te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,ie,ne]}],"outline-w":[{outline:["",je,ka,fs]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",x,Ao,Eo]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",v,Ao,Eo]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[je,fs]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":pe()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",_,Ao,Eo]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[je,ie,ne]}],"mix-blend":[{"mix-blend":[...ke(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ke()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":Q()}],"mask-image-linear-to-pos":[{"mask-linear-to":Q()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":Q()}],"mask-image-t-to-pos":[{"mask-t-to":Q()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":Q()}],"mask-image-r-to-pos":[{"mask-r-to":Q()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":Q()}],"mask-image-b-to-pos":[{"mask-b-to":Q()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":Q()}],"mask-image-l-to-pos":[{"mask-l-to":Q()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":Q()}],"mask-image-x-to-pos":[{"mask-x-to":Q()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":Q()}],"mask-image-y-to-pos":[{"mask-y-to":Q()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[ie,ne]}],"mask-image-radial-from-pos":[{"mask-radial-from":Q()}],"mask-image-radial-to-pos":[{"mask-radial-to":Q()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":W()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":Q()}],"mask-image-conic-to-pos":[{"mask-conic-to":Q()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ge()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:we()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ie,ne]}],filter:[{filter:["","none",ie,ne]}],blur:[{blur:_e()}],brightness:[{brightness:[je,ie,ne]}],contrast:[{contrast:[je,ie,ne]}],"drop-shadow":[{"drop-shadow":["","none",T,Ao,Eo]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",je,ie,ne]}],"hue-rotate":[{"hue-rotate":[je,ie,ne]}],invert:[{invert:["",je,ie,ne]}],saturate:[{saturate:[je,ie,ne]}],sepia:[{sepia:["",je,ie,ne]}],"backdrop-filter":[{"backdrop-filter":["","none",ie,ne]}],"backdrop-blur":[{"backdrop-blur":_e()}],"backdrop-brightness":[{"backdrop-brightness":[je,ie,ne]}],"backdrop-contrast":[{"backdrop-contrast":[je,ie,ne]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,ie,ne]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,ie,ne]}],"backdrop-invert":[{"backdrop-invert":["",je,ie,ne]}],"backdrop-opacity":[{"backdrop-opacity":[je,ie,ne]}],"backdrop-saturate":[{"backdrop-saturate":[je,ie,ne]}],"backdrop-sepia":[{"backdrop-sepia":["",je,ie,ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":K()}],"border-spacing-x":[{"border-spacing-x":K()}],"border-spacing-y":[{"border-spacing-y":K()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ie,ne]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",ie,ne]}],ease:[{ease:["linear","initial",X,ie,ne]}],delay:[{delay:[je,ie,ne]}],animate:[{animate:["none",P,ie,ne]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,ie,ne]}],"perspective-origin":[{"perspective-origin":ae()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:Ye()}],"skew-x":[{"skew-x":Ye()}],"skew-y":[{"skew-y":Ye()}],transform:[{transform:[ie,ne,"","none","gpu","cpu"]}],"transform-origin":[{origin:ae()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:tt()}],"translate-x":[{"translate-x":tt()}],"translate-y":[{"translate-y":tt()}],"translate-z":[{"translate-z":tt()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ie,ne]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ie,ne]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[je,ka,fs,Od]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Af=P1(gS),gs=({children:i,className:n,glass:l=!1,...a})=>h.jsx("div",{className:Af("rounded-3xl p-6 transition-shadow duration-200",l?"bg-white/90 border border-white/60":"bg-white border border-slate-100",n),...a,children:i}),jt=({children:i,className:n,variant:l="primary",...a})=>{const o="px-6 py-3 rounded-2xl font-semibold transition-colors duration-150 active:scale-95 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",u={primary:"bg-slate-800 text-white hover:bg-slate-900",secondary:"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50",danger:"bg-red-50 text-red-600 hover:bg-red-100",ghost:"bg-transparent text-slate-500 hover:bg-slate-100",glass:"bg-white/70 border border-white/50 text-slate-800 hover:bg-white/80"};return h.jsx("button",{className:Af(o,u[l],n),...a,children:i})};const Ky=(...i)=>i.filter((n,l,a)=>!!n&&n.trim()!==""&&a.indexOf(n)===l).join(" ").trim();const pS=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const yS=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,l,a)=>a?a.toUpperCase():l.toLowerCase());const A0=i=>{const n=yS(i);return n.charAt(0).toUpperCase()+n.slice(1)};var bS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vS=i=>{for(const n in i)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1};const _S=N.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:a,className:o="",children:u,iconNode:f,...m},p)=>N.createElement("svg",{ref:p,...bS,width:n,height:n,stroke:i,strokeWidth:a?Number(l)*24/Number(n):l,className:Ky("lucide",o),...!u&&!vS(m)&&{"aria-hidden":"true"},...m},[...f.map(([y,x])=>N.createElement(y,x)),...Array.isArray(u)?u:[u]]));const Qe=(i,n)=>{const l=N.forwardRef(({className:a,...o},u)=>N.createElement(_S,{ref:u,iconNode:n,className:Ky(`lucide-${pS(A0(i))}`,`lucide-${i}`,a),...o}));return l.displayName=A0(i),l};const xS=[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]],Xy=Qe("arrow-up-to-line",xS);const SS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fy=Qe("check",SS);const TS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wS=Qe("chevron-down",TS);const CS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],NS=Qe("chevron-up",CS);const ES=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jd=Qe("clock",ES);const AS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]],Py=Qe("disc-3",AS);const MS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],RS=Qe("external-link",MS);const kS=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],jS=Qe("grip-vertical",kS);const DS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ja=Qe("info",DS);const OS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],zS=Qe("link",OS);const IS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],BS=Qe("loader-circle",IS);const LS=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],HS=Qe("maximize",LS);const US=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],bs=Qe("mic",US);const VS=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],GS=Qe("minimize",VS);const qS=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],tc=Qe("music",qS);const QS=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Zy=Qe("pause",QS);const YS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Do=Qe("play",YS);const KS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],XS=Qe("plus",KS);const FS=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],PS=Qe("refresh-ccw",FS);const ZS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],$S=Qe("rotate-ccw",ZS);const WS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Oo=Qe("search",WS);const JS=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eT=Qe("settings",JS);const tT=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],$y=Qe("skip-forward",tT);const nT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ef=Qe("sparkles",nT);const iT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],sT=Qe("square",iT);const lT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mf=Qe("trash-2",lT);const aT=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],M0=Qe("trophy",aT);const rT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],oT=Qe("user",rT);const cT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],uT=Qe("users",cT);const dT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],fT=Qe("volume-1",dT);const hT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],mT=Qe("volume-2",hT);const gT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],pT=Qe("volume-x",gT);const yT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ys=Qe("x",yT),bT=()=>{};var R0={};const Wy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const F=function(i,n){if(!i)throw kl(n)},kl=function(i){return new Error("Firebase Database ("+Wy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};const Jy=function(i){const n=[];let l=0;for(let a=0;a<i.length;a++){let o=i.charCodeAt(a);o<128?n[l++]=o:o<2048?(n[l++]=o>>6|192,n[l++]=o&63|128):(o&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++a)&1023),n[l++]=o>>18|240,n[l++]=o>>12&63|128,n[l++]=o>>6&63|128,n[l++]=o&63|128):(n[l++]=o>>12|224,n[l++]=o>>6&63|128,n[l++]=o&63|128)}return n},vT=function(i){const n=[];let l=0,a=0;for(;l<i.length;){const o=i[l++];if(o<128)n[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[l++];n[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[l++],f=i[l++],m=i[l++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;n[a++]=String.fromCharCode(55296+(p>>10)),n[a++]=String.fromCharCode(56320+(p&1023))}else{const u=i[l++],f=i[l++];n[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return n.join("")},Rf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,n){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const l=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,x=u>>2,v=(u&3)<<4|m>>4;let _=(m&15)<<2|y>>6,T=y&63;p||(T=64,f||(_=64)),a.push(l[x],l[v],l[_],l[T])}return a.join("")},encodeString(i,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(i):this.encodeByteArray(Jy(i),n)},decodeString(i,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(i):vT(this.decodeStringToByteArray(i,n))},decodeStringToByteArray(i,n){this.init_();const l=n?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<i.length;){const u=l[i.charAt(o++)],m=o<i.length?l[i.charAt(o)]:0;++o;const y=o<i.length?l[i.charAt(o)]:64;++o;const v=o<i.length?l[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||v==null)throw new _T;const _=u<<2|m>>4;if(a.push(_),y!==64){const T=m<<4&240|y>>2;if(a.push(T),v!==64){const O=y<<6&192|v;a.push(O)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class _T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eb=function(i){const n=Jy(i);return Rf.encodeByteArray(n,!0)},zo=function(i){return eb(i).replace(/\./g,"")},tf=function(i){try{return Rf.decodeString(i,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function xT(i){return tb(void 0,i)}function tb(i,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:const l=n;return new Date(l.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return n}for(const l in n)!n.hasOwnProperty(l)||!ST(l)||(i[l]=tb(i[l],n[l]));return i}function ST(i){return i!=="__proto__"}function TT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wT=()=>TT().__FIREBASE_DEFAULTS__,CT=()=>{if(typeof process>"u"||typeof R0>"u")return;const i=R0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},NT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=i&&tf(i[1]);return n&&JSON.parse(n)},nb=()=>{try{return bT()||wT()||CT()||NT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ET=i=>nb()?.emulatorHosts?.[i],AT=i=>{const n=ET(i);if(!n)return;const l=n.lastIndexOf(":");if(l<=0||l+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const a=parseInt(n.substring(l+1),10);return n[0]==="["?[n.substring(1,l-1),a]:[n.substring(0,l),a]},ib=()=>nb()?.config;class ir{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,l)=>{this.resolve=n,this.reject=l})}wrapCallback(n){return(l,a)=>{l?this.reject(l):this.resolve(a),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(l):n(l,a))}}}function kf(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MT(i){return(await fetch(i,{credentials:"include"})).ok}function RT(i,n){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const l={alg:"none",type:"JWT"},a=n||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[zo(JSON.stringify(l)),zo(JSON.stringify(f)),""].join(".")}const La={};function kT(){const i={prod:[],emulator:[]};for(const n of Object.keys(La))La[n]?i.emulator.push(n):i.prod.push(n);return i}function jT(i){let n=document.getElementById(i),l=!1;return n||(n=document.createElement("div"),n.setAttribute("id",i),l=!0),{created:l,element:n}}let k0=!1;function DT(i,n){if(typeof window>"u"||typeof document>"u"||!kf(window.location.host)||La[i]===n||La[i]||k0)return;La[i]=n;function l(_){return`__firebase__banner__${_}`}const a="__firebase__banner",u=kT().prod.length>0;function f(){const _=document.getElementById(a);_&&_.remove()}function m(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function p(_,T){_.setAttribute("width","24"),_.setAttribute("id",T),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function y(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{k0=!0,f()},_}function x(_,T){_.setAttribute("id",T),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=jT(a),T=l("text"),O=document.getElementById(T)||document.createElement("span"),D=l("learnmore"),V=document.getElementById(D)||document.createElement("a"),X=l("preprendIcon"),P=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const q=_.element;m(q),x(V,D);const W=y();p(P,X),q.append(P,O,V,W),document.body.appendChild(q)}u?(O.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function OT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(OT())}function zT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IT(){return Wy.NODE_ADMIN===!0}function BT(){try{return typeof indexedDB=="object"}catch{return!1}}function LT(){return new Promise((i,n)=>{try{let l=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),l||self.indexedDB.deleteDatabase(a),i(!0)},o.onupgradeneeded=()=>{l=!1},o.onerror=()=>{n(o.error?.message||"")}}catch(l){n(l)}})}const HT="FirebaseError";class sr extends Error{constructor(n,l,a){super(l),this.code=n,this.customData=a,this.name=HT,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lb.prototype.create)}}class lb{constructor(n,l,a){this.service=n,this.serviceName=l,this.errors=a}create(n,...l){const a=l[0]||{},o=`${this.service}/${n}`,u=this.errors[n],f=u?UT(u,a):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new sr(o,m,a)}}function UT(i,n){return i.replace(VT,(l,a)=>{const o=n[a];return o!=null?String(o):`<${a}?>`})}const VT=/\{\$([^}]+)}/g;function Xa(i){return JSON.parse(i)}function Ot(i){return JSON.stringify(i)}const ab=function(i){let n={},l={},a={},o="";try{const u=i.split(".");n=Xa(tf(u[0])||""),l=Xa(tf(u[1])||""),o=u[2],a=l.d||{},delete l.d}catch{}return{header:n,claims:l,data:a,signature:o}},GT=function(i){const n=ab(i),l=n.claims;return!!l&&typeof l=="object"&&l.hasOwnProperty("iat")},qT=function(i){const n=ab(i).claims;return typeof n=="object"&&n.admin===!0};function Vn(i,n){return Object.prototype.hasOwnProperty.call(i,n)}function xl(i,n){if(Object.prototype.hasOwnProperty.call(i,n))return i[n]}function j0(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}function Io(i,n,l){const a={};for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=n.call(l,i[o],o,i));return a}function Bo(i,n){if(i===n)return!0;const l=Object.keys(i),a=Object.keys(n);for(const o of l){if(!a.includes(o))return!1;const u=i[o],f=n[o];if(D0(u)&&D0(f)){if(!Bo(u,f))return!1}else if(u!==f)return!1}for(const o of a)if(!l.includes(o))return!1;return!0}function D0(i){return i!==null&&typeof i=="object"}function QT(i){const n=[];for(const[l,a]of Object.entries(i))Array.isArray(a)?a.forEach(o=>{n.push(encodeURIComponent(l)+"="+encodeURIComponent(o))}):n.push(encodeURIComponent(l)+"="+encodeURIComponent(a));return n.length?"&"+n.join("&"):""}class YT{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,l){l||(l=0);const a=this.W_;if(typeof n=="string")for(let v=0;v<16;v++)a[v]=n.charCodeAt(l)<<24|n.charCodeAt(l+1)<<16|n.charCodeAt(l+2)<<8|n.charCodeAt(l+3),l+=4;else for(let v=0;v<16;v++)a[v]=n[l]<<24|n[l+1]<<16|n[l+2]<<8|n[l+3],l+=4;for(let v=16;v<80;v++){const _=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=(_<<1|_>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],f=this.chain_[2],m=this.chain_[3],p=this.chain_[4],y,x;for(let v=0;v<80;v++){v<40?v<20?(y=m^u&(f^m),x=1518500249):(y=u^f^m,x=1859775393):v<60?(y=u&f|m&(u|f),x=2400959708):(y=u^f^m,x=3395469782);const _=(o<<5|o>>>27)+y+p+x+a[v]&4294967295;p=m,m=f,f=(u<<30|u>>>2)&4294967295,u=o,o=_}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(n,l){if(n==null)return;l===void 0&&(l=n.length);const a=l-this.blockSize;let o=0;const u=this.buf_;let f=this.inbuf_;for(;o<l;){if(f===0)for(;o<=a;)this.compress_(n,o),o+=this.blockSize;if(typeof n=="string"){for(;o<l;)if(u[f]=n.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}else for(;o<l;)if(u[f]=n[o],++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}this.inbuf_=f,this.total_+=l}digest(){const n=[];let l=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=l&255,l/=256;this.compress_(this.buf_);let a=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)n[a]=this.chain_[o]>>u&255,++a;return n}}function nc(i,n){return`${i} failed: ${n} argument `}const KT=function(i){const n=[];let l=0;for(let a=0;a<i.length;a++){let o=i.charCodeAt(a);if(o>=55296&&o<=56319){const u=o-55296;a++,F(a<i.length,"Surrogate pair missing trail surrogate.");const f=i.charCodeAt(a)-56320;o=65536+(u<<10)+f}o<128?n[l++]=o:o<2048?(n[l++]=o>>6|192,n[l++]=o&63|128):o<65536?(n[l++]=o>>12|224,n[l++]=o>>6&63|128,n[l++]=o&63|128):(n[l++]=o>>18|240,n[l++]=o>>12&63|128,n[l++]=o>>6&63|128,n[l++]=o&63|128)}return n},ic=function(i){let n=0;for(let l=0;l<i.length;l++){const a=i.charCodeAt(l);a<128?n++:a<2048?n+=2:a>=55296&&a<=56319?(n+=4,l++):n+=3}return n};function Ss(i){return i&&i._delegate?i._delegate:i}class Fa{constructor(n,l,a){this.name=n,this.instanceFactory=l,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}const hs="[DEFAULT]";class XT{constructor(n,l){this.name=n,this.container=l,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const l=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(l)){const a=new ir;if(this.instancesDeferred.set(l,a),this.isInitialized(l)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:l});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(l).promise}getImmediate(n){const l=this.normalizeInstanceIdentifier(n?.identifier),a=n?.optional??!1;if(this.isInitialized(l)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:l})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(PT(n))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[l,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(l);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(n=hs){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(l=>"INTERNAL"in l).map(l=>l.INTERNAL.delete()),...n.filter(l=>"_delete"in l).map(l=>l._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=hs){return this.instances.has(n)}getOptions(n=hs){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:l={}}=n,a=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:l});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);a===m&&f.resolve(o)}return o}onInit(n,l){const a=this.normalizeInstanceIdentifier(l),o=this.onInitCallbacks.get(a)??new Set;o.add(n),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&n(u,a),()=>{o.delete(n)}}invokeOnInitCallbacks(n,l){const a=this.onInitCallbacks.get(l);if(a)for(const o of a)try{o(n,l)}catch{}}getOrInitializeService({instanceIdentifier:n,options:l={}}){let a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:FT(n),options:l}),this.instances.set(n,a),this.instancesOptions.set(n,l),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch{}return a||null}normalizeInstanceIdentifier(n=hs){return this.component?this.component.multipleInstances?n:hs:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FT(i){return i===hs?void 0:i}function PT(i){return i.instantiationMode==="EAGER"}class ZT{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const l=this.getProvider(n.name);if(l.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);l.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const l=new XT(n,this);return this.providers.set(n,l),l}getProviders(){return Array.from(this.providers.values())}}var dt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(dt||(dt={}));const $T={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},WT=dt.INFO,JT={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},ew=(i,n,...l)=>{if(n<i.logLevel)return;const a=new Date().toISOString(),o=JT[n];if(o)console[o](`[${a}]  ${i.name}:`,...l);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class rb{constructor(n){this.name=n,this._logLevel=WT,this._logHandler=ew,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in dt))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?$T[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...n),this._logHandler(this,dt.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...n),this._logHandler(this,dt.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...n),this._logHandler(this,dt.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...n),this._logHandler(this,dt.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...n),this._logHandler(this,dt.ERROR,...n)}}const tw=(i,n)=>n.some(l=>i instanceof l);let O0,z0;function nw(){return O0||(O0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iw(){return z0||(z0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ob=new WeakMap,nf=new WeakMap,cb=new WeakMap,zd=new WeakMap,jf=new WeakMap;function sw(i){const n=new Promise((l,a)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{l(Hi(i.result)),o()},f=()=>{a(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return n.then(l=>{l instanceof IDBCursor&&ob.set(l,i)}).catch(()=>{}),jf.set(n,i),n}function lw(i){if(nf.has(i))return;const n=new Promise((l,a)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{l(),o()},f=()=>{a(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});nf.set(i,n)}let sf={get(i,n,l){if(i instanceof IDBTransaction){if(n==="done")return nf.get(i);if(n==="objectStoreNames")return i.objectStoreNames||cb.get(i);if(n==="store")return l.objectStoreNames[1]?void 0:l.objectStore(l.objectStoreNames[0])}return Hi(i[n])},set(i,n,l){return i[n]=l,!0},has(i,n){return i instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in i}};function aw(i){sf=i(sf)}function rw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...l){const a=i.call(Id(this),n,...l);return cb.set(a,n.sort?n.sort():[n]),Hi(a)}:iw().includes(i)?function(...n){return i.apply(Id(this),n),Hi(ob.get(this))}:function(...n){return Hi(i.apply(Id(this),n))}}function ow(i){return typeof i=="function"?rw(i):(i instanceof IDBTransaction&&lw(i),tw(i,nw())?new Proxy(i,sf):i)}function Hi(i){if(i instanceof IDBRequest)return sw(i);if(zd.has(i))return zd.get(i);const n=ow(i);return n!==i&&(zd.set(i,n),jf.set(n,i)),n}const Id=i=>jf.get(i);function cw(i,n,{blocked:l,upgrade:a,blocking:o,terminated:u}={}){const f=indexedDB.open(i,n),m=Hi(f);return a&&f.addEventListener("upgradeneeded",p=>{a(Hi(f.result),p.oldVersion,p.newVersion,Hi(f.transaction),p)}),l&&f.addEventListener("blocked",p=>l(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const uw=["get","getKey","getAll","getAllKeys","count"],dw=["put","add","delete","clear"],Bd=new Map;function I0(i,n){if(!(i instanceof IDBDatabase&&!(n in i)&&typeof n=="string"))return;if(Bd.get(n))return Bd.get(n);const l=n.replace(/FromIndex$/,""),a=n!==l,o=dw.includes(l);if(!(l in(a?IDBIndex:IDBObjectStore).prototype)||!(o||uw.includes(l)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(m.shift())),(await Promise.all([y[l](...m),o&&p.done]))[0]};return Bd.set(n,u),u}aw(i=>({...i,get:(n,l,a)=>I0(n,l)||i.get(n,l,a),has:(n,l)=>!!I0(n,l)||i.has(n,l)}));class fw{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(l=>{if(hw(l)){const a=l.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(l=>l).join(" ")}}function hw(i){return i.getComponent()?.type==="VERSION"}const lf="@firebase/app",B0="0.14.8";const di=new rb("@firebase/app"),mw="@firebase/app-compat",gw="@firebase/analytics-compat",pw="@firebase/analytics",yw="@firebase/app-check-compat",bw="@firebase/app-check",vw="@firebase/auth",_w="@firebase/auth-compat",xw="@firebase/database",Sw="@firebase/data-connect",Tw="@firebase/database-compat",ww="@firebase/functions",Cw="@firebase/functions-compat",Nw="@firebase/installations",Ew="@firebase/installations-compat",Aw="@firebase/messaging",Mw="@firebase/messaging-compat",Rw="@firebase/performance",kw="@firebase/performance-compat",jw="@firebase/remote-config",Dw="@firebase/remote-config-compat",Ow="@firebase/storage",zw="@firebase/storage-compat",Iw="@firebase/firestore",Bw="@firebase/ai",Lw="@firebase/firestore-compat",Hw="firebase",Uw="12.9.0";const af="[DEFAULT]",Vw={[lf]:"fire-core",[mw]:"fire-core-compat",[pw]:"fire-analytics",[gw]:"fire-analytics-compat",[bw]:"fire-app-check",[yw]:"fire-app-check-compat",[vw]:"fire-auth",[_w]:"fire-auth-compat",[xw]:"fire-rtdb",[Sw]:"fire-data-connect",[Tw]:"fire-rtdb-compat",[ww]:"fire-fn",[Cw]:"fire-fn-compat",[Nw]:"fire-iid",[Ew]:"fire-iid-compat",[Aw]:"fire-fcm",[Mw]:"fire-fcm-compat",[Rw]:"fire-perf",[kw]:"fire-perf-compat",[jw]:"fire-rc",[Dw]:"fire-rc-compat",[Ow]:"fire-gcs",[zw]:"fire-gcs-compat",[Iw]:"fire-fst",[Lw]:"fire-fst-compat",[Bw]:"fire-vertex","fire-js":"fire-js",[Hw]:"fire-js-all"};const Lo=new Map,Gw=new Map,rf=new Map;function L0(i,n){try{i.container.addComponent(n)}catch(l){di.debug(`Component ${n.name} failed to register with FirebaseApp ${i.name}`,l)}}function Ho(i){const n=i.name;if(rf.has(n))return di.debug(`There were multiple attempts to register component ${n}.`),!1;rf.set(n,i);for(const l of Lo.values())L0(l,i);for(const l of Gw.values())L0(l,i);return!0}function qw(i,n){const l=i.container.getProvider("heartbeat").getImmediate({optional:!0});return l&&l.triggerHeartbeat(),i.container.getProvider(n)}function Qw(i){return i==null?!1:i.settings!==void 0}const Yw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new lb("app","Firebase",Yw);class Kw{constructor(n,l,a){this._isDeleted=!1,this._options={...n},this._config={...l},this._name=l.name,this._automaticDataCollectionEnabled=l.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}const Xw=Uw;function ub(i,n={}){let l=i;typeof n!="object"&&(n={name:n});const a={name:af,automaticDataCollectionEnabled:!0,...n},o=a.name;if(typeof o!="string"||!o)throw Ui.create("bad-app-name",{appName:String(o)});if(l||(l=ib()),!l)throw Ui.create("no-options");const u=Lo.get(o);if(u){if(Bo(l,u.options)&&Bo(a,u.config))return u;throw Ui.create("duplicate-app",{appName:o})}const f=new ZT(o);for(const p of rf.values())f.addComponent(p);const m=new Kw(l,a,f);return Lo.set(o,m),m}function Fw(i=af){const n=Lo.get(i);if(!n&&i===af&&ib())return ub();if(!n)throw Ui.create("no-app",{appName:i});return n}function gl(i,n,l){let a=Vw[i]??i;l&&(a+=`-${l}`);const o=a.match(/\s|\//),u=n.match(/\s|\//);if(o||u){const f=[`Unable to register library "${a}" with version "${n}":`];o&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${n}" contains illegal characters (whitespace or "/")`),di.warn(f.join(" "));return}Ho(new Fa(`${a}-version`,()=>({library:a,version:n}),"VERSION"))}const Pw="firebase-heartbeat-database",Zw=1,Pa="firebase-heartbeat-store";let Ld=null;function db(){return Ld||(Ld=cw(Pw,Zw,{upgrade:(i,n)=>{switch(n){case 0:try{i.createObjectStore(Pa)}catch(l){console.warn(l)}}}}).catch(i=>{throw Ui.create("idb-open",{originalErrorMessage:i.message})})),Ld}async function $w(i){try{const l=(await db()).transaction(Pa),a=await l.objectStore(Pa).get(fb(i));return await l.done,a}catch(n){if(n instanceof sr)di.warn(n.message);else{const l=Ui.create("idb-get",{originalErrorMessage:n?.message});di.warn(l.message)}}}async function H0(i,n){try{const a=(await db()).transaction(Pa,"readwrite");await a.objectStore(Pa).put(n,fb(i)),await a.done}catch(l){if(l instanceof sr)di.warn(l.message);else{const a=Ui.create("idb-set",{originalErrorMessage:l?.message});di.warn(a.message)}}}function fb(i){return`${i.name}!${i.options.appId}`}const Ww=1024,Jw=30;class eC{constructor(n){this.container=n,this._heartbeatsCache=null;const l=this.container.getProvider("app").getImmediate();this._storage=new nC(l),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=U0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats.length>Jw){const o=iC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){di.warn(n)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=U0(),{heartbeatsToSend:l,unsentEntries:a}=tC(this._heartbeatsCache.heartbeats),o=zo(JSON.stringify({version:2,heartbeats:l}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return di.warn(n),""}}}function U0(){return new Date().toISOString().substring(0,10)}function tC(i,n=Ww){const l=[];let a=i.slice();for(const o of i){const u=l.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),V0(l)>n){u.dates.pop();break}}else if(l.push({agent:o.agent,dates:[o.date]}),V0(l)>n){l.pop();break}a=a.slice(1)}return{heartbeatsToSend:l,unsentEntries:a}}class nC{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BT()?LT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const l=await $w(this.app);return l?.heartbeats?l:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){if(await this._canUseIndexedDBPromise){const a=await this.read();return H0(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){if(await this._canUseIndexedDBPromise){const a=await this.read();return H0(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...n.heartbeats]})}else return}}function V0(i){return zo(JSON.stringify({version:2,heartbeats:i})).length}function iC(i){if(i.length===0)return-1;let n=0,l=i[0].date;for(let a=1;a<i.length;a++)i[a].date<l&&(l=i[a].date,n=a);return n}function sC(i){Ho(new Fa("platform-logger",n=>new fw(n),"PRIVATE")),Ho(new Fa("heartbeat",n=>new eC(n),"PRIVATE")),gl(lf,B0,i),gl(lf,B0,"esm2020"),gl("fire-js","")}sC("");var G0={};const q0="@firebase/database",Q0="1.1.0";let hb="";function mb(i){hb=i}class lC{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,l){l==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),Ot(l))}get(n){const l=this.domStorage_.getItem(this.prefixedName_(n));return l==null?null:Xa(l)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class aC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,l){l==null?delete this.cache_[n]:this.cache_[n]=l}get(n){return Vn(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const gb=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const n=window[i];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new lC(n)}}catch{}return new aC},ps=gb("localStorage"),rC=gb("sessionStorage");const pl=new rb("@firebase/database"),oC=(function(){let i=1;return function(){return i++}})(),pb=function(i){const n=KT(i),l=new YT;l.update(n);const a=l.digest();return Rf.encodeByteArray(a)},lr=function(...i){let n="";for(let l=0;l<i.length;l++){const a=i[l];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?n+=lr.apply(null,a):typeof a=="object"?n+=Ot(a):n+=a,n+=" "}return n};let Ha=null,Y0=!0;const cC=function(i,n){F(!0,"Can't turn on custom loggers persistently."),pl.logLevel=dt.VERBOSE,Ha=pl.log.bind(pl)},Kt=function(...i){if(Y0===!0&&(Y0=!1,Ha===null&&rC.get("logging_enabled")===!0&&cC()),Ha){const n=lr.apply(null,i);Ha(n)}},ar=function(i){return function(...n){Kt(i,...n)}},of=function(...i){const n="FIREBASE INTERNAL ERROR: "+lr(...i);pl.error(n)},fi=function(...i){const n=`FIREBASE FATAL ERROR: ${lr(...i)}`;throw pl.error(n),new Error(n)},Zt=function(...i){const n="FIREBASE WARNING: "+lr(...i);pl.warn(n)},uC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Df=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},dC=function(i){if(document.readyState==="complete")i();else{let n=!1;const l=function(){if(!document.body){setTimeout(l,Math.floor(10));return}n||(n=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&l()}),window.attachEvent("onload",l))}},Sl="[MIN_NAME]",vs="[MAX_NAME]",Ts=function(i,n){if(i===n)return 0;if(i===Sl||n===vs)return-1;if(n===Sl||i===vs)return 1;{const l=K0(i),a=K0(n);return l!==null?a!==null?l-a===0?i.length-n.length:l-a:-1:a!==null?1:i<n?-1:1}},fC=function(i,n){return i===n?0:i<n?-1:1},Da=function(i,n){if(n&&i in n)return n[i];throw new Error("Missing required key ("+i+") in object: "+Ot(n))},Of=function(i){if(typeof i!="object"||i===null)return Ot(i);const n=[];for(const a in i)n.push(a);n.sort();let l="{";for(let a=0;a<n.length;a++)a!==0&&(l+=","),l+=Ot(n[a]),l+=":",l+=Of(i[n[a]]);return l+="}",l},yb=function(i,n){const l=i.length;if(l<=n)return[i];const a=[];for(let o=0;o<l;o+=n)o+n>l?a.push(i.substring(o,l)):a.push(i.substring(o,o+n));return a};function Xt(i,n){for(const l in i)i.hasOwnProperty(l)&&n(l,i[l])}const bb=function(i){F(!Df(i),"Invalid JSON number");const n=11,l=52,a=(1<<n-1)-1;let o,u,f,m,p;i===0?(u=0,f=0,o=1/i===-1/0?1:0):(o=i<0,i=Math.abs(i),i>=Math.pow(2,1-a)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),a),u=m+a,f=Math.round(i*Math.pow(2,l-m)-Math.pow(2,l))):(u=0,f=Math.round(i/Math.pow(2,1-a-l))));const y=[];for(p=l;p;p-=1)y.push(f%2?1:0),f=Math.floor(f/2);for(p=n;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);y.push(o?1:0),y.reverse();const x=y.join("");let v="";for(p=0;p<64;p+=8){let _=parseInt(x.substr(p,8),2).toString(16);_.length===1&&(_="0"+_),v=v+_}return v.toLowerCase()},hC=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},mC=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function gC(i,n){let l="Unknown Error";i==="too_big"?l="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?l="Client doesn't have permission to access the desired data.":i==="unavailable"&&(l="The service is unavailable");const a=new Error(i+" at "+n._path.toString()+": "+l);return a.code=i.toUpperCase(),a}const pC=new RegExp("^-?(0*)\\d{1,10}$"),yC=-2147483648,bC=2147483647,K0=function(i){if(pC.test(i)){const n=Number(i);if(n>=yC&&n<=bC)return n}return null},jl=function(i){try{i()}catch(n){setTimeout(()=>{const l=n.stack||"";throw Zt("Exception was thrown by user callback.",l),n},Math.floor(0))}},vC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ua=function(i,n){const l=setTimeout(i,n);return typeof l=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):typeof l=="object"&&l.unref&&l.unref(),l};class _C{constructor(n,l){this.appCheckProvider=l,this.appName=n.name,Qw(n)&&n.settings.appCheckToken&&(this.serverAppAppCheckToken=n.settings.appCheckToken),this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(a=>this.appCheck=a)}getToken(n){if(this.serverAppAppCheckToken){if(n)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(n):new Promise((l,a)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(l,a):l(null)},0)})}addTokenChangeListener(n){this.appCheckProvider?.get().then(l=>l.addTokenListener(n))}notifyForInvalidToken(){Zt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xC{constructor(n,l,a){this.appName_=n,this.firebaseOptions_=l,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(o=>this.auth_=o)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(l=>l&&l.code==="auth/token-not-initialized"?(Kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,a)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(l,a):l(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(l=>l.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(l=>l.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zt(n)}}class ko{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}ko.OWNER="owner";const zf="5",vb="v",_b="s",xb="r",Sb="f",Tb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wb="ls",Cb="p",cf="ac",Nb="websocket",Eb="long_polling";class Ab{constructor(n,l,a,o,u=!1,f="",m=!1,p=!1,y=null){this.secure=l,this.namespace=a,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=f,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=p,this.emulatorOptions=y,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ps.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&ps.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){const n=this.secure?"https://":"http://",l=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${l}`}}function SC(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function Mb(i,n,l){F(typeof n=="string","typeof type must == string"),F(typeof l=="object","typeof params must == object");let a;if(n===Nb)a=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(n===Eb)a=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);SC(i)&&(l.ns=i.namespace);const o=[];return Xt(l,(u,f)=>{o.push(u+"="+f)}),a+o.join("&")}class TC{constructor(){this.counters_={}}incrementCounter(n,l=1){Vn(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=l}get(){return xT(this.counters_)}}const Hd={},Ud={};function If(i){const n=i.toString();return Hd[n]||(Hd[n]=new TC),Hd[n]}function wC(i,n){const l=i.toString();return Ud[l]||(Ud[l]=n()),Ud[l]}class CC{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,l){this.closeAfterResponse=n,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,l){for(this.pendingResponses[n]=l;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<a.length;++o)a[o]&&jl(()=>{this.onMessage_(a[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const X0="start",NC="close",EC="pLPCommand",AC="pRTLPCB",Rb="id",kb="pw",jb="ser",MC="cb",RC="seg",kC="ts",jC="d",DC="dframe",Db=1870,Ob=30,OC=Db-Ob,zC=25e3,IC=3e4;class ml{constructor(n,l,a,o,u,f,m){this.connId=n,this.repoInfo=l,this.applicationId=a,this.appCheckToken=o,this.authToken=u,this.transportSessionId=f,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ar(n),this.stats_=If(l),this.urlFn=p=>(this.appCheckToken&&(p[cf]=this.appCheckToken),Mb(l,Eb,p))}open(n,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new CC(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IC)),dC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bf((...u)=>{const[f,m,p,y,x]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===X0)this.id=m,this.password=p;else if(f===NC)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...u)=>{const[f,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(f,m)},()=>{this.onClosed_()},this.urlFn);const a={};a[X0]="t",a[jb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[MC]=this.scriptTagHolder.uniqueCallbackIdentifier),a[vb]=zf,this.transportSessionId&&(a[_b]=this.transportSessionId),this.lastSessionId&&(a[wb]=this.lastSessionId),this.applicationId&&(a[Cb]=this.applicationId),this.appCheckToken&&(a[cf]=this.appCheckToken),typeof location<"u"&&location.hostname&&Tb.test(location.hostname)&&(a[xb]=Sb);const o=this.urlFn(a);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ml.forceAllow_=!0}static forceDisallow(){ml.forceDisallow_=!0}static isAvailable(){return ml.forceAllow_?!0:!ml.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hC()&&!mC()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const l=Ot(n);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const a=eb(l),o=yb(a,OC);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(n,l){this.myDisconnFrame=document.createElement("iframe");const a={};a[DC]="t",a[Rb]=n,a[kb]=l,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const l=Ot(n).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Bf{constructor(n,l,a,o){this.onDisconnect=a,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=oC(),window[EC+this.uniqueCallbackIdentifier]=n,window[AC+this.uniqueCallbackIdentifier]=l,this.myIFrame=Bf.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(m){Kt("frame writing exception"),m.stack&&Kt(m.stack),Kt(m)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Kt("No IE domain setting required")}catch{const a=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,l){for(this.myID=n,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n[Rb]=this.myID,n[kb]=this.myPW,n[jb]=this.currentSerial;let l=this.urlFn(n),a="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ob+a.length<=Db;){const f=this.pendingSegs.shift();a=a+"&"+RC+o+"="+f.seg+"&"+kC+o+"="+f.ts+"&"+jC+o+"="+f.d,o++}return l=l+a,this.addLongPollTag_(l,this.currentSerial),!0}else return!1}enqueueSegment(n,l,a){this.pendingSegs.push({seg:n,ts:l,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(n,l){this.outstandingRequests.add(l);const a=()=>{this.outstandingRequests.delete(l),this.newRequest_()},o=setTimeout(a,Math.floor(zC)),u=()=>{clearTimeout(o),a()};this.addTag(n,u)}addTag(n,l){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=n,a.onload=a.onreadystatechange=function(){const o=a.readyState;(!o||o==="loaded"||o==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),l())},a.onerror=()=>{Kt("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}const BC=16384,LC=45e3;let Uo=null;typeof MozWebSocket<"u"?Uo=MozWebSocket:typeof WebSocket<"u"&&(Uo=WebSocket);class kn{constructor(n,l,a,o,u,f,m){this.connId=n,this.applicationId=a,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ar(this.connId),this.stats_=If(l),this.connURL=kn.connectionURL_(l,f,m,o,a),this.nodeAdmin=l.nodeAdmin}static connectionURL_(n,l,a,o,u){const f={};return f[vb]=zf,typeof location<"u"&&location.hostname&&Tb.test(location.hostname)&&(f[xb]=Sb),l&&(f[_b]=l),a&&(f[wb]=a),o&&(f[cf]=o),u&&(f[Cb]=u),Mb(n,Nb,f)}open(n,l){this.onDisconnect=l,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ps.set("previous_websocket_failure",!0);try{let a;IT(),this.mySock=new Uo(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const o=a.message||a.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const o=a.message||a.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){kn.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const l=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(l);a&&a.length>1&&parseFloat(a[1])<4.4&&(n=!0)}return!n&&Uo!==null&&!kn.forceDisallow_}static previouslyFailed(){return ps.isInMemoryStorage||ps.get("previous_websocket_failure")===!0}markConnectionHealthy(){ps.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const l=this.frames.join("");this.frames=null;const a=Xa(l);this.onMessage(a)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(F(this.frames===null,"We already have a frame buffer"),n.length<=6){const l=Number(n);if(!isNaN(l))return this.handleNewFrameCount_(l),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;const l=n.data;if(this.bytesReceived+=l.length,this.stats_.incrementCounter("bytes_received",l.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(l);else{const a=this.extractFrameCount_(l);a!==null&&this.appendFrame_(a)}}send(n){this.resetKeepAlive();const l=Ot(n);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const a=yb(l,BC);a.length>1&&this.sendString_(String(a.length));for(let o=0;o<a.length;o++)this.sendString_(a[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(LC))}sendString_(n){try{this.mySock.send(n)}catch(l){this.log_("Exception thrown from WebSocket.send():",l.message||l.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}kn.responsesRequiredToBeHealthy=2;kn.healthyTimeout=3e4;class Za{static get ALL_TRANSPORTS(){return[ml,kn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){const l=kn&&kn.isAvailable();let a=l&&!kn.previouslyFailed();if(n.webSocketOnly&&(l||Zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[kn];else{const o=this.transports_=[];for(const u of Za.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);Za.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Za.globalTransportInitialized_=!1;const HC=6e4,UC=5e3,VC=10*1024,GC=100*1024,Vd="t",F0="d",qC="s",P0="r",QC="e",Z0="o",$0="a",W0="n",J0="p",YC="h";class KC{constructor(n,l,a,o,u,f,m,p,y,x){this.id=n,this.repoInfo_=l,this.applicationId_=a,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=f,this.onReady_=m,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ar("c:"+this.id+":"),this.transportManager_=new Za(l),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,a)},Math.floor(0));const o=n.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ua(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>GC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>VC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return l=>{n===this.conn_?this.onConnectionLost_(l):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return l=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(l):n===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(n){const l={t:"d",d:n};this.sendData_(l)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(Vd in n){const l=n[Vd];l===$0?this.upgradeIfSecondaryHealthy_():l===P0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):l===Z0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const l=Da("t",n),a=Da("d",n);if(l==="c")this.onSecondaryControl_(a);else if(l==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+l)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:J0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:$0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:W0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const l=Da("t",n),a=Da("d",n);l==="c"?this.onControl_(a):l==="d"&&this.onDataMessage_(a)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const l=Da(Vd,n);if(F0 in n){const a=n[F0];if(l===YC){const o={...a};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(l===W0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else l===qC?this.onConnectionShutdown_(a):l===P0?this.onReset_(a):l===QC?of("Server Error: "+a):l===Z0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):of("Unknown control packet command: "+l)}}onHandshake_(n){const l=n.ts,a=n.v,o=n.h;this.sessionId=n.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),zf!==a&&Zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,a),Ua(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(HC))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,l){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ua(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(UC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:J0,d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ps.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class zb{put(n,l,a,o){}merge(n,l,a,o){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,l,a){}onDisconnectMerge(n,l,a){}onDisconnectCancel(n,l){}reportStats(n){}}class Ib{constructor(n){this.allowedEvents_=n,this.listeners_={},F(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...l){if(Array.isArray(this.listeners_[n])){const a=[...this.listeners_[n]];for(let o=0;o<a.length;o++)a[o].callback.apply(a[o].context,l)}}on(n,l,a){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:l,context:a});const o=this.getInitialEvent(n);o&&l.apply(a,o)}off(n,l,a){this.validateEventType_(n);const o=this.listeners_[n]||[];for(let u=0;u<o.length;u++)if(o[u].callback===l&&(!a||a===o[u].context)){o.splice(u,1);return}}validateEventType_(n){F(this.allowedEvents_.find(l=>l===n),"Unknown event: "+n)}}class Vo extends Ib{static getInstance(){return new Vo}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sb()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(n){return F(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}const ey=32,ty=768;class lt{constructor(n,l){if(l===void 0){this.pieces_=n.split("/");let a=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[a]=this.pieces_[o],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=l}toString(){let n="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)this.pieces_[l]!==""&&(n+="/"+this.pieces_[l]);return n||"/"}}function Ze(){return new lt("")}function De(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function qi(i){return i.pieces_.length-i.pieceNum_}function ft(i){let n=i.pieceNum_;return n<i.pieces_.length&&n++,new lt(i.pieces_,n)}function Lf(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function XC(i){let n="";for(let l=i.pieceNum_;l<i.pieces_.length;l++)i.pieces_[l]!==""&&(n+="/"+encodeURIComponent(String(i.pieces_[l])));return n||"/"}function $a(i,n=0){return i.pieces_.slice(i.pieceNum_+n)}function Bb(i){if(i.pieceNum_>=i.pieces_.length)return null;const n=[];for(let l=i.pieceNum_;l<i.pieces_.length-1;l++)n.push(i.pieces_[l]);return new lt(n,0)}function vt(i,n){const l=[];for(let a=i.pieceNum_;a<i.pieces_.length;a++)l.push(i.pieces_[a]);if(n instanceof lt)for(let a=n.pieceNum_;a<n.pieces_.length;a++)l.push(n.pieces_[a]);else{const a=n.split("/");for(let o=0;o<a.length;o++)a[o].length>0&&l.push(a[o])}return new lt(l,0)}function Be(i){return i.pieceNum_>=i.pieces_.length}function Pt(i,n){const l=De(i),a=De(n);if(l===null)return n;if(l===a)return Pt(ft(i),ft(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+i+")")}function FC(i,n){const l=$a(i,0),a=$a(n,0);for(let o=0;o<l.length&&o<a.length;o++){const u=Ts(l[o],a[o]);if(u!==0)return u}return l.length===a.length?0:l.length<a.length?-1:1}function Hf(i,n){if(qi(i)!==qi(n))return!1;for(let l=i.pieceNum_,a=n.pieceNum_;l<=i.pieces_.length;l++,a++)if(i.pieces_[l]!==n.pieces_[a])return!1;return!0}function Nn(i,n){let l=i.pieceNum_,a=n.pieceNum_;if(qi(i)>qi(n))return!1;for(;l<i.pieces_.length;){if(i.pieces_[l]!==n.pieces_[a])return!1;++l,++a}return!0}class PC{constructor(n,l){this.errorPrefix_=l,this.parts_=$a(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=ic(this.parts_[a]);Lb(this)}}function ZC(i,n){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(n),i.byteLength_+=ic(n),Lb(i)}function $C(i){const n=i.parts_.pop();i.byteLength_-=ic(n),i.parts_.length>0&&(i.byteLength_-=1)}function Lb(i){if(i.byteLength_>ty)throw new Error(i.errorPrefix_+"has a key path longer than "+ty+" bytes ("+i.byteLength_+").");if(i.parts_.length>ey)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ey+") or object contains a cycle "+ms(i))}function ms(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}class Uf extends Ib{static getInstance(){return new Uf}constructor(){super(["visible"]);let n,l;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const a=!document[n];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(n){return F(n==="visible","Unknown event type: "+n),[this.visible_]}}const Oa=1e3,WC=300*1e3,ny=30*1e3,JC=1.3,eN=3e4,tN="server_kill",iy=3;class ui extends zb{constructor(n,l,a,o,u,f,m,p){if(super(),this.repoInfo_=n,this.applicationId_=l,this.onDataUpdate_=a,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=p,this.id=ui.nextPersistentConnectionId_++,this.log_=ar("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Oa,this.maxReconnectDelay_=WC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Uf.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Vo.getInstance().on("online",this.onOnline_,this)}sendRequest(n,l,a){const o=++this.requestNumber_,u={r:o,a:n,b:l};this.log_(Ot(u)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),a&&(this.requestCBHash_[o]=a)}get(n){this.initConnection_();const l=new ir,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:f=>{const m=f.d;f.s==="ok"?l.resolve(m):l.reject(m)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),l.promise}listen(n,l,a,o){this.initConnection_();const u=n._queryIdentifier,f=n._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:l,query:n,tag:a};this.listens.get(f).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(n){const l=this.outstandingGets_[n];this.sendRequest("g",l.request,a=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),l.onComplete&&l.onComplete(a)})}sendListen_(n){const l=n.query,a=l._path.toString(),o=l._queryIdentifier;this.log_("Listen on "+a+" for "+o);const u={p:a},f="q";n.tag&&(u.q=l._queryObject,u.t=n.tag),u.h=n.hashFn(),this.sendRequest(f,u,m=>{const p=m.d,y=m.s;ui.warnOnListenWarnings_(p,l),(this.listens.get(a)&&this.listens.get(a).get(o))===n&&(this.log_("listen response",m),y!=="ok"&&this.removeListen_(a,o),n.onComplete&&n.onComplete(y,p))})}static warnOnListenWarnings_(n,l){if(n&&typeof n=="object"&&Vn(n,"w")){const a=xl(n,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const o='".indexOn": "'+l._queryParams.getIndex().toString()+'"',u=l._path.toString();Zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||qT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ny)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,l=GT(n)?"auth":"gauth",a={cred:n};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(l,a,o=>{const u=o.s,f=o.d||"error";this.authToken_===n&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const l=n.s,a=n.d||"error";l==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(l,a)})}unlisten(n,l){const a=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+a+" "+o),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,o)&&this.connected_&&this.sendUnlisten_(a,o,n._queryObject,l)}sendUnlisten_(n,l,a,o){this.log_("Unlisten on "+n+" for "+l);const u={p:n},f="n";o&&(u.q=a,u.t=o),this.sendRequest(f,u)}onDisconnectPut(n,l,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,l,a):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:l,onComplete:a})}onDisconnectMerge(n,l,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,l,a):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:l,onComplete:a})}onDisconnectCancel(n,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,l):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:l})}sendOnDisconnect_(n,l,a,o){const u={p:l,d:a};this.log_("onDisconnect "+n,u),this.sendRequest(n,u,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(n,l,a,o){this.putInternal("p",n,l,a,o)}merge(n,l,a,o){this.putInternal("m",n,l,a,o)}putInternal(n,l,a,o,u){this.initConnection_();const f={p:l,d:a};u!==void 0&&(f.h=u),this.outstandingPuts_.push({action:n,request:f,onComplete:o}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+l)}sendPut_(n){const l=this.outstandingPuts_[n].action,a=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(l,a,u=>{this.log_(l+" response",u),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(n){if(this.connected_){const l={c:n};this.log_("reportStats",l),this.sendRequest("s",l,a=>{if(a.s!=="ok"){const u=a.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ot(n));const l=n.r,a=this.requestCBHash_[l];a&&(delete this.requestCBHash_[l],a(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,l){this.log_("handleServerMessage",n,l),n==="d"?this.onDataUpdate_(l.p,l.d,!1,l.t):n==="m"?this.onDataUpdate_(l.p,l.d,!0,l.t):n==="c"?this.onListenRevoked_(l.p,l.q):n==="ac"?this.onAuthRevoked_(l.s,l.d):n==="apc"?this.onAppCheckRevoked_(l.s,l.d):n==="sd"?this.onSecurityDebugPacket_(l):of("Unrecognized action received from server: "+Ot(n)+`
Are you using the latest client?`)}onReady_(n,l){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=l,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Oa,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Oa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>eN&&(this.reconnectDelay_=Oa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let l=Math.max(0,this.reconnectDelay_-n);l=Math.random()*l,this.log_("Trying to reconnect in "+l+"ms"),this.scheduleConnect_(l),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*JC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const n=this.onDataMessage_.bind(this),l=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+ui.nextConnectionId_++,u=this.lastSessionId;let f=!1,m=null;const p=function(){m?m.close():(f=!0,a())},y=function(v){F(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(v)};this.realtime_={close:p,sendRequest:y};const x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,_]=await Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);f?Kt("getToken() completed but was canceled"):(Kt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=_&&_.token,m=new KC(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,l,a,T=>{Zt(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(tN)},u))}catch(v){this.log_("Failed to get token: "+v),f||(this.repoInfo_.nodeAdmin&&Zt(v),p())}}}interrupt(n){Kt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Kt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],j0(this.interruptReasons_)&&(this.reconnectDelay_=Oa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const l=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:l})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const l=this.outstandingPuts_[n];l&&"h"in l.request&&l.queued&&(l.onComplete&&l.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,l){let a;l?a=l.map(u=>Of(u)).join("$"):a="default";const o=this.removeListen_(n,a);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,l){const a=new lt(n).toString();let o;if(this.listens.has(a)){const u=this.listens.get(a);o=u.get(l),u.delete(l),u.size===0&&this.listens.delete(a)}else o=void 0;return o}onAuthRevoked_(n,l){Kt("Auth token revoked: "+n+"/"+l),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=iy&&(this.reconnectDelay_=ny,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,l){Kt("App check token revoked: "+n+"/"+l),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=iy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const l of n.values())this.sendListen_(l);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let l="js";n["sdk."+l+"."+hb.replace(/\./g,"-")]=1,sb()?n["framework.cordova"]=1:zT()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Vo.getInstance().currentlyOnline();return j0(this.interruptReasons_)&&n}}ui.nextPersistentConnectionId_=0;ui.nextConnectionId_=0;class Oe{constructor(n,l){this.name=n,this.node=l}static Wrap(n,l){return new Oe(n,l)}}class sc{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,l){const a=new Oe(Sl,n),o=new Oe(Sl,l);return this.compare(a,o)!==0}minPost(){return Oe.MIN}}let Mo;class Hb extends sc{static get __EMPTY_NODE(){return Mo}static set __EMPTY_NODE(n){Mo=n}compare(n,l){return Ts(n.name,l.name)}isDefinedOn(n){throw kl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,l){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(vs,Mo)}makePost(n,l){return F(typeof n=="string","KeyIndex indexValue must always be a string."),new Oe(n,Mo)}toString(){return".key"}}const yl=new Hb;class Ro{constructor(n,l,a,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let f=1;for(;!n.isEmpty();)if(n=n,f=l?a(n.key,l):1,o&&(f*=-1),f<0)this.isReverse_?n=n.left:n=n.right;else if(f===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),l;if(this.resultGenerator_?l=this.resultGenerator_(n.key,n.value):l={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}class Ht{constructor(n,l,a,o,u){this.key=n,this.value=l,this.color=a??Ht.RED,this.left=o??an.EMPTY_NODE,this.right=u??an.EMPTY_NODE}copy(n,l,a,o,u){return new Ht(n??this.key,l??this.value,a??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,l,a){let o=this;const u=a(n,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(n,l,a),null):u===0?o=o.copy(null,l,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,l,a)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return an.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,l){let a,o;if(a=this,l(n,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(n,l),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),l(n,a.key)===0){if(a.right.isEmpty())return an.EMPTY_NODE;o=a.right.min_(),a=a.copy(o.key,o.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(n,l))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),l=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,l)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}Ht.RED=!0;Ht.BLACK=!1;class nN{copy(n,l,a,o,u){return this}insert(n,l,a){return new Ht(n,l,null)}remove(n,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class an{constructor(n,l=an.EMPTY_NODE){this.comparator_=n,this.root_=l}insert(n,l){return new an(this.comparator_,this.root_.insert(n,l,this.comparator_).copy(null,null,Ht.BLACK,null,null))}remove(n){return new an(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Ht.BLACK,null,null))}get(n){let l,a=this.root_;for(;!a.isEmpty();){if(l=this.comparator_(n,a.key),l===0)return a.value;l<0?a=a.left:l>0&&(a=a.right)}return null}getPredecessorKey(n){let l,a=this.root_,o=null;for(;!a.isEmpty();)if(l=this.comparator_(n,a.key),l===0){if(a.left.isEmpty())return o?o.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else l<0?a=a.left:l>0&&(o=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Ro(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,l){return new Ro(this.root_,n,this.comparator_,!1,l)}getReverseIteratorFrom(n,l){return new Ro(this.root_,n,this.comparator_,!0,l)}getReverseIterator(n){return new Ro(this.root_,null,this.comparator_,!0,n)}}an.EMPTY_NODE=new nN;function iN(i,n){return Ts(i.name,n.name)}function Vf(i,n){return Ts(i,n)}let uf;function sN(i){uf=i}const Ub=function(i){return typeof i=="number"?"number:"+bb(i):"string:"+i},Vb=function(i){if(i.isLeafNode()){const n=i.val();F(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Vn(n,".sv"),"Priority must be a string or number.")}else F(i===uf||i.isEmpty(),"priority of unexpected type.");F(i===uf||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sy;class Lt{static set __childrenNodeConstructor(n){sy=n}static get __childrenNodeConstructor(){return sy}constructor(n,l=Lt.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=l,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vb(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new Lt(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:Lt.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Be(n)?this:De(n)===".priority"?this.priorityNode_:Lt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,l){return null}updateImmediateChild(n,l){return n===".priority"?this.updatePriority(l):l.isEmpty()&&n!==".priority"?this:Lt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,l).updatePriority(this.priorityNode_)}updateChild(n,l){const a=De(n);return a===null?l:l.isEmpty()&&a!==".priority"?this:(F(a!==".priority"||qi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,Lt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(n),l)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,l){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Ub(this.priorityNode_.val())+":");const l=typeof this.value_;n+=l+":",l==="number"?n+=bb(this.value_):n+=this.value_,this.lazyHash_=pb(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===Lt.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof Lt.__childrenNodeConstructor?-1:(F(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const l=typeof n.value_,a=typeof this.value_,o=Lt.VALUE_TYPE_ORDER.indexOf(l),u=Lt.VALUE_TYPE_ORDER.indexOf(a);return F(o>=0,"Unknown leaf type: "+l),F(u>=0,"Unknown leaf type: "+a),o===u?a==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const l=n;return this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_)}else return!1}}Lt.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Gb,qb;function lN(i){Gb=i}function aN(i){qb=i}class rN extends sc{compare(n,l){const a=n.node.getPriority(),o=l.node.getPriority(),u=a.compareTo(o);return u===0?Ts(n.name,l.name):u}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,l){return!n.getPriority().equals(l.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(vs,new Lt("[PRIORITY-POST]",qb))}makePost(n,l){const a=Gb(n);return new Oe(l,new Lt("[PRIORITY-POST]",a))}toString(){return".priority"}}const _t=new rN;const oN=Math.log(2);class cN{constructor(n){const l=u=>parseInt(Math.log(u)/oN,10),a=u=>parseInt(Array(u+1).join("1"),2);this.count=l(n+1),this.current_=this.count-1;const o=a(this.count);this.bits_=n+1&o}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Go=function(i,n,l,a){i.sort(n);const o=function(p,y){const x=y-p;let v,_;if(x===0)return null;if(x===1)return v=i[p],_=l?l(v):v,new Ht(_,v.node,Ht.BLACK,null,null);{const T=parseInt(x/2,10)+p,O=o(p,T),D=o(T+1,y);return v=i[T],_=l?l(v):v,new Ht(_,v.node,Ht.BLACK,O,D)}},u=function(p){let y=null,x=null,v=i.length;const _=function(O,D){const V=v-O,X=v;v-=O;const P=o(V+1,X),q=i[V],W=l?l(q):q;T(new Ht(W,q.node,D,null,P))},T=function(O){y?(y.left=O,y=O):(x=O,y=O)};for(let O=0;O<p.count;++O){const D=p.nextBitIsOne(),V=Math.pow(2,p.count-(O+1));D?_(V,Ht.BLACK):(_(V,Ht.BLACK),_(V,Ht.RED))}return x},f=new cN(i.length),m=u(f);return new an(a||n,m)};let Gd;const hl={};class ci{static get Default(){return F(hl&&_t,"ChildrenNode.ts has not been loaded"),Gd=Gd||new ci({".priority":hl},{".priority":_t}),Gd}constructor(n,l){this.indexes_=n,this.indexSet_=l}get(n){const l=xl(this.indexes_,n);if(!l)throw new Error("No index defined for "+n);return l instanceof an?l:null}hasIndex(n){return Vn(this.indexSet_,n.toString())}addIndex(n,l){F(n!==yl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let o=!1;const u=l.getIterator(Oe.Wrap);let f=u.getNext();for(;f;)o=o||n.isDefinedOn(f.node),a.push(f),f=u.getNext();let m;o?m=Go(a,n.getCompare()):m=hl;const p=n.toString(),y={...this.indexSet_};y[p]=n;const x={...this.indexes_};return x[p]=m,new ci(x,y)}addToIndexes(n,l){const a=Io(this.indexes_,(o,u)=>{const f=xl(this.indexSet_,u);if(F(f,"Missing index implementation for "+u),o===hl)if(f.isDefinedOn(n.node)){const m=[],p=l.getIterator(Oe.Wrap);let y=p.getNext();for(;y;)y.name!==n.name&&m.push(y),y=p.getNext();return m.push(n),Go(m,f.getCompare())}else return hl;else{const m=l.get(n.name);let p=o;return m&&(p=p.remove(new Oe(n.name,m))),p.insert(n,n.node)}});return new ci(a,this.indexSet_)}removeFromIndexes(n,l){const a=Io(this.indexes_,o=>{if(o===hl)return o;{const u=l.get(n.name);return u?o.remove(new Oe(n.name,u)):o}});return new ci(a,this.indexSet_)}}let za;class xe{static get EMPTY_NODE(){return za||(za=new xe(new an(Vf),null,ci.Default))}constructor(n,l,a){this.children_=n,this.priorityNode_=l,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&Vb(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||za}updatePriority(n){return this.children_.isEmpty()?this:new xe(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{const l=this.children_.get(n);return l===null?za:l}}getChild(n){const l=De(n);return l===null?this:this.getImmediateChild(l).getChild(ft(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,l){if(F(l,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(l);{const a=new Oe(n,l);let o,u;l.isEmpty()?(o=this.children_.remove(n),u=this.indexMap_.removeFromIndexes(a,this.children_)):(o=this.children_.insert(n,l),u=this.indexMap_.addToIndexes(a,this.children_));const f=o.isEmpty()?za:this.priorityNode_;return new xe(o,f,u)}}updateChild(n,l){const a=De(n);if(a===null)return l;{F(De(n)!==".priority"||qi(n)===1,".priority must be the last token in a path");const o=this.getImmediateChild(a).updateChild(ft(n),l);return this.updateImmediateChild(a,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const l={};let a=0,o=0,u=!0;if(this.forEachChild(_t,(f,m)=>{l[f]=m.val(n),a++,u&&xe.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):u=!1}),!n&&u&&o<2*a){const f=[];for(const m in l)f[m]=l[m];return f}else return n&&!this.getPriority().isEmpty()&&(l[".priority"]=this.getPriority().val()),l}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Ub(this.getPriority().val())+":"),this.forEachChild(_t,(l,a)=>{const o=a.hash();o!==""&&(n+=":"+l+":"+o)}),this.lazyHash_=n===""?"":pb(n)}return this.lazyHash_}getPredecessorChildName(n,l,a){const o=this.resolveIndex_(a);if(o){const u=o.getPredecessorKey(new Oe(n,l));return u?u.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){const l=this.resolveIndex_(n);if(l){const a=l.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(n){const l=this.getFirstChildName(n);return l?new Oe(l,this.children_.get(l)):null}getLastChildName(n){const l=this.resolveIndex_(n);if(l){const a=l.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(n){const l=this.getLastChildName(n);return l?new Oe(l,this.children_.get(l)):null}forEachChild(n,l){const a=this.resolveIndex_(n);return a?a.inorderTraversal(o=>l(o.name,o.node)):this.children_.inorderTraversal(l)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,l){const a=this.resolveIndex_(l);if(a)return a.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,Oe.Wrap);let u=o.peek();for(;u!=null&&l.compare(u,n)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,l){const a=this.resolveIndex_(l);if(a)return a.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,Oe.Wrap);let u=o.peek();for(;u!=null&&l.compare(u,n)>0;)o.getNext(),u=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===rr?-1:0}withIndex(n){if(n===yl||this.indexMap_.hasIndex(n))return this;{const l=this.indexMap_.addIndex(n,this.children_);return new xe(this.children_,this.priorityNode_,l)}}isIndexed(n){return n===yl||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const l=n;if(this.getPriority().equals(l.getPriority()))if(this.children_.count()===l.children_.count()){const a=this.getIterator(_t),o=l.getIterator(_t);let u=a.getNext(),f=o.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=a.getNext(),f=o.getNext()}return u===null&&f===null}else return!1;else return!1}}resolveIndex_(n){return n===yl?null:this.indexMap_.get(n.toString())}}xe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class uN extends xe{constructor(){super(new an(Vf),xe.EMPTY_NODE,ci.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return xe.EMPTY_NODE}isEmpty(){return!1}}const rr=new uN;Object.defineProperties(Oe,{MIN:{value:new Oe(Sl,xe.EMPTY_NODE)},MAX:{value:new Oe(vs,rr)}});Hb.__EMPTY_NODE=xe.EMPTY_NODE;Lt.__childrenNodeConstructor=xe;sN(rr);aN(rr);const dN=!0;function Dt(i,n=null){if(i===null)return xe.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(n=i[".priority"]),F(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const l=i;return new Lt(l,Dt(n))}if(!(i instanceof Array)&&dN){const l=[];let a=!1;if(Xt(i,(f,m)=>{if(f.substring(0,1)!=="."){const p=Dt(m);p.isEmpty()||(a=a||!p.getPriority().isEmpty(),l.push(new Oe(f,p)))}}),l.length===0)return xe.EMPTY_NODE;const u=Go(l,iN,f=>f.name,Vf);if(a){const f=Go(l,_t.getCompare());return new xe(u,Dt(n),new ci({".priority":f},{".priority":_t}))}else return new xe(u,Dt(n),ci.Default)}else{let l=xe.EMPTY_NODE;return Xt(i,(a,o)=>{if(Vn(i,a)&&a.substring(0,1)!=="."){const u=Dt(o);(u.isLeafNode()||!u.isEmpty())&&(l=l.updateImmediateChild(a,u))}}),l.updatePriority(Dt(n))}}lN(Dt);class fN extends sc{constructor(n){super(),this.indexPath_=n,F(!Be(n)&&De(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,l){const a=this.extractChild(n.node),o=this.extractChild(l.node),u=a.compareTo(o);return u===0?Ts(n.name,l.name):u}makePost(n,l){const a=Dt(n),o=xe.EMPTY_NODE.updateChild(this.indexPath_,a);return new Oe(l,o)}maxPost(){const n=xe.EMPTY_NODE.updateChild(this.indexPath_,rr);return new Oe(vs,n)}toString(){return $a(this.indexPath_,0).join("/")}}class hN extends sc{compare(n,l){const a=n.node.compareTo(l.node);return a===0?Ts(n.name,l.name):a}isDefinedOn(n){return!0}indexedValueChanged(n,l){return!n.equals(l)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(n,l){const a=Dt(n);return new Oe(l,a)}toString(){return".value"}}const mN=new hN;function Qb(i){return{type:"value",snapshotNode:i}}function Tl(i,n){return{type:"child_added",snapshotNode:n,childName:i}}function Wa(i,n){return{type:"child_removed",snapshotNode:n,childName:i}}function Ja(i,n,l){return{type:"child_changed",snapshotNode:n,childName:i,oldSnap:l}}function gN(i,n){return{type:"child_moved",snapshotNode:n,childName:i}}class Gf{constructor(n){this.index_=n}updateChild(n,l,a,o,u,f){F(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=n.getImmediateChild(l);return m.getChild(o).equals(a.getChild(o))&&m.isEmpty()===a.isEmpty()||(f!=null&&(a.isEmpty()?n.hasChild(l)?f.trackChildChange(Wa(l,m)):F(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?f.trackChildChange(Tl(l,a)):f.trackChildChange(Ja(l,a,m))),n.isLeafNode()&&a.isEmpty())?n:n.updateImmediateChild(l,a).withIndex(this.index_)}updateFullNode(n,l,a){return a!=null&&(n.isLeafNode()||n.forEachChild(_t,(o,u)=>{l.hasChild(o)||a.trackChildChange(Wa(o,u))}),l.isLeafNode()||l.forEachChild(_t,(o,u)=>{if(n.hasChild(o)){const f=n.getImmediateChild(o);f.equals(u)||a.trackChildChange(Ja(o,u,f))}else a.trackChildChange(Tl(o,u))})),l.withIndex(this.index_)}updatePriority(n,l){return n.isEmpty()?xe.EMPTY_NODE:n.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class er{constructor(n){this.indexedFilter_=new Gf(n.getIndex()),this.index_=n.getIndex(),this.startPost_=er.getStartPost_(n),this.endPost_=er.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,a=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return l&&a}updateChild(n,l,a,o,u,f){return this.matches(new Oe(l,a))||(a=xe.EMPTY_NODE),this.indexedFilter_.updateChild(n,l,a,o,u,f)}updateFullNode(n,l,a){l.isLeafNode()&&(l=xe.EMPTY_NODE);let o=l.withIndex(this.index_);o=o.updatePriority(xe.EMPTY_NODE);const u=this;return l.forEachChild(_t,(f,m)=>{u.matches(new Oe(f,m))||(o=o.updateImmediateChild(f,xe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,o,a)}updatePriority(n,l){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const l=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),l)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const l=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),l)}else return n.getIndex().maxPost()}}class pN{constructor(n){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=l=>{const a=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new er(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,l,a,o,u,f){return this.rangedFilter_.matches(new Oe(l,a))||(a=xe.EMPTY_NODE),n.getImmediateChild(l).equals(a)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,l,a,o,u,f):this.fullLimitUpdateChild_(n,l,a,u,f)}updateFullNode(n,l,a){let o;if(l.isLeafNode()||l.isEmpty())o=xe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<l.numChildren()&&l.isIndexed(this.index_)){o=xe.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;u.hasNext()&&f<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))o=o.updateImmediateChild(m.name,m.node),f++;else break;else continue}}else{o=l.withIndex(this.index_),o=o.updatePriority(xe.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let f=0;for(;u.hasNext();){const m=u.getNext();f<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?f++:o=o.updateImmediateChild(m.name,xe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,o,a)}updatePriority(n,l){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,l,a,o,u){let f;if(this.reverse_){const v=this.index_.getCompare();f=(_,T)=>v(T,_)}else f=this.index_.getCompare();const m=n;F(m.numChildren()===this.limit_,"");const p=new Oe(l,a),y=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),x=this.rangedFilter_.matches(p);if(m.hasChild(l)){const v=m.getImmediateChild(l);let _=o.getChildAfterChild(this.index_,y,this.reverse_);for(;_!=null&&(_.name===l||m.hasChild(_.name));)_=o.getChildAfterChild(this.index_,_,this.reverse_);const T=_==null?1:f(_,p);if(x&&!a.isEmpty()&&T>=0)return u?.trackChildChange(Ja(l,a,v)),m.updateImmediateChild(l,a);{u?.trackChildChange(Wa(l,v));const D=m.updateImmediateChild(l,xe.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(u?.trackChildChange(Tl(_.name,_.node)),D.updateImmediateChild(_.name,_.node)):D}}else return a.isEmpty()?n:x&&f(y,p)>=0?(u!=null&&(u.trackChildChange(Wa(y.name,y.node)),u.trackChildChange(Tl(l,a))),m.updateImmediateChild(l,a).updateImmediateChild(y.name,xe.EMPTY_NODE)):n}}class lc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_t}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sl}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_t}copy(){const n=new lc;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function yN(i){return i.loadsAllData()?new Gf(i.getIndex()):i.hasLimit()?new pN(i):new er(i)}function ly(i){const n={};if(i.isDefault())return n;let l;if(i.index_===_t?l="$priority":i.index_===mN?l="$value":i.index_===yl?l="$key":(F(i.index_ instanceof fN,"Unrecognized index type!"),l=i.index_.toString()),n.orderBy=Ot(l),i.startSet_){const a=i.startAfterSet_?"startAfter":"startAt";n[a]=Ot(i.indexStartValue_),i.startNameSet_&&(n[a]+=","+Ot(i.indexStartName_))}if(i.endSet_){const a=i.endBeforeSet_?"endBefore":"endAt";n[a]=Ot(i.indexEndValue_),i.endNameSet_&&(n[a]+=","+Ot(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?n.limitToFirst=i.limit_:n.limitToLast=i.limit_),n}function ay(i){const n={};if(i.startSet_&&(n.sp=i.indexStartValue_,i.startNameSet_&&(n.sn=i.indexStartName_),n.sin=!i.startAfterSet_),i.endSet_&&(n.ep=i.indexEndValue_,i.endNameSet_&&(n.en=i.indexEndName_),n.ein=!i.endBeforeSet_),i.limitSet_){n.l=i.limit_;let l=i.viewFrom_;l===""&&(i.isViewFromLeft()?l="l":l="r"),n.vf=l}return i.index_!==_t&&(n.i=i.index_.toString()),n}class qo extends zb{reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,l){return l!==void 0?"tag$"+l:(F(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}constructor(n,l,a,o){super(),this.repoInfo_=n,this.onDataUpdate_=l,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.log_=ar("p:rest:"),this.listens_={}}listen(n,l,a,o){const u=n._path.toString();this.log_("Listen called for "+u+" "+n._queryIdentifier);const f=qo.getListenId_(n,a),m={};this.listens_[f]=m;const p=ly(n._queryParams);this.restRequest_(u+".json",p,(y,x)=>{let v=x;if(y===404&&(v=null,y=null),y===null&&this.onDataUpdate_(u,v,!1,a),xl(this.listens_,f)===m){let _;y?y===401?_="permission_denied":_="rest_error:"+y:_="ok",o(_,null)}})}unlisten(n,l){const a=qo.getListenId_(n,l);delete this.listens_[a]}get(n){const l=ly(n._queryParams),a=n._path.toString(),o=new ir;return this.restRequest_(a+".json",l,(u,f)=>{let m=f;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(a,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(n){}restRequest_(n,l={},a){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(l.auth=o.accessToken),u&&u.token&&(l.ac=u.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+QT(l);this.log_("Sending REST request for "+f);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(a&&m.readyState===4){this.log_("REST Response for "+f+" received. status:",m.status,"response:",m.responseText);let p=null;if(m.status>=200&&m.status<300){try{p=Xa(m.responseText)}catch{Zt("Failed to parse JSON response for "+f+": "+m.responseText)}a(null,p)}else m.status!==401&&m.status!==404&&Zt("Got unsuccessful REST response for "+f+" Status: "+m.status),a(m.status);a=null}},m.open("GET",f,!0),m.send()})}}class bN{constructor(){this.rootNode_=xe.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,l){this.rootNode_=this.rootNode_.updateChild(n,l)}}function Qo(){return{value:null,children:new Map}}function Yb(i,n,l){if(Be(n))i.value=l,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(n,l);else{const a=De(n);i.children.has(a)||i.children.set(a,Qo());const o=i.children.get(a);n=ft(n),Yb(o,n,l)}}function df(i,n,l){i.value!==null?l(n,i.value):vN(i,(a,o)=>{const u=new lt(n.toString()+"/"+a);df(o,u,l)})}function vN(i,n){i.children.forEach((l,a)=>{n(a,l)})}class _N{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),l={...n};return this.last_&&Xt(this.last_,(a,o)=>{l[a]=l[a]-o}),this.last_=n,l}}const ry=10*1e3,xN=30*1e3,SN=300*1e3;class TN{constructor(n,l){this.server_=l,this.statsToReport_={},this.statsListener_=new _N(n);const a=ry+(xN-ry)*Math.random();Ua(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const n=this.statsListener_.get(),l={};let a=!1;Xt(n,(o,u)=>{u>0&&Vn(this.statsToReport_,o)&&(l[o]=u,a=!0)}),a&&this.server_.reportStats(l),Ua(this.reportStats_.bind(this),Math.floor(Math.random()*2*SN))}}var jn;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(jn||(jn={}));function qf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Qf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Yf(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class Yo{constructor(n,l,a){this.path=n,this.affectedTree=l,this.revert=a,this.type=jn.ACK_USER_WRITE,this.source=qf()}operationForChild(n){if(Be(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new lt(n));return new Yo(Ze(),l,this.revert)}}else return F(De(this.path)===n,"operationForChild called for unrelated child."),new Yo(ft(this.path),this.affectedTree,this.revert)}}class tr{constructor(n,l){this.source=n,this.path=l,this.type=jn.LISTEN_COMPLETE}operationForChild(n){return Be(this.path)?new tr(this.source,Ze()):new tr(this.source,ft(this.path))}}class _s{constructor(n,l,a){this.source=n,this.path=l,this.snap=a,this.type=jn.OVERWRITE}operationForChild(n){return Be(this.path)?new _s(this.source,Ze(),this.snap.getImmediateChild(n)):new _s(this.source,ft(this.path),this.snap)}}class wl{constructor(n,l,a){this.source=n,this.path=l,this.children=a,this.type=jn.MERGE}operationForChild(n){if(Be(this.path)){const l=this.children.subtree(new lt(n));return l.isEmpty()?null:l.value?new _s(this.source,Ze(),l.value):new wl(this.source,Ze(),l)}else return F(De(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new wl(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qi{constructor(n,l,a){this.node_=n,this.fullyInitialized_=l,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(Be(n))return this.isFullyInitialized()&&!this.filtered_;const l=De(n);return this.isCompleteForChild(l)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class wN{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function CN(i,n,l,a){const o=[],u=[];return n.forEach(f=>{f.type==="child_changed"&&i.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&u.push(gN(f.childName,f.snapshotNode))}),Ia(i,o,"child_removed",n,a,l),Ia(i,o,"child_added",n,a,l),Ia(i,o,"child_moved",u,a,l),Ia(i,o,"child_changed",n,a,l),Ia(i,o,"value",n,a,l),o}function Ia(i,n,l,a,o,u){const f=a.filter(m=>m.type===l);f.sort((m,p)=>EN(i,m,p)),f.forEach(m=>{const p=NN(i,m,u);o.forEach(y=>{y.respondsTo(m.type)&&n.push(y.createEvent(p,i.query_))})})}function NN(i,n,l){return n.type==="value"||n.type==="child_removed"||(n.prevName=l.getPredecessorChildName(n.childName,n.snapshotNode,i.index_)),n}function EN(i,n,l){if(n.childName==null||l.childName==null)throw kl("Should only compare child_ events.");const a=new Oe(n.childName,n.snapshotNode),o=new Oe(l.childName,l.snapshotNode);return i.index_.compare(a,o)}function ac(i,n){return{eventCache:i,serverCache:n}}function Va(i,n,l,a){return ac(new Qi(n,l,a),i.serverCache)}function Kb(i,n,l,a){return ac(i.eventCache,new Qi(n,l,a))}function Ko(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function xs(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let qd;const AN=()=>(qd||(qd=new an(fC)),qd);class ut{static fromObject(n){let l=new ut(null);return Xt(n,(a,o)=>{l=l.set(new lt(a),o)}),l}constructor(n,l=AN()){this.value=n,this.children=l}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,l){if(this.value!=null&&l(this.value))return{path:Ze(),value:this.value};if(Be(n))return null;{const a=De(n),o=this.children.get(a);if(o!==null){const u=o.findRootMostMatchingPathAndValue(ft(n),l);return u!=null?{path:vt(new lt(a),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(Be(n))return this;{const l=De(n),a=this.children.get(l);return a!==null?a.subtree(ft(n)):new ut(null)}}set(n,l){if(Be(n))return new ut(l,this.children);{const a=De(n),u=(this.children.get(a)||new ut(null)).set(ft(n),l),f=this.children.insert(a,u);return new ut(this.value,f)}}remove(n){if(Be(n))return this.children.isEmpty()?new ut(null):new ut(null,this.children);{const l=De(n),a=this.children.get(l);if(a){const o=a.remove(ft(n));let u;return o.isEmpty()?u=this.children.remove(l):u=this.children.insert(l,o),this.value===null&&u.isEmpty()?new ut(null):new ut(this.value,u)}else return this}}get(n){if(Be(n))return this.value;{const l=De(n),a=this.children.get(l);return a?a.get(ft(n)):null}}setTree(n,l){if(Be(n))return l;{const a=De(n),u=(this.children.get(a)||new ut(null)).setTree(ft(n),l);let f;return u.isEmpty()?f=this.children.remove(a):f=this.children.insert(a,u),new ut(this.value,f)}}fold(n){return this.fold_(Ze(),n)}fold_(n,l){const a={};return this.children.inorderTraversal((o,u)=>{a[o]=u.fold_(vt(n,o),l)}),l(n,this.value,a)}findOnPath(n,l){return this.findOnPath_(n,Ze(),l)}findOnPath_(n,l,a){const o=this.value?a(l,this.value):!1;if(o)return o;if(Be(n))return null;{const u=De(n),f=this.children.get(u);return f?f.findOnPath_(ft(n),vt(l,u),a):null}}foreachOnPath(n,l){return this.foreachOnPath_(n,Ze(),l)}foreachOnPath_(n,l,a){if(Be(n))return this;{this.value&&a(l,this.value);const o=De(n),u=this.children.get(o);return u?u.foreachOnPath_(ft(n),vt(l,o),a):new ut(null)}}foreach(n){this.foreach_(Ze(),n)}foreach_(n,l){this.children.inorderTraversal((a,o)=>{o.foreach_(vt(n,a),l)}),this.value&&l(n,this.value)}foreachChild(n){this.children.inorderTraversal((l,a)=>{a.value&&n(l,a.value)})}}class Dn{constructor(n){this.writeTree_=n}static empty(){return new Dn(new ut(null))}}function Ga(i,n,l){if(Be(n))return new Dn(new ut(l));{const a=i.writeTree_.findRootMostValueAndPath(n);if(a!=null){const o=a.path;let u=a.value;const f=Pt(o,n);return u=u.updateChild(f,l),new Dn(i.writeTree_.set(o,u))}else{const o=new ut(l),u=i.writeTree_.setTree(n,o);return new Dn(u)}}}function ff(i,n,l){let a=i;return Xt(l,(o,u)=>{a=Ga(a,vt(n,o),u)}),a}function oy(i,n){if(Be(n))return Dn.empty();{const l=i.writeTree_.setTree(n,new ut(null));return new Dn(l)}}function hf(i,n){return ws(i,n)!=null}function ws(i,n){const l=i.writeTree_.findRootMostValueAndPath(n);return l!=null?i.writeTree_.get(l.path).getChild(Pt(l.path,n)):null}function cy(i){const n=[],l=i.writeTree_.value;return l!=null?l.isLeafNode()||l.forEachChild(_t,(a,o)=>{n.push(new Oe(a,o))}):i.writeTree_.children.inorderTraversal((a,o)=>{o.value!=null&&n.push(new Oe(a,o.value))}),n}function Vi(i,n){if(Be(n))return i;{const l=ws(i,n);return l!=null?new Dn(new ut(l)):new Dn(i.writeTree_.subtree(n))}}function mf(i){return i.writeTree_.isEmpty()}function Cl(i,n){return Xb(Ze(),i.writeTree_,n)}function Xb(i,n,l){if(n.value!=null)return l.updateChild(i,n.value);{let a=null;return n.children.inorderTraversal((o,u)=>{o===".priority"?(F(u.value!==null,"Priority writes must always be leaf nodes"),a=u.value):l=Xb(vt(i,o),u,l)}),!l.getChild(i).isEmpty()&&a!==null&&(l=l.updateChild(vt(i,".priority"),a)),l}}function rc(i,n){return $b(n,i)}function MN(i,n,l,a,o){F(a>i.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),i.allWrites.push({path:n,snap:l,writeId:a,visible:o}),o&&(i.visibleWrites=Ga(i.visibleWrites,n,l)),i.lastWriteId=a}function RN(i,n,l,a){F(a>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:n,children:l,writeId:a,visible:!0}),i.visibleWrites=ff(i.visibleWrites,n,l),i.lastWriteId=a}function kN(i,n){for(let l=0;l<i.allWrites.length;l++){const a=i.allWrites[l];if(a.writeId===n)return a}return null}function jN(i,n){const l=i.allWrites.findIndex(m=>m.writeId===n);F(l>=0,"removeWrite called with nonexistent writeId.");const a=i.allWrites[l];i.allWrites.splice(l,1);let o=a.visible,u=!1,f=i.allWrites.length-1;for(;o&&f>=0;){const m=i.allWrites[f];m.visible&&(f>=l&&DN(m,a.path)?o=!1:Nn(a.path,m.path)&&(u=!0)),f--}if(o){if(u)return ON(i),!0;if(a.snap)i.visibleWrites=oy(i.visibleWrites,a.path);else{const m=a.children;Xt(m,p=>{i.visibleWrites=oy(i.visibleWrites,vt(a.path,p))})}return!0}else return!1}function DN(i,n){if(i.snap)return Nn(i.path,n);for(const l in i.children)if(i.children.hasOwnProperty(l)&&Nn(vt(i.path,l),n))return!0;return!1}function ON(i){i.visibleWrites=Fb(i.allWrites,zN,Ze()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function zN(i){return i.visible}function Fb(i,n,l){let a=Dn.empty();for(let o=0;o<i.length;++o){const u=i[o];if(n(u)){const f=u.path;let m;if(u.snap)Nn(l,f)?(m=Pt(l,f),a=Ga(a,m,u.snap)):Nn(f,l)&&(m=Pt(f,l),a=Ga(a,Ze(),u.snap.getChild(m)));else if(u.children){if(Nn(l,f))m=Pt(l,f),a=ff(a,m,u.children);else if(Nn(f,l))if(m=Pt(f,l),Be(m))a=ff(a,Ze(),u.children);else{const p=xl(u.children,De(m));if(p){const y=p.getChild(ft(m));a=Ga(a,Ze(),y)}}}else throw kl("WriteRecord should have .snap or .children")}}return a}function Pb(i,n,l,a,o){if(!a&&!o){const u=ws(i.visibleWrites,n);if(u!=null)return u;{const f=Vi(i.visibleWrites,n);if(mf(f))return l;if(l==null&&!hf(f,Ze()))return null;{const m=l||xe.EMPTY_NODE;return Cl(f,m)}}}else{const u=Vi(i.visibleWrites,n);if(!o&&mf(u))return l;if(!o&&l==null&&!hf(u,Ze()))return null;{const f=function(y){return(y.visible||o)&&(!a||!~a.indexOf(y.writeId))&&(Nn(y.path,n)||Nn(n,y.path))},m=Fb(i.allWrites,f,n),p=l||xe.EMPTY_NODE;return Cl(m,p)}}}function IN(i,n,l){let a=xe.EMPTY_NODE;const o=ws(i.visibleWrites,n);if(o)return o.isLeafNode()||o.forEachChild(_t,(u,f)=>{a=a.updateImmediateChild(u,f)}),a;if(l){const u=Vi(i.visibleWrites,n);return l.forEachChild(_t,(f,m)=>{const p=Cl(Vi(u,new lt(f)),m);a=a.updateImmediateChild(f,p)}),cy(u).forEach(f=>{a=a.updateImmediateChild(f.name,f.node)}),a}else{const u=Vi(i.visibleWrites,n);return cy(u).forEach(f=>{a=a.updateImmediateChild(f.name,f.node)}),a}}function BN(i,n,l,a,o){F(a||o,"Either existingEventSnap or existingServerSnap must exist");const u=vt(n,l);if(hf(i.visibleWrites,u))return null;{const f=Vi(i.visibleWrites,u);return mf(f)?o.getChild(l):Cl(f,o.getChild(l))}}function LN(i,n,l,a){const o=vt(n,l),u=ws(i.visibleWrites,o);if(u!=null)return u;if(a.isCompleteForChild(l)){const f=Vi(i.visibleWrites,o);return Cl(f,a.getNode().getImmediateChild(l))}else return null}function HN(i,n){return ws(i.visibleWrites,n)}function UN(i,n,l,a,o,u,f){let m;const p=Vi(i.visibleWrites,n),y=ws(p,Ze());if(y!=null)m=y;else if(l!=null)m=Cl(p,l);else return[];if(m=m.withIndex(f),!m.isEmpty()&&!m.isLeafNode()){const x=[],v=f.getCompare(),_=u?m.getReverseIteratorFrom(a,f):m.getIteratorFrom(a,f);let T=_.getNext();for(;T&&x.length<o;)v(T,a)!==0&&x.push(T),T=_.getNext();return x}else return[]}function VN(){return{visibleWrites:Dn.empty(),allWrites:[],lastWriteId:-1}}function Xo(i,n,l,a){return Pb(i.writeTree,i.treePath,n,l,a)}function Kf(i,n){return IN(i.writeTree,i.treePath,n)}function uy(i,n,l,a){return BN(i.writeTree,i.treePath,n,l,a)}function Fo(i,n){return HN(i.writeTree,vt(i.treePath,n))}function GN(i,n,l,a,o,u){return UN(i.writeTree,i.treePath,n,l,a,o,u)}function Xf(i,n,l){return LN(i.writeTree,i.treePath,n,l)}function Zb(i,n){return $b(vt(i.treePath,n),i.writeTree)}function $b(i,n){return{treePath:i,writeTree:n}}class qN{constructor(){this.changeMap=new Map}trackChildChange(n){const l=n.type,a=n.childName;F(l==="child_added"||l==="child_changed"||l==="child_removed","Only child changes supported for tracking"),F(a!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(a);if(o){const u=o.type;if(l==="child_added"&&u==="child_removed")this.changeMap.set(a,Ja(a,n.snapshotNode,o.snapshotNode));else if(l==="child_removed"&&u==="child_added")this.changeMap.delete(a);else if(l==="child_removed"&&u==="child_changed")this.changeMap.set(a,Wa(a,o.oldSnap));else if(l==="child_changed"&&u==="child_added")this.changeMap.set(a,Tl(a,n.snapshotNode));else if(l==="child_changed"&&u==="child_changed")this.changeMap.set(a,Ja(a,n.snapshotNode,o.oldSnap));else throw kl("Illegal combination of changes: "+n+" occurred after "+o)}else this.changeMap.set(a,n)}getChanges(){return Array.from(this.changeMap.values())}}class QN{getCompleteChild(n){return null}getChildAfterChild(n,l,a){return null}}const Wb=new QN;class Ff{constructor(n,l,a=null){this.writes_=n,this.viewCache_=l,this.optCompleteServerCache_=a}getCompleteChild(n){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(n))return l.getNode().getImmediateChild(n);{const a=this.optCompleteServerCache_!=null?new Qi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xf(this.writes_,n,a)}}getChildAfterChild(n,l,a){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xs(this.viewCache_),u=GN(this.writes_,o,l,1,a,n);return u.length===0?null:u[0]}}function YN(i){return{filter:i}}function KN(i,n){F(n.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),F(n.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function XN(i,n,l,a,o){const u=new qN;let f,m;if(l.type===jn.OVERWRITE){const y=l;y.source.fromUser?f=gf(i,n,y.path,y.snap,a,o,u):(F(y.source.fromServer,"Unknown source."),m=y.source.tagged||n.serverCache.isFiltered()&&!Be(y.path),f=Po(i,n,y.path,y.snap,a,o,m,u))}else if(l.type===jn.MERGE){const y=l;y.source.fromUser?f=PN(i,n,y.path,y.children,a,o,u):(F(y.source.fromServer,"Unknown source."),m=y.source.tagged||n.serverCache.isFiltered(),f=pf(i,n,y.path,y.children,a,o,m,u))}else if(l.type===jn.ACK_USER_WRITE){const y=l;y.revert?f=WN(i,n,y.path,a,o,u):f=ZN(i,n,y.path,y.affectedTree,a,o,u)}else if(l.type===jn.LISTEN_COMPLETE)f=$N(i,n,l.path,a,u);else throw kl("Unknown operation type: "+l.type);const p=u.getChanges();return FN(n,f,p),{viewCache:f,changes:p}}function FN(i,n,l){const a=n.eventCache;if(a.isFullyInitialized()){const o=a.getNode().isLeafNode()||a.getNode().isEmpty(),u=Ko(i);(l.length>0||!i.eventCache.isFullyInitialized()||o&&!a.getNode().equals(u)||!a.getNode().getPriority().equals(u.getPriority()))&&l.push(Qb(Ko(n)))}}function Jb(i,n,l,a,o,u){const f=n.eventCache;if(Fo(a,l)!=null)return n;{let m,p;if(Be(l))if(F(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const y=xs(n),x=y instanceof xe?y:xe.EMPTY_NODE,v=Kf(a,x);m=i.filter.updateFullNode(n.eventCache.getNode(),v,u)}else{const y=Xo(a,xs(n));m=i.filter.updateFullNode(n.eventCache.getNode(),y,u)}else{const y=De(l);if(y===".priority"){F(qi(l)===1,"Can't have a priority with additional path components");const x=f.getNode();p=n.serverCache.getNode();const v=uy(a,l,x,p);v!=null?m=i.filter.updatePriority(x,v):m=f.getNode()}else{const x=ft(l);let v;if(f.isCompleteForChild(y)){p=n.serverCache.getNode();const _=uy(a,l,f.getNode(),p);_!=null?v=f.getNode().getImmediateChild(y).updateChild(x,_):v=f.getNode().getImmediateChild(y)}else v=Xf(a,y,n.serverCache);v!=null?m=i.filter.updateChild(f.getNode(),y,v,x,o,u):m=f.getNode()}}return Va(n,m,f.isFullyInitialized()||Be(l),i.filter.filtersNodes())}}function Po(i,n,l,a,o,u,f,m){const p=n.serverCache;let y;const x=f?i.filter:i.filter.getIndexedFilter();if(Be(l))y=x.updateFullNode(p.getNode(),a,null);else if(x.filtersNodes()&&!p.isFiltered()){const T=p.getNode().updateChild(l,a);y=x.updateFullNode(p.getNode(),T,null)}else{const T=De(l);if(!p.isCompleteForPath(l)&&qi(l)>1)return n;const O=ft(l),V=p.getNode().getImmediateChild(T).updateChild(O,a);T===".priority"?y=x.updatePriority(p.getNode(),V):y=x.updateChild(p.getNode(),T,V,O,Wb,null)}const v=Kb(n,y,p.isFullyInitialized()||Be(l),x.filtersNodes()),_=new Ff(o,v,u);return Jb(i,v,l,o,_,m)}function gf(i,n,l,a,o,u,f){const m=n.eventCache;let p,y;const x=new Ff(o,n,u);if(Be(l))y=i.filter.updateFullNode(n.eventCache.getNode(),a,f),p=Va(n,y,!0,i.filter.filtersNodes());else{const v=De(l);if(v===".priority")y=i.filter.updatePriority(n.eventCache.getNode(),a),p=Va(n,y,m.isFullyInitialized(),m.isFiltered());else{const _=ft(l),T=m.getNode().getImmediateChild(v);let O;if(Be(_))O=a;else{const D=x.getCompleteChild(v);D!=null?Lf(_)===".priority"&&D.getChild(Bb(_)).isEmpty()?O=D:O=D.updateChild(_,a):O=xe.EMPTY_NODE}if(T.equals(O))p=n;else{const D=i.filter.updateChild(m.getNode(),v,O,_,x,f);p=Va(n,D,m.isFullyInitialized(),i.filter.filtersNodes())}}}return p}function dy(i,n){return i.eventCache.isCompleteForChild(n)}function PN(i,n,l,a,o,u,f){let m=n;return a.foreach((p,y)=>{const x=vt(l,p);dy(n,De(x))&&(m=gf(i,m,x,y,o,u,f))}),a.foreach((p,y)=>{const x=vt(l,p);dy(n,De(x))||(m=gf(i,m,x,y,o,u,f))}),m}function fy(i,n,l){return l.foreach((a,o)=>{n=n.updateChild(a,o)}),n}function pf(i,n,l,a,o,u,f,m){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let p=n,y;Be(l)?y=a:y=new ut(null).setTree(l,a);const x=n.serverCache.getNode();return y.children.inorderTraversal((v,_)=>{if(x.hasChild(v)){const T=n.serverCache.getNode().getImmediateChild(v),O=fy(i,T,_);p=Po(i,p,new lt(v),O,o,u,f,m)}}),y.children.inorderTraversal((v,_)=>{const T=!n.serverCache.isCompleteForChild(v)&&_.value===null;if(!x.hasChild(v)&&!T){const O=n.serverCache.getNode().getImmediateChild(v),D=fy(i,O,_);p=Po(i,p,new lt(v),D,o,u,f,m)}}),p}function ZN(i,n,l,a,o,u,f){if(Fo(o,l)!=null)return n;const m=n.serverCache.isFiltered(),p=n.serverCache;if(a.value!=null){if(Be(l)&&p.isFullyInitialized()||p.isCompleteForPath(l))return Po(i,n,l,p.getNode().getChild(l),o,u,m,f);if(Be(l)){let y=new ut(null);return p.getNode().forEachChild(yl,(x,v)=>{y=y.set(new lt(x),v)}),pf(i,n,l,y,o,u,m,f)}else return n}else{let y=new ut(null);return a.foreach((x,v)=>{const _=vt(l,x);p.isCompleteForPath(_)&&(y=y.set(x,p.getNode().getChild(_)))}),pf(i,n,l,y,o,u,m,f)}}function $N(i,n,l,a,o){const u=n.serverCache,f=Kb(n,u.getNode(),u.isFullyInitialized()||Be(l),u.isFiltered());return Jb(i,f,l,a,Wb,o)}function WN(i,n,l,a,o,u){let f;if(Fo(a,l)!=null)return n;{const m=new Ff(a,n,o),p=n.eventCache.getNode();let y;if(Be(l)||De(l)===".priority"){let x;if(n.serverCache.isFullyInitialized())x=Xo(a,xs(n));else{const v=n.serverCache.getNode();F(v instanceof xe,"serverChildren would be complete if leaf node"),x=Kf(a,v)}x=x,y=i.filter.updateFullNode(p,x,u)}else{const x=De(l);let v=Xf(a,x,n.serverCache);v==null&&n.serverCache.isCompleteForChild(x)&&(v=p.getImmediateChild(x)),v!=null?y=i.filter.updateChild(p,x,v,ft(l),m,u):n.eventCache.getNode().hasChild(x)?y=i.filter.updateChild(p,x,xe.EMPTY_NODE,ft(l),m,u):y=p,y.isEmpty()&&n.serverCache.isFullyInitialized()&&(f=Xo(a,xs(n)),f.isLeafNode()&&(y=i.filter.updateFullNode(y,f,u)))}return f=n.serverCache.isFullyInitialized()||Fo(a,Ze())!=null,Va(n,y,f,i.filter.filtersNodes())}}class JN{constructor(n,l){this.query_=n,this.eventRegistrations_=[];const a=this.query_._queryParams,o=new Gf(a.getIndex()),u=yN(a);this.processor_=YN(u);const f=l.serverCache,m=l.eventCache,p=o.updateFullNode(xe.EMPTY_NODE,f.getNode(),null),y=u.updateFullNode(xe.EMPTY_NODE,m.getNode(),null),x=new Qi(p,f.isFullyInitialized(),o.filtersNodes()),v=new Qi(y,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=ac(v,x),this.eventGenerator_=new wN(this.query_)}get query(){return this.query_}}function e2(i){return i.viewCache_.serverCache.getNode()}function t2(i){return Ko(i.viewCache_)}function n2(i,n){const l=xs(i.viewCache_);return l&&(i.query._queryParams.loadsAllData()||!Be(n)&&!l.getImmediateChild(De(n)).isEmpty())?l.getChild(n):null}function hy(i){return i.eventRegistrations_.length===0}function i2(i,n){i.eventRegistrations_.push(n)}function my(i,n,l){const a=[];if(l){F(n==null,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(u=>{const f=u.createCancelEvent(l,o);f&&a.push(f)})}if(n){let o=[];for(let u=0;u<i.eventRegistrations_.length;++u){const f=i.eventRegistrations_[u];if(!f.matches(n))o.push(f);else if(n.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(u+1));break}}i.eventRegistrations_=o}else i.eventRegistrations_=[];return a}function gy(i,n,l,a){n.type===jn.MERGE&&n.source.queryId!==null&&(F(xs(i.viewCache_),"We should always have a full cache before handling merges"),F(Ko(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,u=XN(i.processor_,o,n,l,a);return KN(i.processor_,u.viewCache),F(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=u.viewCache,ev(i,u.changes,u.viewCache.eventCache.getNode(),null)}function s2(i,n){const l=i.viewCache_.eventCache,a=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(_t,(u,f)=>{a.push(Tl(u,f))}),l.isFullyInitialized()&&a.push(Qb(l.getNode())),ev(i,a,l.getNode(),n)}function ev(i,n,l,a){const o=a?[a]:i.eventRegistrations_;return CN(i.eventGenerator_,n,l,o)}let Zo;class tv{constructor(){this.views=new Map}}function l2(i){F(!Zo,"__referenceConstructor has already been defined"),Zo=i}function a2(){return F(Zo,"Reference.ts has not been loaded"),Zo}function r2(i){return i.views.size===0}function Pf(i,n,l,a){const o=n.source.queryId;if(o!==null){const u=i.views.get(o);return F(u!=null,"SyncTree gave us an op for an invalid query."),gy(u,n,l,a)}else{let u=[];for(const f of i.views.values())u=u.concat(gy(f,n,l,a));return u}}function nv(i,n,l,a,o){const u=n._queryIdentifier,f=i.views.get(u);if(!f){let m=Xo(l,o?a:null),p=!1;m?p=!0:a instanceof xe?(m=Kf(l,a),p=!1):(m=xe.EMPTY_NODE,p=!1);const y=ac(new Qi(m,p,!1),new Qi(a,o,!1));return new JN(n,y)}return f}function o2(i,n,l,a,o,u){const f=nv(i,n,a,o,u);return i.views.has(n._queryIdentifier)||i.views.set(n._queryIdentifier,f),i2(f,l),s2(f,l)}function c2(i,n,l,a){const o=n._queryIdentifier,u=[];let f=[];const m=Yi(i);if(o==="default")for(const[p,y]of i.views.entries())f=f.concat(my(y,l,a)),hy(y)&&(i.views.delete(p),y.query._queryParams.loadsAllData()||u.push(y.query));else{const p=i.views.get(o);p&&(f=f.concat(my(p,l,a)),hy(p)&&(i.views.delete(o),p.query._queryParams.loadsAllData()||u.push(p.query)))}return m&&!Yi(i)&&u.push(new(a2())(n._repo,n._path)),{removed:u,events:f}}function iv(i){const n=[];for(const l of i.views.values())l.query._queryParams.loadsAllData()||n.push(l);return n}function Gi(i,n){let l=null;for(const a of i.views.values())l=l||n2(a,n);return l}function sv(i,n){if(n._queryParams.loadsAllData())return oc(i);{const a=n._queryIdentifier;return i.views.get(a)}}function lv(i,n){return sv(i,n)!=null}function Yi(i){return oc(i)!=null}function oc(i){for(const n of i.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let $o;function u2(i){F(!$o,"__referenceConstructor has already been defined"),$o=i}function d2(){return F($o,"Reference.ts has not been loaded"),$o}let f2=1;class py{constructor(n){this.listenProvider_=n,this.syncPointTree_=new ut(null),this.pendingWriteTree_=VN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function av(i,n,l,a,o){return MN(i.pendingWriteTree_,n,l,a,o),o?Dl(i,new _s(qf(),n,l)):[]}function h2(i,n,l,a){RN(i.pendingWriteTree_,n,l,a);const o=ut.fromObject(l);return Dl(i,new wl(qf(),n,o))}function Li(i,n,l=!1){const a=kN(i.pendingWriteTree_,n);if(jN(i.pendingWriteTree_,n)){let u=new ut(null);return a.snap!=null?u=u.set(Ze(),!0):Xt(a.children,f=>{u=u.set(new lt(f),!0)}),Dl(i,new Yo(a.path,u,l))}else return[]}function or(i,n,l){return Dl(i,new _s(Qf(),n,l))}function m2(i,n,l){const a=ut.fromObject(l);return Dl(i,new wl(Qf(),n,a))}function g2(i,n){return Dl(i,new tr(Qf(),n))}function p2(i,n,l){const a=$f(i,l);if(a){const o=Wf(a),u=o.path,f=o.queryId,m=Pt(u,n),p=new tr(Yf(f),m);return Jf(i,u,p)}else return[]}function Wo(i,n,l,a,o=!1){const u=n._path,f=i.syncPointTree_.get(u);let m=[];if(f&&(n._queryIdentifier==="default"||lv(f,n))){const p=c2(f,n,l,a);r2(f)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const y=p.removed;if(m=p.events,!o){const x=y.findIndex(_=>_._queryParams.loadsAllData())!==-1,v=i.syncPointTree_.findOnPath(u,(_,T)=>Yi(T));if(x&&!v){const _=i.syncPointTree_.subtree(u);if(!_.isEmpty()){const T=v2(_);for(let O=0;O<T.length;++O){const D=T[O],V=D.query,X=uv(i,D);i.listenProvider_.startListening(qa(V),nr(i,V),X.hashFn,X.onComplete)}}}!v&&y.length>0&&!a&&(x?i.listenProvider_.stopListening(qa(n),null):y.forEach(_=>{const T=i.queryToTagMap.get(cc(_));i.listenProvider_.stopListening(qa(_),T)}))}_2(i,y)}return m}function rv(i,n,l,a){const o=$f(i,a);if(o!=null){const u=Wf(o),f=u.path,m=u.queryId,p=Pt(f,n),y=new _s(Yf(m),p,l);return Jf(i,f,y)}else return[]}function y2(i,n,l,a){const o=$f(i,a);if(o){const u=Wf(o),f=u.path,m=u.queryId,p=Pt(f,n),y=ut.fromObject(l),x=new wl(Yf(m),p,y);return Jf(i,f,x)}else return[]}function yf(i,n,l,a=!1){const o=n._path;let u=null,f=!1;i.syncPointTree_.foreachOnPath(o,(_,T)=>{const O=Pt(_,o);u=u||Gi(T,O),f=f||Yi(T)});let m=i.syncPointTree_.get(o);m?(f=f||Yi(m),u=u||Gi(m,Ze())):(m=new tv,i.syncPointTree_=i.syncPointTree_.set(o,m));let p;u!=null?p=!0:(p=!1,u=xe.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((T,O)=>{const D=Gi(O,Ze());D&&(u=u.updateImmediateChild(T,D))}));const y=lv(m,n);if(!y&&!n._queryParams.loadsAllData()){const _=cc(n);F(!i.queryToTagMap.has(_),"View does not exist, but we have a tag");const T=x2();i.queryToTagMap.set(_,T),i.tagToQueryMap.set(T,_)}const x=rc(i.pendingWriteTree_,o);let v=o2(m,n,l,x,u,p);if(!y&&!f&&!a){const _=sv(m,n);v=v.concat(S2(i,n,_))}return v}function Zf(i,n,l){const o=i.pendingWriteTree_,u=i.syncPointTree_.findOnPath(n,(f,m)=>{const p=Pt(f,n),y=Gi(m,p);if(y)return y});return Pb(o,n,u,l,!0)}function b2(i,n){const l=n._path;let a=null;i.syncPointTree_.foreachOnPath(l,(y,x)=>{const v=Pt(y,l);a=a||Gi(x,v)});let o=i.syncPointTree_.get(l);o?a=a||Gi(o,Ze()):(o=new tv,i.syncPointTree_=i.syncPointTree_.set(l,o));const u=a!=null,f=u?new Qi(a,!0,!1):null,m=rc(i.pendingWriteTree_,n._path),p=nv(o,n,m,u?f.getNode():xe.EMPTY_NODE,u);return t2(p)}function Dl(i,n){return ov(n,i.syncPointTree_,null,rc(i.pendingWriteTree_,Ze()))}function ov(i,n,l,a){if(Be(i.path))return cv(i,n,l,a);{const o=n.get(Ze());l==null&&o!=null&&(l=Gi(o,Ze()));let u=[];const f=De(i.path),m=i.operationForChild(f),p=n.children.get(f);if(p&&m){const y=l?l.getImmediateChild(f):null,x=Zb(a,f);u=u.concat(ov(m,p,y,x))}return o&&(u=u.concat(Pf(o,i,a,l))),u}}function cv(i,n,l,a){const o=n.get(Ze());l==null&&o!=null&&(l=Gi(o,Ze()));let u=[];return n.children.inorderTraversal((f,m)=>{const p=l?l.getImmediateChild(f):null,y=Zb(a,f),x=i.operationForChild(f);x&&(u=u.concat(cv(x,m,p,y)))}),o&&(u=u.concat(Pf(o,i,a,l))),u}function uv(i,n){const l=n.query,a=nr(i,l);return{hashFn:()=>(e2(n)||xe.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return a?p2(i,l._path,a):g2(i,l._path);{const u=gC(o,l);return Wo(i,l,null,u)}}}}function nr(i,n){const l=cc(n);return i.queryToTagMap.get(l)}function cc(i){return i._path.toString()+"$"+i._queryIdentifier}function $f(i,n){return i.tagToQueryMap.get(n)}function Wf(i){const n=i.indexOf("$");return F(n!==-1&&n<i.length-1,"Bad queryKey."),{queryId:i.substr(n+1),path:new lt(i.substr(0,n))}}function Jf(i,n,l){const a=i.syncPointTree_.get(n);F(a,"Missing sync point for query tag that we're tracking");const o=rc(i.pendingWriteTree_,n);return Pf(a,l,o,null)}function v2(i){return i.fold((n,l,a)=>{if(l&&Yi(l))return[oc(l)];{let o=[];return l&&(o=iv(l)),Xt(a,(u,f)=>{o=o.concat(f)}),o}})}function qa(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(d2())(i._repo,i._path):i}function _2(i,n){for(let l=0;l<n.length;++l){const a=n[l];if(!a._queryParams.loadsAllData()){const o=cc(a),u=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(u)}}}function x2(){return f2++}function S2(i,n,l){const a=n._path,o=nr(i,n),u=uv(i,l),f=i.listenProvider_.startListening(qa(n),o,u.hashFn,u.onComplete),m=i.syncPointTree_.subtree(a);if(o)F(!Yi(m.value),"If we're adding a query, it shouldn't be shadowed");else{const p=m.fold((y,x,v)=>{if(!Be(y)&&x&&Yi(x))return[oc(x).query];{let _=[];return x&&(_=_.concat(iv(x).map(T=>T.query))),Xt(v,(T,O)=>{_=_.concat(O)}),_}});for(let y=0;y<p.length;++y){const x=p[y];i.listenProvider_.stopListening(qa(x),nr(i,x))}}return f}class eh{constructor(n){this.node_=n}getImmediateChild(n){const l=this.node_.getImmediateChild(n);return new eh(l)}node(){return this.node_}}class th{constructor(n,l){this.syncTree_=n,this.path_=l}getImmediateChild(n){const l=vt(this.path_,n);return new th(this.syncTree_,l)}node(){return Zf(this.syncTree_,this.path_)}}const T2=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},yy=function(i,n,l){if(!i||typeof i!="object")return i;if(F(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return w2(i[".sv"],n,l);if(typeof i[".sv"]=="object")return C2(i[".sv"],n);F(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},w2=function(i,n,l){if(i==="timestamp")return l.timestamp;F(!1,"Unexpected server value: "+i)},C2=function(i,n,l){i.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const a=i.increment;typeof a!="number"&&F(!1,"Unexpected increment value: "+a);const o=n.node();if(F(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return a;const f=o.getValue();return typeof f!="number"?a:f+a},dv=function(i,n,l,a){return nh(n,new th(l,i),a)},fv=function(i,n,l){return nh(i,new eh(n),l)};function nh(i,n,l){const a=i.getPriority().val(),o=yy(a,n.getImmediateChild(".priority"),l);let u;if(i.isLeafNode()){const f=i,m=yy(f.getValue(),n,l);return m!==f.getValue()||o!==f.getPriority().val()?new Lt(m,Dt(o)):i}else{const f=i;return u=f,o!==f.getPriority().val()&&(u=u.updatePriority(new Lt(o))),f.forEachChild(_t,(m,p)=>{const y=nh(p,n.getImmediateChild(m),l);y!==p&&(u=u.updateImmediateChild(m,y))}),u}}class ih{constructor(n="",l=null,a={children:{},childCount:0}){this.name=n,this.parent=l,this.node=a}}function sh(i,n){let l=n instanceof lt?n:new lt(n),a=i,o=De(l);for(;o!==null;){const u=xl(a.node.children,o)||{children:{},childCount:0};a=new ih(o,a,u),l=ft(l),o=De(l)}return a}function Ol(i){return i.node.value}function hv(i,n){i.node.value=n,bf(i)}function mv(i){return i.node.childCount>0}function N2(i){return Ol(i)===void 0&&!mv(i)}function uc(i,n){Xt(i.node.children,(l,a)=>{n(new ih(l,i,a))})}function gv(i,n,l,a){l&&n(i),uc(i,o=>{gv(o,n,!0)})}function E2(i,n,l){let a=i.parent;for(;a!==null;){if(n(a))return!0;a=a.parent}return!1}function cr(i){return new lt(i.parent===null?i.name:cr(i.parent)+"/"+i.name)}function bf(i){i.parent!==null&&A2(i.parent,i.name,i)}function A2(i,n,l){const a=N2(l),o=Vn(i.node.children,n);a&&o?(delete i.node.children[n],i.node.childCount--,bf(i)):!a&&!o&&(i.node.children[n]=l.node,i.node.childCount++,bf(i))}const M2=/[\[\].#$\/\u0000-\u001F\u007F]/,R2=/[\[\].#$\u0000-\u001F\u007F]/,Qd=10*1024*1024,lh=function(i){return typeof i=="string"&&i.length!==0&&!M2.test(i)},pv=function(i){return typeof i=="string"&&i.length!==0&&!R2.test(i)},k2=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),pv(i)},j2=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!Df(i)||i&&typeof i=="object"&&Vn(i,".sv")},yv=function(i,n,l,a){a&&n===void 0||dc(nc(i,"value"),n,l)},dc=function(i,n,l){const a=l instanceof lt?new PC(l,i):l;if(n===void 0)throw new Error(i+"contains undefined "+ms(a));if(typeof n=="function")throw new Error(i+"contains a function "+ms(a)+" with contents = "+n.toString());if(Df(n))throw new Error(i+"contains "+n.toString()+" "+ms(a));if(typeof n=="string"&&n.length>Qd/3&&ic(n)>Qd)throw new Error(i+"contains a string greater than "+Qd+" utf8 bytes "+ms(a)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let o=!1,u=!1;if(Xt(n,(f,m)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(u=!0,!lh(f)))throw new Error(i+" contains an invalid key ("+f+") "+ms(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ZC(a,f),dc(i,m,a),$C(a)}),o&&u)throw new Error(i+' contains ".value" child '+ms(a)+" in addition to actual children.")}},D2=function(i,n){let l,a;for(l=0;l<n.length;l++){a=n[l];const u=$a(a);for(let f=0;f<u.length;f++)if(!(u[f]===".priority"&&f===u.length-1)){if(!lh(u[f]))throw new Error(i+"contains an invalid key ("+u[f]+") in path "+a.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(FC);let o=null;for(l=0;l<n.length;l++){if(a=n[l],o!==null&&Nn(o,a))throw new Error(i+"contains a path "+o.toString()+" that is ancestor of another path "+a.toString());o=a}},O2=function(i,n,l,a){const o=nc(i,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");const u=[];Xt(n,(f,m)=>{const p=new lt(f);if(dc(o,m,vt(l,p)),Lf(p)===".priority"&&!j2(m))throw new Error(o+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(p)}),D2(o,u)},ah=function(i,n,l,a){if(!pv(l))throw new Error(nc(i,n)+'was an invalid path = "'+l+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},z2=function(i,n,l,a){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),ah(i,n,l)},fc=function(i,n){if(De(n)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},I2=function(i,n){const l=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!lh(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||l.length!==0&&!k2(l))throw new Error(nc(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class B2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hc(i,n){let l=null;for(let a=0;a<n.length;a++){const o=n[a],u=o.getPath();l!==null&&!Hf(u,l.path)&&(i.eventLists_.push(l),l=null),l===null&&(l={events:[],path:u}),l.events.push(o)}l&&i.eventLists_.push(l)}function bv(i,n,l){hc(i,l),vv(i,a=>Hf(a,n))}function En(i,n,l){hc(i,l),vv(i,a=>Nn(a,n)||Nn(n,a))}function vv(i,n){i.recursionDepth_++;let l=!0;for(let a=0;a<i.eventLists_.length;a++){const o=i.eventLists_[a];if(o){const u=o.path;n(u)?(L2(i.eventLists_[a]),i.eventLists_[a]=null):l=!1}}l&&(i.eventLists_=[]),i.recursionDepth_--}function L2(i){for(let n=0;n<i.events.length;n++){const l=i.events[n];if(l!==null){i.events[n]=null;const a=l.getEventRunner();Ha&&Kt("event: "+l.toString()),jl(a)}}}const H2="repo_interrupt",U2=25;class V2{constructor(n,l,a,o){this.repoInfo_=n,this.forceRestClient_=l,this.authTokenProvider_=a,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new B2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qo(),this.transactionQueueTree_=new ih,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function G2(i,n,l){if(i.stats_=If(i.repoInfo_),i.forceRestClient_||vC())i.server_=new qo(i.repoInfo_,(a,o,u,f)=>{by(i,a,o,u,f)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>vy(i,!0),0);else{if(typeof l<"u"&&l!==null){if(typeof l!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ot(l)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}i.persistentConnection_=new ui(i.repoInfo_,n,(a,o,u,f)=>{by(i,a,o,u,f)},a=>{vy(i,a)},a=>{q2(i,a)},i.authTokenProvider_,i.appCheckProvider_,l),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(a=>{i.server_.refreshAuthToken(a)}),i.appCheckProvider_.addTokenChangeListener(a=>{i.server_.refreshAppCheckToken(a.token)}),i.statsReporter_=wC(i.repoInfo_,()=>new TN(i.stats_,i.server_)),i.infoData_=new bN,i.infoSyncTree_=new py({startListening:(a,o,u,f)=>{let m=[];const p=i.infoData_.getNode(a._path);return p.isEmpty()||(m=or(i.infoSyncTree_,a._path,p),setTimeout(()=>{f("ok")},0)),m},stopListening:()=>{}}),rh(i,"connected",!1),i.serverSyncTree_=new py({startListening:(a,o,u,f)=>(i.server_.listen(a,u,o,(m,p)=>{const y=f(m,p);En(i.eventQueue_,a._path,y)}),[]),stopListening:(a,o)=>{i.server_.unlisten(a,o)}})}function _v(i){const l=i.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+l}function mc(i){return T2({timestamp:_v(i)})}function by(i,n,l,a,o){i.dataUpdateCount++;const u=new lt(n);l=i.interceptServerDataCallback_?i.interceptServerDataCallback_(n,l):l;let f=[];if(o)if(a){const p=Io(l,y=>Dt(y));f=y2(i.serverSyncTree_,u,p,o)}else{const p=Dt(l);f=rv(i.serverSyncTree_,u,p,o)}else if(a){const p=Io(l,y=>Dt(y));f=m2(i.serverSyncTree_,u,p)}else{const p=Dt(l);f=or(i.serverSyncTree_,u,p)}let m=u;f.length>0&&(m=Nl(i,u)),En(i.eventQueue_,m,f)}function vy(i,n){rh(i,"connected",n),n===!1&&X2(i)}function q2(i,n){Xt(n,(l,a)=>{rh(i,l,a)})}function rh(i,n,l){const a=new lt("/.info/"+n),o=Dt(l);i.infoData_.updateSnapshot(a,o);const u=or(i.infoSyncTree_,a,o);En(i.eventQueue_,a,u)}function oh(i){return i.nextWriteId_++}function Q2(i,n,l){const a=b2(i.serverSyncTree_,n);return a!=null?Promise.resolve(a):i.server_.get(n).then(o=>{const u=Dt(o).withIndex(n._queryParams.getIndex());yf(i.serverSyncTree_,n,l,!0);let f;if(n._queryParams.loadsAllData())f=or(i.serverSyncTree_,n._path,u);else{const m=nr(i.serverSyncTree_,n);f=rv(i.serverSyncTree_,n._path,u,m)}return En(i.eventQueue_,n._path,f),Wo(i.serverSyncTree_,n,l,null,!0),u},o=>(ur(i,"get for query "+Ot(n)+" failed: "+o),Promise.reject(new Error(o))))}function Y2(i,n,l,a,o){ur(i,"set",{path:n.toString(),value:l,priority:a});const u=mc(i),f=Dt(l,a),m=Zf(i.serverSyncTree_,n),p=fv(f,m,u),y=oh(i),x=av(i.serverSyncTree_,n,p,y,!0);hc(i.eventQueue_,x),i.server_.put(n.toString(),f.val(!0),(_,T)=>{const O=_==="ok";O||Zt("set at "+n+" failed: "+_);const D=Li(i.serverSyncTree_,y,!O);En(i.eventQueue_,n,D),vf(i,o,_,T)});const v=uh(i,n);Nl(i,v),En(i.eventQueue_,v,[])}function K2(i,n,l,a){ur(i,"update",{path:n.toString(),value:l});let o=!0;const u=mc(i),f={};if(Xt(l,(m,p)=>{o=!1,f[m]=dv(vt(n,m),Dt(p),i.serverSyncTree_,u)}),o)Kt("update() called with empty data.  Don't do anything."),vf(i,a,"ok",void 0);else{const m=oh(i),p=h2(i.serverSyncTree_,n,f,m);hc(i.eventQueue_,p),i.server_.merge(n.toString(),l,(y,x)=>{const v=y==="ok";v||Zt("update at "+n+" failed: "+y);const _=Li(i.serverSyncTree_,m,!v),T=_.length>0?Nl(i,n):n;En(i.eventQueue_,T,_),vf(i,a,y,x)}),Xt(l,y=>{const x=uh(i,vt(n,y));Nl(i,x)}),En(i.eventQueue_,n,[])}}function X2(i){ur(i,"onDisconnectEvents");const n=mc(i),l=Qo();df(i.onDisconnect_,Ze(),(o,u)=>{const f=dv(o,u,i.serverSyncTree_,n);Yb(l,o,f)});let a=[];df(l,Ze(),(o,u)=>{a=a.concat(or(i.serverSyncTree_,o,u));const f=uh(i,o);Nl(i,f)}),i.onDisconnect_=Qo(),En(i.eventQueue_,Ze(),a)}function F2(i,n,l){let a;De(n._path)===".info"?a=yf(i.infoSyncTree_,n,l):a=yf(i.serverSyncTree_,n,l),bv(i.eventQueue_,n._path,a)}function P2(i,n,l){let a;De(n._path)===".info"?a=Wo(i.infoSyncTree_,n,l):a=Wo(i.serverSyncTree_,n,l),bv(i.eventQueue_,n._path,a)}function Z2(i){i.persistentConnection_&&i.persistentConnection_.interrupt(H2)}function ur(i,...n){let l="";i.persistentConnection_&&(l=i.persistentConnection_.id+":"),Kt(l,...n)}function vf(i,n,l,a){n&&jl(()=>{if(l==="ok")n(null);else{const o=(l||"error").toUpperCase();let u=o;a&&(u+=": "+a);const f=new Error(u);f.code=o,n(f)}})}function xv(i,n,l){return Zf(i.serverSyncTree_,n,l)||xe.EMPTY_NODE}function ch(i,n=i.transactionQueueTree_){if(n||gc(i,n),Ol(n)){const l=Tv(i,n);F(l.length>0,"Sending zero length transaction queue"),l.every(o=>o.status===0)&&$2(i,cr(n),l)}else mv(n)&&uc(n,l=>{ch(i,l)})}function $2(i,n,l){const a=l.map(y=>y.currentWriteId),o=xv(i,n,a);let u=o;const f=o.hash();for(let y=0;y<l.length;y++){const x=l[y];F(x.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const v=Pt(n,x.path);u=u.updateChild(v,x.currentOutputSnapshotRaw)}const m=u.val(!0),p=n;i.server_.put(p.toString(),m,y=>{ur(i,"transaction put response",{path:p.toString(),status:y});let x=[];if(y==="ok"){const v=[];for(let _=0;_<l.length;_++)l[_].status=2,x=x.concat(Li(i.serverSyncTree_,l[_].currentWriteId)),l[_].onComplete&&v.push(()=>l[_].onComplete(null,!0,l[_].currentOutputSnapshotResolved)),l[_].unwatcher();gc(i,sh(i.transactionQueueTree_,n)),ch(i,i.transactionQueueTree_),En(i.eventQueue_,n,x);for(let _=0;_<v.length;_++)jl(v[_])}else{if(y==="datastale")for(let v=0;v<l.length;v++)l[v].status===3?l[v].status=4:l[v].status=0;else{Zt("transaction at "+p.toString()+" failed: "+y);for(let v=0;v<l.length;v++)l[v].status=4,l[v].abortReason=y}Nl(i,n)}},f)}function Nl(i,n){const l=Sv(i,n),a=cr(l),o=Tv(i,l);return W2(i,o,a),a}function W2(i,n,l){if(n.length===0)return;const a=[];let o=[];const f=n.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<n.length;m++){const p=n[m],y=Pt(l,p.path);let x=!1,v;if(F(y!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)x=!0,v=p.abortReason,o=o.concat(Li(i.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=U2)x=!0,v="maxretry",o=o.concat(Li(i.serverSyncTree_,p.currentWriteId,!0));else{const _=xv(i,p.path,f);p.currentInputSnapshot=_;const T=n[m].update(_.val());if(T!==void 0){dc("transaction failed: Data returned ",T,p.path);let O=Dt(T);typeof T=="object"&&T!=null&&Vn(T,".priority")||(O=O.updatePriority(_.getPriority()));const V=p.currentWriteId,X=mc(i),P=fv(O,_,X);p.currentOutputSnapshotRaw=O,p.currentOutputSnapshotResolved=P,p.currentWriteId=oh(i),f.splice(f.indexOf(V),1),o=o.concat(av(i.serverSyncTree_,p.path,P,p.currentWriteId,p.applyLocally)),o=o.concat(Li(i.serverSyncTree_,V,!0))}else x=!0,v="nodata",o=o.concat(Li(i.serverSyncTree_,p.currentWriteId,!0))}En(i.eventQueue_,l,o),o=[],x&&(n[m].status=2,(function(_){setTimeout(_,Math.floor(0))})(n[m].unwatcher),n[m].onComplete&&(v==="nodata"?a.push(()=>n[m].onComplete(null,!1,n[m].currentInputSnapshot)):a.push(()=>n[m].onComplete(new Error(v),!1,null))))}gc(i,i.transactionQueueTree_);for(let m=0;m<a.length;m++)jl(a[m]);ch(i,i.transactionQueueTree_)}function Sv(i,n){let l,a=i.transactionQueueTree_;for(l=De(n);l!==null&&Ol(a)===void 0;)a=sh(a,l),n=ft(n),l=De(n);return a}function Tv(i,n){const l=[];return wv(i,n,l),l.sort((a,o)=>a.order-o.order),l}function wv(i,n,l){const a=Ol(n);if(a)for(let o=0;o<a.length;o++)l.push(a[o]);uc(n,o=>{wv(i,o,l)})}function gc(i,n){const l=Ol(n);if(l){let a=0;for(let o=0;o<l.length;o++)l[o].status!==2&&(l[a]=l[o],a++);l.length=a,hv(n,l.length>0?l:void 0)}uc(n,a=>{gc(i,a)})}function uh(i,n){const l=cr(Sv(i,n)),a=sh(i.transactionQueueTree_,n);return E2(a,o=>{Yd(i,o)}),Yd(i,a),gv(a,o=>{Yd(i,o)}),l}function Yd(i,n){const l=Ol(n);if(l){const a=[];let o=[],u=-1;for(let f=0;f<l.length;f++)l[f].status===3||(l[f].status===1?(F(u===f-1,"All SENT items should be at beginning of queue."),u=f,l[f].status=3,l[f].abortReason="set"):(F(l[f].status===0,"Unexpected transaction status in abort"),l[f].unwatcher(),o=o.concat(Li(i.serverSyncTree_,l[f].currentWriteId,!0)),l[f].onComplete&&a.push(l[f].onComplete.bind(null,new Error("set"),!1,null))));u===-1?hv(n,void 0):l.length=u+1,En(i.eventQueue_,cr(n),o);for(let f=0;f<a.length;f++)jl(a[f])}}function J2(i){let n="";const l=i.split("/");for(let a=0;a<l.length;a++)if(l[a].length>0){let o=l[a];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}n+="/"+o}return n}function eE(i){const n={};i.charAt(0)==="?"&&(i=i.substring(1));for(const l of i.split("&")){if(l.length===0)continue;const a=l.split("=");a.length===2?n[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Zt(`Invalid query segment '${l}' in query '${i}'`)}return n}const _y=function(i,n){const l=tE(i),a=l.namespace;l.domain==="firebase.com"&&fi(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&l.domain!=="localhost"&&fi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||uC();const o=l.scheme==="ws"||l.scheme==="wss";return{repoInfo:new Ab(l.host,l.secure,a,o,n,"",a!==l.subdomain),path:new lt(l.pathString)}},tE=function(i){let n="",l="",a="",o="",u="",f=!0,m="https",p=443;if(typeof i=="string"){let y=i.indexOf("//");y>=0&&(m=i.substring(0,y-1),i=i.substring(y+2));let x=i.indexOf("/");x===-1&&(x=i.length);let v=i.indexOf("?");v===-1&&(v=i.length),n=i.substring(0,Math.min(x,v)),x<v&&(o=J2(i.substring(x,v)));const _=eE(i.substring(Math.min(i.length,v)));y=n.indexOf(":"),y>=0?(f=m==="https"||m==="wss",p=parseInt(n.substring(y+1),10)):y=n.length;const T=n.slice(0,y);if(T.toLowerCase()==="localhost")l="localhost";else if(T.split(".").length<=2)l=T;else{const O=n.indexOf(".");a=n.substring(0,O).toLowerCase(),l=n.substring(O+1),u=a}"ns"in _&&(u=_.ns)}return{host:n,port:p,domain:l,subdomain:a,secure:f,scheme:m,pathString:o,namespace:u}};const xy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",nE=(function(){let i=0;const n=[];return function(l){const a=l===i;i=l;let o;const u=new Array(8);for(o=7;o>=0;o--)u[o]=xy.charAt(l%64),l=Math.floor(l/64);F(l===0,"Cannot push at time == 0");let f=u.join("");if(a){for(o=11;o>=0&&n[o]===63;o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)f+=xy.charAt(n[o]);return F(f.length===20,"nextPushId: Length should be 20."),f}})();class iE{constructor(n,l,a,o){this.eventType=n,this.eventRegistration=l,this.snapshot=a,this.prevName=o}getPath(){const n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ot(this.snapshot.exportVal())}}class sE{constructor(n,l,a){this.eventRegistration=n,this.error=l,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Cv{constructor(n,l){this.snapshotCallback=n,this.cancelCallback=l}onValue(n,l){this.snapshotCallback.call(null,n,l)}onCancel(n){return F(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class pc{constructor(n,l,a,o){this._repo=n,this._path=l,this._queryParams=a,this._orderByCalled=o}get key(){return Be(this._path)?null:Lf(this._path)}get ref(){return new Gn(this._repo,this._path)}get _queryIdentifier(){const n=ay(this._queryParams),l=Of(n);return l==="{}"?"default":l}get _queryObject(){return ay(this._queryParams)}isEqual(n){if(n=Ss(n),!(n instanceof pc))return!1;const l=this._repo===n._repo,a=Hf(this._path,n._path),o=this._queryIdentifier===n._queryIdentifier;return l&&a&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+XC(this._path)}}class Gn extends pc{constructor(n,l){super(n,l,new lc,!1)}get parent(){const n=Bb(this._path);return n===null?null:new Gn(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}}class El{constructor(n,l,a){this._node=n,this.ref=l,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const l=new lt(n),a=Al(this.ref,n);return new El(this._node.getChild(l),a,_t)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,o)=>n(new El(o,Al(this.ref,a),_t)))}hasChild(n){const l=new lt(n);return!this._node.getChild(l).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function At(i,n){return i=Ss(i),i._checkNotDeleted("ref"),n!==void 0?Al(i._root,n):i._root}function Al(i,n){return i=Ss(i),De(i._path)===null?z2("child","path",n):ah("child","path",n),new Gn(i._repo,vt(i._path,n))}function dh(i,n){i=Ss(i),fc("push",i._path),yv("push",n,i._path,!0);const l=_v(i._repo),a=nE(l),o=Al(i,a),u=Al(i,a);let f;return f=Promise.resolve(u),o.then=f.then.bind(f),o.catch=f.then.bind(f,void 0),o}function fh(i){return fc("remove",i._path),Cs(i,null)}function Cs(i,n){i=Ss(i),fc("set",i._path),yv("set",n,i._path,!1);const l=new ir;return Y2(i._repo,i._path,n,null,l.wrapCallback(()=>{})),l.promise}function $t(i,n){O2("update",n,i._path);const l=new ir;return K2(i._repo,i._path,n,l.wrapCallback(()=>{})),l.promise}function Un(i){i=Ss(i);const n=new Cv(()=>{}),l=new yc(n);return Q2(i._repo,i,l).then(a=>new El(a,new Gn(i._repo,i._path),i._queryParams.getIndex()))}class yc{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,l){const a=l._queryParams.getIndex();return new iE("value",this,new El(n.snapshotNode,new Gn(l._repo,l._path),a))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,l){return this.callbackContext.hasCancelCallback?new sE(this,n,l):null}matches(n){return n instanceof yc?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function lE(i,n,l,a,o){const u=new Cv(l,void 0),f=new yc(u);return F2(i._repo,i,f),()=>P2(i._repo,i,f)}function hh(i,n,l,a){return lE(i,"value",n)}l2(Gn);u2(Gn);const aE="FIREBASE_DATABASE_EMULATOR_HOST",_f={};let rE=!1;function oE(i,n,l,a){const o=n.lastIndexOf(":"),u=n.substring(0,o),f=kf(u);i.repoInfo_=new Ab(n,f,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,l),a&&(i.authTokenProvider_=a)}function Nv(i,n,l,a,o){let u=a||i.options.databaseURL;u===void 0&&(i.options.projectId||fi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kt("Using default host for project ",i.options.projectId),u=`${i.options.projectId}-default-rtdb.firebaseio.com`);let f=_y(u,o),m=f.repoInfo,p;typeof process<"u"&&G0&&(p=G0[aE]),p?(u=`http://${p}?ns=${m.namespace}`,f=_y(u,o),m=f.repoInfo):f.repoInfo.secure;const y=new xC(i.name,i.options,n);I2("Invalid Firebase Database URL",f),Be(f.path)||fi("Database URL must point to the root of a Firebase Database (not including a child path).");const x=uE(m,i,y,new _C(i,l));return new Ev(x,i)}function cE(i,n){const l=_f[n];(!l||l[i.key]!==i)&&fi(`Database ${n}(${i.repoInfo_}) has already been deleted.`),Z2(i),delete l[i.key]}function uE(i,n,l,a){let o=_f[n.name];o||(o={},_f[n.name]=o);let u=o[i.toURLString()];return u&&fi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new V2(i,rE,l,a),o[i.toURLString()]=u,u}class Ev{constructor(n,l){this._repoInternal=n,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(G2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gn(this._repo,Ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(cE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&fi("Cannot call "+n+" on a deleted database.")}}function Av(i=Fw(),n){const l=qw(i,"database").getImmediate({identifier:n});if(!l._instanceStarted){const a=AT("database");a&&Mv(l,...a)}return l}function Mv(i,n,l,a={}){i=Ss(i),i._checkNotDeleted("useEmulator");const o=`${n}:${l}`,u=i._repoInternal;if(i._instanceStarted){if(o===i._repoInternal.repoInfo_.host&&Bo(a,u.repoInfo_.emulatorOptions))return;fi("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(u.repoInfo_.nodeAdmin)a.mockUserToken&&fi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new ko(ko.OWNER);else if(a.mockUserToken){const m=typeof a.mockUserToken=="string"?a.mockUserToken:RT(a.mockUserToken,i.app.options.projectId);f=new ko(m)}kf(n)&&(MT(n),DT("Database",!0)),oE(u,o,a,f)}function dE(i){mb(Xw),Ho(new Fa("database",(n,{instanceIdentifier:l})=>{const a=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),u=n.getProvider("app-check-internal");return Nv(a,o,u,l)},"PUBLIC").setMultipleInstances(!0)),gl(q0,Q0,i),gl(q0,Q0,"esm2020")}ui.prototype.simpleListen=function(i,n){this.sendRequest("q",{p:i},n)};ui.prototype.echo=function(i,n){this.sendRequest("echo",{d:i},n)};dE();const fE=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:El,Database:Ev,_QueryImpl:pc,_QueryParams:lc,_ReferenceImpl:Gn,_repoManagerDatabaseFromApp:Nv,_setSDKVersion:mb,_validatePathString:ah,_validateWritablePath:fc,child:Al,connectDatabaseEmulator:Mv,get:Un,getDatabase:Av,onValue:hh,push:dh,ref:At,remove:fh,set:Cs,update:$t},Symbol.toStringTag,{value:"Module"}));var hE="firebase",mE="12.9.0";gl(hE,mE,"app");const Sy={apiKey:"AIzaSyAweEeSIFt434-nnNBi5sYy1hTXvTe7XmE",authDomain:"karaoke-sau-nhan-e798b.firebaseapp.com",databaseURL:"https://karaoke-sau-nhan-e798b-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"karaoke-sau-nhan-e798b"};let Le=null,Ut=!1;try{if(Sy.databaseURL){const i=ub(Sy);Le=Av(i),Ut=!0}else console.warn("[Firebase] databaseURL not configured. Queue sync disabled.")}catch(i){console.error("[Firebase] Init failed:",i.message)}const Ty="karaoke_device_id";function Rv(){let i=localStorage.getItem(Ty);return i||(i="user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem(Ty,i)),i}function kv(i){const n=[];for(const l of Object.values(i||{}))jv(l.songs).filter(u=>!u.isPriority).length>0&&n.push(l.startRound||1);return n.length>0?Math.min(...n):1}function gE(i){if(!i||Object.keys(i).length===0)return[];const n=[],l=[];for(const[f,m]of Object.entries(i)){const p=jv(m.songs),y=p.filter(v=>v.isPriority),x=p.filter(v=>!v.isPriority).sort((v,_)=>(v.addedAt||0)-(_.addedAt||0));for(const v of y)n.push({...v,customerId:f,customerName:m.name,isPriority:!0,firebaseKey:v.id||v.firebaseKey,status:v.status||(v.videoId?"ready":"waiting")});x.length>0&&l.push({id:f,name:m.name,firstOrderTime:m.firstOrderTime||0,startRound:m.startRound||1,songs:x})}if(n.sort((f,m)=>(m.addedAt||0)-(f.addedAt||0)),l.sort((f,m)=>f.firstOrderTime-m.firstOrderTime),l.length===0)return n;const a=Math.min(...l.map(f=>f.startRound)),o=Math.max(...l.map(f=>f.startRound+f.songs.length-1)),u=[];for(let f=a;f<=o;f++)for(const m of l){const p=f-m.startRound;if(p>=0&&p<m.songs.length){const y=m.songs[p];u.push({...y,customerId:m.id,customerName:m.name,round:f,originalSongIndex:p,firebaseKey:y.id||y.firebaseKey||`${m.id}_${p}`,status:y.status||(y.videoId?"ready":"waiting")})}}return[...n,...u]}function jv(i){return i?Array.isArray(i)?[...i]:Object.values(i):[]}function Ns(){return!Ut||!Le?null:At(Le,"customerQueues")}function Dv(){return!Ut||!Le?null:At(Le,"playQueue")}async function zl(){if(!(!Ut||!Le))try{const n=(await Un(Ns())).val()||{},l=gE(n);await Cs(Dv(),l)}catch(i){console.error("Failed to sync play queue:",i)}}function Ov(i){return`guest_${(i||"").trim().toLowerCase().replace(/[.#$\[\]\/]/g,"").replace(/\s+/g,"_")||"unknown"}`}async function pE(i,n){if(!Ut||!Le)return Promise.resolve();const l=n||Rv(),a=At(Le,`customerQueues/${l}`),u=(await Un(a)).val(),f=Date.now(),p=(await Un(Ns())).val()||{},y=kv(p);if(!u)await $t(a,{name:i.addedBy||"Khch mi",firstOrderTime:f,startRound:y});else if((u.songs?Object.values(u.songs):[]).some(V=>!V.isPriority))await $t(a,{name:i.addedBy});else{const V=Math.max(u.startRound||1,y);await $t(a,{startRound:V,name:i.addedBy})}const x=At(Le,`customerQueues/${l}/songs`),v=dh(x),_=v.key,T={id:_,videoId:i.videoId,title:i.title,cleanTitle:i.cleanTitle||i.title,artist:i.artist||"",addedBy:i.addedBy,thumbnail:i.thumbnail||"",addedAt:f,isPriority:i.isPriority||!1,source:i.source||"web"};return i.beatOptions&&(T.beatOptions=i.beatOptions),await Cs(v,T),await zl(),{key:_}}async function zv(i,n){if(!Ut||!Le)return Promise.resolve();const l=n||Rv(),a=At(Le,`customerQueues/${l}`),u=(await Un(a)).val(),f=Date.now(),p=(await Un(Ns())).val()||{},y=kv(p);if(!u)await $t(a,{name:i||"Khch mi",firstOrderTime:f,startRound:y});else if((u.songs?Object.values(u.songs):[]).some(D=>!D.isPriority))await $t(a,{name:i});else{const D=Math.max(u.startRound||1,y);await $t(a,{startRound:D,name:i})}const x=At(Le,`customerQueues/${l}/songs`),v=dh(x),_=v.key;return await Cs(v,{id:_,videoId:null,title:null,cleanTitle:null,artist:null,addedBy:i,thumbnail:null,addedAt:f,isPriority:!1,source:"host",status:"waiting"}),await zl(),{key:_}}async function Iv(i,n){if(!(!Ut||!Le||!i))try{const a=(await Un(Ns())).val();if(!a)return;for(const[o,u]of Object.entries(a))if(u.songs&&u.songs[i]){const f=At(Le,`customerQueues/${o}/songs/${i}`);await $t(f,{videoId:n.videoId,title:n.title,cleanTitle:n.cleanTitle||n.title,artist:n.artist||"",thumbnail:n.thumbnail||"",status:"ready"}),await zl();return}}catch(l){console.error("Error updating slot with song:",l)}}async function Bv(i,n){if(!(!Ut||!Le||!i))try{const a=(await Un(Ns())).val();if(!a)return;for(const[o,u]of Object.entries(a))if(u.songs&&u.songs[i]){const f=At(Le,`customerQueues/${o}/songs/${i}`),m={status:n};n==="skipped"&&(m.wasSkipped=!0),await $t(f,m),await zl();return}}catch(l){console.error("Error updating slot status:",l)}}const bl=new Set;async function xf(i){if(!(!Ut||!Le||!i)&&!bl.has(i)){bl.add(i);try{const l=(await Un(Ns())).val();if(!l)return;let a=null;for(const[o,u]of Object.entries(l))if(u.songs&&u.songs[i]){a=`customerQueues/${o}/songs/${i}`;break}a&&(await fh(At(Le,a)),await zl())}catch(n){console.error("Error removing song:",n)}finally{bl.delete(i)}}}async function Lv(i){if(!(!Ut||!Le||!i)&&!bl.has(i)){bl.add(i);try{const l=(await Un(Ns())).val();if(!l)return;for(const[a,o]of Object.entries(l))if(o.songs&&o.songs[i]){const u=o.songs[i];if(await fh(At(Le,`customerQueues/${a}/songs/${i}`)),!u.isPriority){const f=o.startRound||1;await $t(At(Le,`customerQueues/${a}`),{startRound:f+1})}await zl();return}}catch(n){console.error("Error completing song:",n)}finally{bl.delete(i)}}}function yE(){if(!Ut||!Le)return Promise.resolve();const i={};return i.customerQueues=null,i.playQueue=null,$t(At(Le),i)}async function Hv(i){if(!Ut||!Le)return;const n=At(Le,"nowPlaying");await $t(n,{changingBeat:!0,beatOptions:i||[]})}async function Uv(i){if(!Ut||!Le||!i)return;const n=At(Le,"nowPlaying");await $t(n,{videoId:i.videoId,title:i.title,changingBeat:!1,beatOptions:null})}async function Vv(){if(!Ut||!Le)return;const i=At(Le,"nowPlaying");await $t(i,{changingBeat:!1,beatOptions:null})}function mh(i){if(!Ut||!Le)return Promise.resolve();const n=At(Le,"nowPlaying"),l={...i};return Object.keys(l).forEach(a=>{l[a]===void 0&&(l[a]=null)}),Cs(n,{...l,startedAt:Date.now()})}function Sf(i,n){if(!Ut||!Le)return Promise.resolve();const l=At(Le,"nowPlaying");return $t(l,{currentTime:i,duration:n,updatedAt:Date.now()})}function gh(){if(!Ut||!Le)return Promise.resolve();const i=At(Le,"nowPlaying");return Cs(i,null)}function bE(i){if(!Ut||!Le)return i(null),()=>{};const n=At(Le,"nowPlaying");return hh(n,l=>{i(l.val()||null)})}function Gv(i){const n=Dv();return n?hh(n,l=>{const a=l.val(),o=a?(Array.isArray(a)?a:Object.values(a)).filter(Boolean):[];i(o)}):(i([]),()=>{})}const qv=Object.freeze(Object.defineProperty({__proto__:null,cancelBeatChange:Vv,clearFirebaseQueue:yE,clearNowPlaying:gh,completeSong:Lv,confirmBeatChange:Uv,guestNameToCustomerKey:Ov,listenToFirebaseQueue:Gv,listenToNowPlaying:bE,pushReservationToFirebase:zv,pushToFirebaseQueue:pE,removeFromFirebaseQueue:xf,setNowPlaying:mh,startBeatChange:Hv,updateNowPlayingProgress:Sf,updateSlotStatus:Bv,updateSlotWithSong:Iv},Symbol.toStringTag,{value:"Module"}));function vE(i,n,l,a){return n==null||l==null||l<0||i===n?0:l<n&&i>=l&&i<n?a:l>n&&i>n&&i<=l?-a:0}const _E=de.memo(({item:i,index:n,onRemove:l,onReplace:a,onPlay:o,onInvite:u,onWaitForSong:f,onChooseForGuest:m,onSkipWaiting:p,isFirst:y,hasCurrentSong:x,queueMode:v,invitedSongId:_,dragState:T,onDragStart:O,itemHeight:D})=>{const V=T?.dragIndex===n,X=T?vE(n,T.dragIndex,T.overIndex,D):0;return h.jsx("div",{className:`queue-item relative ${V?"opacity-20 scale-[0.96]":""}`,"data-index":n,style:{transform:V?"scale(0.96)":`translateY(${X}px)`,transition:T?"transform 200ms cubic-bezier(0.2, 0, 0, 1)":"none",zIndex:V?0:X!==0?2:1},children:h.jsxs(gs,{className:`flex flex-col gap-2 p-2 border-0 shadow-sm relative group rounded-lg select-none ${i.status==="waiting"?"bg-amber-50 border border-amber-200":i.status==="skipped"?"opacity-50 bg-slate-50":i.wasSkipped&&i.status==="ready"?"bg-green-50 border-2 border-green-300 animate-pulse":""}`,children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"text-slate-300 mt-1 cursor-grab active:cursor-grabbing hover:text-slate-500 transition-colors touch-none p-1",onPointerDown:P=>O(P,n),children:h.jsx(jS,{size:16})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h3",{className:`font-bold text-sm leading-snug truncate uppercase tracking-tight ${i.status==="waiting"?"text-amber-700":i.status==="skipped"?"text-slate-400":"text-slate-800"}`,title:i.title||"Ch chn bi",children:i.status==="waiting"?`${i.addedBy} -  Ch chn bi`:i.title||"Khng c tiu "}),h.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[h.jsx("span",{className:"text-[10px] font-bold text-slate-500 bg-slate-100 px-2 py-0.5 rounded border border-slate-200 uppercase tracking-wider",children:i.addedBy}),i.isPriority&&h.jsx("span",{className:"text-[10px] font-bold text-white bg-red-500 px-2 py-0.5 rounded border border-red-600 uppercase tracking-wider",children:"u Tin"}),i.round&&!i.isPriority&&h.jsxs("span",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 px-2 py-0.5 rounded border border-indigo-100 uppercase tracking-wider",children:["Vng ",i.round]}),i.status==="waiting"&&h.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-100 px-2 py-0.5 rounded border border-amber-200 uppercase tracking-wider",children:"Ch Bi"}),i.status==="skipped"&&h.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-2 py-0.5 rounded border border-slate-200 uppercase tracking-wider",children:" B Qua"}),i.wasSkipped&&i.status==="ready"&&h.jsx("span",{className:"text-[10px] font-bold text-green-600 bg-green-100 px-2 py-0.5 rounded border border-green-200 uppercase tracking-wider",children:" Chn Bi"})]})]}),h.jsxs("div",{className:"flex items-center gap-0.5",children:[x&&h.jsx("button",{onClick:()=>a(i),className:"text-slate-300 hover:text-indigo-500 transition-colors p-1 rounded-md cursor-pointer active:scale-90",title:"Thay th bi ang pht",children:h.jsx(Xy,{size:16})}),h.jsx("button",{onClick:()=>l(i.id),className:"text-slate-300 hover:text-red-500 transition-colors p-1 rounded-md cursor-pointer active:scale-90",title:"Xa",children:h.jsx(Mf,{size:16})})]})]}),y&&i.status==="waiting"&&h.jsxs("div",{className:"mt-1 pt-2 border-t border-amber-200 flex gap-2",children:[h.jsx(jt,{size:"sm",onClick:()=>f&&f(i),className:"bg-amber-500 hover:bg-amber-600 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider flex-1",children:"Ch Chn Bi"}),h.jsx(jt,{size:"sm",onClick:()=>m&&m(i),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider flex-1",children:"Chn H"}),h.jsx(jt,{size:"sm",onClick:()=>p&&p(i),className:"bg-slate-500 hover:bg-slate-600 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider flex-1",children:"B Qua"})]}),y&&i.status!=="waiting"&&v==="manual"&&h.jsxs("div",{className:"mt-1 pt-2 border-t border-slate-100 flex gap-2",children:[h.jsx(jt,{size:"sm",onClick:()=>u(i),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider flex-1",children:"Mi Ln Sn Khu"}),h.jsx(jt,{size:"sm",onClick:()=>o(i),className:`text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider flex-1 ${_===i.id?"bg-green-600 hover:bg-green-700":"bg-slate-800 hover:bg-slate-900"}`,children:"Pht Ngay"})]}),y&&i.status!=="waiting"&&v==="auto"&&h.jsx("div",{className:"mt-1 pt-2 border-t border-slate-100 flex justify-end",children:h.jsx(jt,{size:"sm",onClick:()=>o(i),className:"bg-slate-800 hover:bg-slate-900 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider w-full",children:"Pht Ngay"})})]})})},(i,n)=>i.item.id===n.item.id&&i.item.status===n.item.status&&i.item.wasSkipped===n.item.wasSkipped&&i.index===n.index&&i.isFirst===n.isFirst&&i.hasCurrentSong===n.hasCurrentSong&&i.queueMode===n.queueMode&&i.invitedSongId===n.invitedSongId&&i.dragState===n.dragState&&i.itemHeight===n.itemHeight),xE=({onReAnnounce:i,onWaitForSong:n,onChooseForGuest:l,onSkipWaiting:a,onAddGuest:o,onChangeBeat:u})=>{const f=G(Q=>Q.queue),m=G(Q=>Q.removeFromQueue),p=G(Q=>Q.currentSong),y=G(Q=>Q.setCurrentSong),x=G(Q=>Q.setIsPlaying),v=G(Q=>Q.isPlaying),_=G(Q=>Q.reorderQueue),T=G(Q=>Q.setManualOrder),O=G(Q=>Q.queueMode),D=G(Q=>Q.invitedSongId),V=G(Q=>Q.setInvitedSongId),X=G(Q=>Q.waitingForGuest),[P,q]=N.useState(!1),[W,ae]=N.useState(null),[oe,U]=N.useState(null),K=N.useRef(null),Se=N.useRef(null),[ye,he]=N.useState(null),[Ee,Re]=N.useState(0),be=N.useRef({active:!1,startIndex:-1}),me=N.useRef(null),R=N.useCallback(()=>Se.current?.closest(".overflow-y-auto"),[]),H=N.useCallback(Q=>{if(!Se.current)return-1;const _e=Se.current.querySelectorAll(".queue-item");for(let fe=0;fe<_e.length;fe++){const Ce=_e[fe].getBoundingClientRect(),Ye=Ce.top+Ce.height*.3;if(Q<Ye)return fe}return _e.length-1},[]),E=N.useCallback((Q,_e)=>{if(!K.current)return!1;const fe=K.current.getBoundingClientRect();return Q>=fe.left&&Q<=fe.right&&_e>=fe.top&&_e<=fe.bottom},[]),ge=N.useCallback((Q,_e)=>{Q.preventDefault(),Q.target.setPointerCapture(Q.pointerId),be.current={active:!0,startIndex:_e};const fe=Se.current?.querySelectorAll(".queue-item");let Ce=null,Ye=0;if(fe?.[_e]){const Z=fe[_e].getBoundingClientRect();Re(Z.height+8),Ye=Q.clientY-Z.top,Ce=fe[_e].cloneNode(!0),Ce.style.cssText=`
                position: fixed;
                left: ${Z.left}px;
                top: ${Q.clientY-Ye}px;
                width: ${Z.width}px;
                z-index: 9999;
                pointer-events: none;
                opacity: 0.9;
                transform: scale(1.03);
                box-shadow: 0 12px 32px rgba(0,0,0,0.18);
                border-radius: 12px;
                transition: transform 0.15s, box-shadow 0.15s;
            `,document.body.appendChild(Ce)}he({dragIndex:_e,overIndex:_e,overNP:!1});const tt=60,rn=8,at=Z=>{const se=R();if(!se)return;const Ae=se.getBoundingClientRect(),qe=Z-Ae.top,Ke=Ae.bottom-Z;if(qe<tt&&se.scrollTop>0){const He=rn*(1-qe/tt);se.scrollTop-=He}else if(Ke<tt&&se.scrollTop<se.scrollHeight-se.clientHeight){const He=rn*(1-Ke/tt);se.scrollTop+=He}};let Mt=Q.clientY;const ct=()=>{be.current.active&&(at(Mt),me.current=requestAnimationFrame(ct))};me.current=requestAnimationFrame(ct);const We=Z=>{if(!be.current.active)return;Mt=Z.clientY,Ce&&(Ce.style.top=`${Z.clientY-Ye}px`);const se=E(Z.clientX,Z.clientY),Ae=se?-1:H(Z.clientY);he(qe=>qe?.overIndex===Ae&&qe?.overNP===se?qe:{dragIndex:be.current.startIndex,overIndex:Ae,overNP:se})},Y=()=>{if(me.current&&cancelAnimationFrame(me.current),Ce&&(Ce.remove(),Ce=null),be.current.active){const Z=be.current.startIndex;be.current.active=!1,he(se=>{if(!se)return null;const Ae=G.getState().queue,qe=Ae[Z];if(se.overNP&&qe)return setTimeout(()=>U(qe),0),null;if(se.overIndex>=0&&se.overIndex!==Z){const Ke=[...Ae],[He]=Ke.splice(Z,1);Ke.splice(se.overIndex,0,He),_(Ke),T(Ke.map(pt=>pt.id))}return null})}document.removeEventListener("pointermove",We),document.removeEventListener("pointerup",Y)};document.addEventListener("pointermove",We),document.addEventListener("pointerup",Y)},[H,E,R,_]),ue=Q=>{const _e=f.find(fe=>fe.id===Q);_e&&ae(_e)},we=Q=>U(Q),J=()=>{W&&(p?.id===W.id&&(y(null),x(!1)),m(W.id),W.firebaseKey&&xf(W.firebaseKey).catch(()=>{}),ae(null))},ee=Q=>{y(Q),m(Q.id)},pe=Q=>V(Q.id),Te=async()=>{try{const{clearFirebaseQueue:Q}=await Ba(async()=>{const{clearFirebaseQueue:_e}=await Promise.resolve().then(()=>qv);return{clearFirebaseQueue:_e}},void 0);await Q(),f.forEach(_e=>m(_e.id)),q(!1)}catch(Q){console.error("[QueueList] Clear queue failed:",Q)}},ke=async()=>{if(oe){try{await xf(oe.id),await mh(oe),m(oe.id),y({...oe,isReplaced:!0}),x(!1)}catch(Q){console.error("Replace failed:",Q)}U(null)}};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-4",children:[p?h.jsxs("div",{ref:K,className:`mb-6 relative rounded-2xl border-2 border-dashed transition-colors duration-200 ${ye?.overNP?"border-indigo-400 bg-indigo-50/50 p-1.5":"border-transparent p-1.5"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[h.jsx("span",{className:`inline-flex rounded-full h-3 w-3 ${p.status==="waiting"?"bg-amber-500":v?"bg-indigo-500":"bg-orange-500"}`}),h.jsx("h2",{className:`text-xs font-black uppercase tracking-widest ${p.status==="waiting"?"text-amber-500":v?"text-indigo-500":"text-orange-500"}`,children:p.status==="waiting"?" Ch Chn Bi":ye?.overNP?"Th  thay th":X?"ang Ch Khch...":v?"ang Pht":"Sn Sng"})]}),p.status==="waiting"?h.jsxs(gs,{className:"p-3 border-2 border-amber-300 relative rounded-xl shadow-sm overflow-hidden bg-amber-50",children:[h.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[h.jsx("div",{className:"w-10 h-10 bg-amber-200 rounded-lg flex items-center justify-center flex-shrink-0 border border-amber-300",children:h.jsx("span",{className:"text-xl",children:""})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("h3",{className:"font-black text-amber-800 text-sm leading-normal truncate mb-0.5",children:[p.addedBy||"Khch"," - Ch chn bi"]}),h.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-100 px-2 py-0.5 rounded border border-amber-200 uppercase tracking-wider",children:"Ch Bi"})]})]}),h.jsxs("div",{className:"mt-2 pt-2 border-t border-amber-200 flex gap-2 relative z-10",children:[h.jsx("button",{onClick:()=>n&&n(p),className:"flex-1 bg-amber-500 hover:bg-amber-600 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider rounded-lg transition-all cursor-pointer active:scale-95",children:" Mi Chn Bi"}),h.jsx("button",{onClick:()=>l&&l(p),className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider rounded-lg transition-all cursor-pointer active:scale-95",children:"Chn H"}),h.jsx("button",{onClick:()=>a&&a(p),className:"flex-1 bg-slate-500 hover:bg-slate-600 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider rounded-lg transition-all cursor-pointer active:scale-95",children:"B Qua"})]})]}):h.jsxs(gs,{className:`p-3 border-0 relative rounded-xl text-white shadow-sm overflow-hidden ${v?"bg-indigo-600":"bg-slate-800"}`,children:[h.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/5 rounded-full -ml-8 -mb-8"}),h.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[h.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0 border border-white/10 cursor-pointer hover:bg-white/30 transition-colors",onClick:()=>x(!v),children:v?h.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[h.jsx("div",{className:"w-0.5 bg-white h-1.5"}),h.jsx("div",{className:"w-0.5 bg-white h-3"}),h.jsx("div",{className:"w-0.5 bg-white h-2"}),h.jsx("div",{className:"w-0.5 bg-white h-2.5"})]}):h.jsx(Do,{size:20,className:"text-white fill-current ml-0.5"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h3",{className:"font-bold text-sm leading-normal truncate mb-0.5",title:p.title,style:{paddingBottom:"2px"},children:p.title}),h.jsxs("div",{className:"flex items-center text-[10px] text-white/80 gap-1.5",children:[h.jsxs("div",{className:"flex items-center gap-1 bg-white/20 px-1.5 py-0.5 rounded-md border border-white/10",children:[h.jsx("span",{className:"opacity-70 font-medium",children:"Ht:"}),h.jsx("span",{className:"font-black text-white uppercase truncate max-w-[80px]",children:p.addedBy||"Khch"})]}),!v&&h.jsx("span",{className:"text-orange-300 font-bold text-[9px] uppercase border border-orange-500/50 px-1.5 py-0.5 rounded ml-auto",children:"ang ch pht"})]})]})]}),u&&h.jsx("div",{className:"mt-2 pt-2 border-t border-white/20 flex gap-2 relative z-10",children:h.jsxs("button",{onClick:u,className:"flex-1 bg-white/20 hover:bg-white/30 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider rounded-lg transition-all cursor-pointer active:scale-95 flex items-center justify-center gap-1",children:[h.jsx(Py,{size:12})," i Beat"]})}),O==="manual"&&!v&&h.jsxs("div",{className:"mt-2 pt-2 border-t border-white/20 flex gap-2 relative z-10",children:[!v&&h.jsxs("button",{onClick:()=>x(!0),className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider rounded-lg transition-all cursor-pointer active:scale-95 flex items-center justify-center gap-1 shadow-lg shadow-green-900/20",children:[h.jsx(Do,{size:12,fill:"currentColor"})," Pht Ngay"]}),h.jsx("button",{onClick:i,className:"flex-1 bg-white/20 hover:bg-white/30 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider rounded-lg transition-all cursor-pointer active:scale-95",children:" Mi Li"})]})]})]}):null,h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between items-end px-1 mb-2",children:[h.jsx("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Hng Ch"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[10px] font-black text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full",children:f.length}),o&&h.jsx("button",{onClick:o,className:"text-[10px] font-black text-white bg-amber-500 hover:bg-amber-600 px-2 py-0.5 rounded-full cursor-pointer active:scale-95 transition-all",title:"Thm khch gi ch",children:"+ Khch"}),f.length>0&&h.jsx("button",{onClick:()=>q(!0),className:"text-slate-400 hover:text-red-500 transition-colors p-1 rounded-md cursor-pointer active:scale-90 hover:bg-red-50",title:"Xa hng ch",children:h.jsx(Mf,{size:14})})]})]}),f.length===0&&!p&&h.jsx("div",{className:"text-center py-10 text-slate-300 text-xs font-bold uppercase tracking-widest",children:"Cha c bi no"}),h.jsx("div",{ref:Se,className:"space-y-2",children:f.map((Q,_e)=>h.jsx(_E,{item:Q,index:_e,onRemove:ue,onReplace:we,onPlay:ee,onInvite:pe,onWaitForSong:n,onChooseForGuest:l,onSkipWaiting:a,isFirst:!p&&_e===0,hasCurrentSong:!!p,queueMode:O,invitedSongId:D,dragState:ye,itemHeight:Ee,onDragStart:ge},Q.id))})]})]}),oe&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-lg",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 bg-indigo-50 flex justify-between items-center",children:[h.jsx("h3",{className:"text-lg font-black text-indigo-800 uppercase tracking-tighter",children:"Thay Th Bi Ht"}),h.jsx("button",{onClick:()=>U(null),className:"p-2 hover:bg-slate-200 rounded-full transition-colors cursor-pointer",children:h.jsx(ys,{size:20,className:"text-slate-500"})})]}),h.jsxs("div",{className:"p-5 space-y-3",children:[h.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 opacity-50",children:[h.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider",children:"ang Pht"}),h.jsx("h4",{className:"font-bold text-slate-500 text-sm line-clamp-2 line-through mt-1",children:p?.title||"Khng c bi"}),p?.addedBy&&h.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-2 py-0.5 rounded border border-slate-200 uppercase tracking-wider mt-1.5 inline-block",children:p.addedBy})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center",children:h.jsx(Xy,{size:16,className:"text-indigo-600 rotate-180"})})}),h.jsxs("div",{className:"bg-indigo-50 p-3 rounded-xl border-2 border-indigo-200",children:[h.jsx("span",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-wider",children:"Bi Mi"}),h.jsx("h4",{className:"font-black text-slate-800 text-sm line-clamp-2 mt-1",children:oe.title}),oe.addedBy&&h.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-100 px-2 py-0.5 rounded border border-indigo-200 uppercase tracking-wider mt-1.5 inline-block",children:oe.addedBy})]})]}),h.jsxs("div",{className:"p-4 bg-slate-50 flex gap-3 border-t border-slate-100",children:[h.jsx(jt,{onClick:()=>U(null),variant:"ghost",className:"font-bold text-slate-600 px-4",children:"Hy"}),h.jsx(jt,{onClick:ke,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-black",children:"Thay Th"})]})]})}),P&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-lg",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 bg-red-50 flex justify-between items-center",children:[h.jsx("h3",{className:"text-lg font-black text-red-600 uppercase tracking-tighter",children:"Xa Hng Ch?"}),h.jsx("button",{onClick:()=>q(!1),className:"p-2 hover:bg-red-100 rounded-full transition-colors",children:h.jsx(ys,{size:20,className:"text-red-500"})})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("p",{className:"text-slate-700 font-bold mb-1",children:["Bn mun xa tt c ",h.jsx("span",{className:"text-red-600",children:f.length})," bi ht?"]}),h.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Hnh ng ny khng th hon tc."})]}),h.jsxs("div",{className:"p-4 bg-slate-50 flex gap-3 border-t border-slate-100",children:[h.jsx(jt,{onClick:()=>q(!1),variant:"ghost",className:"flex-1 font-bold text-slate-600",children:"Hy"}),h.jsx(jt,{onClick:Te,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-black",children:"Xa Tt C"})]})]})}),W&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-lg",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[h.jsx("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter",children:"Xc Nhn Xa"}),h.jsx("button",{onClick:()=>ae(null),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:h.jsx(ys,{size:20,className:"text-slate-500"})})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"Bn c chc mun xa bi ht ny?"}),h.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200",children:[h.jsx("h4",{className:"font-black text-slate-800 text-sm line-clamp-2",children:W.title}),h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Ht:"}),h.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded border border-indigo-100 uppercase",children:W.addedBy})]})]})]}),h.jsxs("div",{className:"p-4 bg-slate-50 flex gap-3 border-t border-slate-100",children:[h.jsx(jt,{onClick:()=>ae(null),variant:"ghost",className:"flex-1 font-bold text-slate-600",children:"Gi Li"}),h.jsx(jt,{onClick:J,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-black",children:"Xa Bi"})]})]})})]})},Qv=de.forwardRef(({className:i,error:n,...l},a)=>h.jsxs("div",{className:"w-full",children:[h.jsx("input",{ref:a,className:Af("w-full px-5 py-4 rounded-2xl bg-slate-50 border border-slate-200 text-slate-800 placeholder-slate-400 outline-none transition-all duration-300 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 shadow-inner",n&&"border-red-500 focus:border-red-500 focus:ring-red-500/10 bg-red-50/50",i),...l}),n&&h.jsx("p",{className:"mt-2 text-sm text-red-500 ml-2",children:n})]}));async function SE(i){if(!i)return[];const n=i.toLowerCase().includes("karaoke")?i:`${i} karaoke`;try{const l=new AbortController,a=setTimeout(()=>l.abort(),8e3),o=await fetch(`/api/yt/search?q=${encodeURIComponent(n)}`,{signal:l.signal});if(clearTimeout(a),!o.ok)throw new Error(o.status);const u=await o.json(),f=["karaoke","beat","instrumental","nhc sng","tone","phi"];return u.filter(m=>{const p=m.title.toLowerCase();return f.some(y=>p.includes(y))}).map(m=>{let p=m.viewCount||0,y=1;const x=m.title.toLowerCase(),v=i.toLowerCase(),_=v.split(/\s+/).filter(V=>V.length>0);x.includes(v)&&(y*=2),v.includes("tone nam")&&x.includes("tone nam")&&(y*=3),v.includes("tone n")&&x.includes("tone n")&&(y*=3),v.includes("tone nu")&&x.includes("tone n")&&(y*=3),x.includes("karaoke")&&(y*=1.2),(x.includes("beat")||x.includes("instrumental"))&&(y*=1.1);let T=0;_.forEach(V=>{x.includes(V)&&T++}),y+=T*.1,T===_.length&&(y*=1.5),["live","concert","fancam","cover","remix"].forEach(V=>{x.includes(V)&&!v.includes(V)&&(y*=.5)}),(x.includes("official")||x.includes("mv"))&&!x.includes("karaoke")&&(y*=.5);let D=p*y;return D===0&&T>0&&(D=1e3*y),{...m,score:D}}).sort((m,p)=>p.score-m.score).map(m=>({...m,videoId:m.id,isApi:!0}))}catch(l){return console.error("YouTube Search Failed:",l),[]}}const TE=[["Duyn Phn","Nh Qunh"],["Su Tm Thip Hng","Quang L - L Quyn"],["Vng L Me Bay","Nh Qunh"],["Chuyn Gin Thin L","Mnh Qunh"],["Em Ca Ngy Hm Qua","Sn Tng M-TP"],["Lc Tri","Sn Tng M-TP"],["Ni Ny C Anh","Sn Tng M-TP"],["Hng Nhan","Jack"],["Bc Phn","Jack"],["Sng Gi","Jack - K-ICM"],["Ai Chung Tnh c Mi","inh Tng Huy"],["Thuyn Quyn","Diu Kin"],["Mi Anh V Thm Qu Em","Thy Trang"],["o Mi C Mau","Phi Nhung"],["Trch Ai V Tnh","Phi Nhung"],["Chim Trng M Ci","an Trng - Cm Ly"],["Ct i Ni Su","Tng Duy Tn"],["Bn Trn Tng Lu","Tng Duy Tn"],["See Tnh","Hong Thy Linh"],[" M Ni Cho M Nghe","Hong Thy Linh"],["Ngy Mai Ngi Ta Ly Chng","Thnh t"],["Hoa N Khng Mu","Hoi Lm"],["Bun Lm Chi Em i","Hoi Lm"],["G Ca Tri Tim","Quang L - Mai Thin Vn"],["p M Cuc Tnh","an Nguyn"],["Li Nh Ngi Yu","an Nguyn"],["Xun Ny Con Khng V","Quang L"],["Cnh Thip u Xun","Nh Qunh"],["Cu Hn Cu Th","nh Dng"],[" Vng","nh Dng"],["Ph m","Nh Qunh"],["Ma m Tnh Nh","Quang L"],["Chuyn Tu Hong Hn","L Quyn"],["Sng Trng Min Qu Ngoi","Quang L"],["Nhn C Cho Em","Mnh Qunh"],["Tnh Ch p Khi Cn Dang D","L Quyn"],["i Thng Hai M","L Quyn"],["Lu i Tnh i","m Vnh Hng"],["Bin Tnh","m Vnh Hng"],["Xin Li Tnh Yu","m Vnh Hng"],["Say Tnh","m Vnh Hng"],["Na Vng Trng","m Vnh Hng"],["Chc Ai  S V","Sn Tng M-TP"],["Mun Ri M Sao Cn","Sn Tng M-TP"],["Chng Ta Ca Hin Ti","Sn Tng M-TP"],["Hy Trao Cho Anh","Sn Tng M-TP"],["C Chc Yu L y","Sn Tng M-TP"],["Em Gi Ma","Hng Trm"],["Ngc","Hng Trm"],["Duyn Mnh L","Hng Trm"]];function Yv(i){return i?i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"D").toLowerCase():""}const wy=TE.map(i=>{const[n,l]=i;return{title:n,artist:l,searchStr:Yv(`${n} ${l}`),raw:i}}),wE=i=>{if(!i||i.length<2)return[];const n=Yv(i.trim()),l=[];for(let a=0;a<wy.length;a++){const o=wy[a];if(o.searchStr.includes(n)&&l.push({title:o.title,artist:o.artist,query:`${o.title} ${o.artist}`,source:"local",score:1}),l.length>=10)break}return l},Kv=i=>{if(!i)return null;let n=i.replace(/```json/g,"").replace(/```/g,"").trim();n=n.replace(/([{,]\s*)([a-zA-Z0-9_]+)(\s*:)/g,'$1"$2"$3'),n=n.replace(/([{,]\s*)'([a-zA-Z0-9_]+)'(\s*:)/g,'$1"$2"$3');const l=n.indexOf("["),a=n.lastIndexOf("]");if(l!==-1){if(a!==-1&&a>l)return n.substring(l,a+1);{let f=n.substring(l);const m=f.lastIndexOf("}");if(m!==-1)return f.substring(0,m+1)+"]"}}const o=n.indexOf("{"),u=n.lastIndexOf("}");return o!==-1?u!==-1&&u>o?n.substring(o,u+1):n.substring(o):n},CE=`Gi  bi ht karaoke.
Input: t kha (c th sai chnh t, g tt, thiu du).
Output: JSON array string 8-10 items "Title|Artist|Query".
Format: ["Title|Artist|Query", "Title|Artist|Query"]
Quy tc:
1. CH gi  bi ht C THT, ph bin ti Vit Nam. TUYT I KHNG BA TN.
2. U TIN SA LI CHNH T & VIT TT (vd: "co"->"cho", "dc"->"c").
3. a dng kt qu, TRNH trng lp.
4. CH TR V JSON ARRAY STRING.
5. Dng du gch ng (|)  ngn cch.`,NE=async(i,n)=>{if(!i||i.trim().length<2)return null;try{const l=await fetch("/api/gemini/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i.trim().slice(0,100)}]}],systemInstruction:{parts:[{text:CE}]},generationConfig:{response_mime_type:"application/json",response_schema:{type:"ARRAY",items:{type:"STRING"}},max_output_tokens:2048,temperature:.3,thinkingConfig:{thinkingBudget:0}}}),signal:n});if(!l.ok){const u=await l.text().catch(()=>"");return console.warn("Gemini API Error:",l.status,u),null}const o=(await l.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!o)return null;try{const u=Kv(o);if(!u)return null;const f=JSON.parse(u);if(!Array.isArray(f))return null;const m=[],p=new Set;return f.forEach(y=>{if(typeof y!="string")return;const x=y.split("|"),v=x[0]?.trim(),_=x[1]?.trim()||"";if(!v)return;const T=`${v.toLowerCase()}-${_.toLowerCase()}`;p.has(T)||(p.add(T),m.push({title:v,artist:_,query:x[2]?.trim()||v}))}),m}catch(u){throw console.warn("Gemini JSON Parse Error (Suggestions):",u.message),console.debug("Raw Text:",o),new Error("JSON_PARSE_ERROR")}}catch(l){if(l.name==="AbortError"||l.message==="JSON_PARSE_ERROR")throw l;return console.warn("Gemini Request Failed:",l),null}},Tf=async(i,n,l=2)=>{for(let a=0;a<=l;a++)try{const o=await NE(i,n);if(o)return o}catch(o){if(o.name==="AbortError")throw o;if(o.message==="JSON_PARSE_ERROR"&&a<l){console.warn(`Gemini JSON Error, Retrying (${a+1}/${l})...`);continue}a===l&&console.warn("Gemini Suggestions Failed after retries:",o)}return null},EE=`Extract ONLY the Song Title.
Input: raw youtube title.
Output: JSON { "title": "Song Name", "artist": "Artist Name" }
Rules:
1. EXCLUDE Artist Name from Title.
2. If format is "Artist - Title" or "Artist | Title", extract Title correctly.
3. Remove 'karaoke', 'remix', 'beat', 'cover', 'mv', 'official', 'lyrics', '[...]', '(...)' tags.
4. Remove 'tone', 'h tone', 'nng tone', 'd ht', 'tone nam', 'tone n', 'h beat', 'gc'.
5. Remove clickbait/SEO phrases: 'hay nht', 'd ht nht', 'hit nht', 'mi nht', 'top trending', 'triu view', 'cc hay', 'siu hay', 'cc phm', 'hot nht', 'bun nht', 'tuyt nh', etc. These are NOT part of the song title.
6. Capitalize correctly.`,AE=async i=>{if(!i)return null;try{const n=await fetch("/api/gemini/clean-title",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i.slice(0,150)}]}],systemInstruction:{parts:[{text:EE}]},generationConfig:{response_mime_type:"application/json",max_output_tokens:100,temperature:.1,thinkingConfig:{thinkingBudget:0}}})});if(!n.ok)return null;const a=(await n.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!a)return null;try{const o=Kv(a);return o?JSON.parse(o):null}catch(o){return console.warn("Gemini JSON Parse Error (Clean Title):",o.message),console.debug("Raw Text:",a),null}}catch(n){return console.warn("LLM Clean Title Request Failed:",n),null}},ME=Object.freeze(Object.defineProperty({__proto__:null,cleanSongTitle:AE,fetchGeminiSuggestions:Tf,getSmartSuggestions:Tf},Symbol.toStringTag,{value:"Module"})),Cy="karaoke_history",Ny="youtube_id_cache",RE=(i,n)=>{try{const a=JSON.parse(localStorage.getItem(Cy)||"[]").filter(o=>o.title!==i);a.unshift({title:i,artist:n,timestamp:Date.now()}),localStorage.setItem(Cy,JSON.stringify(a.slice(0,50)))}catch(l){console.error("Record play failed",l)}},kE=(i,n,l)=>{try{const a=JSON.parse(localStorage.getItem(Ny)||"{}"),o=`${i}-${n}`;a[o]=l,localStorage.setItem(Ny,JSON.stringify(a))}catch{}},Kd=new Map,Xv=async(i,n,l)=>{if(!i||i.trim().length<2)return[];const a=i.trim(),o=wE(a);if(Kd.has(a)){const u=Kd.get(a);return l&&setTimeout(()=>l(u),0),o}return Tf(i,n).then(u=>{if(!n.aborted&&u&&Array.isArray(u)&&u.length>0){const f=u.map(m=>({...m,source:"ai"}));Kd.set(a,f),l&&l(f)}}).catch(u=>{}),o},jE=Object.freeze(Object.defineProperty({__proto__:null,cacheYoutubeId:kE,getSmartSuggestions:Xv,recordPlay:RE},Symbol.toStringTag,{value:"Module"})),DE=(i,n)=>{const[l,a]=N.useState([]),[o,u]=N.useState(!1),f=N.useRef(null),m=N.useRef(null),p=N.useRef(null),y=N.useCallback(async x=>{if(!x||x.trim().length<2){a([]),u(!1);return}const v=x.trim();u(!0),f.current&&f.current.abort(),f.current=new AbortController;const _=f.current.signal;try{const O=await Xv(v,_,D=>{_.aborted||(a(V=>[...V,...D]),u(!1))});_.aborted||(a(O),p.current=v,O.length>=2&&u(!1))}catch(T){T.name!=="AbortError"&&console.warn("Suggestion chain failed",T),_.aborted||u(!1)}},[]);return N.useEffect(()=>(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{y(i)},50),()=>{m.current&&clearTimeout(m.current),f.current&&f.current.abort()}),[i,y]),N.useEffect(()=>{n&&i&&i.trim().length>=2&&l.length===0&&y(i)},[n,i,l.length,y]),{suggestions:l,isLoading:o}},OE=({suggestions:i,isLoading:n,onSelect:l,selectedIndex:a=-1})=>n?h.jsx("div",{className:"absolute top-full left-0 right-0 bg-white shadow-xl rounded-b-xl border border-slate-200 mt-1 z-50 p-4",children:h.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400",children:[h.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}),h.jsx("span",{className:"text-sm font-medium",children:"ang tm  tng..."})]})}):!i||i.length===0?null:h.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white shadow-xl rounded-b-xl border border-slate-200 z-50 overflow-hidden",children:[h.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar",children:i.map((o,u)=>{const f=u===a,m=o.source==="ai"&&(u===0||i[u-1].source!=="ai");return h.jsxs(N.Fragment,{children:[m&&h.jsxs("div",{className:"px-4 py-2 bg-indigo-50 text-xs font-bold text-indigo-500 uppercase tracking-widest flex items-center gap-2 mt-1 border-t border-indigo-100",children:[h.jsx(ef,{size:12}),"Gi  t AI"]}),h.jsxs("div",{onMouseDown:p=>{p.preventDefault(),l(o.query)},className:`flex items-center gap-4 p-4 cursor-pointer transition-colors border-b border-slate-50 last:border-0 group
                                    ${f?"bg-indigo-50 border-l-4 border-l-indigo-500":"hover:bg-indigo-50 border-l-4 border-l-transparent"}
                                    ${o.source==="ai"?"bg-indigo-50/30":""}
                                `,children:[h.jsx("div",{className:`p-2 rounded-full transition-colors ${f?"bg-indigo-100 text-indigo-600":o.source==="ai"?"bg-purple-100/50 text-purple-500":"bg-slate-100 text-slate-400 group-hover:bg-indigo-100 group-hover:text-indigo-600"}`,children:o.source==="ai"?h.jsx(ef,{size:20}):h.jsx(tc,{size:20})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsx("div",{className:`text-lg font-bold truncate transition-colors ${f?"text-indigo-700":"text-slate-800 group-hover:text-indigo-700"}`,children:o.title})})]})]},u)})}),h.jsx("div",{className:"bg-slate-50 p-2 text-center text-[10px] font-bold text-slate-300 uppercase tracking-widest",children:"Thng minh bi Gemini AI"})]}),zE={a:["A","","","","",""],an:["An","n","n","n","n"],anh:["Anh","nh","nh"],au:["u","u"],ba:["Ba","B","B","B","B"],bac:["Bc","Bc","Bc"],bach:["Bch","Bch"],ban:["Ban","Bn","Bn","Bn","Bn"],bang:["Bang","Bng","Bng","Bng","Bng"],bao:["Bao","Bo","Bo","Bo","Bo"],bay:["Bay","By","By","By","By"],be:["B","B","B","B"],ben:["Bn","Bn"],bi:["Bi","B","B","B"],bia:["Bia","Ba"],bich:["Bch"],bien:["Bin","Bin","Bin"],binh:["Binh","Bnh","Bnh"],bo:["Bo","B","B","B","B","B","B","B","B"],boi:["Bi","Bi"],bon:["Bn","Bn"],bong:["Bong","Bng","Bng","Bng","Bng"],bu:["Bu","B","B","B"],bui:["Bi","Bi"],buon:["Bun","Bun"],buong:["Bung","Bung","Bng"],buoi:["Bi"],ca:["Ca","C","C","C"],cac:["Cc"],cai:["Cai","Ci","Ci"],cam:["Cam","Cm","Cm","Cm"],can:["Can","Cn","Cn","Cn","Cn","Cn"],canh:["Canh","Cnh","Cnh","Cnh"],cao:["Cao","Co","Co","Co"],cat:["Ct","Ct"],chi:["Chi","Ch","Ch","Ch"],chien:["Chin","Chin"],chinh:["Chinh","Chnh","Chnh"],chu:["Chu","Ch","Ch","Ch","Chu","Chu"],chung:["Chung","Chng","Chng","Chng"],chuong:["Chng","Chng","Chng"],co:["Co","C","C","C","C","C","C","C","C","C"],cong:["Cong","Cong","Cng","Cng","Cng","Cng"],cu:["Cu","C","C","C","C","C","C","C"],cuc:["Cc","Cc"],cuong:["Cng","Cng","Cng"],cuu:["Cu","Cu","Cu"],da:["Da","D","a","","",""],dac:["c","c"],dai:["Dai","Di","i","ai"],dam:["m","m","m"],dan:["Dan","Dn","Dn","Dn","an","n","n"],dang:["Dang","Dng","ang","ng","ng","ng","ng"],dao:["Dao","Do","Do","o","o","o"],dat:["t","t"],dau:["Du","Du","Du","au","u","u","u","u"],de:["D","","",""],di:["Di","D","D","i"],diep:["Dip","ip"],dieu:["Diu","Diu","Diu","iu","iu","iu"],dinh:["Dinh","Dnh","inh","nh","nh","nh"],do:["Do","D","o","","","","","",""],doan:["Doan","oan","on","on"],doi:["i","i","i","i"],don:["n","n","n"],dong:["Dong","Dng","ng","ng","ng"],du:["Du","D","D","D","u","","","D"],duc:["Dc","c"],dung:["Dung","Dng","Dng","Dng","ng"],duoc:["c"],duong:["Dng","Dng","ng"],duy:["Duy","Dy"],duyen:["Duyn"],gia:["Gia","Gi","Gi"],giai:["Giai","Gii"],giam:["Giam","Gim","Gim"],gian:["Gian","Gin","Gin","Gin"],giang:["Giang","Ging","Ging"],giao:["Giao","Gio"],giap:["Gip"],giau:["Giu"],gio:["Gio","Gi","Gi"],gioi:["Gii","Gii"],giu:["Gi"],ha:["Ha","H","H","H"],hai:["Hai","Hi","Hi","Hi"],ham:["Hm"],han:["Han","Hn","Hn","Hn","Hn","Hn"],hang:["Hang","Hng","Hng","Hng"],hanh:["Hanh","Hnh","Hnh"],hao:["Hao","Ho","Ho","Ho"],hat:["Ht","Ht"],hau:["Hau","Hu","Hu"],hien:["Hin","Hin","Hin","Hin","Hin"],hieu:["Hiu","Hiu","Hiu","Hiu","Hiu"],hinh:["Hnh"],hoa:["Hoa","Ha","Ha","Ha","Ha"],hoai:["Hoi"],hoan:["Hoan","Hon","Hon","Hon"],hoang:["Hoang","Hong","Hong"],hoc:["Hc"],hoi:["Hoi","Hi","Hi","Hi","Hi"],hop:["Hp","Hp"],hue:["Hu","Hu"],hung:["Hung","Hng","Hng","Hng"],huy:["Huy","Hy"],huyen:["Huyn","Huyn"],huynh:["Huynh","Hunh"],huong:["Hng","Hng","Hng","Hng"],kha:["Kha","Kh","Kh"],khai:["Khai","Khi"],khanh:["Khanh","Khnh"],khiem:["Khim","Khim"],khoa:["Khoa","Kha"],khoi:["Khi","Khi"],khuong:["Khng"],khuyen:["Khuyn","Khuyn"],kien:["Kin","Kin","Kin"],kieu:["Kiu"],kim:["Kim","Km"],kinh:["Kinh","Knh"],ky:["Ky","K","K","K","K"],lai:["Lai","Li","Li","Li"],lam:["Lam","Lm","Lm","Lm"],lan:["Lan","Ln","Ln","Ln"],lang:["Lang","Lng","Lng"],lanh:["Lanh","Lnh","Lnh"],le:["Le","L","L","L"],lien:["Lin"],lieu:["Liu","Liu","Liu","Liu"],linh:["Linh","Lnh","Lnh"],loan:["Loan","Lon"],loc:["Lc","Lc"],loi:["Li","Li","Li"],long:["Long","Lng"],lua:["La","La"],luan:["Lun","Lun"],luat:["Lut"],luc:["Lc","Lc"],luong:["Lng","Lng"],luu:["Lu"],ly:["Ly","L","L"],ma:["Ma","M","M","M","M"],mai:["Mai","Mi","Mi"],man:["Mn","Mn","Mn","Mn"],manh:["Manh","Mnh"],mao:["Mao","Mo","Mo"],may:["May","My","My"],me:["M","M","M"],men:["Mn","Mn"],mi:["Mi","M","M","M","M"],mien:["Min","Min","Min"],minh:["Minh","Mnh"],mo:["M","M","M","M"],moc:["Mc","Mc"],moi:["Mi","Mi","Mi","Mi"],mong:["Mong","Mng","Mng"],mu:["Mu","M","M"],mua:["Mua","Ma","Ma"],muc:["Mc","Mc"],mui:["Mi","Mi"],my:["My","M","M"],na:["Na","N"],nam:["Nam","Nm","Nm","Nm"],nan:["Nan","Nn"],nang:["Nang","Nng","Nng","Nng"],nga:["Nga","Ng","Ng"],ngai:["Ngi","Ngi"],ngan:["Ngn","Ngn","Ngn","Ngn"],nghi:["Nghi","Ngh","Ngh","Ngh"],nghia:["Ngha"],nghiep:["Nghip"],ngoc:["Ngc"],ngu:["Ng","Ng","Ng","Ng"],nguyen:["Nguyn","Nguyn","Nguyn"],nguyet:["Nguyt"],nhan:["Nhan","Nhn","Nhn","Nhn","Nhn"],nhat:["Nht","Nht"],nhi:["Nhi","Nh","Nh","Nh"],nhien:["Nhin"],nhieu:["Nhiu"],nho:["Nho","Nh","Nh","Nh"],nhu:["Nhu","Nh","Nh"],nhung:["Nhung","Nhng"],ni:["Ni","N"],nien:["Nin"],ninh:["Ninh"],no:["No","N","N","N","N"],noi:["Ni","Ni","Ni","Ni","Ni"],nu:["Nu","N","N"],nuong:["Nng"],o:["O","","","","","","","","","","","","",""],oa:["Oa"],oanh:["Oanh"],on:["n","n","n"],ong:["Ong","ng"],pa:["Pa"],pham:["Phm","Phm"],phan:["Phan","Phn","Phn","Phn","Phn"],phat:["Pht","Pht"],phi:["Phi","Ph","Ph"],phong:["Phong","Phng","Phng","Phng"],phu:["Phu","Ph","Ph","Ph","Ph"],phuc:["Phc","Phc"],phung:["Phung","Phng","Phng"],phuoc:["Phc"],phuong:["Phng","Phng","Phng"],qua:["Qua","Qu","Qu","Qu"],quan:["Quan","Qun","Qun","Qun","Qun","Qun"],quang:["Quang","Qung"],que:["Qu","Qu"],quoc:["Quc"],quy:["Quy","Qu","Qu","Qu","Qu"],quyen:["Quyn","Quyn","Quyn"],quynh:["Qunh"],ra:["Ra","R"],rang:["Rang","Rng","Rng","Rng"],ri:["Ri","R"],ro:["R","R","R"],roi:["Roi","Ri","Ri"],rom:["Rm"],ru:["Ru","R","R"],run:["Run"],rung:["Rung","Rng"],ruot:["Rut"],sa:["Sa","S"],sac:["Sc"],sai:["Sai","Si"],sam:["Sam","Sm","Sm"],san:["San","Sn","Sn","Sn"],sang:["Sang","Sng","Sng","Sng"],sanh:["Sanh","Snh","Snh"],sao:["Sao","So"],sat:["St","St"],sau:["Sau","Su","Su","Su","Su"],se:["Se","S","S"],sen:["Sen"],seo:["So","So"],si:["Si","S"],sinh:["Sinh"],so:["So","S","S","S","S","S","S"],soc:["Sc"],soi:["Soi","Si","Si"],son:["Son","Sn"],song:["Song","Sng","Sng","Sng"],su:["Su","Susu","S","S","S","S"],sua:["Sua","Sa","Sa"],suc:["Sc","Sc"],sung:["Sung","Sng","Sng"],suoi:["Sui"],suong:["Sng","Sng"],sy:["Sy","S"],ta:["Ta","T","T","T","T"],tac:["Tc","Tc","Tc"],tai:["Tai","Ti","Ti","Ti"],tam:["Tam","Tm","Tm","Tm","Tm","Tm","Tm","Tm"],tan:["Tan","Tn","Tn","Tn","Tn","Tn","Tn","Tn"],tang:["Tang","Tng","Tng","Tng","Tng","Tng","Tng"],tao:["Tao","To","To","To","To"],tap:["Tp","Tp"],tat:["Tt","Tt","Tt"],tay:["Tay","Ty","Ty"],te:["Te","T","T","T"],ten:["Ten","Tn"],teo:["Teo","To"],tet:["Tt"],tha:["Tha","Th","Th"],thac:["Thc"],thai:["Thai","Thi","Thi"],tham:["Tham","Thm","Thm","Thm","Thm","Thm"],than:["Than","Thn","Thn","Thn"],thang:["Thang","Thng","Thng","Thng","Thng"],thanh:["Thanh","Thnh","Thnh","Thnh","Thnh"],thao:["Thao","Tho","Tho"],that:["Tht","Tht"],the:["The","Th","Th","Th","Th","Th"],them:["Thm","Thm"],theo:["Theo","Tho"],thi:["Thi","Th","Th","Th","Th"],thien:["Thin","Thin","Thin"],thiep:["Thip","Thip"],thieu:["Thiu","Thiu","Thiu","Thiu"],thinh:["Thinh","Thnh","Thnh","Thnh","Thnh"],tho:["Tho","Th","Th","Th","Th","Th","Th","Th"],thoa:["Thoa","Tha"],thoai:["Thoi","Thoi"],thom:["Thm"],thon:["Thon","Thn"],thong:["Thong","Thng","Thng","Thng"],thu:["Thu","Th","Th","Th","Th","Th","Th","Th","Th"],thua:["Thua","Tha"],thuan:["Thun","Thun","Thun"],thuc:["Thc","Thc","Thc","Thc"],thui:["Thui","Thi"],thuy:["Thuy","Thy","Thy","Thy","Thy"],thuyen:["Thuyn","Thuyn"],thuong:["Thng","Thng","Thng","Thng"],ti:["Ti","T","T","T","T"],tien:["Tin","Tin","Tin","Tin","Tin"],tiep:["Tip","Tip"],tieu:["Tiu","Tiu","Tiu"],tim:["Tim","Tm","Tm"],tin:["Tin","Tn"],tinh:["Tinh","Tinh","Tnh","Tnh","Tnh","Tnh"],to:["To","T","T","T","T","T","T","T","T","T","T"],toa:["Toa","Ta","Ta","Ta","Ta"],toai:["Toi"],toan:["Toan","Ton","Ton"],toc:["Tc","Tc"],toi:["Ti","Ti","Ti","Ti","Ti"],tom:["Tm"],ton:["Ton","Tn","Tn","Tn"],tong:["Tong","Tng","Tng","Tng","Tng"],tot:["Tt"],tra:["Tra","Tr","Tr"],trac:["Trc","Trc"],trai:["Trai","Tri","Tri","Tri"],tram:["Tram","Trm","Trm","Trm","Trm"],tran:["Tran","Trn","Trn","Trn","Trn","Trn"],trang:["Trang","Trng","Trng","Trng","Trng"],tranh:["Tranh","Trnh"]," trao":["Trao","Tro"],tre:["Tre","Tr","Tr"],tri:["Tri","Tr","Tr","Tr"],trieu:["Triu","Triu","Triu"],trinh:["Trinh","Trnh","Trnh"],tro:["Tro","Tr","Tr","Tr","Tr","Tr"],trong:["Trong","Trng","Trng","Trng","Trng","Trng"],tru:["Tru","Tr","Tr","Tr","Tr","Tr"],truc:["Trc","Trc","Trc"],trung:["Trung","Trng","Trng","Trng"],truong:["Trng","Trng","Trng"],truyen:["Chuyn","Truyn","Truyn"],tu:["Tu","T","T","T","T","T","T","T","T","T"],tuan:["Tun","Tun","Tun"],tue:["Tu"],tung:["Tung","Tng","Tng","Tng"],tuyen:["Tuyn","Tuyn","Tuyn","Tuyt"],tuyet:["Tuyt","Tuyt"],ty:["Ty","T","T","T"],u:["U","","","","","","","","",""],uan:["Un"],uc:["c","c"],uoc:["c"],uy:["Uy","y","y"],uyen:["Uyn","Uyn"],va:["Va","V","V","V"],vai:["Vai","Vi","Vi"],van:["Van","Vn","Vn","Vn","Vn","Vn","Vn","Vn"],vang:["Vang","Vng","Vng","Vng"],vao:["Vo"],vat:["Vt","Vt"],vay:["Vay","Vy","Vy","Vy","Vy"],ve:["Ve","V","V","V","V","V"],len:["Ln","Ln"],vi:["Vi","V","V","V","V"],vien:["Vin","Vin","Vin","Vin"],viet:["Vit","Vit"],vinh:["Vinh","Vnh","Vnh"],vit:["Vt"],vo:["Vo","V","V","V","V","V","V","V"],voi:["Voi","Vi","Vi","Vi","Vi"],vong:["Vong","Vng","Vng","Vng"],vu:["Vu","V","V","V","V"],vui:["Vui"],vuong:["Vng","Vng","Vng"],vuon:["Vn"],vy:["Vy","V","V"],xa:["Xa","X","X","X"],xac:["Xc"],xanh:["Xanh"],xam:["Xm","Xm"],xan:["X"],xau:["Xu","Xu"],xe:["Xe","X"],xem:["Xem"],xen:["Xen"],xeo:["Xo","Xo"],xi:["Xi","X","X"],xin:["Xin","Xn"],xinh:["Xinh"],xo:["Xo","X","X"],xoa:["Xoa","Xa"],xoai:["Xoi"],xom:["Xm"],xon:["Xn"],xu:["Xu","X","X"],xuan:["Xun"],xuc:["Xc"],xue:["Xu"],xui:["Xui"],xung:["Xung"],xuy:["Xy"],xuyen:["Xuyn","Xuyn"],y:["Y","","","","Y"],yen:["Yn","Yn"],yeu:["Yu","Yu"]};function IE(i){return i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"D").toLowerCase()}function BE(i){return i?i.charAt(0).toUpperCase()+i.slice(1):""}function LE(i){return i.length===0?[]:i.map(a=>{const o=zE[a];return o||[BE(a)]}).reduce((a,o)=>{const u=[];return a.forEach(f=>{o.forEach(m=>{u.push(f?`${f} ${m}`:m)})}),u},[""])}const HE=i=>{if(!i||i.trim().length===0)return[];const l=IE(i.trim()).split(/\s+/);if(l.length>5)return[];let a=LE(l);const o=i.trim();return a=a.filter(u=>u.toLowerCase()!==o.toLowerCase()),a.unshift(o),a.slice(0,15)},Fv=({isOpen:i,onClose:n,onConfirm:l,songTitle:a})=>{const[o,u]=N.useState(""),[f,m]=N.useState([]),[p,y]=N.useState(0),[x,v]=N.useState(!1),_=N.useRef(null),T=N.useRef(null);N.useEffect(()=>{i&&(u(""),m([]),y(0),v(!1),setTimeout(()=>_.current?.focus(),100))},[i]),N.useEffect(()=>{m(HE(o)),y(0)},[o]);const O=P=>{u(P),_.current?.focus()},D=(P=!1)=>{const q=o.trim();!q||x||(v(!0),typeof l=="function"&&l(q,P),n())},V=P=>{let q=p;if(P.key==="ArrowDown")P.preventDefault(),q=p+1,q>=f.length&&(q=0),q>=f.length&&(q=f.length-1);else if(P.key==="ArrowUp")P.preventDefault(),q=p-1,q<0&&(q=0);else if(P.key==="Enter"){P.preventDefault(),f.length>0&&O(f[p]);return}else if(P.key==="Tab"){P.preventDefault(),f.length>0&&O(f[p]);return}q!==p&&(y(q),X(q))},X=P=>{if(T.current){const q=T.current.children[P];q&&q.scrollIntoView({block:"nearest",behavior:"smooth"})}};return i?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[h.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase tracking-tighter",children:"Thm Bi Ht & Khch Mi"}),h.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:h.jsx(ys,{size:28,className:"text-slate-500"})})]}),h.jsxs("div",{className:"p-4 flex-1 overflow-hidden flex flex-col gap-4",children:[h.jsxs("div",{className:"bg-indigo-50 p-3 rounded-2xl border border-indigo-100",children:[h.jsx("p",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wide mb-1",children:"Bi ht  chn"}),h.jsx("p",{className:"text-xl font-bold text-indigo-900 leading-tight",children:a})]}),h.jsxs("div",{className:"space-y-3 flex-shrink-0",children:[h.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase tracking-wide ml-1",children:"Tn Khch Ht"}),h.jsxs("div",{className:"relative",children:[h.jsx(oT,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:24}),h.jsx(Qv,{ref:_,value:o,onChange:P=>u(P.target.value),onKeyDown:V,placeholder:"Nhp tn (v d: anh 7...)",className:"pl-12 h-14 text-xl font-black border-2 border-slate-200 focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 rounded-2xl w-full transition-all text-slate-800 placeholder:text-slate-300"})]})]}),f.length>0&&h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2",children:[h.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wide mb-2 ml-1",children:"Gi  (Chn bng phm mi tn)"}),h.jsx("div",{ref:T,className:"flex flex-col gap-2",children:f.map((P,q)=>h.jsxs("button",{onClick:()=>O(P),className:`p-3 rounded-xl text-left transition-all flex items-center justify-between group cursor-pointer border
                                            ${q===p?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200":"bg-white text-slate-700 hover:bg-slate-50 border-slate-100 hover:border-slate-200"}`,children:[h.jsx("span",{className:"text-xl font-bold",children:P}),q===p&&h.jsx(Fy,{size:24,className:"animate-in fade-in zoom-in"})]},q))})]}),f.length===0&&o.length>0&&h.jsx("div",{className:"text-center p-4 text-slate-400",children:h.jsxs("p",{children:["Nhn Enter  xc nhn: ",h.jsxs("span",{className:"font-bold text-slate-600",children:['"',o,'"']})]})})]}),h.jsxs("div",{className:"p-4 bg-slate-50 flex justify-end gap-3 border-t border-slate-100",children:[h.jsx(jt,{variant:"ghost",onClick:n,size:"lg",className:"text-slate-500 hover:text-slate-700 font-bold text-lg",children:"Hy"}),h.jsx(jt,{onClick:()=>D(!1),disabled:!o.trim(),size:"lg",className:"px-8 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-black text-lg",children:"Thm Vo Hng Ch"}),h.jsx(jt,{onClick:()=>D(!0),disabled:!o.trim(),size:"lg",className:"px-8 bg-green-600 hover:bg-green-700 text-white rounded-xl font-black text-lg shadow-lg shadow-green-200",children:"u Tin (Ln u)"})]})]})}):null},Xd=new Map;async function UE(i,n,l){if(!i)return[];const a=`${i}|${n||""}|${l||""}`;if(Xd.has(a))return Xd.get(a);const u=i.replace(/\[.*?\]/g,"").replace(/\(.*?\)/g,"").replace(/karaoke/gi,"").replace(/beat/gi,"").replace(/instrumental/gi,"").replace(/tone\s*(nam|n|nu)/gi,"").replace(/nhc sng/gi,"").replace(/phi mi/gi,"").replace(/official.*video/gi,"").replace(/mv/gi,"").replace(/lyrics?/gi,"").replace(/hd|4k/gi,"").replace(/\|/g,"").replace(/-/g," ").replace(/\s+/g," ").trim()||i,f=[`${u} ${n||""} karaoke beat`.trim(),`${u} karaoke tone n`,`${u} karaoke tone nam`,`${u} karaoke phi mi`],m=[],p=new Set,y=f.map(async _=>{try{const T=new AbortController,O=setTimeout(()=>T.abort(),6e3),D=await fetch(`/api/yt/search?q=${encodeURIComponent(_)}`,{signal:T.signal});return clearTimeout(O),D.ok?await D.json():[]}catch{return[]}}),x=await Promise.all(y);for(const _ of x)for(const T of _){const O=T.id||T.videoId;if(!O||p.has(O))continue;p.add(O);const D=(T.title||"").toLowerCase();if(!["karaoke","beat","instrumental","nhc sng","phi"].some(P=>D.includes(P)))continue;let X="Beat gc";D.includes("tone n")||D.includes("tone nu")?X="Beat tone n":D.includes("tone nam")?X="Beat tone nam":D.includes("phi mi")||D.includes("phoi moi")?X="Beat phi mi":D.includes("nhc sng")?X="Nhc sng":D.includes("song ca")&&(X="Song ca"),m.push({videoId:O,title:T.title,cleanTitle:T.cleanTitle||T.title,thumbnail:T.thumbnail||`https://i.ytimg.com/vi/${O}/hqdefault.jpg`,artist:T.artist||"",viewCount:T.viewCount||0,views:T.views||"0",duration:T.duration||"",beatLabel:X,tags:T.tags||[]})}if(m.sort((_,T)=>T.viewCount-_.viewCount),l){const _=m.findIndex(T=>T.videoId===l);if(_>0){const[T]=m.splice(_,1);m.unshift(T)}}const v=m.slice(0,5);return Xd.set(a,v),v}const VE=i=>i?i>=1e6?`${(i/1e6).toFixed(1)}M`:i>=1e3?`${(i/1e3).toFixed(0)}K`:String(i):null,GE=({isOpen:i,onClose:n,onConfirm:l,track:a})=>{const[o,u]=N.useState([]),[f,m]=N.useState(0),[p,y]=N.useState(!1);N.useEffect(()=>{!i||!a||(y(!0),u([]),m(0),UE(a.cleanTitle||a.title,a.artist,a.videoId).then(_=>{_.length>0?u(_):u([{videoId:a.videoId,title:a.title,cleanTitle:a.cleanTitle||a.title,thumbnail:a.thumbnail,artist:a.artist,viewCount:a.viewCount||0,views:a.views||"0",duration:a.duration||"",beatLabel:"Beat gc",tags:a.tags||[]}])}).finally(()=>y(!1)))},[i,a]);const x=()=>{const _=o[f];_&&l(_,o)},v=()=>{a&&l({videoId:a.videoId,title:a.title,cleanTitle:a.cleanTitle||a.title,thumbnail:a.thumbnail,artist:a.artist,viewCount:a.viewCount||0,views:a.views||"0",duration:a.duration||"",beatLabel:"Beat gc",tags:a.tags||[]},[])};return i?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[h.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase tracking-tighter",children:"Chn Beat"}),h.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-200 rounded-full transition-colors cursor-pointer",children:h.jsx(ys,{size:28,className:"text-slate-500"})})]}),h.jsxs("div",{className:"p-4 flex-1 overflow-hidden flex flex-col gap-4",children:[h.jsxs("div",{className:"bg-indigo-50 p-3 rounded-2xl border border-indigo-100",children:[h.jsx("p",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wide mb-1",children:"Chn beat cho"}),h.jsx("p",{className:"text-xl font-bold text-indigo-900 leading-tight",children:a?.cleanTitle||a?.title}),a?.artist&&h.jsx("p",{className:"text-sm font-bold text-indigo-500 mt-1",children:a.artist})]}),p&&h.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-3",children:[h.jsx(BS,{size:32,className:"text-indigo-500 animate-spin"}),h.jsx("p",{className:"text-sm font-bold text-slate-400",children:"ang tm beat..."})]}),!p&&o.length>0&&h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2 space-y-2",children:o.map((_,T)=>h.jsxs("button",{onClick:()=>m(T),className:`w-full p-3 rounded-xl text-left transition-all flex items-center gap-3 group cursor-pointer border ${T===f?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200":"bg-white text-slate-700 hover:bg-slate-50 border-slate-100 hover:border-slate-200"}`,children:[h.jsx("div",{className:"w-28 h-20 rounded-lg overflow-hidden bg-slate-200 flex-shrink-0",children:h.jsx("img",{src:_.thumbnail,alt:"",className:"w-full h-full object-cover",loading:"lazy"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:`text-xs font-black uppercase tracking-wide mb-0.5 ${T===f?"text-indigo-200":"text-indigo-500"}`,children:_.beatLabel}),h.jsx("p",{className:`text-sm font-bold leading-snug truncate ${T===f?"text-white":"text-slate-800"}`,children:_.title}),h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx("span",{className:`text-[10px] font-bold ${T===f?"text-indigo-200":"text-slate-400"}`,children:_.artist}),_.viewCount>0&&h.jsxs("span",{className:`text-[10px] font-bold ${T===f?"text-indigo-200":"text-slate-400"}`,children:[" ",VE(_.viewCount)," views"]})]})]}),T===f&&h.jsx("div",{className:"flex-shrink-0",children:h.jsx(Fy,{size:24,className:"text-white"})})]},_.videoId))}),!p&&o.length===0&&h.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-3 text-slate-400",children:[h.jsx(tc,{size:48,strokeWidth:1}),h.jsx("p",{className:"text-sm font-bold",children:"Khng tm thy beat no"})]})]}),h.jsxs("div",{className:"p-4 bg-slate-50 flex justify-end gap-3 border-t border-slate-100",children:[h.jsx(jt,{variant:"ghost",onClick:v,size:"lg",className:"text-slate-500 hover:text-slate-700 font-bold text-lg",children:"B qua"}),h.jsx(jt,{onClick:x,disabled:p||o.length===0,size:"lg",className:"px-8 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-black text-lg disabled:opacity-50",children:"Xc Nhn Beat"})]})]})}):null};function vl(i){if(!i)return"";let n=i.replace(/\[.*?\]/g,"").replace(/\(.*?\)/g,"").replace(/(^|\s)(karaoke|beat|tone|tong|nam|n|nu|h tng|ha tong|gc|goc|d ht|de hat|chun|chuan|nhc sng|nhac song|full hd|hd|4k|official|mv|lyric|lyrics|video|audio|remix|cover|live|lofi|lo-fi|ver|version|hay nht|d ht nht|hit nht|mi nht|top trending|triu view|cc hay|siu hay|cc phm|hot nht|bun nht|tuyt nh|hay nhat|de hat nhat|hit nhat|moi nhat|cuc hay|sieu hay|cuc pham|hot nhat|buon nhat|tuyet dinh)(?=$|\s)/gi,"").trim();return n=n.replace(/^[ \-|]+|[ \-|]+$/g,"").trim(),n.split(/[-|]/).map(a=>a.trim()).filter(a=>a.length>0)[0]||""}function Ey(i){const n=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/];for(const l of n){const a=i.trim().match(l);if(a)return a[1]}return null}const qE=({isExpanded:i=!1,choosingForItem:n=null,onChooseForGuest:l=null,onSearchResults:a=null})=>{const[o,u]=N.useState(""),[f,m]=N.useState([]),[p,y]=N.useState(!1),[x,v]=N.useState(!1),[_,T]=N.useState(-1),[O,D]=N.useState(!1),[V,X]=N.useState(null),[P,q]=N.useState(!1),[W,ae]=N.useState(null),[oe,U]=N.useState([]),[K,Se]=N.useState(!1),[ye,he]=N.useState(""),[Ee,Re]=N.useState(""),[be,me]=N.useState(""),R=N.useRef(null),H=N.useRef(null),E=N.useRef(null),ge=N.useRef([]),ue=N.useRef(null),we=N.useRef(!("webkitSpeechRecognition"in window||"SpeechRecognition"in window)),{suggestions:J,isLoading:ee}=DE(o,x),{addToQueue:pe,updateQueueItem:Te,queueMode:ke}=G();N.useEffect(()=>{a&&a(f,p)},[f,p,a]),N.useEffect(()=>{if(n){const Y=n.cleanTitle||vl(n.title);Y&&(u(Y),tt(Y))}},[n]);const Q=async Y=>{const Z=await Y.arrayBuffer(),se=btoa(String.fromCharCode(...new Uint8Array(Z))),Ae=await fetch("/api/gemini/transcribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{inlineData:{mimeType:Y.type||"audio/webm",data:se}},{text:"Transcribe this Vietnamese audio. Return ONLY the spoken text, nothing else. If no speech is detected, return empty string."}]}],generationConfig:{max_output_tokens:200,temperature:.1,thinkingConfig:{thinkingBudget:0}}})});if(!Ae.ok)throw new Error(`Gemini API error: ${Ae.status}`);return(await Ae.json()).candidates?.[0]?.content?.parts?.[0]?.text?.trim()||""},_e=N.useCallback(()=>{const Y=window.SpeechRecognition||window.webkitSpeechRecognition,Z=new Y;Z.lang="vi-VN",Z.continuous=!1,Z.interimResults=!0,Z.maxAlternatives=1,R.current=Z;let se=!1,Ae=!1;Se(!0),he("listening"),Re(""),me(""),Z.onresult=qe=>{let Ke="",He="";for(let pt=qe.resultIndex;pt<qe.results.length;pt++){const on=qe.results[pt][0].transcript;qe.results[pt].isFinal?Ke+=on:He+=on}Ke?(se=!0,me(""),u(Ke),tt(Ke),Se(!1),he("")):me(He)},Z.onerror=qe=>{Ae=!0,console.error("[Voice] Web Speech error:",qe.error),qe.error==="no-speech"?Re("Khng nghe thy ging ni, th li nh"):qe.error==="not-allowed"?Re("Khng th truy cp microphone"):Re("Li nhn dng ging ni"),setTimeout(()=>{Se(!1),he(""),me("")},1500)},Z.onend=()=>{!se&&!Ae&&(Se(!1),he(""),me(""))},Z.start()},[]),fe=N.useCallback(async()=>{E.current&&E.current.getTracks().forEach(Y=>Y.stop()),clearTimeout(ue.current),Se(!0),he("listening"),Re(""),ge.current=[];try{const Y=await navigator.mediaDevices.getUserMedia({audio:!0});E.current=Y;const Z=new MediaRecorder(Y);H.current=Z,Z.ondataavailable=se=>{se.data.size>0&&ge.current.push(se.data)},Z.onstop=async()=>{if(Y.getTracks().forEach(se=>se.stop()),E.current=null,ge.current.length===0){Se(!1),he("");return}he("processing");try{const se=new Blob(ge.current,{type:Z.mimeType}),Ae=await Q(se);Ae?(u(Ae),tt(Ae)):(Re("Khng nghe thy ging ni, th li nh"),await new Promise(qe=>setTimeout(qe,1500)))}catch(se){console.error("[Voice] Gemini transcribe failed:",se),Re("Li nhn dng ging ni"),await new Promise(Ae=>setTimeout(Ae,1500))}finally{Se(!1),he("")}},Z.start(),ue.current=setTimeout(()=>Ye(),1e4)}catch(Y){console.error("[Voice] Mic access failed:",Y),Re("Khng th truy cp microphone"),setTimeout(()=>{Se(!1),he("")},1500)}},[]),Ce=N.useCallback(()=>{we.current?fe():_e()},[_e,fe]),Ye=N.useCallback(()=>{R.current&&(R.current.stop(),R.current=null),clearTimeout(ue.current),H.current&&H.current.state==="recording"&&H.current.stop()},[]);N.useEffect(()=>()=>{R.current&&R.current.abort(),clearTimeout(ue.current),E.current&&E.current.getTracks().forEach(Y=>Y.stop()),H.current&&H.current.state==="recording"&&H.current.stop()},[]);const tt=async Y=>{const Z=Y||o;if(Z.trim()){Y&&u(Y),v(!1),T(-1),y(!0);try{const se=Ey(Z);if(se){const Ae=await fetch(`/api/yt/video?id=${encodeURIComponent(se)}`);if(Ae.ok){const qe=await Ae.json();m([qe])}else m([])}else{const Ae=await SE(Z);m(Ae)}}catch(se){console.error("Search failed",se)}finally{y(!1)}}},rn=Y=>{Y.key==="ArrowDown"?(Y.preventDefault(),T(Z=>Z<J.length-1?Z+1:Z)):Y.key==="ArrowUp"?(Y.preventDefault(),T(Z=>Z>-1?Z-1:Z)):Y.key==="Enter"&&(Y.preventDefault(),_>=0&&J[_]?tt(J[_].query):tt())},at=Y=>{if(!(!Y||!Y.title)){if(n&&l){l(Y,n.addedBy);return}ae(Y),q(!0)}},Mt=(Y,Z)=>{q(!1),X(Y),U(Z),D(!0)},ct=async(Y,Z=!1)=>{if(!V)return;const se=V.title,Ae=V.artist;let qe=se;V.source==="local"?qe=V.title:qe=vl(se);let Ke=null;try{const{pushToFirebaseQueue:He,guestNameToCustomerKey:pt}=await Ba(async()=>{const{pushToFirebaseQueue:zt,guestNameToCustomerKey:Ki}=await Promise.resolve().then(()=>qv);return{pushToFirebaseQueue:zt,guestNameToCustomerKey:Ki}},void 0),on=pt(Y);Ke=(await He({videoId:V.videoId,title:se,cleanTitle:qe,artist:Ae,addedBy:Y,thumbnail:V.thumbnail,isPriority:Z,beatOptions:oe.length>0?oe.map(zt=>({videoId:zt.videoId,title:zt.title,thumbnail:zt.thumbnail,beatLabel:zt.beatLabel,viewCount:zt.viewCount})):null},on))?.key}catch(He){console.warn("Firebase push failed, will add locally:",He),Ke=Date.now().toString()}Ke&&Ke!==Date.now().toString()||pe({id:Ke,firebaseKey:null,videoId:V.videoId,title:se,cleanTitle:qe,artist:Ae,addedBy:Y,thumbnail:V.thumbnail}),D(!1),X(null),Ba(async()=>{const{recordPlay:He,cacheYoutubeId:pt}=await Promise.resolve().then(()=>jE);return{recordPlay:He,cacheYoutubeId:pt}},void 0).then(({recordPlay:He,cacheYoutubeId:pt})=>{He(se,Ae),V.videoId&&pt(se,Ae,V.videoId)}),Ba(async()=>{const{cleanSongTitle:He}=await Promise.resolve().then(()=>ME);return{cleanSongTitle:He}},void 0).then(({cleanSongTitle:He})=>{He(se).then(pt=>{pt&&Ke&&(Ke&&Ke!==Date.now().toString()?Ba(async()=>{const{ref:on,update:qn,getDatabase:zt}=await Promise.resolve().then(()=>fE);return{ref:on,update:qn,getDatabase:zt}},void 0).then(({ref:on,update:qn,getDatabase:zt})=>{const Ki=zt(),Es=on(Ki,`queue/${Ke}`);qn(Es,{cleanTitle:pt.title,cleanArtist:pt.artist}).catch(()=>{})}):Te(Ke,{cleanTitle:pt.title,cleanArtist:pt.artist}))})})},We=N.useRef(null);return N.useEffect(()=>{We.current&&(We.current.scrollTop=0)},[f]),h.jsxs("div",{className:"flex flex-col h-full bg-slate-50 relative",children:[h.jsxs("div",{className:"p-2 bg-white border-b border-slate-100 sticky top-0 z-30",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Oo,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400",size:16}),h.jsx(Qv,{placeholder:"Tm bi ht...",className:"pl-8 pr-10 h-9 text-sm font-bold rounded-lg border-slate-200 focus:border-indigo-500 focus:ring-indigo-100 block w-full bg-slate-50 text-slate-800 placeholder:text-slate-300 transition-all",value:o,onChange:Y=>{const Z=Y.target.value;u(Z),T(-1),x||v(!0),Ey(Z)&&tt(Z)},onKeyDown:rn,onFocus:()=>v(!0),onBlur:()=>setTimeout(()=>v(!1),200)}),h.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center",children:p?h.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-indigo-500 border-t-transparent rounded-full"}):h.jsx("button",{type:"button",onClick:K?Ye:Ce,className:`p-1 rounded-full transition-all cursor-pointer ${K?"text-red-500 bg-red-50 animate-pulse":"text-slate-400 hover:text-indigo-600 hover:bg-indigo-50"}`,title:K?"ang nghe...":"Tm bng ging ni",children:h.jsx(bs,{size:16,strokeWidth:2.5})})}),x&&o.trim().length>=2&&h.jsx(OE,{suggestions:J,isLoading:ee,onSelect:tt,selectedIndex:_})]}),h.jsxs("div",{className:"flex gap-1.5 mt-2 overflow-x-auto pb-0.5 scrollbar-hide",children:[["Tone Nam","Tone N","Song Ca","Remix"].map(Y=>h.jsxs("button",{onClick:()=>{if(!o.toLowerCase().includes(Y.toLowerCase())){const Z=(o+" "+Y).trim();u(Z),tt(Z)}},className:"px-2 py-0.5 bg-white hover:bg-indigo-50 text-slate-500 hover:text-indigo-600 rounded-full text-[10px] font-bold transition-all whitespace-nowrap border border-slate-200 hover:border-indigo-200 cursor-pointer active:scale-95",children:["+ ",Y]},Y)),h.jsxs("button",{onClick:()=>{const Y=o.trim()||"karaoke",Z=Y.toLowerCase().includes("karaoke")?Y:`${Y} karaoke`;window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent(Z)}`,"_blank","noopener")},className:"px-2 py-0.5 bg-red-600 hover:bg-red-700 text-white rounded-full text-[10px] font-bold transition-all whitespace-nowrap cursor-pointer active:scale-95 flex items-center gap-1",children:[h.jsx(RS,{size:10}),"YouTube"]})]})]}),h.jsxs("div",{ref:We,className:"flex-1 overflow-y-auto p-1.5 custom-scrollbar",children:[!p&&f.length===0&&h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 space-y-3",children:[h.jsx(tc,{size:48,strokeWidth:1}),h.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50",children:o.trim()?"Khng tm thy kt qu":"Nhp tn  tm kim"}),o.trim()&&h.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1.5",children:[h.jsx(zS,{size:12}),"Bm ",h.jsx("span",{className:"text-red-500 font-bold",children:"YouTube"}),"  sao chp link  dn vo  tm kim"]})]}),h.jsx("div",{className:`gap-2 pb-16 ${i?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 auto-rows-max":"flex flex-col"}`,children:f.map((Y,Z)=>h.jsxs("div",{className:`flex ${i?"flex-col p-3 gap-3":"flex-row items-center p-1.5 gap-2"} bg-white hover:bg-indigo-50 rounded-lg cursor-pointer group transition-all border border-transparent hover:border-indigo-100 active:scale-[0.98] shadow-sm hover:shadow-md h-full`,onClick:()=>at(Y),children:[n?.changingBeat&&Z<10&&h.jsx("div",{className:"w-7 h-7 rounded-full bg-indigo-600 text-white flex items-center justify-center text-sm font-black flex-shrink-0 shadow",children:Z+1}),h.jsxs("div",{className:`relative ${i?"w-full aspect-video rounded-lg":"w-14 h-10 rounded-md"} overflow-hidden bg-slate-200 flex-shrink-0`,children:[h.jsx("img",{src:Y.thumbnail,alt:"",className:"w-full h-full object-cover",loading:"lazy"}),Y.duration&&h.jsx("span",{className:"absolute bottom-1 right-1 bg-black/80 text-white text-[10px] font-bold px-1 py-0.5 rounded",children:Y.duration})]}),h.jsxs("div",{className:`flex-1 min-w-0 flex flex-col ${i?"justify-between gap-1":""}`,children:[h.jsxs("div",{children:[h.jsx("h4",{className:`font-bold text-slate-800 leading-snug group-hover:text-indigo-700 transition-colors ${i?"text-base line-clamp-2 mb-1":"text-xs line-clamp-2"}`,title:Y.title,children:Y.cleanTitle||Y.title}),i&&h.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[Y.score>5e4&&h.jsxs("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-[10px] font-black px-1.5 py-0.5 rounded flex items-center gap-1 shadow-sm",children:[h.jsx(ef,{size:10,fill:"currentColor"}),"NGON"]}),Y.views&&h.jsxs("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded flex items-center gap-1",children:[h.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-400"}),Y.views," lt xem"]})]}),h.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:Y.tags&&Y.tags.slice(0,i?4:2).map((se,Ae)=>h.jsx("span",{className:`text-[8px] font-bold px-1.5 py-0.5 rounded uppercase tracking-wide
                                                ${se.includes("Tone")?"bg-blue-50 text-blue-600 border border-blue-100":se==="Remix"?"bg-purple-50 text-purple-600 border border-purple-100":"bg-slate-100 text-slate-500 border border-slate-200"}`,children:se},Ae))})]}),h.jsxs("div",{className:`flex items-center justify-between mt-1 ${i?"border-t border-slate-100 pt-2":""}`,children:[h.jsxs("span",{className:"text-[10px] font-bold text-slate-400 truncate max-w-[120px] uppercase flex items-center gap-1",children:[h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"}),Y.artist]}),i&&h.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white text-[10px] font-bold px-3 py-1.5 rounded-full transition-all active:scale-95 shadow-lg shadow-indigo-200",children:"CHN"})]})]}),!i&&h.jsx("button",{className:"p-1.5 rounded-full text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition-all flex-shrink-0",children:h.jsx(XS,{size:16,strokeWidth:3})})]},Y.id||Y.videoId))})]}),K&&h.jsxs("div",{className:"fixed inset-0 z-[9999] bg-white flex flex-col items-center justify-center",children:[h.jsxs("div",{className:"relative mb-8",children:[ye==="listening"&&!Ee&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute inset-0 w-28 h-28 -m-6 rounded-full bg-red-100 animate-ping opacity-30"}),h.jsx("div",{className:"absolute inset-0 w-24 h-24 -m-4 rounded-full bg-red-50 animate-pulse opacity-50"})]}),h.jsx("button",{onClick:ye==="listening"?Ye:void 0,className:`relative w-16 h-16 rounded-full flex items-center justify-center shadow-lg transition-all cursor-pointer active:scale-95 ${ye==="processing"?"bg-indigo-500 shadow-indigo-200":Ee?"bg-slate-400 shadow-slate-200":"bg-red-500 hover:bg-red-600 shadow-red-200"} text-white`,children:ye==="processing"?h.jsx("div",{className:"animate-spin h-6 w-6 border-3 border-white border-t-transparent rounded-full"}):h.jsx(bs,{size:28,strokeWidth:2.5})})]}),be&&!Ee&&h.jsxs("p",{className:"text-xl font-bold text-indigo-600 mb-3 px-8 text-center animate-pulse",children:['"',be,'"']}),h.jsx("p",{className:`text-lg font-bold mb-2 ${Ee?"text-red-500":"text-slate-700"}`,children:Ee||(ye==="processing"?"ang nhn dng...":"ang nghe...")}),h.jsx("p",{className:"text-xs text-slate-400 font-medium",children:Ee?"":ye==="listening"?we.current?"Ni xong th bm nt mic  tm":"Ni tn bi ht...":"ang x l ging ni"}),ye==="listening"&&h.jsx("button",{onClick:()=>{R.current&&(R.current.abort(),R.current=null),clearTimeout(ue.current),E.current&&(E.current.getTracks().forEach(Y=>Y.stop()),E.current=null),H.current&&H.current.state==="recording"&&(H.current.stop(),H.current=null),Se(!1),he(""),me("")},className:"mt-8 text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors cursor-pointer uppercase tracking-widest",children:"Hu"})]}),h.jsx(GE,{isOpen:P,onClose:()=>q(!1),onConfirm:Mt,track:W}),h.jsx(Fv,{isOpen:O,onClose:()=>D(!1),onConfirm:ct,songTitle:V?.title||""})]})};let ot=null,On=!1,ph=100,Pv=!1,wf=0,Cf=0,QE=new Set;const YE=i=>{ot=i,On=!0},KE=()=>{ot=null,On=!1},XE=(i,n)=>{wf=i,n>0&&(Cf=n)},FE=()=>{QE.forEach(i=>i())},Hn=()=>{if(!On||!ot)return!1;try{const i=ot.getIframe?.();return!!(i&&i.src)}catch{return!1}},PE=()=>ot,Qa=()=>{try{return!ot||!On?wf:ot.getCurrentTime()||0}catch{return wf}},Ya=()=>{try{return!ot||!On?Cf:ot.getDuration()||0}catch{return Cf}},Ay=(i,n=!0)=>{try{if(!ot||!On)return;const l=Math.max(0,Math.min(100,i));l>0&&(ph=l),ot.setVolume(l),l>0&&n&&ot.unMute()}catch{}},Nf=()=>{try{if(!ot||!On)return;ot.mute()}catch{}},Ka=()=>{try{if(!ot||!On||Pv)return;ot.unMute(),ot.setVolume(ph)}catch{}},My=i=>{Pv=i;try{if(!ot||!On)return;i?ot.mute():(ot.unMute(),ot.setVolume(ph))}catch{}},ZE=()=>{try{return!ot||!On?-1:ot.getPlayerState()??-1}catch{return-1}},Zv=()=>{try{if(!ot||!On)return!1;const i=ot.getIframe?.();return!!(i&&i.src)}catch{return!1}},_l=()=>{try{Zv()&&ot.playVideo()}catch{}},$E=()=>{try{Zv()&&ot.pauseVideo()}catch{}},WE="karaoke_sync_channel",Fd=()=>null,Pd=()=>0,Ry=()=>!1,$v=(i="host",{onSongEnded:n}={})=>{const l=i==="host",a=G(E=>E.isPlaying),o=G(E=>E.waitingForGuest),u=G(l?E=>E.currentSong:Fd),f=G(l?E=>E.waitCountdown:Pd),m=G(l?E=>E.countdownPaused:Ry),p=G(l?E=>E.micAttemptHint:Fd),y=G(l?E=>E.restartTrigger:Pd),x=G(l?E=>E.queue:Fd),v=G(E=>E.setCurrentSong),_=G(E=>E.setIsPlaying),T=G(E=>E.setWaitingForGuest),O=G(E=>E.setWaitCountdown),D=G(E=>E.setCountdownPaused),V=G(E=>E.setMicAttemptHint),X=G(E=>E.triggerRestart),P=N.useRef(null),q=N.useRef(null),W=N.useRef(null),ae=N.useRef(new Set),oe=N.useCallback(()=>(P.current||(P.current=new BroadcastChannel(WE)),P.current),[]),U=N.useCallback((E,ge)=>{try{oe().postMessage({type:E,payload:ge})}catch{}},[oe]);N.useEffect(()=>{if(i!=="projection")return;const E=oe();E.onmessage=ue=>{const{type:we,payload:J}=ue.data;switch(we){case"SET_SONG":{q.current!==J?.videoId&&(q.current=J?.videoId||null,v(J),_(!1),W.current&&clearInterval(W.current),Hn()&&Nf());break}case"PLAY":{W.current&&(clearInterval(W.current),W.current=null),_(!0);const ee=()=>{Ka(),_l()};if(Hn())ee();else{const pe=setInterval(()=>{Hn()&&(clearInterval(pe),ae.current.delete(pe),ae.current.delete(Te),ee())},300),Te=setTimeout(()=>{clearInterval(pe),ae.current.delete(pe),ae.current.delete(Te)},1e4);ae.current.add(pe),ae.current.add(Te)}break}case"PAUSE":{_(!1),Hn()&&Nf();break}case"WAITING_FOR_GUEST":T(J);break;case"COUNTDOWN":O(J);break;case"COUNTDOWN_PAUSED":D(J);break;case"MIC_ATTEMPT":V(J);break;case"RESTART":{if(Hn()){const ee=PE();ee&&ee.seekTo(0,!0)}X();break}case"BEAT_CHANGE":{const ee=G.getState().currentSong;ee&&v({...ee,changingBeat:J.changingBeat,beatOptions:J.beatOptions||ee.beatOptions});break}case"BEAT_SEARCH_RESULTS":G.getState().setBeatSearchResults(J?.results||[]);break;case"SET_VOLUME":Ay(J,G.getState().isPlaying);break;case"SET_MUTE":My(J);break;case"SYNC_QUEUE":G.getState().reorderQueue(J);break;case"FULL_SYNC":{const{song:ee,playing:pe,waiting:Te,countdown:ke,paused:Q,micHint:_e,queue:fe}=J;if(W.current&&(clearInterval(W.current),W.current=null),ee&&(q.current=ee.videoId,v(ee),pe)){const Ce=setInterval(()=>{Hn()&&(clearInterval(Ce),ae.current.delete(Ce),ae.current.delete(Ye),_l(),setTimeout(()=>Ka(),300),_(!0))},300),Ye=setTimeout(()=>{clearInterval(Ce),ae.current.delete(Ce),ae.current.delete(Ye)},1e4);ae.current.add(Ce),ae.current.add(Ye)}T(Te),O(ke),D(Q||!1),V(_e||null),fe&&G.getState().reorderQueue(fe),typeof J.volume=="number"&&Ay(J.volume,pe),typeof J.isMuted=="boolean"&&My(J.isMuted);break}}},E.postMessage({type:"REQUEST_SYNC"});const ge=setInterval(()=>{Hn()&&U("SYNC_TIME",{time:Qa(),duration:Ya()})},3e3);return()=>{clearInterval(ge),ae.current.forEach(ue=>{clearInterval(ue),clearTimeout(ue)}),ae.current.clear(),W.current&&(clearInterval(W.current),W.current=null),E.close(),P.current=null}},[i,oe,v,_,T,O,D,V,X,U]);const K=N.useRef(!1);N.useEffect(()=>{i==="projection"&&(K.current&&!o&&a&&Hn()&&(Ka(),_l()),K.current=o)},[i,o,a]),N.useEffect(()=>{if(i!=="host")return;const E=oe();return E.onmessage=ge=>{const{type:ue,payload:we}=ge.data;if(ue==="REQUEST_SYNC"){const J=G.getState();U("FULL_SYNC",{song:J.currentSong,playing:J.isPlaying,waiting:J.waitingForGuest,countdown:J.waitCountdown,paused:J.countdownPaused,micHint:J.micAttemptHint,queue:J.queue,volume:J.volume,isMuted:J.isMuted})}else ue==="SYNC_TIME"?XE(we.time,we.duration):ue==="SONG_ENDED"&&(FE(),n&&n())},()=>{E.close(),P.current=null}},[i,oe,U,n]);const Se=N.useRef(null);N.useEffect(()=>{if(i!=="host")return;if(u?.isStaged&&u?.status==="waiting"){Se.current=`waiting_${u.id}`,U("SET_SONG",u);return}if(u?.isStaged){U("SET_SONG",null);return}const E=u?.videoId||null;E!==Se.current&&(Se.current=E,u&&U("SET_SONG",u))},[i,u,U]);const ye=N.useRef(null);N.useEffect(()=>{if(i!=="host")return;const E=u?.changingBeat||!1;E!==ye.current&&(ye.current=E,U("BEAT_CHANGE",{changingBeat:E,beatOptions:u?.beatOptions}))},[i,u?.changingBeat,U]);const he=N.useRef(null);N.useEffect(()=>{i==="host"&&a!==he.current&&(he.current=a,U(a?"PLAY":"PAUSE"))},[i,a,U]);const Ee=N.useRef(null);N.useEffect(()=>{i==="host"&&o!==Ee.current&&(Ee.current=o,U("WAITING_FOR_GUEST",o))},[i,o,U]);const Re=N.useRef(null);N.useEffect(()=>{if(i==="host")return Re.current&&clearTimeout(Re.current),Re.current=setTimeout(()=>{U("SYNC_QUEUE",x)},500),()=>{Re.current&&clearTimeout(Re.current)}},[i,x,U]),N.useEffect(()=>{i==="host"&&U("COUNTDOWN",f)},[i,f,U]),N.useEffect(()=>{i==="host"&&U("COUNTDOWN_PAUSED",m)},[i,m,U]),N.useEffect(()=>{i==="host"&&U("MIC_ATTEMPT",p)},[i,p,U]);const be=G(l?E=>E.volume:Pd),me=G(l?E=>E.isMuted:Ry),R=N.useRef(100);N.useEffect(()=>{i==="host"&&be!==R.current&&(R.current=be,U("SET_VOLUME",be))},[i,be,U]);const H=N.useRef(!1);return N.useEffect(()=>{i==="host"&&me!==H.current&&(H.current=me,U("SET_MUTE",me))},[i,me,U]),N.useEffect(()=>{i!=="host"||y===0||U("RESTART")},[i,y,U]),{sendMessage:U}},JE=h.jsx("style",{children:`
        .ytp-endscreen-container { display: none !important; }
        .ytp-suggestions { display: none !important; }
    `}),e3=de.memo(({className:i,onReady:n,onStateChange:l,onEnded:a,muted:o=!1,controls:u=!0,quality:f=null,autoUnmute:m=!1,passive:p=!1})=>{const y=G(U=>U.currentSong),x=G(U=>U.isPlaying),v=G(U=>U.setIsPlaying),_=G(U=>U.restartTrigger),T=G(U=>U.waitingForGuest),O=N.useRef(null),D=N.useRef(!1),V=N.useRef(null),X=N.useRef(null),P=N.useRef(null),q=N.useRef(null),W=de.useMemo(()=>({height:"100%",width:"100%",playerVars:{autoplay:m?1:0,controls:u?1:0,mute:m||o?1:0,disablekb:u?0:1,modestbranding:1,playsinline:1,enablejsapi:1,fs:0,iv_load_policy:3,rel:0,origin:window.location.origin}}),[u,o,m]);N.useEffect(()=>{if(!m)return;const U=()=>{O.current&&O.current.unMute()};return document.addEventListener("click",U,{once:!0}),()=>document.removeEventListener("click",U)},[m]);const ae=U=>{O.current=U.target,YE(U.target);const K=U.target.getIframe();K&&(K.removeAttribute("allowfullscreen"),K.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen");const Se=()=>{f&&U.target.setPlaybackQuality&&U.target.setPlaybackQuality(f)};Se(),window.ytQualityInterval&&clearInterval(window.ytQualityInterval),window.ytQualityInterval=setInterval(Se,3e4),D.current=!0,X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{D.current=!1},1500);const ye=G.getState(),he=ye.isPlaying&&!ye.waitingForGuest;p?he?U.target.unMute():U.target.mute():he?U.target.playVideo():(U.target.mute(),U.target.pauseVideo()),n&&n(U)};N.useEffect(()=>()=>{window.ytQualityInterval&&clearInterval(window.ytQualityInterval),X.current&&clearTimeout(X.current),P.current&&clearTimeout(P.current),q.current&&clearTimeout(q.current),y?.videoId||(KE(),O.current=null)},[y?.videoId,m,f]);const oe=U=>{const K=G.getState();if(f&&(U.data===1||U.data===3)&&U.target.setPlaybackQuality(f),p&&U.data===1&&(!K.isPlaying||K.waitingForGuest)){U.target.mute(),U.target.pauseVideo();return}if(!p&&K.waitingForGuest&&U.data===1){U.target.pauseVideo();return}if(D.current&&U.data===1&&!K.isPlaying&&!p){U.target.pauseVideo();return}l&&l(U),p?U.data===1&&(K.isPlaying&&!K.waitingForGuest?U.target.unMute():U.target.mute()):(U.data===1&&v(!0),U.data===2&&v(!1)),U.data===0&&a&&a()};return N.useEffect(()=>{Hn()&&(p||(x&&!T?m?O.current&&(O.current.mute(),O.current.playVideo(),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{O.current&&(O.current.unMute(),O.current.setVolume(100))},500)):_l():$E()))},[x,T,m]),N.useEffect(()=>{_>0&&Hn()&&(O.current.seekTo(0,!0),q.current&&clearTimeout(q.current),q.current=setTimeout(()=>_l(),100))},[_]),y?h.jsxs("div",{ref:V,className:i,style:{position:"relative",overflow:"hidden"},children:[JE,h.jsx(y1,{videoId:y.videoId,opts:W,onReady:ae,onStateChange:oe,className:"w-full h-full"})]}):h.jsx("div",{className:"bg-black text-white flex items-center justify-center h-full w-full",children:"Cha pht bi no"})}),t3={left:"30%",width:"350px",height:"350px",animationDelay:"0s"},n3={animationDelay:"0s"},i3=({countdown:i,onSkip:n,onPauseToggle:l})=>{const a=G(D=>D.waitingForGuest),o=G(D=>D.currentSong),u=G(D=>D.waitCountdown),f=G(D=>D.countdownPaused),m=G(D=>D.micAttemptHint),p=i??u,[y,x]=N.useState(!1);if(N.useEffect(()=>{if(a){const D=setTimeout(()=>x(!0),100);return()=>clearTimeout(D)}else x(!1)},[a]),!a)return null;const v=o?.addedBy||"Khch",_=o?.cleanTitle||o?.title||"",T=30,O=Math.max(0,(p??T)/T);return h.jsxs(h.Fragment,{children:[y&&m0.createPortal(h.jsxs("div",{className:`inv-overlay ${y?"inv-overlay--entered":""}`,children:[h.jsx("div",{className:"inv-orbs",children:h.jsx("div",{className:"inv-orb",style:t3})}),h.jsxs("div",{className:"inv-top-controls",children:[h.jsxs("div",{className:"inv-countdown-row",children:[h.jsxs("span",{className:"inv-countdown-num",children:[p,"s"]}),l&&h.jsxs("button",{className:"inv-pause-btn",onClick:D=>{D.stopPropagation(),l?.()},children:[f?h.jsx(Do,{size:16,fill:"currentColor"}):h.jsx(Zy,{size:16,fill:"currentColor"}),f?"Tip Tc":"Dng m"]})]}),h.jsxs("button",{className:"inv-start-btn",onClick:n,children:["BT U NGAY ",h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M5 12l14 0"}),h.jsx("path",{d:"M13 18l6 -6"}),h.jsx("path",{d:"M13 6l6 6"})]})]})]}),h.jsxs("div",{className:"inv-content",children:[h.jsxs("div",{className:"inv-mic-wrap",onClick:n,children:[h.jsx("div",{className:"inv-rings",children:h.jsx("div",{className:"inv-ring",style:n3})}),h.jsxs("svg",{className:"inv-countdown-svg",viewBox:"0 0 100 100",children:[h.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"3"}),h.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"#22d3ee",strokeWidth:"3",strokeDasharray:"301.6",strokeDashoffset:301.6*(1-O),strokeLinecap:"round",style:{transition:f?"none":"stroke-dashoffset 1s linear"},transform:"rotate(-90 50 50)"})]}),h.jsx("div",{className:"inv-mic-btn",children:h.jsx(bs,{size:80,color:"#fff",strokeWidth:2.5})})]}),h.jsx("h1",{className:"inv-singer",children:v}),h.jsx("h2",{className:"inv-subtitle",children:"MI LN SN KHU"}),h.jsxs("div",{className:"inv-song",children:["TRNH BY BI HT: ",h.jsx("span",{className:"inv-song-title",children:_})]})]}),h.jsx("div",{className:"inv-footer",children:h.jsxs("p",{className:"inv-instruction",children:["G nh vo mic hoc ni ",h.jsx("span",{className:"inv-alo",children:"A L"}),"  bt u"]})})]}),document.body),m&&m0.createPortal(h.jsxs("div",{className:`inv-hint ${m==="weak"?"inv-hint--amber":"inv-hint--green"}`,children:[m==="weak"&&" Hy g mnh hn vo mic!",m==="medium"&&" Gn ri! Ni to hn na!"]}),document.body)]})},Wv=de.memo(i3),s3=de.memo(()=>{const i=G(y=>y.currentSong),n=G(y=>y.queue[0]?.videoId??null),l=G(y=>y.queue[0]?.cleanTitle||y.queue[0]?.title||null),a=G(y=>y.queue[0]?.addedBy??null),o=G(y=>y.queue[0]?.status??null),[u,f]=N.useState(!1);if(N.useEffect(()=>{if(i){const x=[],v=()=>{f(!0),x.push(setTimeout(()=>f(!1),8e3))};let _=0;if(i.duration)if(typeof i.duration=="string"&&i.duration.includes(":")){const T=i.duration.split(":").map(Number);T.length===2?_=T[0]*60+T[1]:T.length===3&&(_=T[0]*3600+T[1]*60+T[2])}else _=parseInt(i.duration,10)||0;if(x.push(setTimeout(v,5e3)),_>0){let T=_*1e3-35e3;T<0&&(T=_*1e3*.85),T>15e3&&x.push(setTimeout(v,T))}return()=>{x.forEach(T=>{clearTimeout(T),clearInterval(T)})}}else f(!1)},[i]),!i)return null;const m=i.cleanTitle||vl(i.title),p=i.addedBy||"Khch";return h.jsx("div",{className:`absolute top-0 left-0 right-0 z-50 pointer-events-none flex justify-center px-8 pt-8 transition-[opacity,transform] duration-500 ease-in-out ${u?"opacity-100 translate-y-0":"opacity-0 -translate-y-full"}`,children:h.jsxs("div",{className:"flex items-stretch gap-0 w-[95vw] max-w-[95vw] rounded-3xl overflow-hidden bg-black/85 border border-white/10",children:[h.jsxs("div",{className:"flex-1 w-1/2 flex items-center gap-6 px-8 py-7 min-w-0 border-r border-white/10",children:[h.jsx("div",{className:"w-20 h-20 rounded-2xl bg-yellow-500/20 flex items-center justify-center flex-shrink-0",children:h.jsx(bs,{size:40,className:"text-yellow-400 drop-shadow-md"})}),h.jsxs("div",{className:"min-w-0 flex flex-col justify-center flex-1",children:[h.jsx("div",{className:"text-yellow-500 text-lg font-bold uppercase tracking-[0.2em] leading-none mb-2",children:"ANG HT"}),h.jsx("div",{className:"text-white font-black text-4xl uppercase line-clamp-2 w-full leading-[1.1] break-words",children:m}),h.jsx("div",{className:"text-yellow-300 text-3xl font-extrabold uppercase tracking-wide mt-2 truncate",children:p})]})]}),h.jsxs("div",{className:"flex-1 w-1/2 flex items-center gap-6 bg-indigo-950/40 px-8 py-7 min-w-0",children:[h.jsx("div",{className:"w-20 h-20 rounded-2xl bg-indigo-500/20 flex items-center justify-center flex-shrink-0",children:h.jsx($y,{size:36,className:"text-indigo-300"})}),h.jsxs("div",{className:"min-w-0 flex flex-col justify-center flex-1",children:[h.jsx("div",{className:"text-indigo-300 text-sm font-bold uppercase tracking-widest leading-none mb-2",children:"TIP THEO"}),o==="waiting"?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"text-amber-400 font-bold text-3xl uppercase line-clamp-2 w-full leading-tight break-words",children:" Ch chn bi"}),h.jsx("div",{className:"text-white text-2xl font-bold uppercase tracking-wide mt-1 truncate",children:a||"Khch"})]}):n?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"text-white/90 font-bold text-3xl uppercase line-clamp-2 w-full leading-tight break-words",children:l}),h.jsx("div",{className:"text-white text-2xl font-bold uppercase tracking-wide mt-1 truncate",children:a||"Khch"})]}):h.jsx("div",{className:"text-white/50 font-bold text-xl uppercase",children:"Chc b con ht vui v!"})]})]})]})})}),l3=de.memo(()=>{const i=G(u=>u.currentSong),n=G(u=>u.beatSearchResults);if(!i?.changingBeat)return null;const l=i.addedBy||"Qu Khch",a=i.cleanTitle||i.title||"",o=n&&n.length>0;return h.jsxs("div",{className:"absolute inset-0 z-30 flex items-center justify-center pointer-events-none",children:[h.jsx("div",{className:"absolute inset-0 bg-black/70"}),h.jsx("div",{className:"relative z-10 w-[96vw] h-[94vh] flex flex-col",children:h.jsxs("div",{className:"bg-black/95 rounded-[3rem] border-4 border-indigo-500/50 shadow-[0_0_120px_rgba(99,102,241,0.4)] p-6 md:p-8 flex flex-col h-full overflow-hidden",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-6 pb-6 border-b border-white/10",children:[h.jsx("div",{className:"w-20 h-20 rounded-2xl bg-indigo-500 flex items-center justify-center shadow-lg shadow-indigo-500/40",children:h.jsx(Py,{size:48,className:"text-white animate-spin",style:{animationDuration:"4s"}})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-indigo-400 font-black text-2xl uppercase tracking-[0.3em] mb-1",children:["ANG I BEAT  ",l]}),h.jsx("p",{className:"text-white font-black text-4xl truncate leading-tight",children:a})]}),o&&h.jsxs("div",{className:"flex flex-col items-end gap-1 px-6 py-2 bg-indigo-500/10 rounded-2xl border border-indigo-500/30",children:[h.jsx("p",{className:"text-indigo-300 font-extrabold text-xl uppercase tracking-widest",children:"Chn s my?"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Oo,{size:24,className:"text-indigo-400"}),h.jsx("span",{className:"text-white font-black text-3xl",children:"1 - 6"})]})]})]}),o?h.jsx("div",{className:"grid grid-cols-3 grid-rows-2 gap-5 flex-1 overflow-hidden",children:n.map((u,f)=>h.jsxs("div",{className:"flex flex-col gap-3 p-4 rounded-3xl bg-white/5 border-2 border-white/10 relative overflow-hidden group",children:[h.jsx("div",{className:"absolute top-3 left-3 z-20 w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center text-3xl font-black shadow-xl border-2 border-white/20",children:f+1}),u.thumbnail&&h.jsx("div",{className:"w-full aspect-video rounded-2xl overflow-hidden bg-slate-900 flex-shrink-0 shadow-lg border border-white/5",children:h.jsx("img",{src:u.thumbnail,alt:"",className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[h.jsx("p",{className:"text-white font-black text-xl line-clamp-2 leading-tight mb-1",children:u.cleanTitle||u.title}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"text-indigo-400 font-bold text-base uppercase tracking-wider truncate flex-1 mr-2",children:u.artist}),u.duration&&h.jsx("span",{className:"text-white/40 font-mono text-sm border border-white/10 px-1.5 py-0.5 rounded leading-none",children:u.duration})]})]})]},u.videoId||f))}):h.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-20",children:[h.jsxs("div",{className:"relative mb-10",children:[h.jsx(Oo,{size:120,className:"text-indigo-500/20"}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})})]}),h.jsx("p",{className:"text-indigo-300/60 font-black text-4xl text-center uppercase tracking-widest animate-pulse",children:"Host ang tm bi..."})]})]})})]})}),a3="/bg.mp4";class r3 extends de.Component{constructor(n){super(n),this.state={hasError:!1,errorKey:0},this._recoverTimer=null}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(){this._recoverTimer&&clearTimeout(this._recoverTimer),this._recoverTimer=setTimeout(()=>this.setState({hasError:!1}),500)}componentDidUpdate(n){n.videoId!==this.props.videoId&&this.state.hasError&&this.setState({hasError:!1})}componentWillUnmount(){this._recoverTimer&&clearTimeout(this._recoverTimer)}render(){return this.state.hasError?h.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center",children:h.jsx("div",{className:"text-white/50 text-xl",children:"ang ti..."})}):this.props.children}}const o3=de.memo(()=>{const i=G(o=>o.isPlaying),n=G(o=>o.waitingForGuest),l=N.useRef(!0),a=N.useRef(null);return N.useEffect(()=>{const o=setTimeout(()=>{l.current=!1},15e3);return()=>clearTimeout(o)},[]),N.useEffect(()=>{if(!i||n)return;const o=l.current?2e3:3e3,u=setInterval(()=>{const f=ZE();f===1?Ka():(f===-1||f===5)&&(Nf(),_l(),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>Ka(),500))},o);return()=>{clearInterval(u),a.current&&clearTimeout(a.current)}},[i,n]),null}),c3=()=>{const{sendMessage:i}=$v("projection"),n=G(q=>q.currentSong),l=G(q=>q.isPlaying),[a,o]=N.useState(!!document.fullscreenElement),[u,f]=N.useState(!0),m=N.useRef(null),p=N.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().catch(()=>{}):document.documentElement.requestFullscreen().catch(()=>{})},[]),[y,x]=N.useState(!1),[v,_]=N.useState(!1),T=N.useRef(null);N.useEffect(()=>{const q=setTimeout(()=>x(!0),2e3);return()=>clearTimeout(q)},[]),N.useEffect(()=>{if(!v)return;const q=window.AudioContext||window.webkitAudioContext;if(!q)return;const W=new q;T.current=W,W.state==="suspended"&&W.resume();const ae=W.createOscillator(),oe=W.createGain();ae.type="sine",ae.frequency.value=1,oe.gain.value=.001,ae.connect(oe),oe.connect(W.destination),ae.start(),ae.stop(W.currentTime+.5);const U=W.createOscillator(),K=W.createGain();return U.frequency.value=440,K.gain.value=0,U.connect(K),K.connect(W.destination),U.start(),()=>{U.stop(),W.close(),T.current=null}},[v]);const O=N.useCallback(()=>{i("SONG_ENDED")},[i]);N.useEffect(()=>{const q=()=>o(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",q),()=>document.removeEventListener("fullscreenchange",q)},[]);const D=N.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>f(!1),3e3)},[]),V=N.useRef(null),X=N.useRef(null);N.useEffect(()=>{const q=()=>{V.current||(V.current=!0,f(!0),D(),X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{V.current=!1},500))};return D(),window.addEventListener("mousemove",q),()=>{window.removeEventListener("mousemove",q),m.current&&clearTimeout(m.current),X.current&&clearTimeout(X.current)}},[D]);const P=N.useCallback(()=>{_(!0),document.fullscreenElement||document.documentElement.requestFullscreen().catch(()=>{}),window.__unlocked=!0,window.opener&&window.opener.postMessage({type:"tv-ready"},"*")},[]);return h.jsxs("div",{className:"h-screen w-screen bg-black overflow-hidden flex items-center justify-center relative cursor-pointer",onClick:P,children:[h.jsx(o3,{}),h.jsx("div",{className:`w-full h-full relative z-10 transition-opacity duration-500 ${n&&n.videoId&&(l||n.changingBeat)?"opacity-100":"opacity-0 pointer-events-none"}`,children:n&&n.videoId?h.jsxs("div",{className:"w-full h-full relative",children:[h.jsx(r3,{videoId:n.videoId,children:h.jsx(e3,{className:"w-full h-full",autoUnmute:!0,quality:"hd1080",controls:!1,passive:!0,onEnded:O})}),h.jsx("div",{className:"absolute inset-0 z-10"}),h.jsx(s3,{}),h.jsx(l3,{})]}):h.jsx("div",{className:"w-full h-full"})}),h.jsx("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-300 ${n&&l?"opacity-0 pointer-events-none":"opacity-100"}`,children:y&&h.jsx("video",{src:a3,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"})}),n&&n.status==="waiting"&&!l&&h.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center pointer-events-none",children:h.jsxs("div",{className:"relative px-20 py-14 text-center max-w-[85vw]",children:[h.jsx("div",{className:"absolute inset-0 bg-black rounded-[2rem] border-2 border-indigo-400 shadow-[0_0_80px_rgba(99,102,241,0.3)]"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"mx-auto w-24 h-1 bg-indigo-500 rounded-full mb-8"}),h.jsx("p",{className:"text-indigo-300 font-bold text-2xl uppercase tracking-[0.3em] mb-4",children:"Xin mi"}),h.jsx("h2",{className:"text-white font-black text-7xl uppercase tracking-tight mb-6 drop-shadow-lg",children:n.addedBy||"Qu Khch"}),h.jsx("p",{className:"text-indigo-400 font-extrabold text-4xl uppercase tracking-widest",children:"Ln chn bi ht"}),h.jsx("div",{className:"mx-auto w-24 h-1 bg-indigo-500 rounded-full mt-8"})]})]})}),h.jsx(Wv,{onPauseToggle:()=>{const q=G.getState();q.setCountdownPaused(!q.countdownPaused)}}),h.jsx("button",{onClick:p,className:`absolute top-4 right-4 z-50 p-3 bg-black/50 hover:bg-black/80 text-white rounded-xl transition-all duration-500 cursor-pointer active:scale-90 ${u?"opacity-100":"opacity-0 pointer-events-none"}`,title:a?"Thot ton mn hnh":"Ton mn hnh",children:a?h.jsx(GS,{size:28}):h.jsx(HS,{size:28})})]})},u3=de.memo(({className:i})=>{const n=G(m=>m.currentSong),l=G(m=>m.isPlaying),a=N.useRef(null),[o,u]=N.useState(!1);N.useEffect(()=>{a.current&&(a.current.style.animationPlayState=l?"running":"paused")},[l]);const f=N.useMemo(()=>n?`https://img.youtube.com/vi/${n.videoId}/hqdefault.jpg`:null,[n?.videoId]);return n?h.jsxs("div",{className:`${i} bg-black flex items-center justify-center relative overflow-hidden`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[h.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-30 object-cover",style:{backgroundImage:`url(${f})`}}),h.jsxs("div",{ref:a,className:"relative z-10 h-[92%] aspect-square rounded-full border-4 border-slate-800 shadow-2xl overflow-hidden will-change-transform",style:{animation:"disc-spin 10s linear infinite",animationPlayState:l?"running":"paused"},children:[h.jsx("img",{src:f,alt:"Song Thumbnail",className:"w-full h-full object-cover scale-110"}),h.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-black rounded-full border-2 border-slate-700 flex items-center justify-center",children:h.jsx("div",{className:"w-6 h-6 bg-slate-900 rounded-full"})})]}),h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 flex items-center gap-3 px-4 py-3 bg-black/85",style:{opacity:o?1:0,transform:o?"translateY(0)":"translateY(100%)",transition:"opacity 0.3s ease, transform 0.3s ease"},children:[h.jsx(bs,{size:16,className:"text-yellow-400 flex-shrink-0"}),h.jsxs("div",{className:"min-w-0 flex items-center gap-2 flex-1",children:[h.jsx("span",{className:"text-yellow-400 font-black text-sm uppercase truncate",children:n.title}),h.jsx("span",{className:"text-white/30 flex-shrink-0",children:""}),h.jsx("span",{className:"text-white/60 font-bold text-xs uppercase flex-shrink-0",children:n.addedBy||"Khch"})]}),h.jsx("div",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase ${l?"bg-red-600 text-white":"bg-orange-500 text-white"}`,children:l?"ANG HT":"TM NGNG"})]})]}):h.jsx("div",{className:"bg-black text-white flex items-center justify-center h-full w-full",children:"Cha pht bi no"})}),ky=i=>{if(!i||isNaN(i))return"0:00";const n=Math.floor(i/60),l=Math.floor(i%60);return`${n}:${l.toString().padStart(2,"0")}`},d3=()=>{const i=G(X=>X.currentSong),n=G(X=>X.restartTrigger),l=G(X=>X.volume),a=G(X=>X.setVolume),o=G(X=>X.isMuted),u=G(X=>X.setIsMuted),[f,m]=N.useState(0),[p,y]=N.useState(0),x=N.useRef(!1),v=N.useRef(100),_=N.useRef(null);N.useEffect(()=>(n>0&&(x.current=!0,m(0),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{x.current=!1},1e3)),()=>{_.current&&clearTimeout(_.current)}),[n]),N.useEffect(()=>{if(!i)return;const X=setInterval(()=>{if(!x.current){const P=Qa(),q=Ya();m(W=>{const ae=Math.floor(P);return Math.floor(W)===ae?W:ae}),y(W=>{const ae=Math.floor(q);return Math.floor(W)===ae?W:ae})}},1e3);return()=>clearInterval(X)},[i]);const T=X=>{const P=Number(X.target.value);a(P),P>0&&(u(!1),v.current=P)},O=()=>{o?(u(!1),a(v.current)):(v.current=l,u(!0),a(0))};if(!i)return null;const D=p>0?f/p*100:0,V=o||l===0?pT:l<50?fT:mT;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${D}%`}})}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-[10px] font-bold text-slate-400 tabular-nums",children:ky(f)}),h.jsx("span",{className:"text-[10px] font-bold text-slate-400 tabular-nums",children:ky(p)})]})]}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[h.jsxs("button",{onClick:O,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-500 hover:text-slate-700 transition-all cursor-pointer active:scale-90 flex items-center gap-1",title:"m lng TV",children:[h.jsx("span",{className:"text-[9px] font-black text-indigo-500 uppercase",children:"TV"}),h.jsx(V,{size:16})]}),h.jsxs("div",{className:"relative flex-1 group max-w-[140px]",children:[h.jsx("div",{className:"h-1 bg-slate-200 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-indigo-400 rounded-full transition-all duration-75",style:{width:`${l}%`}})}),h.jsx("input",{type:"range",min:0,max:100,step:1,value:l,onChange:T,onMouseUp:X=>X.target.blur(),onTouchEnd:X=>X.target.blur(),tabIndex:-1,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),h.jsxs("span",{className:"text-[10px] font-bold text-slate-400 w-7 text-right tabular-nums",children:[l,"%"]})]})})]})},f3=({openTV:i,closeTV:n,isTVOpen:l})=>{const[a,o]=N.useState("duplicate"),[u,f]=N.useState(!1),m=N.useRef(null),p=N.useCallback(async x=>{if(!(x===a||u)){f(!0);try{x==="duplicate"&&(l&&n(),G.getState().setIsPlaying(!1),window.open("https://www.youtube.com","_blank"));const _=await(await fetch(`/api/display/${x}`,{method:"POST"})).json();o(_.mode),x==="extend"&&(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{i();const{currentSong:T}=G.getState();T&&G.getState().setIsPlaying(!0)},3e3))}catch{}finally{f(!1)}}},[a,u,i,n,l]),y=a==="extend";return h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("div",{className:"relative flex bg-slate-200 rounded-lg p-[3px]",style:{opacity:u?.6:1},children:[h.jsx("div",{className:`absolute top-[3px] bottom-[3px] rounded-md transition-all duration-300 ease-in-out ${y?"bg-green-600":"bg-red-500"}`,style:{width:"50%",left:y?"50%":"3px"}}),h.jsxs("button",{type:"button",disabled:u,className:`relative z-10 flex items-center justify-center gap-1.5 px-4 py-1.5 rounded-md text-xs font-extrabold uppercase tracking-wide cursor-pointer transition-colors duration-200 ${y?"text-slate-400 hover:text-slate-600":"text-white"}`,onClick:()=>p("duplicate"),children:[h.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),h.jsx("path",{d:"M8 21h8"}),h.jsx("path",{d:"M12 17v4"})]}),"YouTube"]}),h.jsxs("button",{type:"button",disabled:u,className:`relative z-10 flex items-center justify-center gap-1.5 px-4 py-1.5 rounded-md text-xs font-extrabold uppercase tracking-wide cursor-pointer transition-colors duration-200 ${y?"text-white":"text-slate-400 hover:text-slate-600"}`,onClick:()=>p("extend"),children:[h.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M12 2a3 3 0 00-3 3v7a3 3 0 006 0V5a3 3 0 00-3-3z"}),h.jsx("path",{d:"M19 10v2a7 7 0 01-14 0v-2"}),h.jsx("path",{d:"M12 19v3"})]}),"Karaoke"]})]})})},h3=()=>{const{setShowHistoryModal:i,songHistory:n}=G();return h.jsxs("button",{onClick:l=>{l.stopPropagation(),i(!0)},className:"relative p-1.5 rounded-lg text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all cursor-pointer active:scale-90",title:"Lch s bi ht hm nay",children:[h.jsx(Jd,{size:16}),n.length>0&&h.jsx("span",{className:"absolute -top-1 -right-1 min-w-[16px] h-4 bg-indigo-600 text-white text-[9px] font-black rounded-full flex items-center justify-center px-1",children:n.length})]})},m3=()=>{const{songHistory:i,showHistoryModal:n,setShowHistoryModal:l,clearHistory:a}=G(),o=N.useMemo(()=>{if(!i||i.length===0)return{totalSongs:0,uniqueGuests:0,topGuest:null,topGuestCount:0,guestList:[]};const u={};i.forEach(p=>{const y=p.addedBy||"Khch";u[y]=(u[y]||0)+1});const f=Object.entries(u).map(([p,y])=>({name:p,count:y})).sort((p,y)=>y.count-p.count),m=f[0]||null;return{totalSongs:i.length,uniqueGuests:Object.keys(u).length,topGuest:m?.name||null,topGuestCount:m?.count||0,guestList:f}},[i]);return n?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4",children:h.jsxs(f1.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"bg-white rounded-3xl border border-slate-200 w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Jd,{size:20,className:"text-indigo-600"}),h.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase tracking-tighter",children:"Lch S Hm Nay"})]}),h.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors cursor-pointer",children:h.jsx(ys,{size:24,className:"text-slate-500"})})]}),h.jsxs("div",{className:"p-4 grid grid-cols-3 gap-3",children:[h.jsxs("div",{className:"bg-indigo-50 rounded-2xl p-3 border border-indigo-100 text-center",children:[h.jsx(tc,{size:20,className:"text-indigo-500 mx-auto mb-1"}),h.jsx("p",{className:"text-3xl font-black text-indigo-700",children:o.totalSongs}),h.jsx("p",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-wider",children:"Bi  Ht"})]}),h.jsxs("div",{className:"bg-emerald-50 rounded-2xl p-3 border border-emerald-100 text-center",children:[h.jsx(uT,{size:20,className:"text-emerald-500 mx-auto mb-1"}),h.jsx("p",{className:"text-3xl font-black text-emerald-700",children:o.uniqueGuests}),h.jsx("p",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-wider",children:"Khch Ht"})]}),h.jsxs("div",{className:"bg-amber-50 rounded-2xl p-3 border border-amber-100 text-center",children:[h.jsx(M0,{size:20,className:"text-amber-500 mx-auto mb-1"}),h.jsx("p",{className:"text-lg font-black text-amber-700 truncate",children:o.topGuest||"---"}),h.jsx("p",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-wider",children:o.topGuestCount>0?`${o.topGuestCount} bi`:"Ht Nhiu Nht"})]})]}),o.guestList.length>1&&h.jsxs("div",{className:"px-4 pb-2",children:[h.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"Bng Xp Hng Khch"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:o.guestList.map((u,f)=>h.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold border ${f===0?"bg-amber-100 text-amber-700 border-amber-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:[f===0&&h.jsx(M0,{size:12}),h.jsx("span",{className:"uppercase",children:u.name}),h.jsx("span",{className:"bg-white/60 px-1.5 py-0.5 rounded-full text-[10px]",children:u.count})]},u.name))})]}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar border-t border-slate-100",children:h.jsx("div",{className:"p-3 space-y-2",children:i.length===0?h.jsxs("div",{className:"text-center py-12 text-slate-300",children:[h.jsx(Jd,{size:48,strokeWidth:1,className:"mx-auto mb-3"}),h.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Cha c bi no c ht hm nay"})]}):i.map((u,f)=>h.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-xl hover:bg-slate-50 transition-colors",children:[h.jsx("span",{className:"text-xs font-black text-slate-300 w-6 text-right",children:i.length-f}),h.jsx("div",{className:"w-10 h-7 rounded-md overflow-hidden bg-slate-200 flex-shrink-0",children:u.thumbnail&&h.jsx("img",{src:u.thumbnail,alt:"",className:"w-full h-full object-cover",loading:"lazy"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-bold text-slate-800 text-xs leading-snug truncate",children:u.cleanTitle||u.title}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[h.jsx("span",{className:"text-[10px] font-bold text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200 uppercase tracking-wider",children:u.addedBy||"Khch"}),h.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(u.completedAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})]})]},u.id))})}),h.jsxs("div",{className:"p-4 bg-slate-50 flex justify-between items-center border-t border-slate-100",children:[i.length>0?h.jsxs(jt,{variant:"danger",onClick:a,className:"text-xs font-bold flex items-center gap-1",children:[h.jsx(Mf,{size:14}),"Xa Lch S"]}):h.jsx("div",{}),h.jsx(jt,{variant:"ghost",onClick:()=>l(!1),className:"font-bold text-slate-600",children:"ng"})]})]})}):null},g3=()=>{const i=G(n=>n.setShowMicSettingsModal);return h.jsx("button",{onClick:n=>{n.stopPropagation(),i(!0)},className:"relative p-1.5 rounded-lg text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all cursor-pointer active:scale-90",title:"Ci t  nhy & visualization",children:h.jsx(bs,{size:16})})},Zd={LOW:[20,150],MID:[150,3400],HIGH:[3400,8e3]},p3=()=>{const{showMicSettingsModal:i,setShowMicSettingsModal:n,micSensitivity:l,setMicSensitivity:a,micDelay:o,setMicDelay:u,micMinVol:f,setMicMinVol:m,micBassFilter:p,setMicBassFilter:y,micTransient:x,setMicTransient:v,micAdaptation:_,setMicAdaptation:T}=G(),O=N.useRef(null),D=N.useRef(null),V=N.useRef(null),X=N.useRef(null),P=N.useRef(null),[q,W]=N.useState(!1),ae=N.useRef(null),[oe,U]=N.useState(!1);N.useEffect(()=>{if(!i){K();return}return(async()=>{try{const he=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});X.current=he;const Ee=new AudioContext;D.current=Ee,await Ee.resume();const Re=Ee.createMediaStreamSource(he),be=Ee.createAnalyser();be.fftSize=2048,be.smoothingTimeConstant=.5,Re.connect(be),V.current=be,Se()}catch(he){console.error("Mic access failed for settings:",he)}})(),()=>K()},[i]);const K=()=>{P.current&&cancelAnimationFrame(P.current),X.current&&X.current.getTracks().forEach(ye=>ye.stop()),D.current&&D.current.close()},Se=()=>{if(!O.current||!V.current)return;const ye=O.current,he=ye.getContext("2d"),Ee=ye.width,Re=ye.height,be=V.current,me=be.frequencyBinCount,R=new Float32Array(me);be.getFloatFrequencyData(R),he.clearRect(0,0,Ee,Re);const H=D.current.sampleRate,E=([at,Mt])=>[Math.floor(at/(H/be.fftSize)),Math.ceil(Mt/(H/be.fftSize))],[ge,ue]=E(Zd.LOW),[we,J]=E(Zd.MID),[ee,pe]=E(Zd.HIGH),Te=(at,Mt)=>{let ct=0,We=0;for(let Y=at;Y<=Mt;Y++)ct+=Math.pow(10,R[Y]/10),We++;return We>0?10*Math.log10(ct/We):-100},ke=Te(ge,ue),Q=Te(we,J),_e=Te(ee,pe),fe=at=>Math.min(1,Math.max(0,(at-f)/Math.abs(f))),Ce=[{label:"BASS",value:fe(ke),color:"#3b82f6"},{label:"MID (VOICE)",value:fe(Q),color:"#8b5cf6"},{label:"TREBLE",value:fe(_e),color:"#10b981"}],Ye=Ee/3;Ce.forEach((at,Mt)=>{const ct=Mt*Ye,We=at.value*Re,Y=Re-We,Z=he.createLinearGradient(0,Re,0,Y);Z.addColorStop(0,at.color+"40"),Z.addColorStop(1,at.color),he.fillStyle=Z,he.fillRect(ct+10,Y,Ye-20,We),he.fillStyle=at.color,he.fillRect(ct+10,Y-2,Ye-20,2),he.fillStyle="#64748b",he.font="10px Inter",he.textAlign="center",he.fillText(at.label,ct+Ye/2,Re-5)});const tt=Q-ke,rn=Math.max(2,12-l);tt>p&&Q>ke+rn&&Q>-60&&(W(!0),ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>W(!1),200)),P.current=requestAnimationFrame(Se)};return i?h.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:h.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col transition-all duration-300 ${oe?"h-[90vh]":"h-auto"}`,children:[h.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50 flex-shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`p-2 rounded-full transition-colors duration-300 ${q?"bg-green-100 text-green-600":"bg-indigo-100 text-indigo-600"}`,children:h.jsx(bs,{size:20})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-black text-slate-800",children:"Cu hnh Micro"}),h.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"iu chnh  nhy  t ng pht"})]})]}),h.jsx("button",{onClick:()=>n(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:h.jsx(ys,{size:20})})]}),h.jsxs("div",{className:"relative bg-slate-900 h-48 w-full flex-shrink-0",children:[h.jsx("canvas",{ref:O,width:500,height:200,className:"w-full h-full block"}),h.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-1",children:h.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold transition-all duration-200 ${q?"bg-green-500 text-white scale-110":"bg-slate-700 text-slate-400"}`,children:q?"DETECTED":"LISTENING"})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:[" Nhy (Sensitivity)",h.jsxs("div",{className:"group relative",children:[h.jsx(ja,{size:14,className:"text-slate-400 cursor-help"}),h.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:" nhy cng cao th micro cng d bt ging ni. Gim nu b nhiu."})]})]}),h.jsxs("span",{className:"text-sm font-black text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded",children:[l," / 10"]})]}),h.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:l,onChange:ye=>a(parseFloat(ye.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"}),h.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[h.jsx("span",{children:"Kh bt (n)"}),h.jsx("span",{children:"D bt (Yn tnh)"})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:["Thi gian xc nhn (Delay)",h.jsxs("div",{className:"group relative",children:[h.jsx(ja,{size:14,className:"text-slate-400 cursor-help"}),h.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:"Thi gian cn duy tr ging ni  xc nhn. Tng ln nu b bt nhm ting ho."})]})]}),h.jsxs("span",{className:"text-sm font-black text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded",children:[o,"s"]})]}),h.jsx("input",{type:"range",min:"0.2",max:"2.0",step:"0.1",value:o,onChange:ye=>u(parseFloat(ye.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"}),h.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[h.jsx("span",{children:"Nhanh (0.2s)"}),h.jsx("span",{children:"Chm (2.0s)"})]})]}),h.jsxs("div",{className:"pt-2",children:[h.jsxs("button",{onClick:()=>U(!oe),className:"flex items-center gap-2 text-xs font-bold text-slate-500 hover:text-indigo-600 uppercase tracking-widest transition-colors w-full justify-center py-2 border-t border-slate-100",children:[h.jsx(eT,{size:14}),"Ci t nng cao (Advanced)",oe?h.jsx(NS,{size:14}):h.jsx(wS,{size:14})]}),oe&&h.jsxs("div",{className:"pt-4 space-y-6 animate-in slide-in-from-top-2 duration-300",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:["Lc Bass (Bass Filter)",h.jsxs("div",{className:"group relative",children:[h.jsx(ja,{size:14,className:"text-slate-400 cursor-help"}),h.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:" chnh lch bt buc gia ging (Mid) v nn (Bass). Tng cao  lc ting /bass."})]})]}),h.jsxs("span",{className:"text-sm font-black text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:[p," dB"]})]}),h.jsx("input",{type:"range",min:"0",max:"10",step:"0.5",value:p,onChange:ye=>y(parseFloat(ye.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-500"}),h.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[h.jsx("span",{children:"t lc"}),h.jsx("span",{children:"Lc mnh"})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:["Chng Gai (Transient)",h.jsxs("div",{className:"group relative",children:[h.jsx(ja,{size:14,className:"text-slate-400 cursor-help"}),h.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:"Ngng b qua cc ting ng ln t ngt (g mic, v tay)."})]})]}),h.jsxs("span",{className:"text-sm font-black text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:[x,"x"]})]}),h.jsx("input",{type:"range",min:"1.5",max:"5.0",step:"0.1",value:x,onChange:ye=>v(parseFloat(ye.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-500"}),h.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[h.jsx("span",{children:"Nhy cm"}),h.jsx("span",{children:"B qua nhiu"})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:["Hc Mi Trng (Adaptation)",h.jsxs("div",{className:"group relative",children:[h.jsx(ja,{size:14,className:"text-slate-400 cursor-help"}),h.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:"Tc  micro lm quen vi ting n nn mi."})]})]}),h.jsx("span",{className:"text-sm font-black text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:_})]}),h.jsx("input",{type:"range",min:"0.005",max:"0.1",step:"0.005",value:_,onChange:ye=>T(parseFloat(ye.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-500"}),h.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[h.jsx("span",{children:"Chm (n nh)"}),h.jsx("span",{children:"Nhanh (Thch ng tt)"})]})]})]})]}),h.jsxs("div",{className:"pt-4 border-t border-slate-100 flex justify-between items-center",children:[h.jsxs("button",{onClick:()=>{a(6),u(.8),y(2),v(2.5),T(.02)},className:"flex items-center gap-2 text-xs font-bold text-slate-500 hover:text-indigo-600 transition-colors",children:[h.jsx(PS,{size:14}),"Khi phc mc nh"]}),h.jsx("button",{onClick:()=>n(!1),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg shadow-lg shadow-indigo-200 transition-all active:scale-95",children:"Xong"})]})]})]})}):null},y3=()=>({announce:N.useCallback(n=>{if(!n||!window.speechSynthesis)return Promise.resolve();const l=n.replace(/[\[\]\(\)\|\-]/g," ").replace(/\b(karaoke|beat|gc|tng|tone|nam|n|song ca|h|ca s|full|hd|official|video|music|lyrics|lyric|mv|audio|remix|cover|live|lofi|nhc sng|mi nht|hay nht|acoustic|ver|version)\b/gi,"").replace(/\s+/g," ").trim();return l?(o=>new Promise(async u=>{try{const f=`/tts?ie=UTF-8&tl=vi&client=gtx&q=${encodeURIComponent(o)}`,p=await(await fetch(f)).blob(),y=URL.createObjectURL(p),x=new Audio(y);x.playbackRate=1,x.onended=()=>{URL.revokeObjectURL(y),u()},x.onerror=v=>{URL.revokeObjectURL(y),console.error("Audio playback error",v),u()},await x.play()}catch(f){console.error("TTS Error:",f),u()}}))(l):Promise.resolve()},[]),isPlaying:!1}),$d=45e3,b3=5e3,v3=50,_3=[20,150],x3=[150,3400],S3=[3400,8e3],T3=3,w3=!0,C3=()=>{const i=N.useRef(null),n=N.useRef(null),l=N.useRef(null),a=N.useCallback(()=>{if(l.current&&(clearInterval(l.current),l.current=null),n.current){try{n.current.close()}catch{}n.current=null}i.current&&(i.current.getTracks().forEach(u=>u.stop()),i.current=null)},[]);return{waitForPresence:N.useCallback((u,f,m)=>new Promise(async p=>{if(u?.aborted){p("abort");return}let y=!1,x=0,v=0,_=Date.now();const T=setInterval(()=>{const D=Date.now();G?.getState?.()?.countdownPaused||(v+=D-_),_=D;const X=Math.max(0,Math.ceil(($d-v)/1e3));f&&f(X),v>=$d&&O("timeout")},1e3),O=D=>{y||(y=!0,clearInterval(T),a(),p(D))};u&&u.addEventListener("abort",()=>O("abort"),{once:!0}),f&&f(Math.ceil($d/1e3));try{const D=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});if(i.current=D,y){a();return}const V=new AudioContext;n.current=V,V.state==="suspended"&&await V.resume();const X=V.createMediaStreamSource(D),P=V.createAnalyser();P.fftSize=2048,P.smoothingTimeConstant=.3,X.connect(P);const q=V.sampleRate,W=P.frequencyBinCount,ae=q/P.fftSize,oe=([Te,ke])=>[Math.max(0,Math.floor(Te/ae)),Math.min(W-1,Math.ceil(ke/ae))],[U,K]=oe(_3),[Se,ye]=oe(x3),[he,Ee]=oe(S3),Re=new Float32Array(W),be=new Float32Array(P.fftSize);let me=null,R=null,H=null,E=0,ge=null,ue=0,we=!1;const J=(Te,ke)=>{let Q=0,_e=0;for(let fe=Te;fe<=ke;fe++){const Ce=Math.pow(10,Re[fe]/10);Q+=Ce,_e++}return _e===0?-100:10*Math.log10(Q/_e)},ee=()=>{let Te=0;for(let ke=0;ke<be.length;ke++)Te+=be[ke]*be[ke];return Math.sqrt(Te/be.length)},pe=()=>{if(y)return;if(u?.aborted){O("abort");return}P.getFloatFrequencyData(Re),P.getFloatTimeDomainData(be);const Te=J(U,K),ke=J(Se,ye),Q=ee();if(v<b3){v>=2e3&&(E++,me===null?(me=Te,R=ke,H=Q):(me=me*(1-.1)+Te*.1,R=R*(1-.1)+ke*.1,H=H*(1-.1)+Q*.1));return}if(R===null){me=Te,R=ke,H=Q;return}const _e=ke-R,fe=Te-me,Ce=_e-fe,Ye=H>1e-4?Q/H:0,{micSensitivity:tt,micDelay:rn,micBassFilter:at,micTransient:Mt,micAdaptation:ct}=G.getState(),We=Math.max(2,12-tt),Y=rn*1e3;if(Ye>Mt){if(ue++,ue>=T3){O("mic");return}}else ue=Math.max(0,ue-1);if(_e>We&&Ce>at){if(we=!0,!ge)ge=Date.now();else if(Date.now()-ge>=Y){O("mic");return}}else ge&&Date.now()-ge<300||(ge=null,we=!1);if(m){const se=Date.now();if(se-x>2e3){const Ae=We>0?_e/We:0,qe=Ye/Mt,Ke=Math.max(Ae,qe);Ke>.5&&Ke<1?(x=se,m("medium")):Ke>.25&&Ke<.5&&(x=se,m("weak"))}}(!we||!w3)&&(me=me*(1-ct)+Te*ct,R=R*(1-ct)+ke*ct,H=H*(1-ct)+Q*ct)};l.current=setInterval(pe,v3)}catch(D){console.warn("Mic detection unavailable:",D.message)}}),[a]),cancelDetection:a}},N3=()=>{const[i,n]=N.useState(!1),l=N.useRef(null),a=N.useCallback(()=>{l.current&&l.current.closed&&(l.current=null,n(!1))},[]);N.useEffect(()=>{const f=setInterval(a,3e3);return()=>clearInterval(f)},[a]);const o=N.useCallback(async()=>{if(l.current&&!l.current.closed){l.current.focus();return}let f=0,m=0,p=window.screen.width,y=window.screen.height,x=null;if("getScreenDetails"in window)try{const T=await window.getScreenDetails();x=T.screens.find(O=>O!==T.currentScreen),x&&(f=x.left,m=x.top,p=x.width,y=x.height)}catch{}const v=`popup,left=${f},top=${m},width=${p},height=${y},fullscreen=yes`,_=window.open("/projection","karaoke_tv",v);_&&(l.current=_,n(!0),x&&(_.__targetScreen=x))},[]),u=N.useCallback(()=>{l.current&&!l.current.closed&&l.current.close(),l.current=null,n(!1)},[]);return{isTVOpen:i,openTV:o,closeTV:u}};function E3(i){const n=G(u=>u.reorderQueue),[l,a]=N.useState(!1),o=N.useRef(!0);return N.useEffect(()=>{const u=Gv(f=>{o.current&&(o.current=!1);const p=(f||[]).map(x=>({id:x.firebaseKey,firebaseKey:x.firebaseKey,videoId:x.videoId,title:x.title,cleanTitle:x.cleanTitle,artist:x.artist,addedBy:x.addedBy||x.customerName||"Khch",thumbnail:x.thumbnail,source:x.source||"web",customerId:x.customerId,round:x.round,isPriority:x.isPriority,status:x.status||(x.videoId?"ready":"waiting"),wasSkipped:x.wasSkipped||!1})),{manualOrder:y}=G.getState();if(y&&y.length>0){const x=new Map(p.map(D=>[D.id,D])),v=[],_=new Set;for(const D of y){const V=x.get(D);V&&(v.push(V),_.add(D))}const T=[],O=[];for(const D of p)_.has(D.id)||(D.isPriority?T.push(D):O.push(D));v.unshift(...T),v.push(...O),n(v)}else n(p);a(!0)});return()=>u()},[]),{firebaseInitialized:l}}const jy="__karaoke_session_active__",Jo="__karaoke_current_song__",ec="__karaoke_queue__";function A3(){return de.useMemo(()=>sessionStorage.getItem(jy)?!0:(sessionStorage.setItem(jy,"1"),!1),[])}function Dy(i){i?sessionStorage.setItem(Jo,JSON.stringify(i)):sessionStorage.removeItem(Jo)}function M3(i){i&&i.length>0?sessionStorage.setItem(ec,JSON.stringify(i)):sessionStorage.removeItem(ec)}function R3(){try{const i=sessionStorage.getItem(Jo);if(i)return JSON.parse(i)}catch(i){console.warn("[useSessionRestore] Failed to parse saved currentSong:",i)}return null}function k3(){try{const i=sessionStorage.getItem(ec);if(i)return JSON.parse(i)}catch(i){console.warn("[useSessionRestore] Failed to parse saved queue:",i)}return[]}function j3(i,n,l){const a=A3(),[o,u]=de.useState(!1),f=de.useRef(!1);return de.useEffect(()=>{if(f.current)return;if(f.current=!0,!a){gh().catch(()=>{}),sessionStorage.removeItem(Jo),sessionStorage.removeItem(ec);return}const m=R3();m&&(i(m),n(!0),u(!0));const p=k3();p&&p.length>0&&l&&l(p)},[a,i,n,l]),{isRefresh:a,isRestoredSong:o,setIsRestoredSong:u}}const D3=()=>{const i=G(j=>j.isPlaying),n=G(j=>j.setIsPlaying),l=G(j=>j.triggerRestart),a=G(j=>j.queue),o=G(j=>j.removeFromQueue),u=G(j=>j.reorderQueue),f=G(j=>j.setCurrentSong),m=G(j=>j.currentSong),p=G(j=>j.queueMode),y=G(j=>j.toggleQueueMode),x=G(j=>j.invitedSongId),v=G(j=>j.setInvitedSongId),_=G(j=>j.setWaitingForGuest),T=G(j=>j.waitCountdown),O=G(j=>j.setWaitCountdown),D=G(j=>j.setCountdownPaused),V=G(j=>j.setMicAttemptHint),X=G(j=>j.addToHistory),P=G(j=>j.loadHistory),{isRefresh:q,isRestoredSong:W,setIsRestoredSong:ae}=j3(f,n,u);de.useEffect(()=>{M3(a)},[a]),de.useEffect(()=>{P()},[]);const oe=()=>{const j=G.getState().currentSong;j&&j.videoId&&X({id:`${j.videoId}_${Date.now()}`,videoId:j.videoId,title:j.title,cleanTitle:j.cleanTitle||"",addedBy:j.addedBy||"Khch",customerId:j.customerId||"",thumbnail:j.thumbnail||"",completedAt:Date.now()})},U=()=>{if(a.length>0){const j=a[0];if(j.status==="skipped"){o(j.id);const $=G.getState().queue;if($.length>0){const re=$[0];f(re),o(re.id)}else n(!1),f(null);return}if(j.status==="waiting"){f({...j,isStaged:!0}),o(j.id),n(!1);const $=j.addedBy||"qu khch",re=[`Xin mi ${$} ln chn cho mnh mt bi ht nh`,`n lt ${$} ri , knh mi ln chn bi ht nh`,`Xin mi ${$} chn cho mnh mt ca khc yu thch `,`Knh mi ${$} ln sn khu chn bi ht nh `,`${$} i, n lt ri , mi ln chn bi nh`,`Xin nhng sn khu cho ${$}, mi chn mt bi ht hay nh `,`Mi ${$} ln chn cho mnh mt bi ht tht hay nh `,`${$} i, sn khu ang ch n, xin mi ln chn bi nh`];me(re[Math.floor(Math.random()*re.length)]);return}f(j),o(j.id)}else n(!1),f(null)},K=de.useCallback(()=>{oe(),U()},[a,o,f,n,X]),Se=de.useRef(!1),{sendMessage:ye}=$v("host",{onSongEnded:K});E3();const[he,Ee]=de.useState(!q);de.useEffect(()=>{q&&(W||m)&&Ee(!0)},[q,W,m]),de.useEffect(()=>{if(q&&!he){const j=setTimeout(()=>Ee(!0),500);return()=>clearTimeout(j)}},[q,he]),de.useEffect(()=>{if(he&&!m&&a.length>0&&p==="auto"){const j=a[0];if(j.status==="waiting"||j.status==="skipped")return;Se.current?(f(j),o(j.id)):(f({...j,isStaged:!0}),o(j.id))}},[m,a,p,f,o,he]);const[Re,be]=de.useState("center"),{announce:me}=y3(),{waitForPresence:R,cancelDetection:H}=C3(),{isTVOpen:E,openTV:ge,closeTV:ue}=N3();de.useEffect(()=>{sessionStorage.getItem("__karaoke_auto_start__")||(sessionStorage.setItem("__karaoke_auto_start__","1"),fetch("/api/display/duplicate",{method:"POST"}).catch(()=>{}))},[]);const we=de.useRef(null),J=de.useRef(!1),ee=de.useRef(null),pe=de.useRef(!0);de.useEffect(()=>{pe.current&&(pe.current=!1,q&&!m)||(m?(Dy(m),mh(m).catch(()=>{}),m.firebaseKey&&m.status!=="waiting"&&Lv(m.firebaseKey).catch(()=>{})):(Dy(null),gh().catch(()=>{})))},[m,q]),de.useEffect(()=>{if(!m||!i)return;const j=setInterval(()=>{const Xe=Qa(),xt=Ya();xt>0&&Sf(Xe,xt).catch(()=>{})},1e4),$=Qa(),re=Ya();return re>0&&Sf($,re).catch(()=>{}),()=>clearInterval(j)},[m,i]);const Te=de.useRef(null);de.useEffect(()=>{if(!m||!i)return;Te.current!==m.id&&(Te.current=null);const $=setInterval(()=>{if(Te.current===m.id)return;const re=Ya(),Xe=Qa();if(re<=0||Xe<=0)return;const xt=re-Xe;if(xt>35||xt<25)return;const Bl=G.getState().queue[0];if(Bl&&Bl.status==="waiting"){Te.current=m.id;const Ll=Bl.addedBy||"qu khch",Xi=[`${Ll} i, sp ti lt ri , mi chn bi ht nh`,`Xin nhc ${Ll}, sp ti lt, mi chn bi nh `,`${Ll} i, chun b ln sn khu, mi chn bi `];me(Xi[Math.floor(Math.random()*Xi.length)])}},5e3);return()=>clearInterval($)},[m?.id,i,me]);const ke=()=>{if(m?.isStaged){Se.current=!0;const j={...m,isStaged:!1};fe(j.id),f(j),n(!0);return}if(!m&&a.length>0){Se.current=!0;const j=a[0];fe(j.id),f(j),o(j.id),n(!0);return}n(!i)},Q=()=>{J.current=!0,we.current&&we.current.abort()},[_e,fe]=de.useState(null),Ce=de.useCallback(async j=>{const $=j.addedBy||"qu khch";let re=j.cleanTitle;re||(re=vl(j.title));const Xe=[`Xin mi ${$} ln sn khu, trnh by ca khc ${re}`,`${$} i . Mi ${$} ln sn khu trnh by bi ht ${re} ca mnh`,`Tip theo chng trnh, xin mi ${$} gi tng mi ngi ca khc ${re}`,`Mt trng pho tay cho ${$} vi ca khc ${re}`,`Xin mi ging ca ${$} chun b cho bi ht ${re}`,`Mi qu v cng thng thc ging ca ca ${$} qua nhc phm ${re}`,`Sn khu xin c nhng li cho ${$} vi bi ht ${re}`,` thay i khng kh, mi ${$} gi n mi ngi ca khc ${re}`,`V sau y, ging ca ${$} s trnh by bi ht ${re}`,`Xin mi ${$} cm mic v chy ht mnh vi ${re}`,`Tip ni chng trnh vn ngh, mi ${$} ln sn khu vi bi ${re}`],xt=Xe[Math.floor(Math.random()*Xe.length)];await me(xt)},[me]);de.useEffect(()=>{if(!x||p!=="manual")return;const j=a.find(re=>re.id===x);if(!j)return;(async()=>(j.cleanTitle?await Ce(j):(await new Promise(re=>setTimeout(re,3e3)),await Ce(j)),f(j),o(j.id),n(!0)))()},[x,p,a,Ce,f,o,n]),de.useEffect(()=>{if(!m||m.isStaged||m.status==="waiting")return;if(m.isReplaced){fe(m.id);return}if(m.id===_e)return;if(W){fe(m.id),ae(!1);return}if(p==="manual"&&m.id===x){fe(m.id),v(null);return}n(!1),D(!1),we.current&&we.current.abort();const j=new AbortController;we.current=j,J.current=!1;const $=async()=>{if(await Ce(m),!(j.signal.aborted&&!J.current)){if(p==="manual"){fe(m.id);return}_(!0),await R(j.signal,O,re=>{V(re),ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>V(null),3e3)}),_(!1),V(null),!(j.signal.aborted&&!J.current)&&(fe(m.id),n(!0))}};if(m.cleanTitle)$();else{const re=setTimeout(()=>{m.id!==_e&&$()},3e3);return()=>{clearTimeout(re),j.abort(),H(),_(!1)}}return()=>{j.abort(),H(),_(!1)}},[m,_e,p,x,W,Ce,n,v,_,ae,R,H,V]);const Ye=de.useRef(null),tt=()=>l(),rn=()=>{if(n(!1),_(!1),we.current&&we.current.abort(),fe(null),a.length>0){const j={...a[0],isStaged:!0};f(j),o(j.id)}else f(null)},at=de.useCallback(()=>{m&&Ce(m)},[m,Ce]),[Mt,ct]=de.useState(!1),[We,Y]=de.useState(null),[Z,se]=de.useState(!1),Ae=()=>ct(!0),qe=async j=>{try{const $=Ov(j);await zv(j,$)}catch($){console.error("[AddGuest] Failed:",$)}ct(!1)},Ke=de.useCallback(j=>{const $=j.addedBy||"qu khch",re=[`${$} i sp ti lt ri , mi chn bi ht nh`,`Xin thng bo ${$} sp ti lt, mi chn bi ht `,`${$} i, chun b ln sn khu, mi chn bi `,`Sp n lt ${$} ri , xin mi chn bi ht nh`,`${$} i, mi ${$} ln sn khu chn bi ht nh`,`Xin mi ${$} chun b, sp ti lt ri , chn bi nh`,`${$} i, sp c ln sn khu ri , mi ${$} ln chn bi nh`,`Xin mi ${$} chn bi ht, sp ti lt ri `];me(re[Math.floor(Math.random()*re.length)])},[me]),He=de.useCallback(j=>{Y(j),be("right")},[]),pt=de.useCallback(async j=>{await Bv(j.firebaseKey||j.id,"skipped");const $=G.getState();if($.currentSong&&$.currentSong.id===j.id){n(!1),fe(null),we.current&&we.current.abort();const re=$.queue;if(re.length>0){const Xe=re[0];Xe.status==="waiting"||Xe.status==="skipped"?f(null):(f({...Xe,isStaged:!0}),o(Xe.id))}else f(null)}},[n,f,o]),on=de.useCallback(async j=>{if(!We)return;const $=j.cleanTitle||vl(j.title),re=We.firebaseKey||We.id;await Iv(re,{videoId:j.videoId,title:j.title,cleanTitle:$,artist:j.artist,thumbnail:j.thumbnail});const Xe=G.getState();Xe.currentSong&&Xe.currentSong.id===We.id&&f({...Xe.currentSong,videoId:j.videoId,title:j.title,cleanTitle:$,artist:j.artist,thumbnail:j.thumbnail,status:"ready",isStaged:!1}),Y(null)},[We,f]),qn=de.useCallback(()=>{m&&(n(!1),se(!0),be("right"),f({...m,changingBeat:!0}),Hv(m.beatOptions||[]).catch(()=>{}))},[m,f,n]),zt=de.useCallback(async j=>{if(!m)return;const $=j.cleanTitle||vl(j.title);await Uv({videoId:j.videoId,title:j.title}).catch(()=>{}),f({...m,videoId:j.videoId,title:j.title,cleanTitle:$,artist:j.artist,thumbnail:j.thumbnail,changingBeat:!1}),n(!1),se(!1),ye("BEAT_SEARCH_RESULTS",{results:[],isSearching:!1})},[m,f,n,ye]),Ki=de.useCallback(()=>{se(!1),m&&f({...m,changingBeat:!1}),Vv().catch(()=>{}),ye("BEAT_SEARCH_RESULTS",[])},[m,f,ye]),Es=de.useCallback((j,$)=>{if(!Z)return;const re=(j||[]).slice(0,6).map(Xe=>({videoId:Xe.videoId,title:Xe.title,cleanTitle:Xe.cleanTitle,artist:Xe.artist,thumbnail:Xe.thumbnail,duration:Xe.duration}));ye("BEAT_SEARCH_RESULTS",{results:re,isSearching:$})},[Z,ye]);de.useEffect(()=>{const j=$=>{["INPUT","TEXTAREA","IFRAME"].includes(document.activeElement.tagName)||$.code==="Space"&&($.preventDefault(),ke())};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[i,ke]);const Il=j=>{const $="flex flex-col gap-4 min-w-0 overflow-hidden transition-[flex] duration-500 ease-in-out will-change-[flex]";switch(Re){case"left":return j==="left"?`${$} flex-[5]`:j==="center"?`${$} flex-[4]`:`${$} flex-[3]`;case"right":return j==="left"?`${$} flex-[2]`:j==="center"?`${$} flex-[4]`:`${$} flex-[6]`;default:return j==="left"?`${$} flex-[2]`:j==="center"?`${$} flex-[6]`:`${$} flex-[2]`}};return h.jsxs("div",{className:"flex flex-col lg:flex-row h-screen font-sans p-2 gap-4 bg-slate-100",children:[h.jsx("div",{className:Il("left"),onClick:()=>be("left"),onMouseEnter:()=>be("left"),children:h.jsxs(gs,{className:`h-full flex flex-col border border-slate-200 shadow-sm bg-white overflow-hidden transition-all ${Re==="left"?"shadow-md border-slate-300":""}`,children:[h.jsxs("div",{className:"p-3 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[h.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter",children:"HNG CH"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(g3,{}),h.jsx(h3,{}),h.jsxs("button",{onClick:y,className:`inline-flex h-5 px-2 items-center rounded-full transition-colors cursor-pointer gap-1 flex-shrink-0 overflow-hidden ${p==="auto"?"bg-indigo-500":"bg-slate-400"}`,children:[h.jsx("span",{className:"text-[10px] font-bold text-white pointer-events-none whitespace-nowrap leading-tight",children:p==="auto"?"T ng":"Th cng"}),h.jsx("span",{className:`inline-block h-2.5 w-2.5 rounded-full bg-white transition-transform shadow-sm flex-shrink-0 ${p==="auto"?"":"order-first"}`})]})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:h.jsx(xE,{onReAnnounce:at,onWaitForSong:Ke,onChooseForGuest:He,onSkipWaiting:pt,onAddGuest:Ae,onChangeBeat:qn})})]})}),h.jsxs("div",{className:Il("center"),onClick:()=>be("center"),onMouseEnter:()=>be("center"),children:[h.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-xl shadow-sm border border-slate-200 mb-0",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:"/logo.svg",alt:"Logo",className:"w-12 h-12 rounded-xl shadow-sm bg-white"}),h.jsx("h1",{className:"text-2xl font-black text-slate-800 tracking-tighter uppercase",children:"KARAOKE SU NHN"})]}),h.jsx(f3,{openTV:ge,closeTV:ue,isTVOpen:E})]}),h.jsxs("div",{ref:Ye,className:"player-container relative bg-black overflow-hidden shadow-lg rounded-xl aspect-video w-full",children:[h.jsx(u3,{className:"w-full h-full"}),h.jsx(Wv,{countdown:T,onSkip:Q,onPauseToggle:()=>{const j=G.getState();j.setCountdownPaused(!j.countdownPaused)}})]}),h.jsx(gs,{className:"bg-white border-0 shadow-sm rounded-xl px-3 py-2",children:h.jsx(d3,{})}),h.jsx(gs,{className:"bg-white border-0 shadow-sm rounded-xl p-3",children:h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("button",{onClick:ke,className:`flex-1 py-4 px-6 rounded-xl flex items-center justify-center gap-3 transition-colors active:scale-95 shadow-sm cursor-pointer ${i?"bg-slate-200 text-slate-600 border border-slate-300 hover:bg-slate-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:[i?h.jsx(Zy,{size:28,fill:"currentColor"}):h.jsx(Do,{size:28,fill:"currentColor"}),h.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:i?"Dng":"Pht"})]}),h.jsxs("button",{onClick:()=>{oe(),U()},disabled:a.length===0,className:"flex-1 py-4 px-6 rounded-xl flex items-center justify-center gap-3 bg-slate-800 text-white transition-colors active:scale-95 shadow-sm cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-900",children:[h.jsx($y,{size:28,fill:"currentColor"}),h.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:"Qua Bi"})]}),h.jsxs("button",{onClick:tt,disabled:!m,className:"flex-1 py-4 px-6 rounded-xl flex items-center justify-center gap-3 bg-orange-500 text-white transition-colors active:scale-95 shadow-sm cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:bg-orange-600",children:[h.jsx($S,{size:28}),h.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:"Pht Li"})]}),h.jsxs("button",{onClick:rn,disabled:!m,className:"flex-1 py-4 px-6 rounded-xl flex items-center justify-center gap-3 bg-red-500 text-white transition-colors active:scale-95 shadow-sm cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:bg-red-600",children:[h.jsx(sT,{size:28,fill:"currentColor"}),h.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:"Xa Bi"})]})]})})]}),h.jsx("div",{className:Il("right"),onClick:()=>be("right"),onMouseEnter:()=>be("right"),onFocusCapture:()=>be("right"),children:h.jsxs(gs,{className:`h-full flex flex-col border border-slate-200 shadow-sm bg-white overflow-hidden transition-all ${Re==="right"?"shadow-md border-slate-300":""}`,children:[h.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-center gap-2",children:[h.jsx(Oo,{size:18,className:"text-slate-800"}),h.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter",children:"Tm Kim"}),We&&h.jsxs("span",{className:"ml-auto text-[10px] font-black text-amber-600 bg-amber-100 px-2 py-1 rounded-full border border-amber-200 uppercase tracking-wider",children:["Chn cho: ",We.addedBy]}),Z&&h.jsx("span",{className:"ml-auto text-[10px] font-black text-indigo-600 bg-indigo-100 px-2 py-1 rounded-full border border-indigo-200 uppercase tracking-wider",children:"i Beat"})]}),We&&h.jsxs("div",{className:"p-2 bg-amber-50 border-b border-amber-200 flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs font-bold text-amber-700",children:[" ang chn bi cho ",We.addedBy]}),h.jsx("button",{onClick:()=>Y(null),className:"text-[10px] font-bold text-amber-600 hover:text-amber-800 cursor-pointer",children:"Hy"})]}),Z&&h.jsxs("div",{className:"p-2 bg-indigo-50 border-b border-indigo-200 flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs font-bold text-indigo-700",children:[" Tm beat mi cho: ",m?.addedBy||"Khch"]}),h.jsx("button",{onClick:Ki,className:"text-[10px] font-bold text-indigo-600 hover:text-indigo-800 cursor-pointer",children:"Hy"})]}),h.jsx("div",{className:"flex-1 overflow-hidden relative",children:h.jsx(qE,{isExpanded:Re==="right",choosingForItem:We||(Z?m:null),onChooseForGuest:Z?zt:on,onSearchResults:Z?Es:null})})]})}),h.jsx(m3,{}),h.jsx(p3,{}),h.jsx(Fv,{isOpen:Mt,onClose:()=>ct(!1),onConfirm:j=>qe(j),songTitle:"Gi ch - Chn bi sau"})]})};function O3(){return h.jsx(g1,{children:h.jsxs(p1,{children:[h.jsx(g0,{path:"/",element:h.jsx(D3,{})}),h.jsx(g0,{path:"/projection",element:h.jsx(c3,{})})]})})}S1.createRoot(document.getElementById("root")).render(h.jsx(O3,{}));
