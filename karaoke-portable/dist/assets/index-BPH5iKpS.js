import{j as m,m as $1}from"./framer-C6LSZW6A.js";import{a as ex,b as tx,R as Ce,r as E,c as s0,B as nx,d as ix,e as l0}from"./vendor-BXPh05SW.js";import{Y as sx}from"./youtube-RE07ALOe.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function l(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(o){if(o.ep)return;o.ep=!0;const f=l(o);fetch(o.href,f)}})();var vf={exports:{}},ga={},bf={exports:{}},_f={};var a0;function lx(){return a0||(a0=1,(function(s){function n(k,j){var B=k.length;k.push(j);e:for(;0<B;){var fe=B-1>>>1,de=k[fe];if(0<o(de,j))k[fe]=j,k[B]=de,B=fe;else break e}}function l(k){return k.length===0?null:k[0]}function a(k){if(k.length===0)return null;var j=k[0],B=k.pop();if(B!==j){k[0]=B;e:for(var fe=0,de=k.length,re=de>>>1;fe<re;){var V=2*(fe+1)-1,Y=k[V],te=V+1,ge=k[te];if(0>o(Y,B))te<de&&0>o(ge,Y)?(k[fe]=ge,k[te]=B,fe=te):(k[fe]=Y,k[V]=B,fe=V);else if(te<de&&0>o(ge,B))k[fe]=ge,k[te]=B,fe=te;else break e}}return j}function o(k,j){var B=k.sortIndex-j.sortIndex;return B!==0?B:k.id-j.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var d=Date,h=d.now();s.unstable_now=function(){return d.now()-h}}var p=[],y=[],x=1,b=null,_=3,C=!1,z=!1,D=!1,q=!1,P=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function J(k){for(var j=l(y);j!==null;){if(j.callback===null)a(y);else if(j.startTime<=k)a(y),j.sortIndex=j.expirationTime,n(p,j);else break;j=l(y)}}function le(k){if(D=!1,J(k),!z)if(l(p)!==null)z=!0,ue||(ue=!0,Se());else{var j=l(y);j!==null&&ke(le,j.startTime-k)}}var ue=!1,U=-1,K=5,pe=-1;function ve(){return q?!0:!(s.unstable_now()-pe<K)}function be(){if(q=!1,ue){var k=s.unstable_now();pe=k;var j=!0;try{e:{z=!1,D&&(D=!1,F(U),U=-1),C=!0;var B=_;try{t:{for(J(k),b=l(p);b!==null&&!(b.expirationTime>k&&ve());){var fe=b.callback;if(typeof fe=="function"){b.callback=null,_=b.priorityLevel;var de=fe(b.expirationTime<=k);if(k=s.unstable_now(),typeof de=="function"){b.callback=de,J(k),j=!0;break t}b===l(p)&&a(p),J(k)}else a(p);b=l(p)}if(b!==null)j=!0;else{var re=l(y);re!==null&&ke(le,re.startTime-k),j=!1}}break e}finally{b=null,_=B,C=!1}j=void 0}}finally{j?Se():ue=!1}}}var Se;if(typeof G=="function")Se=function(){G(be)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Re=Ne.port2;Ne.port1.onmessage=be,Se=function(){Re.postMessage(null)}}else Se=function(){P(be,0)};function ke(k,j){U=P(function(){k(s.unstable_now())},j)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(k){k.callback=null},s.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<k?Math.floor(1e3/k):5},s.unstable_getCurrentPriorityLevel=function(){return _},s.unstable_next=function(k){switch(_){case 1:case 2:case 3:var j=3;break;default:j=_}var B=_;_=j;try{return k()}finally{_=B}},s.unstable_requestPaint=function(){q=!0},s.unstable_runWithPriority=function(k,j){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var B=_;_=k;try{return j()}finally{_=B}},s.unstable_scheduleCallback=function(k,j,B){var fe=s.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?fe+B:fe):B=fe,k){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=B+de,k={id:x++,callback:j,priorityLevel:k,startTime:B,expirationTime:de,sortIndex:-1},B>fe?(k.sortIndex=B,n(y,k),l(p)===null&&k===l(y)&&(D?(F(U),U=-1):D=!0,ke(le,B-fe))):(k.sortIndex=de,n(p,k),z||C||(z=!0,ue||(ue=!0,Se()))),k},s.unstable_shouldYield=ve,s.unstable_wrapCallback=function(k){var j=_;return function(){var B=_;_=j;try{return k.apply(this,arguments)}finally{_=B}}}})(_f)),_f}var r0;function ax(){return r0||(r0=1,bf.exports=lx()),bf.exports}var o0;function rx(){if(o0)return ga;o0=1;var s=ax(),n=ex(),l=tx();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(a(188))}function y(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(a(188));return t!==e?null:e}for(var i=e,r=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(r=c.return,r!==null){i=r;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return p(c),e;if(u===r)return p(c),t;u=u.sibling}throw Error(a(188))}if(i.return!==r.return)i=c,r=u;else{for(var g=!1,v=c.child;v;){if(v===i){g=!0,i=c,r=u;break}if(v===r){g=!0,r=c,i=u;break}v=v.sibling}if(!g){for(v=u.child;v;){if(v===i){g=!0,i=u,r=c;break}if(v===r){g=!0,r=u,i=c;break}v=v.sibling}if(!g)throw Error(a(189))}}if(i.alternate!==r)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,_=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),G=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function Se(e){return e===null||typeof e!="object"?null:(e=be&&e[be]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Symbol.for("react.client.reference");function Re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ne?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case P:return"Profiler";case q:return"StrictMode";case le:return"Suspense";case ue:return"SuspenseList";case pe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case G:return e.displayName||"Context";case F:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return t=e.displayName||null,t!==null?t:Re(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return Re(e(t))}catch{}}return null}var ke=Array.isArray,k=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},fe=[],de=-1;function re(e){return{current:e}}function V(e){0>de||(e.current=fe[de],fe[de]=null,de--)}function Y(e,t){de++,fe[de]=e.current,e.current=t}var te=re(null),ge=re(null),_e=re(null),oe=re(null);function X(e,t){switch(Y(_e,t),Y(ge,e),Y(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ep(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ep(t),e=Ap(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(te),Y(te,e)}function $(){V(te),V(ge),V(_e)}function he(e){e.memoizedState!==null&&Y(oe,e);var t=te.current,i=Ap(t,e.type);t!==i&&(Y(ge,e),Y(te,i))}function xe(e){ge.current===e&&(V(te),V(ge)),oe.current===e&&(V(oe),fa._currentValue=B)}var ze,Xe;function M(e){if(ze===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ze=t&&t[1]||"",Xe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+e+Xe}var W=!1;function ae(e,t){if(!e||W)return"";W=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var H=function(){throw Error()};if(Object.defineProperty(H.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(H,[])}catch(O){var R=O}Reflect.construct(e,[],H)}else{try{H.call()}catch(O){R=O}e.call(H.prototype)}}else{try{throw Error()}catch(O){R=O}(H=e())&&typeof H.catch=="function"&&H.catch(function(){})}}catch(O){if(O&&R&&typeof O.stack=="string")return[O.stack,R.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=r.DetermineComponentFrameRoot(),g=u[0],v=u[1];if(g&&v){var S=g.split(`
`),A=v.split(`
`);for(c=r=0;r<S.length&&!S[r].includes("DetermineComponentFrameRoot");)r++;for(;c<A.length&&!A[c].includes("DetermineComponentFrameRoot");)c++;if(r===S.length||c===A.length)for(r=S.length-1,c=A.length-1;1<=r&&0<=c&&S[r]!==A[c];)c--;for(;1<=r&&0<=c;r--,c--)if(S[r]!==A[c]){if(r!==1||c!==1)do if(r--,c--,0>c||S[r]!==A[c]){var I=`
`+S[r].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=r&&0<=c);break}}}finally{W=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?M(i):""}function Be(e,t){switch(e.tag){case 26:case 27:case 5:return M(e.type);case 16:return M("Lazy");case 13:return e.child!==t&&t!==null?M("Suspense Fallback"):M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return ae(e.type,!1);case 11:return ae(e.type.render,!1);case 1:return ae(e.type,!0);case 31:return M("Activity");default:return""}}function qe(e){try{var t="",i=null;do t+=Be(e,i),i=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var St=Object.prototype.hasOwnProperty,sn=s.unstable_scheduleCallback,Sl=s.unstable_cancelCallback,sc=s.unstable_shouldYield,fs=s.unstable_requestPaint,Xt=s.unstable_now,jb=s.unstable_getCurrentPriorityLevel,lh=s.unstable_ImmediatePriority,ah=s.unstable_UserBlockingPriority,Fa=s.unstable_NormalPriority,Ob=s.unstable_LowPriority,rh=s.unstable_IdlePriority,zb=s.log,Ib=s.unstable_setDisableYieldValue,Tl=null,Kt=null;function ti(e){if(typeof zb=="function"&&Ib(e),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Tl,e)}catch{}}var Ft=Math.clz32?Math.clz32:Bb,Lb=Math.log,Hb=Math.LN2;function Bb(e){return e>>>=0,e===0?32:31-(Lb(e)/Hb|0)|0}var Pa=256,Za=262144,Wa=4194304;function zi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ja(e,t,i){var r=e.pendingLanes;if(r===0)return 0;var c=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var v=r&134217727;return v!==0?(r=v&~u,r!==0?c=zi(r):(g&=v,g!==0?c=zi(g):i||(i=v&~e,i!==0&&(c=zi(i))))):(v=r&~u,v!==0?c=zi(v):g!==0?c=zi(g):i||(i=r&~e,i!==0&&(c=zi(i)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:c}function wl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ub(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oh(){var e=Wa;return Wa<<=1,(Wa&62914560)===0&&(Wa=4194304),e}function lc(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Cl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Vb(e,t,i,r,c,u){var g=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var v=e.entanglements,S=e.expirationTimes,A=e.hiddenUpdates;for(i=g&~i;0<i;){var I=31-Ft(i),H=1<<I;v[I]=0,S[I]=-1;var R=A[I];if(R!==null)for(A[I]=null,I=0;I<R.length;I++){var O=R[I];O!==null&&(O.lane&=-536870913)}i&=~H}r!==0&&ch(e,r,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function ch(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ft(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|i&261930}function uh(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-Ft(i),c=1<<r;c&t|e[r]&t&&(e[r]|=t),i&=~c}}function fh(e,t){var i=t&-t;return i=(i&42)!==0?1:ac(i),(i&(e.suspendedLanes|t))!==0?0:i}function ac(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function rc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function dh(){var e=j.p;return e!==0?e:(e=window.event,e===void 0?32:Wp(e.type))}function hh(e,t){var i=j.p;try{return j.p=e,t()}finally{j.p=i}}var ni=Math.random().toString(36).slice(2),Et="__reactFiber$"+ni,Lt="__reactProps$"+ni,ds="__reactContainer$"+ni,oc="__reactEvents$"+ni,Gb="__reactListeners$"+ni,qb="__reactHandles$"+ni,mh="__reactResources$"+ni,Nl="__reactMarker$"+ni;function cc(e){delete e[Et],delete e[Lt],delete e[oc],delete e[Gb],delete e[qb]}function hs(e){var t=e[Et];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ds]||i[Et]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=zp(e);e!==null;){if(i=e[Et])return i;e=zp(e)}return t}e=i,i=e.parentNode}return null}function ms(e){if(e=e[Et]||e[ds]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function El(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function gs(e){var t=e[mh];return t||(t=e[mh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Tt(e){e[Nl]=!0}var gh=new Set,ph={};function Ii(e,t){ps(e,t),ps(e+"Capture",t)}function ps(e,t){for(ph[e]=t,e=0;e<t.length;e++)gh.add(t[e])}var Qb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yh={},vh={};function Yb(e){return St.call(vh,e)?!0:St.call(yh,e)?!1:Qb.test(e)?vh[e]=!0:(yh[e]=!0,!1)}function $a(e,t,i){if(Yb(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function er(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Dn(e,t,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+r)}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xb(e,t,i){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){i=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uc(e){if(!e._valueTracker){var t=bh(e)?"checked":"value";e._valueTracker=Xb(e,t,""+e[t])}}function _h(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=bh(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function tr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Kb=/[\n"\\]/g;function an(e){return e.replace(Kb,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function fc(e,t,i,r,c,u,g,v){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ln(t)):e.value!==""+ln(t)&&(e.value=""+ln(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?dc(e,g,ln(t)):i!=null?dc(e,g,ln(i)):r!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+ln(v):e.removeAttribute("name")}function xh(e,t,i,r,c,u,g,v){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){uc(e);return}i=i!=null?""+ln(i):"",t=t!=null?""+ln(t):i,v||t===e.value||(e.value=t),e.defaultValue=t}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=v?e.checked:!!r,e.defaultChecked=!!r,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g),uc(e)}function dc(e,t,i){t==="number"&&tr(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ys(e,t,i,r){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&r&&(e[i].defaultSelected=!0)}else{for(i=""+ln(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Sh(e,t,i){if(t!=null&&(t=""+ln(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+ln(i):""}function Th(e,t,i,r){if(t==null){if(r!=null){if(i!=null)throw Error(a(92));if(ke(r)){if(1<r.length)throw Error(a(93));r=r[0]}i=r}i==null&&(i=""),t=i}i=ln(t),e.defaultValue=i,r=e.textContent,r===i&&r!==""&&r!==null&&(e.value=r),uc(e)}function vs(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Fb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wh(e,t,i){var r=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,i):typeof i!="number"||i===0||Fb.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Ch(e,t,i){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,i!=null){for(var r in i)!i.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in t)r=t[c],t.hasOwnProperty(c)&&i[c]!==r&&wh(e,c,r)}else for(var u in t)t.hasOwnProperty(u)&&wh(e,u,t[u])}function hc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nr(e){return Zb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function jn(){}var mc=null;function gc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bs=null,_s=null;function Nh(e){var t=ms(e);if(t&&(e=t.stateNode)){var i=e[Lt]||null;e:switch(e=t.stateNode,t.type){case"input":if(fc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+an(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var c=r[Lt]||null;if(!c)throw Error(a(90));fc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<i.length;t++)r=i[t],r.form===e.form&&_h(r)}break e;case"textarea":Sh(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ys(e,!!i.multiple,t,!1)}}}var pc=!1;function Eh(e,t,i){if(pc)return e(t,i);pc=!0;try{var r=e(t);return r}finally{if(pc=!1,(bs!==null||_s!==null)&&(qr(),bs&&(t=bs,e=_s,_s=bs=null,Nh(t),e)))for(t=0;t<e.length;t++)Nh(e[t])}}function Al(e,t){var i=e.stateNode;if(i===null)return null;var r=i[Lt]||null;if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(a(231,t,typeof i));return i}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yc=!1;if(On)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){yc=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{yc=!1}var ii=null,vc=null,ir=null;function Ah(){if(ir)return ir;var e,t=vc,i=t.length,r,c="value"in ii?ii.value:ii.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(r=1;r<=g&&t[i-r]===c[u-r];r++);return ir=c.slice(e,1<r?1-r:void 0)}function sr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lr(){return!0}function Mh(){return!1}function Ht(e){function t(i,r,c,u,g){this._reactName=i,this._targetInst=c,this.type=r,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(i=e[v],this[v]=i?i(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?lr:Mh,this.isPropagationStopped=Mh,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),t}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ar=Ht(Li),Rl=b({},Li,{view:0,detail:0}),Wb=Ht(Rl),bc,_c,kl,rr=b({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kl&&(kl&&e.type==="mousemove"?(bc=e.screenX-kl.screenX,_c=e.screenY-kl.screenY):_c=bc=0,kl=e),bc)},movementY:function(e){return"movementY"in e?e.movementY:_c}}),Rh=Ht(rr),Jb=b({},rr,{dataTransfer:0}),$b=Ht(Jb),e_=b({},Rl,{relatedTarget:0}),xc=Ht(e_),t_=b({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),n_=Ht(t_),i_=b({},Li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),s_=Ht(i_),l_=b({},Li,{data:0}),kh=Ht(l_),a_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=o_[e])?!!t[e]:!1}function Sc(){return c_}var u_=b({},Rl,{key:function(e){if(e.key){var t=a_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?r_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(e){return e.type==="keypress"?sr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),f_=Ht(u_),d_=b({},rr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dh=Ht(d_),h_=b({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),m_=Ht(h_),g_=b({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),p_=Ht(g_),y_=b({},rr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),v_=Ht(y_),b_=b({},Li,{newState:0,oldState:0}),__=Ht(b_),x_=[9,13,27,32],Tc=On&&"CompositionEvent"in window,Dl=null;On&&"documentMode"in document&&(Dl=document.documentMode);var S_=On&&"TextEvent"in window&&!Dl,jh=On&&(!Tc||Dl&&8<Dl&&11>=Dl),Oh=" ",zh=!1;function Ih(e,t){switch(e){case"keyup":return x_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xs=!1;function T_(e,t){switch(e){case"compositionend":return Lh(t);case"keypress":return t.which!==32?null:(zh=!0,Oh);case"textInput":return e=t.data,e===Oh&&zh?null:e;default:return null}}function w_(e,t){if(xs)return e==="compositionend"||!Tc&&Ih(e,t)?(e=Ah(),ir=vc=ii=null,xs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jh&&t.locale!=="ko"?null:t.data;default:return null}}var C_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C_[e.type]:t==="textarea"}function Bh(e,t,i,r){bs?_s?_s.push(r):_s=[r]:bs=r,t=Zr(t,"onChange"),0<t.length&&(i=new ar("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var jl=null,Ol=null;function N_(e){xp(e,0)}function or(e){var t=El(e);if(_h(t))return e}function Uh(e,t){if(e==="change")return t}var Vh=!1;if(On){var wc;if(On){var Cc="oninput"in document;if(!Cc){var Gh=document.createElement("div");Gh.setAttribute("oninput","return;"),Cc=typeof Gh.oninput=="function"}wc=Cc}else wc=!1;Vh=wc&&(!document.documentMode||9<document.documentMode)}function qh(){jl&&(jl.detachEvent("onpropertychange",Qh),Ol=jl=null)}function Qh(e){if(e.propertyName==="value"&&or(Ol)){var t=[];Bh(t,Ol,e,gc(e)),Eh(N_,t)}}function E_(e,t,i){e==="focusin"?(qh(),jl=t,Ol=i,jl.attachEvent("onpropertychange",Qh)):e==="focusout"&&qh()}function A_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return or(Ol)}function M_(e,t){if(e==="click")return or(t)}function R_(e,t){if(e==="input"||e==="change")return or(t)}function k_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:k_;function zl(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var c=i[r];if(!St.call(t,c)||!Pt(e[c],t[c]))return!1}return!0}function Yh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xh(e,t){var i=Yh(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Yh(i)}}function Kh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=tr(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=tr(e.document)}return t}function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var D_=On&&"documentMode"in document&&11>=document.documentMode,Ss=null,Ec=null,Il=null,Ac=!1;function Ph(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ac||Ss==null||Ss!==tr(r)||(r=Ss,"selectionStart"in r&&Nc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Il&&zl(Il,r)||(Il=r,r=Zr(Ec,"onSelect"),0<r.length&&(t=new ar("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=Ss)))}function Hi(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ts={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},Mc={},Zh={};On&&(Zh=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function Bi(e){if(Mc[e])return Mc[e];if(!Ts[e])return e;var t=Ts[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Zh)return Mc[e]=t[i];return e}var Wh=Bi("animationend"),Jh=Bi("animationiteration"),$h=Bi("animationstart"),j_=Bi("transitionrun"),O_=Bi("transitionstart"),z_=Bi("transitioncancel"),em=Bi("transitionend"),tm=new Map,Rc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rc.push("scrollEnd");function vn(e,t){tm.set(e,t),Ii(t,[e])}var cr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},rn=[],ws=0,kc=0;function ur(){for(var e=ws,t=kc=ws=0;t<e;){var i=rn[t];rn[t++]=null;var r=rn[t];rn[t++]=null;var c=rn[t];rn[t++]=null;var u=rn[t];if(rn[t++]=null,r!==null&&c!==null){var g=r.pending;g===null?c.next=c:(c.next=g.next,g.next=c),r.pending=c}u!==0&&nm(i,c,u)}}function fr(e,t,i,r){rn[ws++]=e,rn[ws++]=t,rn[ws++]=i,rn[ws++]=r,kc|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Dc(e,t,i,r){return fr(e,t,i,r),dr(e)}function Ui(e,t){return fr(e,null,null,t),dr(e)}function nm(e,t,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var c=!1,u=e.return;u!==null;)u.childLanes|=i,r=u.alternate,r!==null&&(r.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Ft(i),e=u.hiddenUpdates,r=e[c],r===null?e[c]=[t]:r.push(t),t.lane=i|536870912),u):null}function dr(e){if(50<sa)throw sa=0,Vu=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Cs={};function I_(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(e,t,i,r){return new I_(e,t,i,r)}function jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zn(e,t){var i=e.alternate;return i===null?(i=Zt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function im(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function hr(e,t,i,r,c,u){var g=0;if(r=e,typeof e=="function")jc(e)&&(g=1);else if(typeof e=="string")g=V1(e,i,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case pe:return e=Zt(31,i,t,c),e.elementType=pe,e.lanes=u,e;case D:return Vi(i.children,c,u,t);case q:g=8,c|=24;break;case P:return e=Zt(12,i,t,c|2),e.elementType=P,e.lanes=u,e;case le:return e=Zt(13,i,t,c),e.elementType=le,e.lanes=u,e;case ue:return e=Zt(19,i,t,c),e.elementType=ue,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G:g=10;break e;case F:g=9;break e;case J:g=11;break e;case U:g=14;break e;case K:g=16,r=null;break e}g=29,i=Error(a(130,e===null?"null":typeof e,"")),r=null}return t=Zt(g,i,t,c),t.elementType=e,t.type=r,t.lanes=u,t}function Vi(e,t,i,r){return e=Zt(7,e,r,t),e.lanes=i,e}function Oc(e,t,i){return e=Zt(6,e,null,t),e.lanes=i,e}function sm(e){var t=Zt(18,null,null,0);return t.stateNode=e,t}function zc(e,t,i){return t=Zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var lm=new WeakMap;function on(e,t){if(typeof e=="object"&&e!==null){var i=lm.get(e);return i!==void 0?i:(t={value:e,source:t,stack:qe(t)},lm.set(e,t),t)}return{value:e,source:t,stack:qe(t)}}var Ns=[],Es=0,mr=null,Ll=0,cn=[],un=0,si=null,Cn=1,Nn="";function In(e,t){Ns[Es++]=Ll,Ns[Es++]=mr,mr=e,Ll=t}function am(e,t,i){cn[un++]=Cn,cn[un++]=Nn,cn[un++]=si,si=e;var r=Cn;e=Nn;var c=32-Ft(r)-1;r&=~(1<<c),i+=1;var u=32-Ft(t)+c;if(30<u){var g=c-c%5;u=(r&(1<<g)-1).toString(32),r>>=g,c-=g,Cn=1<<32-Ft(t)+c|i<<c|r,Nn=u+e}else Cn=1<<u|i<<c|r,Nn=e}function Ic(e){e.return!==null&&(In(e,1),am(e,1,0))}function Lc(e){for(;e===mr;)mr=Ns[--Es],Ns[Es]=null,Ll=Ns[--Es],Ns[Es]=null;for(;e===si;)si=cn[--un],cn[un]=null,Nn=cn[--un],cn[un]=null,Cn=cn[--un],cn[un]=null}function rm(e,t){cn[un++]=Cn,cn[un++]=Nn,cn[un++]=si,Cn=t.id,Nn=t.overflow,si=e}var At=null,st=null,He=!1,li=null,fn=!1,Hc=Error(a(519));function ai(e){var t=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hl(on(t,e)),Hc}function om(e){var t=e.stateNode,i=e.type,r=e.memoizedProps;switch(t[Et]=e,t[Lt]=r,i){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(i=0;i<aa.length;i++)je(aa[i],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),xh(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),Th(t,r.value,r.defaultValue,r.children)}i=r.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||r.suppressHydrationWarning===!0||Cp(t.textContent,i)?(r.popover!=null&&(je("beforetoggle",t),je("toggle",t)),r.onScroll!=null&&je("scroll",t),r.onScrollEnd!=null&&je("scrollend",t),r.onClick!=null&&(t.onclick=jn),t=!0):t=!1,t||ai(e,!0)}function cm(e){for(At=e.return;At;)switch(At.tag){case 5:case 31:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:At=At.return}}function As(e){if(e!==At)return!1;if(!He)return cm(e),He=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||nf(e.type,e.memoizedProps)),i=!i),i&&st&&ai(e),cm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));st=Op(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));st=Op(e)}else t===27?(t=st,_i(e.type)?(e=of,of=null,st=e):st=t):st=At?hn(e.stateNode.nextSibling):null;return!0}function Gi(){st=At=null,He=!1}function Bc(){var e=li;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),li=null),e}function Hl(e){li===null?li=[e]:li.push(e)}var Uc=re(null),qi=null,Ln=null;function ri(e,t,i){Y(Uc,t._currentValue),t._currentValue=i}function Hn(e){e._currentValue=Uc.current,V(Uc)}function Vc(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function Gc(e,t,i,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var g=c.child;u=u.firstContext;e:for(;u!==null;){var v=u;u=c;for(var S=0;S<t.length;S++)if(v.context===t[S]){u.lanes|=i,v=u.alternate,v!==null&&(v.lanes|=i),Vc(u.return,i,e),r||(g=null);break e}u=v.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(a(341));g.lanes|=i,u=g.alternate,u!==null&&(u.lanes|=i),Vc(g,i,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function Ms(e,t,i,r){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(a(387));if(g=g.memoizedProps,g!==null){var v=c.type;Pt(c.pendingProps.value,g.value)||(e!==null?e.push(v):e=[v])}}else if(c===oe.current){if(g=c.alternate,g===null)throw Error(a(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(fa):e=[fa])}c=c.return}e!==null&&Gc(t,e,i,r),t.flags|=262144}function gr(e){for(e=e.firstContext;e!==null;){if(!Pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qi(e){qi=e,Ln=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mt(e){return um(qi,e)}function pr(e,t){return qi===null&&Qi(e),um(e,t)}function um(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Ln===null){if(e===null)throw Error(a(308));Ln=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ln=Ln.next=t;return i}var L_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},H_=s.unstable_scheduleCallback,B_=s.unstable_NormalPriority,mt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qc(){return{controller:new L_,data:new Map,refCount:0}}function Bl(e){e.refCount--,e.refCount===0&&H_(B_,function(){e.controller.abort()})}var Ul=null,Qc=0,Rs=0,ks=null;function U_(e,t){if(Ul===null){var i=Ul=[];Qc=0,Rs=Ku(),ks={status:"pending",value:void 0,then:function(r){i.push(r)}}}return Qc++,t.then(fm,fm),t}function fm(){if(--Qc===0&&Ul!==null){ks!==null&&(ks.status="fulfilled");var e=Ul;Ul=null,Rs=0,ks=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function V_(e,t){var i=[],r={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var c=0;c<i.length;c++)(0,i[c])(t)},function(c){for(r.status="rejected",r.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),r}var dm=k.S;k.S=function(e,t){Pg=Xt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&U_(e,t),dm!==null&&dm(e,t)};var Yi=re(null);function Yc(){var e=Yi.current;return e!==null?e:$e.pooledCache}function yr(e,t){t===null?Y(Yi,Yi.current):Y(Yi,t.pool)}function hm(){var e=Yc();return e===null?null:{parent:mt._currentValue,pool:e}}var Ds=Error(a(460)),Xc=Error(a(474)),vr=Error(a(542)),br={then:function(){}};function mm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function gm(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(jn,jn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ym(e),e;default:if(typeof t.status=="string")t.then(jn,jn);else{if(e=$e,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=r}},function(r){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ym(e),e}throw Ki=t,Ds}}function Xi(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ki=i,Ds):i}}var Ki=null;function pm(){if(Ki===null)throw Error(a(459));var e=Ki;return Ki=null,e}function ym(e){if(e===Ds||e===vr)throw Error(a(483))}var js=null,Vl=0;function _r(e){var t=Vl;return Vl+=1,js===null&&(js=[]),gm(js,e,t)}function Gl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xr(e,t){throw t.$$typeof===_?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function vm(e){function t(w,T){if(e){var N=w.deletions;N===null?(w.deletions=[T],w.flags|=16):N.push(T)}}function i(w,T){if(!e)return null;for(;T!==null;)t(w,T),T=T.sibling;return null}function r(w){for(var T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function c(w,T){return w=zn(w,T),w.index=0,w.sibling=null,w}function u(w,T,N){return w.index=N,e?(N=w.alternate,N!==null?(N=N.index,N<T?(w.flags|=67108866,T):N):(w.flags|=67108866,T)):(w.flags|=1048576,T)}function g(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function v(w,T,N,L){return T===null||T.tag!==6?(T=Oc(N,w.mode,L),T.return=w,T):(T=c(T,N),T.return=w,T)}function S(w,T,N,L){var ce=N.type;return ce===D?I(w,T,N.props.children,L,N.key):T!==null&&(T.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===K&&Xi(ce)===T.type)?(T=c(T,N.props),Gl(T,N),T.return=w,T):(T=hr(N.type,N.key,N.props,null,w.mode,L),Gl(T,N),T.return=w,T)}function A(w,T,N,L){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=zc(N,w.mode,L),T.return=w,T):(T=c(T,N.children||[]),T.return=w,T)}function I(w,T,N,L,ce){return T===null||T.tag!==7?(T=Vi(N,w.mode,L,ce),T.return=w,T):(T=c(T,N),T.return=w,T)}function H(w,T,N){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Oc(""+T,w.mode,N),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case C:return N=hr(T.type,T.key,T.props,null,w.mode,N),Gl(N,T),N.return=w,N;case z:return T=zc(T,w.mode,N),T.return=w,T;case K:return T=Xi(T),H(w,T,N)}if(ke(T)||Se(T))return T=Vi(T,w.mode,N,null),T.return=w,T;if(typeof T.then=="function")return H(w,_r(T),N);if(T.$$typeof===G)return H(w,pr(w,T),N);xr(w,T)}return null}function R(w,T,N,L){var ce=T!==null?T.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return ce!==null?null:v(w,T,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case C:return N.key===ce?S(w,T,N,L):null;case z:return N.key===ce?A(w,T,N,L):null;case K:return N=Xi(N),R(w,T,N,L)}if(ke(N)||Se(N))return ce!==null?null:I(w,T,N,L,null);if(typeof N.then=="function")return R(w,T,_r(N),L);if(N.$$typeof===G)return R(w,T,pr(w,N),L);xr(w,N)}return null}function O(w,T,N,L,ce){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return w=w.get(N)||null,v(T,w,""+L,ce);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case C:return w=w.get(L.key===null?N:L.key)||null,S(T,w,L,ce);case z:return w=w.get(L.key===null?N:L.key)||null,A(T,w,L,ce);case K:return L=Xi(L),O(w,T,N,L,ce)}if(ke(L)||Se(L))return w=w.get(N)||null,I(T,w,L,ce,null);if(typeof L.then=="function")return O(w,T,N,_r(L),ce);if(L.$$typeof===G)return O(w,T,N,pr(T,L),ce);xr(T,L)}return null}function ee(w,T,N,L){for(var ce=null,Ue=null,se=T,we=T=0,Le=null;se!==null&&we<N.length;we++){se.index>we?(Le=se,se=null):Le=se.sibling;var Ve=R(w,se,N[we],L);if(Ve===null){se===null&&(se=Le);break}e&&se&&Ve.alternate===null&&t(w,se),T=u(Ve,T,we),Ue===null?ce=Ve:Ue.sibling=Ve,Ue=Ve,se=Le}if(we===N.length)return i(w,se),He&&In(w,we),ce;if(se===null){for(;we<N.length;we++)se=H(w,N[we],L),se!==null&&(T=u(se,T,we),Ue===null?ce=se:Ue.sibling=se,Ue=se);return He&&In(w,we),ce}for(se=r(se);we<N.length;we++)Le=O(se,w,we,N[we],L),Le!==null&&(e&&Le.alternate!==null&&se.delete(Le.key===null?we:Le.key),T=u(Le,T,we),Ue===null?ce=Le:Ue.sibling=Le,Ue=Le);return e&&se.forEach(function(Ci){return t(w,Ci)}),He&&In(w,we),ce}function me(w,T,N,L){if(N==null)throw Error(a(151));for(var ce=null,Ue=null,se=T,we=T=0,Le=null,Ve=N.next();se!==null&&!Ve.done;we++,Ve=N.next()){se.index>we?(Le=se,se=null):Le=se.sibling;var Ci=R(w,se,Ve.value,L);if(Ci===null){se===null&&(se=Le);break}e&&se&&Ci.alternate===null&&t(w,se),T=u(Ci,T,we),Ue===null?ce=Ci:Ue.sibling=Ci,Ue=Ci,se=Le}if(Ve.done)return i(w,se),He&&In(w,we),ce;if(se===null){for(;!Ve.done;we++,Ve=N.next())Ve=H(w,Ve.value,L),Ve!==null&&(T=u(Ve,T,we),Ue===null?ce=Ve:Ue.sibling=Ve,Ue=Ve);return He&&In(w,we),ce}for(se=r(se);!Ve.done;we++,Ve=N.next())Ve=O(se,w,we,Ve.value,L),Ve!==null&&(e&&Ve.alternate!==null&&se.delete(Ve.key===null?we:Ve.key),T=u(Ve,T,we),Ue===null?ce=Ve:Ue.sibling=Ve,Ue=Ve);return e&&se.forEach(function(J1){return t(w,J1)}),He&&In(w,we),ce}function We(w,T,N,L){if(typeof N=="object"&&N!==null&&N.type===D&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case C:e:{for(var ce=N.key;T!==null;){if(T.key===ce){if(ce=N.type,ce===D){if(T.tag===7){i(w,T.sibling),L=c(T,N.props.children),L.return=w,w=L;break e}}else if(T.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===K&&Xi(ce)===T.type){i(w,T.sibling),L=c(T,N.props),Gl(L,N),L.return=w,w=L;break e}i(w,T);break}else t(w,T);T=T.sibling}N.type===D?(L=Vi(N.props.children,w.mode,L,N.key),L.return=w,w=L):(L=hr(N.type,N.key,N.props,null,w.mode,L),Gl(L,N),L.return=w,w=L)}return g(w);case z:e:{for(ce=N.key;T!==null;){if(T.key===ce)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){i(w,T.sibling),L=c(T,N.children||[]),L.return=w,w=L;break e}else{i(w,T);break}else t(w,T);T=T.sibling}L=zc(N,w.mode,L),L.return=w,w=L}return g(w);case K:return N=Xi(N),We(w,T,N,L)}if(ke(N))return ee(w,T,N,L);if(Se(N)){if(ce=Se(N),typeof ce!="function")throw Error(a(150));return N=ce.call(N),me(w,T,N,L)}if(typeof N.then=="function")return We(w,T,_r(N),L);if(N.$$typeof===G)return We(w,T,pr(w,N),L);xr(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,T!==null&&T.tag===6?(i(w,T.sibling),L=c(T,N),L.return=w,w=L):(i(w,T),L=Oc(N,w.mode,L),L.return=w,w=L),g(w)):i(w,T)}return function(w,T,N,L){try{Vl=0;var ce=We(w,T,N,L);return js=null,ce}catch(se){if(se===Ds||se===vr)throw se;var Ue=Zt(29,se,null,w.mode);return Ue.lanes=L,Ue.return=w,Ue}}}var Fi=vm(!0),bm=vm(!1),oi=!1;function Kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ci(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ui(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Qe&2)!==0){var c=r.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),r.pending=t,t=dr(e),nm(e,null,i),t}return fr(e,r,t,i),dr(e)}function ql(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,uh(e,i)}}function Pc(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?c=u=g:u=u.next=g,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Zc=!1;function Ql(){if(Zc){var e=ks;if(e!==null)throw e}}function Yl(e,t,i,r){Zc=!1;var c=e.updateQueue;oi=!1;var u=c.firstBaseUpdate,g=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var S=v,A=S.next;S.next=null,g===null?u=A:g.next=A,g=S;var I=e.alternate;I!==null&&(I=I.updateQueue,v=I.lastBaseUpdate,v!==g&&(v===null?I.firstBaseUpdate=A:v.next=A,I.lastBaseUpdate=S))}if(u!==null){var H=c.baseState;g=0,I=A=S=null,v=u;do{var R=v.lane&-536870913,O=R!==v.lane;if(O?(Ie&R)===R:(r&R)===R){R!==0&&R===Rs&&(Zc=!0),I!==null&&(I=I.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var ee=e,me=v;R=t;var We=i;switch(me.tag){case 1:if(ee=me.payload,typeof ee=="function"){H=ee.call(We,H,R);break e}H=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=me.payload,R=typeof ee=="function"?ee.call(We,H,R):ee,R==null)break e;H=b({},H,R);break e;case 2:oi=!0}}R=v.callback,R!==null&&(e.flags|=64,O&&(e.flags|=8192),O=c.callbacks,O===null?c.callbacks=[R]:O.push(R))}else O={lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},I===null?(A=I=O,S=H):I=I.next=O,g|=R;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;O=v,v=O.next,O.next=null,c.lastBaseUpdate=O,c.shared.pending=null}}while(!0);I===null&&(S=H),c.baseState=S,c.firstBaseUpdate=A,c.lastBaseUpdate=I,u===null&&(c.shared.lanes=0),gi|=g,e.lanes=g,e.memoizedState=H}}function _m(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function xm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)_m(i[e],t)}var Os=re(null),Sr=re(0);function Sm(e,t){e=Kn,Y(Sr,e),Y(Os,t),Kn=e|t.baseLanes}function Wc(){Y(Sr,Kn),Y(Os,Os.current)}function Jc(){Kn=Sr.current,V(Os),V(Sr)}var Wt=re(null),dn=null;function fi(e){var t=e.alternate;Y(dt,dt.current&1),Y(Wt,e),dn===null&&(t===null||Os.current!==null||t.memoizedState!==null)&&(dn=e)}function $c(e){Y(dt,dt.current),Y(Wt,e),dn===null&&(dn=e)}function Tm(e){e.tag===22?(Y(dt,dt.current),Y(Wt,e),dn===null&&(dn=e)):di()}function di(){Y(dt,dt.current),Y(Wt,Wt.current)}function Jt(e){V(Wt),dn===e&&(dn=null),V(dt)}var dt=re(0);function Tr(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||af(i)||rf(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bn=0,Te=null,Pe=null,gt=null,wr=!1,zs=!1,Pi=!1,Cr=0,Xl=0,Is=null,G_=0;function ot(){throw Error(a(321))}function eu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Pt(e[i],t[i]))return!1;return!0}function tu(e,t,i,r,c,u){return Bn=u,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=e===null||e.memoizedState===null?ag:pu,Pi=!1,u=i(r,c),Pi=!1,zs&&(u=Cm(t,i,r,c)),wm(e),u}function wm(e){k.H=Pl;var t=Pe!==null&&Pe.next!==null;if(Bn=0,gt=Pe=Te=null,wr=!1,Xl=0,Is=null,t)throw Error(a(300));e===null||pt||(e=e.dependencies,e!==null&&gr(e)&&(pt=!0))}function Cm(e,t,i,r){Te=e;var c=0;do{if(zs&&(Is=null),Xl=0,zs=!1,25<=c)throw Error(a(301));if(c+=1,gt=Pe=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}k.H=rg,u=t(i,r)}while(zs);return u}function q_(){var e=k.H,t=e.useState()[0];return t=typeof t.then=="function"?Kl(t):t,e=e.useState()[0],(Pe!==null?Pe.memoizedState:null)!==e&&(Te.flags|=1024),t}function nu(){var e=Cr!==0;return Cr=0,e}function iu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function su(e){if(wr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wr=!1}Bn=0,gt=Pe=Te=null,zs=!1,Xl=Cr=0,Is=null}function Ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Te.memoizedState=gt=e:gt=gt.next=e,gt}function ht(){if(Pe===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var t=gt===null?Te.memoizedState:gt.next;if(t!==null)gt=t,Pe=e;else{if(e===null)throw Te.alternate===null?Error(a(467)):Error(a(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},gt===null?Te.memoizedState=gt=e:gt=gt.next=e}return gt}function Nr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(e){var t=Xl;return Xl+=1,Is===null&&(Is=[]),e=gm(Is,e,t),t=Te,(gt===null?t.memoizedState:gt.next)===null&&(t=t.alternate,k.H=t===null||t.memoizedState===null?ag:pu),e}function Er(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Kl(e);if(e.$$typeof===G)return Mt(e)}throw Error(a(438,String(e)))}function lu(e){var t=null,i=Te.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var r=Te.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Nr(),Te.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=ve;return t.index++,i}function Un(e,t){return typeof t=="function"?t(e):t}function Ar(e){var t=ht();return au(t,Pe,e)}function au(e,t,i){var r=e.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=i;var c=e.baseQueue,u=r.pending;if(u!==null){if(c!==null){var g=c.next;c.next=u.next,u.next=g}t.baseQueue=c=u,r.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var v=g=null,S=null,A=t,I=!1;do{var H=A.lane&-536870913;if(H!==A.lane?(Ie&H)===H:(Bn&H)===H){var R=A.revertLane;if(R===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),H===Rs&&(I=!0);else if((Bn&R)===R){A=A.next,R===Rs&&(I=!0);continue}else H={lane:0,revertLane:A.revertLane,gesture:null,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},S===null?(v=S=H,g=u):S=S.next=H,Te.lanes|=R,gi|=R;H=A.action,Pi&&i(u,H),u=A.hasEagerState?A.eagerState:i(u,H)}else R={lane:H,revertLane:A.revertLane,gesture:A.gesture,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},S===null?(v=S=R,g=u):S=S.next=R,Te.lanes|=H,gi|=H;A=A.next}while(A!==null&&A!==t);if(S===null?g=u:S.next=v,!Pt(u,e.memoizedState)&&(pt=!0,I&&(i=ks,i!==null)))throw i;e.memoizedState=u,e.baseState=g,e.baseQueue=S,r.lastRenderedState=u}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ru(e){var t=ht(),i=t.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=e;var r=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do u=e(u,g.action),g=g.next;while(g!==c);Pt(u,t.memoizedState)||(pt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,r]}function Nm(e,t,i){var r=Te,c=ht(),u=He;if(u){if(i===void 0)throw Error(a(407));i=i()}else i=t();var g=!Pt((Pe||c).memoizedState,i);if(g&&(c.memoizedState=i,pt=!0),c=c.queue,uu(Mm.bind(null,r,c,e),[e]),c.getSnapshot!==t||g||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Ls(9,{destroy:void 0},Am.bind(null,r,c,i,t),null),$e===null)throw Error(a(349));u||(Bn&127)!==0||Em(r,t,i)}return i}function Em(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Te.updateQueue,t===null?(t=Nr(),Te.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Am(e,t,i,r){t.value=i,t.getSnapshot=r,Rm(t)&&km(e)}function Mm(e,t,i){return i(function(){Rm(t)&&km(e)})}function Rm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Pt(e,i)}catch{return!0}}function km(e){var t=Ui(e,2);t!==null&&qt(t,e,2)}function ou(e){var t=Ot();if(typeof e=="function"){var i=e;if(e=i(),Pi){ti(!0);try{i()}finally{ti(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:e},t}function Dm(e,t,i,r){return e.baseState=i,au(e,Pe,typeof r=="function"?r:Un)}function Q_(e,t,i,r,c){if(kr(e))throw Error(a(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};k.T!==null?i(!0):u.isTransition=!1,r(u),i=t.pending,i===null?(u.next=t.pending=u,jm(t,u)):(u.next=i.next,t.pending=i.next=u)}}function jm(e,t){var i=t.action,r=t.payload,c=e.state;if(t.isTransition){var u=k.T,g={};k.T=g;try{var v=i(c,r),S=k.S;S!==null&&S(g,v),Om(e,t,v)}catch(A){cu(e,t,A)}finally{u!==null&&g.types!==null&&(u.types=g.types),k.T=u}}else try{u=i(c,r),Om(e,t,u)}catch(A){cu(e,t,A)}}function Om(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){zm(e,t,r)},function(r){return cu(e,t,r)}):zm(e,t,i)}function zm(e,t,i){t.status="fulfilled",t.value=i,Im(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,jm(e,i)))}function cu(e,t,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=i,Im(t),t=t.next;while(t!==r)}e.action=null}function Im(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Lm(e,t){return t}function Hm(e,t){if(He){var i=$e.formState;if(i!==null){e:{var r=Te;if(He){if(st){t:{for(var c=st,u=fn;c.nodeType!==8;){if(!u){c=null;break t}if(c=hn(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){st=hn(c.nextSibling),r=c.data==="F!";break e}}ai(r)}r=!1}r&&(t=i[0])}}return i=Ot(),i.memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lm,lastRenderedState:t},i.queue=r,i=ig.bind(null,Te,r),r.dispatch=i,r=ou(!1),u=gu.bind(null,Te,!1,r.queue),r=Ot(),c={state:t,dispatch:null,action:e,pending:null},r.queue=c,i=Q_.bind(null,Te,c,u,i),c.dispatch=i,r.memoizedState=e,[t,i,!1]}function Bm(e){var t=ht();return Um(t,Pe,e)}function Um(e,t,i){if(t=au(e,t,Lm)[0],e=Ar(Un)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=Kl(t)}catch(g){throw g===Ds?vr:g}else r=t;t=ht();var c=t.queue,u=c.dispatch;return i!==t.memoizedState&&(Te.flags|=2048,Ls(9,{destroy:void 0},Y_.bind(null,c,i),null)),[r,u,e]}function Y_(e,t){e.action=t}function Vm(e){var t=ht(),i=Pe;if(i!==null)return Um(t,i,e);ht(),t=t.memoizedState,i=ht();var r=i.queue.dispatch;return i.memoizedState=e,[t,r,!1]}function Ls(e,t,i,r){return e={tag:e,create:i,deps:r,inst:t,next:null},t=Te.updateQueue,t===null&&(t=Nr(),Te.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function Gm(){return ht().memoizedState}function Mr(e,t,i,r){var c=Ot();Te.flags|=e,c.memoizedState=Ls(1|t,{destroy:void 0},i,r===void 0?null:r)}function Rr(e,t,i,r){var c=ht();r=r===void 0?null:r;var u=c.memoizedState.inst;Pe!==null&&r!==null&&eu(r,Pe.memoizedState.deps)?c.memoizedState=Ls(t,u,i,r):(Te.flags|=e,c.memoizedState=Ls(1|t,u,i,r))}function qm(e,t){Mr(8390656,8,e,t)}function uu(e,t){Rr(2048,8,e,t)}function X_(e){Te.flags|=4;var t=Te.updateQueue;if(t===null)t=Nr(),Te.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Qm(e){var t=ht().memoizedState;return X_({ref:t,nextImpl:e}),function(){if((Qe&2)!==0)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ym(e,t){return Rr(4,2,e,t)}function Xm(e,t){return Rr(4,4,e,t)}function Km(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fm(e,t,i){i=i!=null?i.concat([e]):null,Rr(4,4,Km.bind(null,t,e),i)}function fu(){}function Pm(e,t){var i=ht();t=t===void 0?null:t;var r=i.memoizedState;return t!==null&&eu(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function Zm(e,t){var i=ht();t=t===void 0?null:t;var r=i.memoizedState;if(t!==null&&eu(t,r[1]))return r[0];if(r=e(),Pi){ti(!0);try{e()}finally{ti(!1)}}return i.memoizedState=[r,t],r}function du(e,t,i){return i===void 0||(Bn&1073741824)!==0&&(Ie&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Wg(),Te.lanes|=e,gi|=e,i)}function Wm(e,t,i,r){return Pt(i,t)?i:Os.current!==null?(e=du(e,i,r),Pt(e,t)||(pt=!0),e):(Bn&42)===0||(Bn&1073741824)!==0&&(Ie&261930)===0?(pt=!0,e.memoizedState=i):(e=Wg(),Te.lanes|=e,gi|=e,t)}function Jm(e,t,i,r,c){var u=j.p;j.p=u!==0&&8>u?u:8;var g=k.T,v={};k.T=v,gu(e,!1,t,i);try{var S=c(),A=k.S;if(A!==null&&A(v,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var I=V_(S,r);Fl(e,t,I,tn(e))}else Fl(e,t,r,tn(e))}catch(H){Fl(e,t,{then:function(){},status:"rejected",reason:H},tn())}finally{j.p=u,g!==null&&v.types!==null&&(g.types=v.types),k.T=g}}function K_(){}function hu(e,t,i,r){if(e.tag!==5)throw Error(a(476));var c=$m(e).queue;Jm(e,c,t,B,i===null?K_:function(){return eg(e),i(r)})}function $m(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:B},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function eg(e){var t=$m(e);t.next===null&&(t=e.alternate.memoizedState),Fl(e,t.next.queue,{},tn())}function mu(){return Mt(fa)}function tg(){return ht().memoizedState}function ng(){return ht().memoizedState}function F_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=tn();e=ci(i);var r=ui(t,e,i);r!==null&&(qt(r,t,i),ql(r,t,i)),t={cache:qc()},e.payload=t;return}t=t.return}}function P_(e,t,i){var r=tn();i={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},kr(e)?sg(t,i):(i=Dc(e,t,i,r),i!==null&&(qt(i,e,r),lg(i,t,r)))}function ig(e,t,i){var r=tn();Fl(e,t,i,r)}function Fl(e,t,i,r){var c={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(kr(e))sg(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,v=u(g,i);if(c.hasEagerState=!0,c.eagerState=v,Pt(v,g))return fr(e,t,c,0),$e===null&&ur(),!1}catch{}if(i=Dc(e,t,c,r),i!==null)return qt(i,e,r),lg(i,t,r),!0}return!1}function gu(e,t,i,r){if(r={lane:2,revertLane:Ku(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},kr(e)){if(t)throw Error(a(479))}else t=Dc(e,i,r,2),t!==null&&qt(t,e,2)}function kr(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function sg(e,t){zs=wr=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function lg(e,t,i){if((i&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,uh(e,i)}}var Pl={readContext:Mt,use:Er,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot};Pl.useEffectEvent=ot;var ag={readContext:Mt,use:Er,useCallback:function(e,t){return Ot().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:qm,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Mr(4194308,4,Km.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Mr(4194308,4,e,t)},useInsertionEffect:function(e,t){Mr(4,2,e,t)},useMemo:function(e,t){var i=Ot();t=t===void 0?null:t;var r=e();if(Pi){ti(!0);try{e()}finally{ti(!1)}}return i.memoizedState=[r,t],r},useReducer:function(e,t,i){var r=Ot();if(i!==void 0){var c=i(t);if(Pi){ti(!0);try{i(t)}finally{ti(!1)}}}else c=t;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=P_.bind(null,Te,e),[r.memoizedState,e]},useRef:function(e){var t=Ot();return e={current:e},t.memoizedState=e},useState:function(e){e=ou(e);var t=e.queue,i=ig.bind(null,Te,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:fu,useDeferredValue:function(e,t){var i=Ot();return du(i,e,t)},useTransition:function(){var e=ou(!1);return e=Jm.bind(null,Te,e.queue,!0,!1),Ot().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var r=Te,c=Ot();if(He){if(i===void 0)throw Error(a(407));i=i()}else{if(i=t(),$e===null)throw Error(a(349));(Ie&127)!==0||Em(r,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,qm(Mm.bind(null,r,u,e),[e]),r.flags|=2048,Ls(9,{destroy:void 0},Am.bind(null,r,u,i,t),null),i},useId:function(){var e=Ot(),t=$e.identifierPrefix;if(He){var i=Nn,r=Cn;i=(r&~(1<<32-Ft(r)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Cr++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=G_++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:mu,useFormState:Hm,useActionState:Hm,useOptimistic:function(e){var t=Ot();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=gu.bind(null,Te,!0,i),i.dispatch=t,[e,t]},useMemoCache:lu,useCacheRefresh:function(){return Ot().memoizedState=F_.bind(null,Te)},useEffectEvent:function(e){var t=Ot(),i={impl:e};return t.memoizedState=i,function(){if((Qe&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},pu={readContext:Mt,use:Er,useCallback:Pm,useContext:Mt,useEffect:uu,useImperativeHandle:Fm,useInsertionEffect:Ym,useLayoutEffect:Xm,useMemo:Zm,useReducer:Ar,useRef:Gm,useState:function(){return Ar(Un)},useDebugValue:fu,useDeferredValue:function(e,t){var i=ht();return Wm(i,Pe.memoizedState,e,t)},useTransition:function(){var e=Ar(Un)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:Kl(e),t]},useSyncExternalStore:Nm,useId:tg,useHostTransitionStatus:mu,useFormState:Bm,useActionState:Bm,useOptimistic:function(e,t){var i=ht();return Dm(i,Pe,e,t)},useMemoCache:lu,useCacheRefresh:ng};pu.useEffectEvent=Qm;var rg={readContext:Mt,use:Er,useCallback:Pm,useContext:Mt,useEffect:uu,useImperativeHandle:Fm,useInsertionEffect:Ym,useLayoutEffect:Xm,useMemo:Zm,useReducer:ru,useRef:Gm,useState:function(){return ru(Un)},useDebugValue:fu,useDeferredValue:function(e,t){var i=ht();return Pe===null?du(i,e,t):Wm(i,Pe.memoizedState,e,t)},useTransition:function(){var e=ru(Un)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:Kl(e),t]},useSyncExternalStore:Nm,useId:tg,useHostTransitionStatus:mu,useFormState:Vm,useActionState:Vm,useOptimistic:function(e,t){var i=ht();return Pe!==null?Dm(i,Pe,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:lu,useCacheRefresh:ng};rg.useEffectEvent=Qm;function yu(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:b({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var vu={enqueueSetState:function(e,t,i){e=e._reactInternals;var r=tn(),c=ci(r);c.payload=t,i!=null&&(c.callback=i),t=ui(e,c,r),t!==null&&(qt(t,e,r),ql(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=tn(),c=ci(r);c.tag=1,c.payload=t,i!=null&&(c.callback=i),t=ui(e,c,r),t!==null&&(qt(t,e,r),ql(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=tn(),r=ci(i);r.tag=2,t!=null&&(r.callback=t),t=ui(e,r,i),t!==null&&(qt(t,e,i),ql(t,e,i))}};function og(e,t,i,r,c,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,g):t.prototype&&t.prototype.isPureReactComponent?!zl(i,r)||!zl(c,u):!0}function cg(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&vu.enqueueReplaceState(t,t.state,null)}function Zi(e,t){var i=t;if("ref"in t){i={};for(var r in t)r!=="ref"&&(i[r]=t[r])}if(e=e.defaultProps){i===t&&(i=b({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function ug(e){cr(e)}function fg(e){console.error(e)}function dg(e){cr(e)}function Dr(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function hg(e,t,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function bu(e,t,i){return i=ci(i),i.tag=3,i.payload={element:null},i.callback=function(){Dr(e,t)},i}function mg(e){return e=ci(e),e.tag=3,e}function gg(e,t,i,r){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var u=r.value;e.payload=function(){return c(u)},e.callback=function(){hg(t,i,r)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){hg(t,i,r),typeof c!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})})}function Z_(e,t,i,r,c){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=i.alternate,t!==null&&Ms(t,i,c,!0),i=Wt.current,i!==null){switch(i.tag){case 31:case 13:return dn===null?Qr():i.alternate===null&&ct===0&&(ct=3),i.flags&=-257,i.flags|=65536,i.lanes=c,r===br?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([r]):t.add(r),Qu(e,r,c)),!1;case 22:return i.flags|=65536,r===br?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([r]):i.add(r)),Qu(e,r,c)),!1}throw Error(a(435,i.tag))}return Qu(e,r,c),Qr(),!1}if(He)return t=Wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,r!==Hc&&(e=Error(a(422),{cause:r}),Hl(on(e,i)))):(r!==Hc&&(t=Error(a(423),{cause:r}),Hl(on(t,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=on(r,i),c=bu(e.stateNode,r,c),Pc(e,c),ct!==4&&(ct=2)),!1;var u=Error(a(520),{cause:r});if(u=on(u,i),ia===null?ia=[u]:ia.push(u),ct!==4&&(ct=2),t===null)return!0;r=on(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=bu(i.stateNode,r,e),Pc(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(pi===null||!pi.has(u))))return i.flags|=65536,c&=-c,i.lanes|=c,c=mg(c),gg(c,e,i,r),Pc(i,c),!1}i=i.return}while(i!==null);return!1}var _u=Error(a(461)),pt=!1;function Rt(e,t,i,r){t.child=e===null?bm(t,null,i,r):Fi(t,e.child,i,r)}function pg(e,t,i,r,c){i=i.render;var u=t.ref;if("ref"in r){var g={};for(var v in r)v!=="ref"&&(g[v]=r[v])}else g=r;return Qi(t),r=tu(e,t,i,g,u,c),v=nu(),e!==null&&!pt?(iu(e,t,c),Vn(e,t,c)):(He&&v&&Ic(t),t.flags|=1,Rt(e,t,r,c),t.child)}function yg(e,t,i,r,c){if(e===null){var u=i.type;return typeof u=="function"&&!jc(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,vg(e,t,u,r,c)):(e=hr(i.type,null,r,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Au(e,c)){var g=u.memoizedProps;if(i=i.compare,i=i!==null?i:zl,i(g,r)&&e.ref===t.ref)return Vn(e,t,c)}return t.flags|=1,e=zn(u,r),e.ref=t.ref,e.return=t,t.child=e}function vg(e,t,i,r,c){if(e!==null){var u=e.memoizedProps;if(zl(u,r)&&e.ref===t.ref)if(pt=!1,t.pendingProps=r=u,Au(e,c))(e.flags&131072)!==0&&(pt=!0);else return t.lanes=e.lanes,Vn(e,t,c)}return xu(e,t,i,r,c)}function bg(e,t,i,r){var c=r.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(r=t.child=e.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;r=c&~u}else r=0,t.child=null;return _g(e,t,u,i,r)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&yr(t,u!==null?u.cachePool:null),u!==null?Sm(t,u):Wc(),Tm(t);else return r=t.lanes=536870912,_g(e,t,u!==null?u.baseLanes|i:i,i,r)}else u!==null?(yr(t,u.cachePool),Sm(t,u),di(),t.memoizedState=null):(e!==null&&yr(t,null),Wc(),di());return Rt(e,t,c,i),t.child}function Zl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function _g(e,t,i,r,c){var u=Yc();return u=u===null?null:{parent:mt._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&yr(t,null),Wc(),Tm(t),e!==null&&Ms(e,t,r,!0),t.childLanes=c,null}function jr(e,t){return t=zr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function xg(e,t,i){return Fi(t,e.child,null,i),e=jr(t,t.pendingProps),e.flags|=2,Jt(t),t.memoizedState=null,e}function W_(e,t,i){var r=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(He){if(r.mode==="hidden")return e=jr(t,r),t.lanes=536870912,Zl(null,e);if($c(t),(e=st)?(e=jp(e,fn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:si!==null?{id:Cn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},i=sm(e),i.return=t,t.child=i,At=t,st=null)):e=null,e===null)throw ai(t);return t.lanes=536870912,null}return jr(t,r)}var u=e.memoizedState;if(u!==null){var g=u.dehydrated;if($c(t),c)if(t.flags&256)t.flags&=-257,t=xg(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(a(558));else if(pt||Ms(e,t,i,!1),c=(i&e.childLanes)!==0,pt||c){if(r=$e,r!==null&&(g=fh(r,i),g!==0&&g!==u.retryLane))throw u.retryLane=g,Ui(e,g),qt(r,e,g),_u;Qr(),t=xg(e,t,i)}else e=u.treeContext,st=hn(g.nextSibling),At=t,He=!0,li=null,fn=!1,e!==null&&rm(t,e),t=jr(t,r),t.flags|=4096;return t}return e=zn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Or(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function xu(e,t,i,r,c){return Qi(t),i=tu(e,t,i,r,void 0,c),r=nu(),e!==null&&!pt?(iu(e,t,c),Vn(e,t,c)):(He&&r&&Ic(t),t.flags|=1,Rt(e,t,i,c),t.child)}function Sg(e,t,i,r,c,u){return Qi(t),t.updateQueue=null,i=Cm(t,r,i,c),wm(e),r=nu(),e!==null&&!pt?(iu(e,t,u),Vn(e,t,u)):(He&&r&&Ic(t),t.flags|=1,Rt(e,t,i,u),t.child)}function Tg(e,t,i,r,c){if(Qi(t),t.stateNode===null){var u=Cs,g=i.contextType;typeof g=="object"&&g!==null&&(u=Mt(g)),u=new i(r,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=vu,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=r,u.state=t.memoizedState,u.refs={},Kc(t),g=i.contextType,u.context=typeof g=="object"&&g!==null?Mt(g):Cs,u.state=t.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(yu(t,i,g,r),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&vu.enqueueReplaceState(u,u.state,null),Yl(t,r,u,c),Ql(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){u=t.stateNode;var v=t.memoizedProps,S=Zi(i,v);u.props=S;var A=u.context,I=i.contextType;g=Cs,typeof I=="object"&&I!==null&&(g=Mt(I));var H=i.getDerivedStateFromProps;I=typeof H=="function"||typeof u.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,I||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v||A!==g)&&cg(t,u,r,g),oi=!1;var R=t.memoizedState;u.state=R,Yl(t,r,u,c),Ql(),A=t.memoizedState,v||R!==A||oi?(typeof H=="function"&&(yu(t,i,H,r),A=t.memoizedState),(S=oi||og(t,i,S,r,R,A,g))?(I||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=A),u.props=r,u.state=A,u.context=g,r=S):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,Fc(e,t),g=t.memoizedProps,I=Zi(i,g),u.props=I,H=t.pendingProps,R=u.context,A=i.contextType,S=Cs,typeof A=="object"&&A!==null&&(S=Mt(A)),v=i.getDerivedStateFromProps,(A=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==H||R!==S)&&cg(t,u,r,S),oi=!1,R=t.memoizedState,u.state=R,Yl(t,r,u,c),Ql();var O=t.memoizedState;g!==H||R!==O||oi||e!==null&&e.dependencies!==null&&gr(e.dependencies)?(typeof v=="function"&&(yu(t,i,v,r),O=t.memoizedState),(I=oi||og(t,i,I,r,R,O,S)||e!==null&&e.dependencies!==null&&gr(e.dependencies))?(A||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,O,S),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,O,S)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=O),u.props=r,u.state=O,u.context=S,r=I):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),r=!1)}return u=r,Or(e,t),r=(t.flags&128)!==0,u||r?(u=t.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&r?(t.child=Fi(t,e.child,null,c),t.child=Fi(t,null,i,c)):Rt(e,t,i,c),t.memoizedState=u.state,e=t.child):e=Vn(e,t,c),e}function wg(e,t,i,r){return Gi(),t.flags|=256,Rt(e,t,i,r),t.child}var Su={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tu(e){return{baseLanes:e,cachePool:hm()}}function wu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=en),e}function Cg(e,t,i){var r=t.pendingProps,c=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(dt.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(He){if(c?fi(t):di(),(e=st)?(e=jp(e,fn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:si!==null?{id:Cn,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},i=sm(e),i.return=t,t.child=i,At=t,st=null)):e=null,e===null)throw ai(t);return rf(e)?t.lanes=32:t.lanes=536870912,null}var v=r.children;return r=r.fallback,c?(di(),c=t.mode,v=zr({mode:"hidden",children:v},c),r=Vi(r,c,i,null),v.return=t,r.return=t,v.sibling=r,t.child=v,r=t.child,r.memoizedState=Tu(i),r.childLanes=wu(e,g,i),t.memoizedState=Su,Zl(null,r)):(fi(t),Cu(t,v))}var S=e.memoizedState;if(S!==null&&(v=S.dehydrated,v!==null)){if(u)t.flags&256?(fi(t),t.flags&=-257,t=Nu(e,t,i)):t.memoizedState!==null?(di(),t.child=e.child,t.flags|=128,t=null):(di(),v=r.fallback,c=t.mode,r=zr({mode:"visible",children:r.children},c),v=Vi(v,c,i,null),v.flags|=2,r.return=t,v.return=t,r.sibling=v,t.child=r,Fi(t,e.child,null,i),r=t.child,r.memoizedState=Tu(i),r.childLanes=wu(e,g,i),t.memoizedState=Su,t=Zl(null,r));else if(fi(t),rf(v)){if(g=v.nextSibling&&v.nextSibling.dataset,g)var A=g.dgst;g=A,r=Error(a(419)),r.stack="",r.digest=g,Hl({value:r,source:null,stack:null}),t=Nu(e,t,i)}else if(pt||Ms(e,t,i,!1),g=(i&e.childLanes)!==0,pt||g){if(g=$e,g!==null&&(r=fh(g,i),r!==0&&r!==S.retryLane))throw S.retryLane=r,Ui(e,r),qt(g,e,r),_u;af(v)||Qr(),t=Nu(e,t,i)}else af(v)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,st=hn(v.nextSibling),At=t,He=!0,li=null,fn=!1,e!==null&&rm(t,e),t=Cu(t,r.children),t.flags|=4096);return t}return c?(di(),v=r.fallback,c=t.mode,S=e.child,A=S.sibling,r=zn(S,{mode:"hidden",children:r.children}),r.subtreeFlags=S.subtreeFlags&65011712,A!==null?v=zn(A,v):(v=Vi(v,c,i,null),v.flags|=2),v.return=t,r.return=t,r.sibling=v,t.child=r,Zl(null,r),r=t.child,v=e.child.memoizedState,v===null?v=Tu(i):(c=v.cachePool,c!==null?(S=mt._currentValue,c=c.parent!==S?{parent:S,pool:S}:c):c=hm(),v={baseLanes:v.baseLanes|i,cachePool:c}),r.memoizedState=v,r.childLanes=wu(e,g,i),t.memoizedState=Su,Zl(e.child,r)):(fi(t),i=e.child,e=i.sibling,i=zn(i,{mode:"visible",children:r.children}),i.return=t,i.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=i,t.memoizedState=null,i)}function Cu(e,t){return t=zr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zr(e,t){return e=Zt(22,e,null,t),e.lanes=0,e}function Nu(e,t,i){return Fi(t,e.child,null,i),e=Cu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ng(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vc(e.return,t,i)}function Eu(e,t,i,r,c,u){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:c,treeForkCount:u}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=r,g.tail=i,g.tailMode=c,g.treeForkCount=u)}function Eg(e,t,i){var r=t.pendingProps,c=r.revealOrder,u=r.tail;r=r.children;var g=dt.current,v=(g&2)!==0;if(v?(g=g&1|2,t.flags|=128):g&=1,Y(dt,g),Rt(e,t,r,i),r=He?Ll:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ng(e,i,t);else if(e.tag===19)Ng(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Tr(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Eu(t,!1,c,i,u,r);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Tr(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Eu(t,!0,i,null,u,r);break;case"together":Eu(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Vn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),gi|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Ms(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,i=zn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=zn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Au(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&gr(e)))}function J_(e,t,i){switch(t.tag){case 3:X(t,t.stateNode.containerInfo),ri(t,mt,e.memoizedState.cache),Gi();break;case 27:case 5:he(t);break;case 4:X(t,t.stateNode.containerInfo);break;case 10:ri(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,$c(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(fi(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Cg(e,t,i):(fi(t),e=Vn(e,t,i),e!==null?e.sibling:null);fi(t);break;case 19:var c=(e.flags&128)!==0;if(r=(i&t.childLanes)!==0,r||(Ms(e,t,i,!1),r=(i&t.childLanes)!==0),c){if(r)return Eg(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Y(dt,dt.current),r)break;return null;case 22:return t.lanes=0,bg(e,t,i,t.pendingProps);case 24:ri(t,mt,e.memoizedState.cache)}return Vn(e,t,i)}function Ag(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)pt=!0;else{if(!Au(e,i)&&(t.flags&128)===0)return pt=!1,J_(e,t,i);pt=(e.flags&131072)!==0}else pt=!1,He&&(t.flags&1048576)!==0&&am(t,Ll,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=Xi(t.elementType),t.type=e,typeof e=="function")jc(e)?(r=Zi(e,r),t.tag=1,t=Tg(null,t,e,r,i)):(t.tag=0,t=xu(null,t,e,r,i));else{if(e!=null){var c=e.$$typeof;if(c===J){t.tag=11,t=pg(null,t,e,r,i);break e}else if(c===U){t.tag=14,t=yg(null,t,e,r,i);break e}}throw t=Re(e)||e,Error(a(306,t,""))}}return t;case 0:return xu(e,t,t.type,t.pendingProps,i);case 1:return r=t.type,c=Zi(r,t.pendingProps),Tg(e,t,r,c,i);case 3:e:{if(X(t,t.stateNode.containerInfo),e===null)throw Error(a(387));r=t.pendingProps;var u=t.memoizedState;c=u.element,Fc(e,t),Yl(t,r,null,i);var g=t.memoizedState;if(r=g.cache,ri(t,mt,r),r!==u.cache&&Gc(t,[mt],i,!0),Ql(),r=g.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=wg(e,t,r,i);break e}else if(r!==c){c=on(Error(a(424)),t),Hl(c),t=wg(e,t,r,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,st=hn(e.firstChild),At=t,He=!0,li=null,fn=!0,i=bm(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Gi(),r===c){t=Vn(e,t,i);break e}Rt(e,t,r,i)}t=t.child}return t;case 26:return Or(e,t),e===null?(i=Bp(t.type,null,t.pendingProps,null))?t.memoizedState=i:He||(i=t.type,e=t.pendingProps,r=Wr(_e.current).createElement(i),r[Et]=t,r[Lt]=e,kt(r,i,e),Tt(r),t.stateNode=r):t.memoizedState=Bp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return he(t),e===null&&He&&(r=t.stateNode=Ip(t.type,t.pendingProps,_e.current),At=t,fn=!0,c=st,_i(t.type)?(of=c,st=hn(r.firstChild)):st=c),Rt(e,t,t.pendingProps.children,i),Or(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&He&&((c=r=st)&&(r=A1(r,t.type,t.pendingProps,fn),r!==null?(t.stateNode=r,At=t,st=hn(r.firstChild),fn=!1,c=!0):c=!1),c||ai(t)),he(t),c=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,r=u.children,nf(c,u)?r=null:g!==null&&nf(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=tu(e,t,q_,null,null,i),fa._currentValue=c),Or(e,t),Rt(e,t,r,i),t.child;case 6:return e===null&&He&&((e=i=st)&&(i=M1(i,t.pendingProps,fn),i!==null?(t.stateNode=i,At=t,st=null,e=!0):e=!1),e||ai(t)),null;case 13:return Cg(e,t,i);case 4:return X(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fi(t,null,r,i):Rt(e,t,r,i),t.child;case 11:return pg(e,t,t.type,t.pendingProps,i);case 7:return Rt(e,t,t.pendingProps,i),t.child;case 8:return Rt(e,t,t.pendingProps.children,i),t.child;case 12:return Rt(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.pendingProps,ri(t,t.type,r.value),Rt(e,t,r.children,i),t.child;case 9:return c=t.type._context,r=t.pendingProps.children,Qi(t),c=Mt(c),r=r(c),t.flags|=1,Rt(e,t,r,i),t.child;case 14:return yg(e,t,t.type,t.pendingProps,i);case 15:return vg(e,t,t.type,t.pendingProps,i);case 19:return Eg(e,t,i);case 31:return W_(e,t,i);case 22:return bg(e,t,i,t.pendingProps);case 24:return Qi(t),r=Mt(mt),e===null?(c=Yc(),c===null&&(c=$e,u=qc(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=i),c=u),t.memoizedState={parent:r,cache:c},Kc(t),ri(t,mt,c)):((e.lanes&i)!==0&&(Fc(e,t),Yl(t,null,null,i),Ql()),c=e.memoizedState,u=t.memoizedState,c.parent!==r?(c={parent:r,cache:r},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),ri(t,mt,r)):(r=u.cache,ri(t,mt,r),r!==c.cache&&Gc(t,[mt],i,!0))),Rt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Gn(e){e.flags|=4}function Mu(e,t,i,r,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(tp())e.flags|=8192;else throw Ki=br,Xc}else e.flags&=-16777217}function Mg(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qp(t))if(tp())e.flags|=8192;else throw Ki=br,Xc}function Ir(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?oh():536870912,e.lanes|=t,Vs|=t)}function Wl(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function $_(e,t,i){var r=t.pendingProps;switch(Lc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return lt(t),null;case 3:return i=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Hn(mt),$(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(As(t)?Gn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Bc())),lt(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(Gn(t),u!==null?(lt(t),Mg(t,u)):(lt(t),Mu(t,c,null,r,i))):u?u!==e.memoizedState?(Gn(t),lt(t),Mg(t,u)):(lt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&Gn(t),lt(t),Mu(t,c,e,r,i)),null;case 27:if(xe(t),i=_e.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Gn(t);else{if(!r){if(t.stateNode===null)throw Error(a(166));return lt(t),null}e=te.current,As(t)?om(t):(e=Ip(c,r,i),t.stateNode=e,Gn(t))}return lt(t),null;case 5:if(xe(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Gn(t);else{if(!r){if(t.stateNode===null)throw Error(a(166));return lt(t),null}if(u=te.current,As(t))om(t);else{var g=Wr(_e.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof r.is=="string"?g.createElement("select",{is:r.is}):g.createElement("select"),r.multiple?u.multiple=!0:r.size&&(u.size=r.size);break;default:u=typeof r.is=="string"?g.createElement(c,{is:r.is}):g.createElement(c)}}u[Et]=t,u[Lt]=r;e:for(g=t.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}t.stateNode=u;e:switch(kt(u,c,r),c){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Gn(t)}}return lt(t),Mu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Gn(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(a(166));if(e=_e.current,As(t)){if(e=t.stateNode,i=t.memoizedProps,r=null,c=At,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[Et]=t,e=!!(e.nodeValue===i||r!==null&&r.suppressHydrationWarning===!0||Cp(e.nodeValue,i)),e||ai(t,!0)}else e=Wr(e).createTextNode(r),e[Et]=t,t.stateNode=e}return lt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(r=As(t),i!==null){if(e===null){if(!r)throw Error(a(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[Et]=t}else Gi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;lt(t),e=!1}else i=Bc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Jt(t),t):(Jt(t),null);if((t.flags&128)!==0)throw Error(a(558))}return lt(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=As(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(a(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[Et]=t}else Gi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;lt(t),c=!1}else c=Bc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Jt(t),t):(Jt(t),null)}return Jt(t),(t.flags&128)!==0?(t.lanes=i,t):(i=r!==null,e=e!==null&&e.memoizedState!==null,i&&(r=t.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==c&&(r.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Ir(t,t.updateQueue),lt(t),null);case 4:return $(),e===null&&Wu(t.stateNode.containerInfo),lt(t),null;case 10:return Hn(t.type),lt(t),null;case 19:if(V(dt),r=t.memoizedState,r===null)return lt(t),null;if(c=(t.flags&128)!==0,u=r.rendering,u===null)if(c)Wl(r,!1);else{if(ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Tr(e),u!==null){for(t.flags|=128,Wl(r,!1),e=u.updateQueue,t.updateQueue=e,Ir(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)im(i,e),i=i.sibling;return Y(dt,dt.current&1|2),He&&In(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Xt()>Vr&&(t.flags|=128,c=!0,Wl(r,!1),t.lanes=4194304)}else{if(!c)if(e=Tr(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,Ir(t,e),Wl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!He)return lt(t),null}else 2*Xt()-r.renderingStartTime>Vr&&i!==536870912&&(t.flags|=128,c=!0,Wl(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Xt(),e.sibling=null,i=dt.current,Y(dt,c?i&1|2:i&1),He&&In(t,r.treeForkCount),e):(lt(t),null);case 22:case 23:return Jt(t),Jc(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(i&536870912)!==0&&(t.flags&128)===0&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),i=t.updateQueue,i!==null&&Ir(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),e!==null&&V(Yi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Hn(mt),lt(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function e1(e,t){switch(Lc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Hn(mt),$(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xe(t),null;case 31:if(t.memoizedState!==null){if(Jt(t),t.alternate===null)throw Error(a(340));Gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Jt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));Gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(dt),null;case 4:return $(),null;case 10:return Hn(t.type),null;case 22:case 23:return Jt(t),Jc(),e!==null&&V(Yi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Hn(mt),null;case 25:return null;default:return null}}function Rg(e,t){switch(Lc(t),t.tag){case 3:Hn(mt),$();break;case 26:case 27:case 5:xe(t);break;case 4:$();break;case 31:t.memoizedState!==null&&Jt(t);break;case 13:Jt(t);break;case 19:V(dt);break;case 10:Hn(t.type);break;case 22:case 23:Jt(t),Jc(),e!==null&&V(Yi);break;case 24:Hn(mt)}}function Jl(e,t){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var c=r.next;i=c;do{if((i.tag&e)===e){r=void 0;var u=i.create,g=i.inst;r=u(),g.destroy=r}i=i.next}while(i!==c)}}catch(v){Fe(t,t.return,v)}}function hi(e,t,i){try{var r=t.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var u=c.next;r=u;do{if((r.tag&e)===e){var g=r.inst,v=g.destroy;if(v!==void 0){g.destroy=void 0,c=t;var S=i,A=v;try{A()}catch(I){Fe(c,S,I)}}}r=r.next}while(r!==u)}}catch(I){Fe(t,t.return,I)}}function kg(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{xm(t,i)}catch(r){Fe(e,e.return,r)}}}function Dg(e,t,i){i.props=Zi(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){Fe(e,t,r)}}function $l(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(c){Fe(e,t,c)}}function En(e,t){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(c){Fe(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){Fe(e,t,c)}else i.current=null}function jg(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(c){Fe(e,e.return,c)}}function Ru(e,t,i){try{var r=e.stateNode;S1(r,e.type,i,t),r[Lt]=t}catch(c){Fe(e,e.return,c)}}function Og(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_i(e.type)||e.tag===4}function ku(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Og(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_i(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Du(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=jn));else if(r!==4&&(r===27&&_i(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Du(e,t,i),e=e.sibling;e!==null;)Du(e,t,i),e=e.sibling}function Lr(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(r===27&&_i(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Lr(e,t,i),e=e.sibling;e!==null;)Lr(e,t,i),e=e.sibling}function zg(e){var t=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);kt(t,r,i),t[Et]=e,t[Lt]=i}catch(u){Fe(e,e.return,u)}}var qn=!1,yt=!1,ju=!1,Ig=typeof WeakSet=="function"?WeakSet:Set,wt=null;function t1(e,t){if(e=e.containerInfo,ef=so,e=Fh(e),Nc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var c=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var g=0,v=-1,S=-1,A=0,I=0,H=e,R=null;t:for(;;){for(var O;H!==i||c!==0&&H.nodeType!==3||(v=g+c),H!==u||r!==0&&H.nodeType!==3||(S=g+r),H.nodeType===3&&(g+=H.nodeValue.length),(O=H.firstChild)!==null;)R=H,H=O;for(;;){if(H===e)break t;if(R===i&&++A===c&&(v=g),R===u&&++I===r&&(S=g),(O=H.nextSibling)!==null)break;H=R,R=H.parentNode}H=O}i=v===-1||S===-1?null:{start:v,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(tf={focusedElem:e,selectionRange:i},so=!1,wt=t;wt!==null;)if(t=wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,wt=e;else for(;wt!==null;){switch(t=wt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)c=e[i],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,c=u.memoizedProps,u=u.memoizedState,r=i.stateNode;try{var ee=Zi(i.type,c);e=r.getSnapshotBeforeUpdate(ee,u),r.__reactInternalSnapshotBeforeUpdate=e}catch(me){Fe(i,i.return,me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)lf(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":lf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,wt=e;break}wt=t.return}}function Lg(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:Yn(e,i),r&4&&Jl(5,i);break;case 1:if(Yn(e,i),r&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(g){Fe(i,i.return,g)}else{var c=Zi(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Fe(i,i.return,g)}}r&64&&kg(i),r&512&&$l(i,i.return);break;case 3:if(Yn(e,i),r&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{xm(e,t)}catch(g){Fe(i,i.return,g)}}break;case 27:t===null&&r&4&&zg(i);case 26:case 5:Yn(e,i),t===null&&r&4&&jg(i),r&512&&$l(i,i.return);break;case 12:Yn(e,i);break;case 31:Yn(e,i),r&4&&Ug(e,i);break;case 13:Yn(e,i),r&4&&Vg(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=u1.bind(null,i),R1(e,i))));break;case 22:if(r=i.memoizedState!==null||qn,!r){t=t!==null&&t.memoizedState!==null||yt,c=qn;var u=yt;qn=r,(yt=t)&&!u?Xn(e,i,(i.subtreeFlags&8772)!==0):Yn(e,i),qn=c,yt=u}break;case 30:break;default:Yn(e,i)}}function Hg(e){var t=e.alternate;t!==null&&(e.alternate=null,Hg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&cc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,Bt=!1;function Qn(e,t,i){for(i=i.child;i!==null;)Bg(e,t,i),i=i.sibling}function Bg(e,t,i){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Tl,i)}catch{}switch(i.tag){case 26:yt||En(i,t),Qn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:yt||En(i,t);var r=at,c=Bt;_i(i.type)&&(at=i.stateNode,Bt=!1),Qn(e,t,i),oa(i.stateNode),at=r,Bt=c;break;case 5:yt||En(i,t);case 6:if(r=at,c=Bt,at=null,Qn(e,t,i),at=r,Bt=c,at!==null)if(Bt)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(i.stateNode)}catch(u){Fe(i,t,u)}else try{at.removeChild(i.stateNode)}catch(u){Fe(i,t,u)}break;case 18:at!==null&&(Bt?(e=at,kp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ps(e)):kp(at,i.stateNode));break;case 4:r=at,c=Bt,at=i.stateNode.containerInfo,Bt=!0,Qn(e,t,i),at=r,Bt=c;break;case 0:case 11:case 14:case 15:hi(2,i,t),yt||hi(4,i,t),Qn(e,t,i);break;case 1:yt||(En(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"&&Dg(i,t,r)),Qn(e,t,i);break;case 21:Qn(e,t,i);break;case 22:yt=(r=yt)||i.memoizedState!==null,Qn(e,t,i),yt=r;break;default:Qn(e,t,i)}}function Ug(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(i){Fe(t,t.return,i)}}}function Vg(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(i){Fe(t,t.return,i)}}function n1(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ig),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ig),t;default:throw Error(a(435,e.tag))}}function Hr(e,t){var i=n1(e);t.forEach(function(r){if(!i.has(r)){i.add(r);var c=f1.bind(null,e,r);r.then(c,c)}})}function Ut(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var c=i[r],u=e,g=t,v=g;e:for(;v!==null;){switch(v.tag){case 27:if(_i(v.type)){at=v.stateNode,Bt=!1;break e}break;case 5:at=v.stateNode,Bt=!1;break e;case 3:case 4:at=v.stateNode.containerInfo,Bt=!0;break e}v=v.return}if(at===null)throw Error(a(160));Bg(u,g,c),at=null,Bt=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Gg(t,e),t=t.sibling}var bn=null;function Gg(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ut(t,e),Vt(e),r&4&&(hi(3,e,e.return),Jl(3,e),hi(5,e,e.return));break;case 1:Ut(t,e),Vt(e),r&512&&(yt||i===null||En(i,i.return)),r&64&&qn&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:var c=bn;if(Ut(t,e),Vt(e),r&512&&(yt||i===null||En(i,i.return)),r&4){var u=i!==null?i.memoizedState:null;if(r=e.memoizedState,i===null)if(r===null)if(e.stateNode===null){e:{r=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":u=c.getElementsByTagName("title")[0],(!u||u[Nl]||u[Et]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(r),c.head.insertBefore(u,c.querySelector("head > title"))),kt(u,r,i),u[Et]=e,Tt(u),r=u;break e;case"link":var g=Gp("link","href",c).get(r+(i.href||""));if(g){for(var v=0;v<g.length;v++)if(u=g[v],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(v,1);break t}}u=c.createElement(r),kt(u,r,i),c.head.appendChild(u);break;case"meta":if(g=Gp("meta","content",c).get(r+(i.content||""))){for(v=0;v<g.length;v++)if(u=g[v],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(v,1);break t}}u=c.createElement(r),kt(u,r,i),c.head.appendChild(u);break;default:throw Error(a(468,r))}u[Et]=e,Tt(u),r=u}e.stateNode=r}else qp(c,e.type,e.stateNode);else e.stateNode=Vp(c,r,e.memoizedProps);else u!==r?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,r===null?qp(c,e.type,e.stateNode):Vp(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Ru(e,e.memoizedProps,i.memoizedProps)}break;case 27:Ut(t,e),Vt(e),r&512&&(yt||i===null||En(i,i.return)),i!==null&&r&4&&Ru(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Ut(t,e),Vt(e),r&512&&(yt||i===null||En(i,i.return)),e.flags&32){c=e.stateNode;try{vs(c,"")}catch(ee){Fe(e,e.return,ee)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,Ru(e,c,i!==null?i.memoizedProps:c)),r&1024&&(ju=!0);break;case 6:if(Ut(t,e),Vt(e),r&4){if(e.stateNode===null)throw Error(a(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(ee){Fe(e,e.return,ee)}}break;case 3:if(eo=null,c=bn,bn=Jr(t.containerInfo),Ut(t,e),bn=c,Vt(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Ps(t.containerInfo)}catch(ee){Fe(e,e.return,ee)}ju&&(ju=!1,qg(e));break;case 4:r=bn,bn=Jr(e.stateNode.containerInfo),Ut(t,e),Vt(e),bn=r;break;case 12:Ut(t,e),Vt(e);break;case 31:Ut(t,e),Vt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Hr(e,r)));break;case 13:Ut(t,e),Vt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Ur=Xt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Hr(e,r)));break;case 22:c=e.memoizedState!==null;var S=i!==null&&i.memoizedState!==null,A=qn,I=yt;if(qn=A||c,yt=I||S,Ut(t,e),yt=I,qn=A,Vt(e),r&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(i===null||S||qn||yt||Wi(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){S=i=t;try{if(u=S.stateNode,c)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{v=S.stateNode;var H=S.memoizedProps.style,R=H!=null&&H.hasOwnProperty("display")?H.display:null;v.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(ee){Fe(S,S.return,ee)}}}else if(t.tag===6){if(i===null){S=t;try{S.stateNode.nodeValue=c?"":S.memoizedProps}catch(ee){Fe(S,S.return,ee)}}}else if(t.tag===18){if(i===null){S=t;try{var O=S.stateNode;c?Dp(O,!0):Dp(S.stateNode,!1)}catch(ee){Fe(S,S.return,ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,Hr(e,i))));break;case 19:Ut(t,e),Vt(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Hr(e,r)));break;case 30:break;case 21:break;default:Ut(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{for(var i,r=e.return;r!==null;){if(Og(r)){i=r;break}r=r.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var c=i.stateNode,u=ku(e);Lr(e,u,c);break;case 5:var g=i.stateNode;i.flags&32&&(vs(g,""),i.flags&=-33);var v=ku(e);Lr(e,v,g);break;case 3:case 4:var S=i.stateNode.containerInfo,A=ku(e);Du(e,A,S);break;default:throw Error(a(161))}}catch(I){Fe(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Yn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Lg(e,t.alternate,t),t=t.sibling}function Wi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:hi(4,t,t.return),Wi(t);break;case 1:En(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Dg(t,t.return,i),Wi(t);break;case 27:oa(t.stateNode);case 26:case 5:En(t,t.return),Wi(t);break;case 22:t.memoizedState===null&&Wi(t);break;case 30:Wi(t);break;default:Wi(t)}e=e.sibling}}function Xn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,c=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:Xn(c,u,i),Jl(4,u);break;case 1:if(Xn(c,u,i),r=u,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(A){Fe(r,r.return,A)}if(r=u,c=r.updateQueue,c!==null){var v=r.stateNode;try{var S=c.shared.hiddenCallbacks;if(S!==null)for(c.shared.hiddenCallbacks=null,c=0;c<S.length;c++)_m(S[c],v)}catch(A){Fe(r,r.return,A)}}i&&g&64&&kg(u),$l(u,u.return);break;case 27:zg(u);case 26:case 5:Xn(c,u,i),i&&r===null&&g&4&&jg(u),$l(u,u.return);break;case 12:Xn(c,u,i);break;case 31:Xn(c,u,i),i&&g&4&&Ug(c,u);break;case 13:Xn(c,u,i),i&&g&4&&Vg(c,u);break;case 22:u.memoizedState===null&&Xn(c,u,i),$l(u,u.return);break;case 30:break;default:Xn(c,u,i)}t=t.sibling}}function Ou(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Bl(i))}function zu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bl(e))}function _n(e,t,i,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qg(e,t,i,r),t=t.sibling}function Qg(e,t,i,r){var c=t.flags;switch(t.tag){case 0:case 11:case 15:_n(e,t,i,r),c&2048&&Jl(9,t);break;case 1:_n(e,t,i,r);break;case 3:_n(e,t,i,r),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bl(e)));break;case 12:if(c&2048){_n(e,t,i,r),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,v=u.onPostCommit;typeof v=="function"&&v(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Fe(t,t.return,S)}}else _n(e,t,i,r);break;case 31:_n(e,t,i,r);break;case 13:_n(e,t,i,r);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?_n(e,t,i,r):ea(e,t):u._visibility&2?_n(e,t,i,r):(u._visibility|=2,Hs(e,t,i,r,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Ou(g,t);break;case 24:_n(e,t,i,r),c&2048&&zu(t.alternate,t);break;default:_n(e,t,i,r)}}function Hs(e,t,i,r,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,g=t,v=i,S=r,A=g.flags;switch(g.tag){case 0:case 11:case 15:Hs(u,g,v,S,c),Jl(8,g);break;case 23:break;case 22:var I=g.stateNode;g.memoizedState!==null?I._visibility&2?Hs(u,g,v,S,c):ea(u,g):(I._visibility|=2,Hs(u,g,v,S,c)),c&&A&2048&&Ou(g.alternate,g);break;case 24:Hs(u,g,v,S,c),c&&A&2048&&zu(g.alternate,g);break;default:Hs(u,g,v,S,c)}t=t.sibling}}function ea(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,r=t,c=r.flags;switch(r.tag){case 22:ea(i,r),c&2048&&Ou(r.alternate,r);break;case 24:ea(i,r),c&2048&&zu(r.alternate,r);break;default:ea(i,r)}t=t.sibling}}var ta=8192;function Bs(e,t,i){if(e.subtreeFlags&ta)for(e=e.child;e!==null;)Yg(e,t,i),e=e.sibling}function Yg(e,t,i){switch(e.tag){case 26:Bs(e,t,i),e.flags&ta&&e.memoizedState!==null&&G1(i,bn,e.memoizedState,e.memoizedProps);break;case 5:Bs(e,t,i);break;case 3:case 4:var r=bn;bn=Jr(e.stateNode.containerInfo),Bs(e,t,i),bn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=ta,ta=16777216,Bs(e,t,i),ta=r):Bs(e,t,i));break;default:Bs(e,t,i)}}function Xg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function na(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];wt=r,Fg(r,e)}Xg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Kg(e),e=e.sibling}function Kg(e){switch(e.tag){case 0:case 11:case 15:na(e),e.flags&2048&&hi(9,e,e.return);break;case 3:na(e);break;case 12:na(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Br(e)):na(e);break;default:na(e)}}function Br(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];wt=r,Fg(r,e)}Xg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:hi(8,t,t.return),Br(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Br(t));break;default:Br(t)}e=e.sibling}}function Fg(e,t){for(;wt!==null;){var i=wt;switch(i.tag){case 0:case 11:case 15:hi(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Bl(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,wt=r;else e:for(i=e;wt!==null;){r=wt;var c=r.sibling,u=r.return;if(Hg(r),r===i){wt=null;break e}if(c!==null){c.return=u,wt=c;break e}wt=u}}}var i1={getCacheForType:function(e){var t=Mt(mt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Mt(mt).controller.signal}},s1=typeof WeakMap=="function"?WeakMap:Map,Qe=0,$e=null,De=null,Ie=0,Ke=0,$t=null,mi=!1,Us=!1,Iu=!1,Kn=0,ct=0,gi=0,Ji=0,Lu=0,en=0,Vs=0,ia=null,Gt=null,Hu=!1,Ur=0,Pg=0,Vr=1/0,Gr=null,pi=null,vt=0,yi=null,Gs=null,Fn=0,Bu=0,Uu=null,Zg=null,sa=0,Vu=null;function tn(){return(Qe&2)!==0&&Ie!==0?Ie&-Ie:k.T!==null?Ku():dh()}function Wg(){if(en===0)if((Ie&536870912)===0||He){var e=Za;Za<<=1,(Za&3932160)===0&&(Za=262144),en=e}else en=536870912;return e=Wt.current,e!==null&&(e.flags|=32),en}function qt(e,t,i){(e===$e&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)&&(qs(e,0),vi(e,Ie,en,!1)),Cl(e,i),((Qe&2)===0||e!==$e)&&(e===$e&&((Qe&2)===0&&(Ji|=i),ct===4&&vi(e,Ie,en,!1)),An(e))}function Jg(e,t,i){if((Qe&6)!==0)throw Error(a(327));var r=!i&&(t&127)===0&&(t&e.expiredLanes)===0||wl(e,t),c=r?r1(e,t):qu(e,t,!0),u=r;do{if(c===0){Us&&!r&&vi(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!l1(i)){c=qu(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var v=e;c=ia;var S=v.current.memoizedState.isDehydrated;if(S&&(qs(v,g).flags|=256),g=qu(v,g,!1),g!==2){if(Iu&&!S){v.errorRecoveryDisabledLanes|=u,Ji|=u,c=4;break e}u=Gt,Gt=c,u!==null&&(Gt===null?Gt=u:Gt.push.apply(Gt,u))}c=g}if(u=!1,c!==2)continue}}if(c===1){qs(e,0),vi(e,t,0,!0);break}e:{switch(r=e,u=c,u){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:vi(r,t,en,!mi);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(c=Ur+300-Xt(),10<c)){if(vi(r,t,en,!mi),Ja(r,0,!0)!==0)break e;Fn=t,r.timeoutHandle=Mp($g.bind(null,r,i,Gt,Gr,Hu,t,en,Ji,Vs,mi,u,"Throttled",-0,0),c);break e}$g(r,i,Gt,Gr,Hu,t,en,Ji,Vs,mi,u,null,-0,0)}}break}while(!0);An(e)}function $g(e,t,i,r,c,u,g,v,S,A,I,H,R,O){if(e.timeoutHandle=-1,H=t.subtreeFlags,H&8192||(H&16785408)===16785408){H={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:jn},Yg(t,u,H);var ee=(u&62914560)===u?Ur-Xt():(u&4194048)===u?Pg-Xt():0;if(ee=q1(H,ee),ee!==null){Fn=u,e.cancelPendingCommit=ee(rp.bind(null,e,t,u,i,r,c,g,v,S,I,H,null,R,O)),vi(e,u,g,!A);return}}rp(e,t,u,i,r,c,g,v,S)}function l1(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var c=i[r],u=c.getSnapshot;c=c.value;try{if(!Pt(u(),c))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vi(e,t,i,r){t&=~Lu,t&=~Ji,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var c=t;0<c;){var u=31-Ft(c),g=1<<u;r[u]=-1,c&=~g}i!==0&&ch(e,i,t)}function qr(){return(Qe&6)===0?(la(0),!1):!0}function Gu(){if(De!==null){if(Ke===0)var e=De.return;else e=De,Ln=qi=null,su(e),js=null,Vl=0,e=De;for(;e!==null;)Rg(e.alternate,e),e=e.return;De=null}}function qs(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,C1(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Fn=0,Gu(),$e=e,De=i=zn(e.current,null),Ie=t,Ke=0,$t=null,mi=!1,Us=wl(e,t),Iu=!1,Vs=en=Lu=Ji=gi=ct=0,Gt=ia=null,Hu=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var c=31-Ft(r),u=1<<c;t|=e[c],r&=~u}return Kn=t,ur(),i}function ep(e,t){Te=null,k.H=Pl,t===Ds||t===vr?(t=pm(),Ke=3):t===Xc?(t=pm(),Ke=4):Ke=t===_u?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,$t=t,De===null&&(ct=1,Dr(e,on(t,e.current)))}function tp(){var e=Wt.current;return e===null?!0:(Ie&4194048)===Ie?dn===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?e===dn:!1}function np(){var e=k.H;return k.H=Pl,e===null?Pl:e}function ip(){var e=k.A;return k.A=i1,e}function Qr(){ct=4,mi||(Ie&4194048)!==Ie&&Wt.current!==null||(Us=!0),(gi&134217727)===0&&(Ji&134217727)===0||$e===null||vi($e,Ie,en,!1)}function qu(e,t,i){var r=Qe;Qe|=2;var c=np(),u=ip();($e!==e||Ie!==t)&&(Gr=null,qs(e,t)),t=!1;var g=ct;e:do try{if(Ke!==0&&De!==null){var v=De,S=$t;switch(Ke){case 8:Gu(),g=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(t=!0);var A=Ke;if(Ke=0,$t=null,Qs(e,v,S,A),i&&Us){g=0;break e}break;default:A=Ke,Ke=0,$t=null,Qs(e,v,S,A)}}a1(),g=ct;break}catch(I){ep(e,I)}while(!0);return t&&e.shellSuspendCounter++,Ln=qi=null,Qe=r,k.H=c,k.A=u,De===null&&($e=null,Ie=0,ur()),g}function a1(){for(;De!==null;)sp(De)}function r1(e,t){var i=Qe;Qe|=2;var r=np(),c=ip();$e!==e||Ie!==t?(Gr=null,Vr=Xt()+500,qs(e,t)):Us=wl(e,t);e:do try{if(Ke!==0&&De!==null){t=De;var u=$t;t:switch(Ke){case 1:Ke=0,$t=null,Qs(e,t,u,1);break;case 2:case 9:if(mm(u)){Ke=0,$t=null,lp(t);break}t=function(){Ke!==2&&Ke!==9||$e!==e||(Ke=7),An(e)},u.then(t,t);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:mm(u)?(Ke=0,$t=null,lp(t)):(Ke=0,$t=null,Qs(e,t,u,7));break;case 5:var g=null;switch(De.tag){case 26:g=De.memoizedState;case 5:case 27:var v=De;if(g?Qp(g):v.stateNode.complete){Ke=0,$t=null;var S=v.sibling;if(S!==null)De=S;else{var A=v.return;A!==null?(De=A,Yr(A)):De=null}break t}}Ke=0,$t=null,Qs(e,t,u,5);break;case 6:Ke=0,$t=null,Qs(e,t,u,6);break;case 8:Gu(),ct=6;break e;default:throw Error(a(462))}}o1();break}catch(I){ep(e,I)}while(!0);return Ln=qi=null,k.H=r,k.A=c,Qe=i,De!==null?0:($e=null,Ie=0,ur(),ct)}function o1(){for(;De!==null&&!sc();)sp(De)}function sp(e){var t=Ag(e.alternate,e,Kn);e.memoizedProps=e.pendingProps,t===null?Yr(e):De=t}function lp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Sg(i,t,t.pendingProps,t.type,void 0,Ie);break;case 11:t=Sg(i,t,t.pendingProps,t.type.render,t.ref,Ie);break;case 5:su(t);default:Rg(i,t),t=De=im(t,Kn),t=Ag(i,t,Kn)}e.memoizedProps=e.pendingProps,t===null?Yr(e):De=t}function Qs(e,t,i,r){Ln=qi=null,su(t),js=null,Vl=0;var c=t.return;try{if(Z_(e,c,t,i,Ie)){ct=1,Dr(e,on(i,e.current)),De=null;return}}catch(u){if(c!==null)throw De=c,u;ct=1,Dr(e,on(i,e.current)),De=null;return}t.flags&32768?(He||r===1?e=!0:Us||(Ie&536870912)!==0?e=!1:(mi=e=!0,(r===2||r===9||r===3||r===6)&&(r=Wt.current,r!==null&&r.tag===13&&(r.flags|=16384))),ap(t,e)):Yr(t)}function Yr(e){var t=e;do{if((t.flags&32768)!==0){ap(t,mi);return}e=t.return;var i=$_(t.alternate,t,Kn);if(i!==null){De=i;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);ct===0&&(ct=5)}function ap(e,t){do{var i=e1(e.alternate,e);if(i!==null){i.flags&=32767,De=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){De=e;return}De=e=i}while(e!==null);ct=6,De=null}function rp(e,t,i,r,c,u,g,v,S){e.cancelPendingCommit=null;do Xr();while(vt!==0);if((Qe&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(u=t.lanes|t.childLanes,u|=kc,Vb(e,i,u,g,v,S),e===$e&&(De=$e=null,Ie=0),Gs=t,yi=e,Fn=i,Bu=u,Uu=c,Zg=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,d1(Fa,function(){return dp(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=k.T,k.T=null,c=j.p,j.p=2,g=Qe,Qe|=4;try{t1(e,t,i)}finally{Qe=g,j.p=c,k.T=r}}vt=1,op(),cp(),up()}}function op(){if(vt===1){vt=0;var e=yi,t=Gs,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=k.T,k.T=null;var r=j.p;j.p=2;var c=Qe;Qe|=4;try{Gg(t,e);var u=tf,g=Fh(e.containerInfo),v=u.focusedElem,S=u.selectionRange;if(g!==v&&v&&v.ownerDocument&&Kh(v.ownerDocument.documentElement,v)){if(S!==null&&Nc(v)){var A=S.start,I=S.end;if(I===void 0&&(I=A),"selectionStart"in v)v.selectionStart=A,v.selectionEnd=Math.min(I,v.value.length);else{var H=v.ownerDocument||document,R=H&&H.defaultView||window;if(R.getSelection){var O=R.getSelection(),ee=v.textContent.length,me=Math.min(S.start,ee),We=S.end===void 0?me:Math.min(S.end,ee);!O.extend&&me>We&&(g=We,We=me,me=g);var w=Xh(v,me),T=Xh(v,We);if(w&&T&&(O.rangeCount!==1||O.anchorNode!==w.node||O.anchorOffset!==w.offset||O.focusNode!==T.node||O.focusOffset!==T.offset)){var N=H.createRange();N.setStart(w.node,w.offset),O.removeAllRanges(),me>We?(O.addRange(N),O.extend(T.node,T.offset)):(N.setEnd(T.node,T.offset),O.addRange(N))}}}}for(H=[],O=v;O=O.parentNode;)O.nodeType===1&&H.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<H.length;v++){var L=H[v];L.element.scrollLeft=L.left,L.element.scrollTop=L.top}}so=!!ef,tf=ef=null}finally{Qe=c,j.p=r,k.T=i}}e.current=t,vt=2}}function cp(){if(vt===2){vt=0;var e=yi,t=Gs,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=k.T,k.T=null;var r=j.p;j.p=2;var c=Qe;Qe|=4;try{Lg(e,t.alternate,t)}finally{Qe=c,j.p=r,k.T=i}}vt=3}}function up(){if(vt===4||vt===3){vt=0,fs();var e=yi,t=Gs,i=Fn,r=Zg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?vt=5:(vt=0,Gs=yi=null,fp(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(pi=null),rc(i),t=t.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Tl,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=k.T,c=j.p,j.p=2,k.T=null;try{for(var u=e.onRecoverableError,g=0;g<r.length;g++){var v=r[g];u(v.value,{componentStack:v.stack})}}finally{k.T=t,j.p=c}}(Fn&3)!==0&&Xr(),An(e),c=e.pendingLanes,(i&261930)!==0&&(c&42)!==0?e===Vu?sa++:(sa=0,Vu=e):sa=0,la(0)}}function fp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Bl(t)))}function Xr(){return op(),cp(),up(),dp()}function dp(){if(vt!==5)return!1;var e=yi,t=Bu;Bu=0;var i=rc(Fn),r=k.T,c=j.p;try{j.p=32>i?32:i,k.T=null,i=Uu,Uu=null;var u=yi,g=Fn;if(vt=0,Gs=yi=null,Fn=0,(Qe&6)!==0)throw Error(a(331));var v=Qe;if(Qe|=4,Kg(u.current),Qg(u,u.current,g,i),Qe=v,la(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Tl,u)}catch{}return!0}finally{j.p=c,k.T=r,fp(e,t)}}function hp(e,t,i){t=on(i,t),t=bu(e.stateNode,t,2),e=ui(e,t,2),e!==null&&(Cl(e,2),An(e))}function Fe(e,t,i){if(e.tag===3)hp(e,e,i);else for(;t!==null;){if(t.tag===3){hp(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pi===null||!pi.has(r))){e=on(i,e),i=mg(2),r=ui(t,i,2),r!==null&&(gg(i,r,t,e),Cl(r,2),An(r));break}}t=t.return}}function Qu(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new s1;var c=new Set;r.set(t,c)}else c=r.get(t),c===void 0&&(c=new Set,r.set(t,c));c.has(i)||(Iu=!0,c.add(i),e=c1.bind(null,e,t,i),t.then(e,e))}function c1(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,$e===e&&(Ie&i)===i&&(ct===4||ct===3&&(Ie&62914560)===Ie&&300>Xt()-Ur?(Qe&2)===0&&qs(e,0):Lu|=i,Vs===Ie&&(Vs=0)),An(e)}function mp(e,t){t===0&&(t=oh()),e=Ui(e,t),e!==null&&(Cl(e,t),An(e))}function u1(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),mp(e,i)}function f1(e,t){var i=0;switch(e.tag){case 31:case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}r!==null&&r.delete(t),mp(e,i)}function d1(e,t){return sn(e,t)}var Kr=null,Ys=null,Yu=!1,Fr=!1,Xu=!1,bi=0;function An(e){e!==Ys&&e.next===null&&(Ys===null?Kr=Ys=e:Ys=Ys.next=e),Fr=!0,Yu||(Yu=!0,m1())}function la(e,t){if(!Xu&&Fr){Xu=!0;do for(var i=!1,r=Kr;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var u=0;else{var g=r.suspendedLanes,v=r.pingedLanes;u=(1<<31-Ft(42|e)+1)-1,u&=c&~(g&~v),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,vp(r,u))}else u=Ie,u=Ja(r,r===$e?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(u&3)===0||wl(r,u)||(i=!0,vp(r,u));r=r.next}while(i);Xu=!1}}function h1(){gp()}function gp(){Fr=Yu=!1;var e=0;bi!==0&&w1()&&(e=bi);for(var t=Xt(),i=null,r=Kr;r!==null;){var c=r.next,u=pp(r,t);u===0?(r.next=null,i===null?Kr=c:i.next=c,c===null&&(Ys=i)):(i=r,(e!==0||(u&3)!==0)&&(Fr=!0)),r=c}vt!==0&&vt!==5||la(e),bi!==0&&(bi=0)}function pp(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-Ft(u),v=1<<g,S=c[g];S===-1?((v&i)===0||(v&r)!==0)&&(c[g]=Ub(v,t)):S<=t&&(e.expiredLanes|=v),u&=~v}if(t=$e,i=Ie,i=Ja(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,i===0||e===t&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Sl(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||wl(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(r!==null&&Sl(r),rc(i)){case 2:case 8:i=ah;break;case 32:i=Fa;break;case 268435456:i=rh;break;default:i=Fa}return r=yp.bind(null,e),i=sn(i,r),e.callbackPriority=t,e.callbackNode=i,t}return r!==null&&r!==null&&Sl(r),e.callbackPriority=2,e.callbackNode=null,2}function yp(e,t){if(vt!==0&&vt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Xr()&&e.callbackNode!==i)return null;var r=Ie;return r=Ja(e,e===$e?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Jg(e,r,t),pp(e,Xt()),e.callbackNode!=null&&e.callbackNode===i?yp.bind(null,e):null)}function vp(e,t){if(Xr())return null;Jg(e,t,!0)}function m1(){N1(function(){(Qe&6)!==0?sn(lh,h1):gp()})}function Ku(){if(bi===0){var e=Rs;e===0&&(e=Pa,Pa<<=1,(Pa&261888)===0&&(Pa=256)),bi=e}return bi}function bp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:nr(""+e)}function _p(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function g1(e,t,i,r,c){if(t==="submit"&&i&&i.stateNode===c){var u=bp((c[Lt]||null).action),g=r.submitter;g&&(t=(t=g[Lt]||null)?bp(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var v=new ar("action","action",null,r,c);e.push({event:v,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(bi!==0){var S=g?_p(c,g):new FormData(c);hu(i,{pending:!0,data:S,method:c.method,action:u},null,S)}}else typeof u=="function"&&(v.preventDefault(),S=g?_p(c,g):new FormData(c),hu(i,{pending:!0,data:S,method:c.method,action:u},u,S))},currentTarget:c}]})}}for(var Fu=0;Fu<Rc.length;Fu++){var Pu=Rc[Fu],p1=Pu.toLowerCase(),y1=Pu[0].toUpperCase()+Pu.slice(1);vn(p1,"on"+y1)}vn(Wh,"onAnimationEnd"),vn(Jh,"onAnimationIteration"),vn($h,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(j_,"onTransitionRun"),vn(O_,"onTransitionStart"),vn(z_,"onTransitionCancel"),vn(em,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(aa));function xp(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],c=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var g=r.length-1;0<=g;g--){var v=r[g],S=v.instance,A=v.currentTarget;if(v=v.listener,S!==u&&c.isPropagationStopped())break e;u=v,c.currentTarget=A;try{u(c)}catch(I){cr(I)}c.currentTarget=null,u=S}else for(g=0;g<r.length;g++){if(v=r[g],S=v.instance,A=v.currentTarget,v=v.listener,S!==u&&c.isPropagationStopped())break e;u=v,c.currentTarget=A;try{u(c)}catch(I){cr(I)}c.currentTarget=null,u=S}}}}function je(e,t){var i=t[oc];i===void 0&&(i=t[oc]=new Set);var r=e+"__bubble";i.has(r)||(Sp(t,e,2,!1),i.add(r))}function Zu(e,t,i){var r=0;t&&(r|=4),Sp(i,e,r,t)}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Wu(e){if(!e[Pr]){e[Pr]=!0,gh.forEach(function(i){i!=="selectionchange"&&(v1.has(i)||Zu(i,!1,e),Zu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pr]||(t[Pr]=!0,Zu("selectionchange",!1,t))}}function Sp(e,t,i,r){switch(Wp(t)){case 2:var c=X1;break;case 8:c=K1;break;default:c=hf}i=c.bind(null,t,i,e),c=void 0,!yc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Ju(e,t,i,r,c){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var g=r.tag;if(g===3||g===4){var v=r.stateNode.containerInfo;if(v===c)break;if(g===4)for(g=r.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;v!==null;){if(g=hs(v),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){r=u=g;continue e}v=v.parentNode}}r=r.return}Eh(function(){var A=u,I=gc(i),H=[];e:{var R=tm.get(e);if(R!==void 0){var O=ar,ee=e;switch(e){case"keypress":if(sr(i)===0)break e;case"keydown":case"keyup":O=f_;break;case"focusin":ee="focus",O=xc;break;case"focusout":ee="blur",O=xc;break;case"beforeblur":case"afterblur":O=xc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=$b;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=m_;break;case Wh:case Jh:case $h:O=n_;break;case em:O=p_;break;case"scroll":case"scrollend":O=Wb;break;case"wheel":O=v_;break;case"copy":case"cut":case"paste":O=s_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Dh;break;case"toggle":case"beforetoggle":O=__}var me=(t&4)!==0,We=!me&&(e==="scroll"||e==="scrollend"),w=me?R!==null?R+"Capture":null:R;me=[];for(var T=A,N;T!==null;){var L=T;if(N=L.stateNode,L=L.tag,L!==5&&L!==26&&L!==27||N===null||w===null||(L=Al(T,w),L!=null&&me.push(ra(T,L,N))),We)break;T=T.return}0<me.length&&(R=new O(R,ee,null,i,I),H.push({event:R,listeners:me}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",R&&i!==mc&&(ee=i.relatedTarget||i.fromElement)&&(hs(ee)||ee[ds]))break e;if((O||R)&&(R=I.window===I?I:(R=I.ownerDocument)?R.defaultView||R.parentWindow:window,O?(ee=i.relatedTarget||i.toElement,O=A,ee=ee?hs(ee):null,ee!==null&&(We=f(ee),me=ee.tag,ee!==We||me!==5&&me!==27&&me!==6)&&(ee=null)):(O=null,ee=A),O!==ee)){if(me=Rh,L="onMouseLeave",w="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(me=Dh,L="onPointerLeave",w="onPointerEnter",T="pointer"),We=O==null?R:El(O),N=ee==null?R:El(ee),R=new me(L,T+"leave",O,i,I),R.target=We,R.relatedTarget=N,L=null,hs(I)===A&&(me=new me(w,T+"enter",ee,i,I),me.target=N,me.relatedTarget=We,L=me),We=L,O&&ee)t:{for(me=b1,w=O,T=ee,N=0,L=w;L;L=me(L))N++;L=0;for(var ce=T;ce;ce=me(ce))L++;for(;0<N-L;)w=me(w),N--;for(;0<L-N;)T=me(T),L--;for(;N--;){if(w===T||T!==null&&w===T.alternate){me=w;break t}w=me(w),T=me(T)}me=null}else me=null;O!==null&&Tp(H,R,O,me,!1),ee!==null&&We!==null&&Tp(H,We,ee,me,!0)}}e:{if(R=A?El(A):window,O=R.nodeName&&R.nodeName.toLowerCase(),O==="select"||O==="input"&&R.type==="file")var Ue=Uh;else if(Hh(R))if(Vh)Ue=R_;else{Ue=A_;var se=E_}else O=R.nodeName,!O||O.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?A&&hc(A.elementType)&&(Ue=Uh):Ue=M_;if(Ue&&(Ue=Ue(e,A))){Bh(H,Ue,i,I);break e}se&&se(e,R,A),e==="focusout"&&A&&R.type==="number"&&A.memoizedProps.value!=null&&dc(R,"number",R.value)}switch(se=A?El(A):window,e){case"focusin":(Hh(se)||se.contentEditable==="true")&&(Ss=se,Ec=A,Il=null);break;case"focusout":Il=Ec=Ss=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":Ac=!1,Ph(H,i,I);break;case"selectionchange":if(D_)break;case"keydown":case"keyup":Ph(H,i,I)}var we;if(Tc)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else xs?Ih(e,i)&&(Le="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Le="onCompositionStart");Le&&(jh&&i.locale!=="ko"&&(xs||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&xs&&(we=Ah()):(ii=I,vc="value"in ii?ii.value:ii.textContent,xs=!0)),se=Zr(A,Le),0<se.length&&(Le=new kh(Le,e,null,i,I),H.push({event:Le,listeners:se}),we?Le.data=we:(we=Lh(i),we!==null&&(Le.data=we)))),(we=S_?T_(e,i):w_(e,i))&&(Le=Zr(A,"onBeforeInput"),0<Le.length&&(se=new kh("onBeforeInput","beforeinput",null,i,I),H.push({event:se,listeners:Le}),se.data=we)),g1(H,e,A,i,I)}xp(H,t)})}function ra(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Zr(e,t){for(var i=t+"Capture",r=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=Al(e,i),c!=null&&r.unshift(ra(e,c,u)),c=Al(e,t),c!=null&&r.push(ra(e,c,u))),e.tag===3)return r;e=e.return}return[]}function b1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Tp(e,t,i,r,c){for(var u=t._reactName,g=[];i!==null&&i!==r;){var v=i,S=v.alternate,A=v.stateNode;if(v=v.tag,S!==null&&S===r)break;v!==5&&v!==26&&v!==27||A===null||(S=A,c?(A=Al(i,u),A!=null&&g.unshift(ra(i,A,S))):c||(A=Al(i,u),A!=null&&g.push(ra(i,A,S)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var _1=/\r\n?/g,x1=/\u0000|\uFFFD/g;function wp(e){return(typeof e=="string"?e:""+e).replace(_1,`
`).replace(x1,"")}function Cp(e,t){return t=wp(t),wp(e)===t}function Ze(e,t,i,r,c,u){switch(i){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||vs(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&vs(e,""+r);break;case"className":er(e,"class",r);break;case"tabIndex":er(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":er(e,i,r);break;case"style":Ch(e,r,u);break;case"data":if(t!=="object"){er(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=nr(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&Ze(e,t,"name",c.name,c,null),Ze(e,t,"formEncType",c.formEncType,c,null),Ze(e,t,"formMethod",c.formMethod,c,null),Ze(e,t,"formTarget",c.formTarget,c,null)):(Ze(e,t,"encType",c.encType,c,null),Ze(e,t,"method",c.method,c,null),Ze(e,t,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=nr(""+r),e.setAttribute(i,r);break;case"onClick":r!=null&&(e.onclick=jn);break;case"onScroll":r!=null&&je("scroll",e);break;case"onScrollEnd":r!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}i=nr(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":r===!0?e.setAttribute(i,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":je("beforetoggle",e),je("toggle",e),$a(e,"popover",r);break;case"xlinkActuate":Dn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Dn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Dn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Dn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Dn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Dn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Dn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Dn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Dn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":$a(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Pb.get(i)||i,$a(e,i,r))}}function $u(e,t,i,r,c,u){switch(i){case"style":Ch(e,r,u);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"children":typeof r=="string"?vs(e,r):(typeof r=="number"||typeof r=="bigint")&&vs(e,""+r);break;case"onScroll":r!=null&&je("scroll",e);break;case"onScrollEnd":r!=null&&je("scrollend",e);break;case"onClick":r!=null&&(e.onclick=jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ph.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),t=i.slice(2,c?i.length-7:void 0),u=e[Lt]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof r=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,r,c);break e}i in e?e[i]=r:r===!0?e.setAttribute(i,""):$a(e,i,r)}}}function kt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var r=!1,c=!1,u;for(u in i)if(i.hasOwnProperty(u)){var g=i[u];if(g!=null)switch(u){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ze(e,t,u,g,i,null)}}c&&Ze(e,t,"srcSet",i.srcSet,i,null),r&&Ze(e,t,"src",i.src,i,null);return;case"input":je("invalid",e);var v=u=g=c=null,S=null,A=null;for(r in i)if(i.hasOwnProperty(r)){var I=i[r];if(I!=null)switch(r){case"name":c=I;break;case"type":g=I;break;case"checked":S=I;break;case"defaultChecked":A=I;break;case"value":u=I;break;case"defaultValue":v=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(a(137,t));break;default:Ze(e,t,r,I,i,null)}}xh(e,u,v,S,A,g,c,!1);return;case"select":je("invalid",e),r=g=u=null;for(c in i)if(i.hasOwnProperty(c)&&(v=i[c],v!=null))switch(c){case"value":u=v;break;case"defaultValue":g=v;break;case"multiple":r=v;default:Ze(e,t,c,v,i,null)}t=u,i=g,e.multiple=!!r,t!=null?ys(e,!!r,t,!1):i!=null&&ys(e,!!r,i,!0);return;case"textarea":je("invalid",e),u=c=r=null;for(g in i)if(i.hasOwnProperty(g)&&(v=i[g],v!=null))switch(g){case"value":r=v;break;case"defaultValue":c=v;break;case"children":u=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(a(91));break;default:Ze(e,t,g,v,i,null)}Th(e,r,c,u);return;case"option":for(S in i)i.hasOwnProperty(S)&&(r=i[S],r!=null)&&(S==="selected"?e.selected=r&&typeof r!="function"&&typeof r!="symbol":Ze(e,t,S,r,i,null));return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(r=0;r<aa.length;r++)je(aa[r],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(A in i)if(i.hasOwnProperty(A)&&(r=i[A],r!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ze(e,t,A,r,i,null)}return;default:if(hc(t)){for(I in i)i.hasOwnProperty(I)&&(r=i[I],r!==void 0&&$u(e,t,I,r,i,void 0));return}}for(v in i)i.hasOwnProperty(v)&&(r=i[v],r!=null&&Ze(e,t,v,r,i,null))}function S1(e,t,i,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,g=null,v=null,S=null,A=null,I=null;for(O in i){var H=i[O];if(i.hasOwnProperty(O)&&H!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":S=H;default:r.hasOwnProperty(O)||Ze(e,t,O,null,r,H)}}for(var R in r){var O=r[R];if(H=i[R],r.hasOwnProperty(R)&&(O!=null||H!=null))switch(R){case"type":u=O;break;case"name":c=O;break;case"checked":A=O;break;case"defaultChecked":I=O;break;case"value":g=O;break;case"defaultValue":v=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(137,t));break;default:O!==H&&Ze(e,t,R,O,r,H)}}fc(e,g,v,S,A,I,u,c);return;case"select":O=g=v=R=null;for(u in i)if(S=i[u],i.hasOwnProperty(u)&&S!=null)switch(u){case"value":break;case"multiple":O=S;default:r.hasOwnProperty(u)||Ze(e,t,u,null,r,S)}for(c in r)if(u=r[c],S=i[c],r.hasOwnProperty(c)&&(u!=null||S!=null))switch(c){case"value":R=u;break;case"defaultValue":v=u;break;case"multiple":g=u;default:u!==S&&Ze(e,t,c,u,r,S)}t=v,i=g,r=O,R!=null?ys(e,!!i,R,!1):!!r!=!!i&&(t!=null?ys(e,!!i,t,!0):ys(e,!!i,i?[]:"",!1));return;case"textarea":O=R=null;for(v in i)if(c=i[v],i.hasOwnProperty(v)&&c!=null&&!r.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Ze(e,t,v,null,r,c)}for(g in r)if(c=r[g],u=i[g],r.hasOwnProperty(g)&&(c!=null||u!=null))switch(g){case"value":R=c;break;case"defaultValue":O=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==u&&Ze(e,t,g,c,r,u)}Sh(e,R,O);return;case"option":for(var ee in i)R=i[ee],i.hasOwnProperty(ee)&&R!=null&&!r.hasOwnProperty(ee)&&(ee==="selected"?e.selected=!1:Ze(e,t,ee,null,r,R));for(S in r)R=r[S],O=i[S],r.hasOwnProperty(S)&&R!==O&&(R!=null||O!=null)&&(S==="selected"?e.selected=R&&typeof R!="function"&&typeof R!="symbol":Ze(e,t,S,R,r,O));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in i)R=i[me],i.hasOwnProperty(me)&&R!=null&&!r.hasOwnProperty(me)&&Ze(e,t,me,null,r,R);for(A in r)if(R=r[A],O=i[A],r.hasOwnProperty(A)&&R!==O&&(R!=null||O!=null))switch(A){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(137,t));break;default:Ze(e,t,A,R,r,O)}return;default:if(hc(t)){for(var We in i)R=i[We],i.hasOwnProperty(We)&&R!==void 0&&!r.hasOwnProperty(We)&&$u(e,t,We,void 0,r,R);for(I in r)R=r[I],O=i[I],!r.hasOwnProperty(I)||R===O||R===void 0&&O===void 0||$u(e,t,I,R,r,O);return}}for(var w in i)R=i[w],i.hasOwnProperty(w)&&R!=null&&!r.hasOwnProperty(w)&&Ze(e,t,w,null,r,R);for(H in r)R=r[H],O=i[H],!r.hasOwnProperty(H)||R===O||R==null&&O==null||Ze(e,t,H,R,r,O)}function Np(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function T1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),r=0;r<i.length;r++){var c=i[r],u=c.transferSize,g=c.initiatorType,v=c.duration;if(u&&v&&Np(g)){for(g=0,v=c.responseEnd,r+=1;r<i.length;r++){var S=i[r],A=S.startTime;if(A>v)break;var I=S.transferSize,H=S.initiatorType;I&&Np(H)&&(S=S.responseEnd,g+=I*(S<v?1:(v-A)/(S-A)))}if(--r,t+=8*(u+g)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ef=null,tf=null;function Wr(e){return e.nodeType===9?e:e.ownerDocument}function Ep(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ap(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function nf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sf=null;function w1(){var e=window.event;return e&&e.type==="popstate"?e===sf?!1:(sf=e,!0):(sf=null,!1)}var Mp=typeof setTimeout=="function"?setTimeout:void 0,C1=typeof clearTimeout=="function"?clearTimeout:void 0,Rp=typeof Promise=="function"?Promise:void 0,N1=typeof queueMicrotask=="function"?queueMicrotask:typeof Rp<"u"?function(e){return Rp.resolve(null).then(e).catch(E1)}:Mp;function E1(e){setTimeout(function(){throw e})}function _i(e){return e==="head"}function kp(e,t){var i=t,r=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"||i==="/&"){if(r===0){e.removeChild(c),Ps(t);return}r--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")r++;else if(i==="html")oa(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,oa(i);for(var u=i.firstChild;u;){var g=u.nextSibling,v=u.nodeName;u[Nl]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=g}}else i==="body"&&oa(e.ownerDocument.body);i=c}while(i);Ps(t)}function Dp(e,t){var i=e;e=0;do{var r=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=r}while(i)}function lf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":lf(i),cc(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function A1(e,t,i,r){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Nl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=hn(e.nextSibling),e===null)break}return null}function M1(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=hn(e.nextSibling),e===null))return null;return e}function jp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=hn(e.nextSibling),e===null))return null;return e}function af(e){return e.data==="$?"||e.data==="$~"}function rf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function R1(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var r=function(){t(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var of=null;function Op(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return hn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function zp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Ip(e,t,i){switch(t=Wr(i),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function oa(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);cc(e)}var mn=new Map,Lp=new Set;function Jr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Pn=j.d;j.d={f:k1,r:D1,D:j1,C:O1,L:z1,m:I1,X:H1,S:L1,M:B1};function k1(){var e=Pn.f(),t=qr();return e||t}function D1(e){var t=ms(e);t!==null&&t.tag===5&&t.type==="form"?eg(t):Pn.r(e)}var Xs=typeof document>"u"?null:document;function Hp(e,t,i){var r=Xs;if(r&&typeof t=="string"&&t){var c=an(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),Lp.has(c)||(Lp.add(c),e={rel:e,crossOrigin:i,href:t},r.querySelector(c)===null&&(t=r.createElement("link"),kt(t,"link",e),Tt(t),r.head.appendChild(t)))}}function j1(e){Pn.D(e),Hp("dns-prefetch",e,null)}function O1(e,t){Pn.C(e,t),Hp("preconnect",e,t)}function z1(e,t,i){Pn.L(e,t,i);var r=Xs;if(r&&e&&t){var c='link[rel="preload"][as="'+an(t)+'"]';t==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+an(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+an(i.imageSizes)+'"]')):c+='[href="'+an(e)+'"]';var u=c;switch(t){case"style":u=Ks(e);break;case"script":u=Fs(e)}mn.has(u)||(e=b({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),mn.set(u,e),r.querySelector(c)!==null||t==="style"&&r.querySelector(ca(u))||t==="script"&&r.querySelector(ua(u))||(t=r.createElement("link"),kt(t,"link",e),Tt(t),r.head.appendChild(t)))}}function I1(e,t){Pn.m(e,t);var i=Xs;if(i&&e){var r=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+an(r)+'"][href="'+an(e)+'"]',u=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Fs(e)}if(!mn.has(u)&&(e=b({rel:"modulepreload",href:e},t),mn.set(u,e),i.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ua(u)))return}r=i.createElement("link"),kt(r,"link",e),Tt(r),i.head.appendChild(r)}}}function L1(e,t,i){Pn.S(e,t,i);var r=Xs;if(r&&e){var c=gs(r).hoistableStyles,u=Ks(e);t=t||"default";var g=c.get(u);if(!g){var v={loading:0,preload:null};if(g=r.querySelector(ca(u)))v.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},i),(i=mn.get(u))&&cf(e,i);var S=g=r.createElement("link");Tt(S),kt(S,"link",e),S._p=new Promise(function(A,I){S.onload=A,S.onerror=I}),S.addEventListener("load",function(){v.loading|=1}),S.addEventListener("error",function(){v.loading|=2}),v.loading|=4,$r(g,t,r)}g={type:"stylesheet",instance:g,count:1,state:v},c.set(u,g)}}}function H1(e,t){Pn.X(e,t);var i=Xs;if(i&&e){var r=gs(i).hoistableScripts,c=Fs(e),u=r.get(c);u||(u=i.querySelector(ua(c)),u||(e=b({src:e,async:!0},t),(t=mn.get(c))&&uf(e,t),u=i.createElement("script"),Tt(u),kt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(c,u))}}function B1(e,t){Pn.M(e,t);var i=Xs;if(i&&e){var r=gs(i).hoistableScripts,c=Fs(e),u=r.get(c);u||(u=i.querySelector(ua(c)),u||(e=b({src:e,async:!0,type:"module"},t),(t=mn.get(c))&&uf(e,t),u=i.createElement("script"),Tt(u),kt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(c,u))}}function Bp(e,t,i,r){var c=(c=_e.current)?Jr(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Ks(i.href),i=gs(c).hoistableStyles,r=i.get(t),r||(r={type:"style",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ks(i.href);var u=gs(c).hoistableStyles,g=u.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=c.querySelector(ca(e)))&&!u._p&&(g.instance=u,g.state.loading=5),mn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},mn.set(e,i),u||U1(c,e,i,g.state))),t&&r===null)throw Error(a(528,""));return g}if(t&&r!==null)throw Error(a(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Fs(i),i=gs(c).hoistableScripts,r=i.get(t),r||(r={type:"script",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ks(e){return'href="'+an(e)+'"'}function ca(e){return'link[rel="stylesheet"]['+e+"]"}function Up(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function U1(e,t,i,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),kt(t,"link",i),Tt(t),e.head.appendChild(t))}function Fs(e){return'[src="'+an(e)+'"]'}function ua(e){return"script[async]"+e}function Vp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+an(i.href)+'"]');if(r)return t.instance=r,Tt(r),r;var c=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Tt(r),kt(r,"style",c),$r(r,i.precedence,e),t.instance=r;case"stylesheet":c=Ks(i.href);var u=e.querySelector(ca(c));if(u)return t.state.loading|=4,t.instance=u,Tt(u),u;r=Up(i),(c=mn.get(c))&&cf(r,c),u=(e.ownerDocument||e).createElement("link"),Tt(u);var g=u;return g._p=new Promise(function(v,S){g.onload=v,g.onerror=S}),kt(u,"link",r),t.state.loading|=4,$r(u,i.precedence,e),t.instance=u;case"script":return u=Fs(i.src),(c=e.querySelector(ua(u)))?(t.instance=c,Tt(c),c):(r=i,(c=mn.get(u))&&(r=b({},i),uf(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),Tt(c),kt(c,"link",r),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,$r(r,i.precedence,e));return t.instance}function $r(e,t,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,u=c,g=0;g<r.length;g++){var v=r[g];if(v.dataset.precedence===t)u=v;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function cf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function uf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var eo=null;function Gp(e,t,i){if(eo===null){var r=new Map,c=eo=new Map;c.set(i,r)}else c=eo,r=c.get(i),r||(r=new Map,c.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var u=i[c];if(!(u[Nl]||u[Et]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var v=r.get(g);v?v.push(u):r.set(g,[u])}}return r}function qp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function V1(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Qp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function G1(e,t,i,r){if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=Ks(r.href),u=t.querySelector(ca(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=to.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,Tt(u);return}u=t.ownerDocument||t,r=Up(r),(c=mn.get(c))&&cf(r,c),u=u.createElement("link"),Tt(u);var g=u;g._p=new Promise(function(v,S){g.onload=v,g.onerror=S}),kt(u,"link",r),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=to.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var ff=0;function q1(e,t){return e.stylesheets&&e.count===0&&io(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var r=setTimeout(function(){if(e.stylesheets&&io(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&ff===0&&(ff=62500*T1());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&io(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>ff?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(c)}}:null}function to(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)io(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var no=null;function io(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,no=new Map,t.forEach(Q1,e),no=null,to.call(e))}function Q1(e,t){if(!(t.state.loading&4)){var i=no.get(e);if(i)var r=i.get(null);else{i=new Map,no.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var g=c[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),r=g)}r&&i.set(null,r)}c=t.instance,g=c.getAttribute("data-precedence"),u=i.get(g)||r,u===r&&i.set(null,c),i.set(g,c),this.count++,r=to.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var fa={$$typeof:G,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function Y1(e,t,i,r,c,u,g,v,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lc(0),this.hiddenUpdates=lc(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Yp(e,t,i,r,c,u,g,v,S,A,I,H){return e=new Y1(e,t,i,g,S,A,I,H,v),t=1,u===!0&&(t|=24),u=Zt(3,null,null,t),e.current=u,u.stateNode=e,t=qc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:r,isDehydrated:i,cache:t},Kc(u),e}function Xp(e){return e?(e=Cs,e):Cs}function Kp(e,t,i,r,c,u){c=Xp(c),r.context===null?r.context=c:r.pendingContext=c,r=ci(t),r.payload={element:i},u=u===void 0?null:u,u!==null&&(r.callback=u),i=ui(e,r,t),i!==null&&(qt(i,e,t),ql(i,e,t))}function Fp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function df(e,t){Fp(e,t),(e=e.alternate)&&Fp(e,t)}function Pp(e){if(e.tag===13||e.tag===31){var t=Ui(e,67108864);t!==null&&qt(t,e,67108864),df(e,67108864)}}function Zp(e){if(e.tag===13||e.tag===31){var t=tn();t=ac(t);var i=Ui(e,t);i!==null&&qt(i,e,t),df(e,t)}}var so=!0;function X1(e,t,i,r){var c=k.T;k.T=null;var u=j.p;try{j.p=2,hf(e,t,i,r)}finally{j.p=u,k.T=c}}function K1(e,t,i,r){var c=k.T;k.T=null;var u=j.p;try{j.p=8,hf(e,t,i,r)}finally{j.p=u,k.T=c}}function hf(e,t,i,r){if(so){var c=mf(r);if(c===null)Ju(e,t,r,lo,i),Jp(e,r);else if(P1(c,e,t,i,r))r.stopPropagation();else if(Jp(e,r),t&4&&-1<F1.indexOf(e)){for(;c!==null;){var u=ms(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=zi(u.pendingLanes);if(g!==0){var v=u;for(v.pendingLanes|=2,v.entangledLanes|=2;g;){var S=1<<31-Ft(g);v.entanglements[1]|=S,g&=~S}An(u),(Qe&6)===0&&(Vr=Xt()+500,la(0))}}break;case 31:case 13:v=Ui(u,2),v!==null&&qt(v,u,2),qr(),df(u,2)}if(u=mf(r),u===null&&Ju(e,t,r,lo,i),u===c)break;c=u}c!==null&&r.stopPropagation()}else Ju(e,t,r,null,i)}}function mf(e){return e=gc(e),gf(e)}var lo=null;function gf(e){if(lo=null,e=hs(e),e!==null){var t=f(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lo=e,null}function Wp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jb()){case lh:return 2;case ah:return 8;case Fa:case Ob:return 32;case rh:return 268435456;default:return 32}default:return 32}}var pf=!1,xi=null,Si=null,Ti=null,da=new Map,ha=new Map,wi=[],F1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jp(e,t){switch(e){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":da.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(t.pointerId)}}function ma(e,t,i,r,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:u,targetContainers:[c]},t!==null&&(t=ms(t),t!==null&&Pp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function P1(e,t,i,r,c){switch(t){case"focusin":return xi=ma(xi,e,t,i,r,c),!0;case"dragenter":return Si=ma(Si,e,t,i,r,c),!0;case"mouseover":return Ti=ma(Ti,e,t,i,r,c),!0;case"pointerover":var u=c.pointerId;return da.set(u,ma(da.get(u)||null,e,t,i,r,c)),!0;case"gotpointercapture":return u=c.pointerId,ha.set(u,ma(ha.get(u)||null,e,t,i,r,c)),!0}return!1}function $p(e){var t=hs(e.target);if(t!==null){var i=f(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,hh(e.priority,function(){Zp(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,hh(e.priority,function(){Zp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ao(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=mf(e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);mc=r,i.target.dispatchEvent(r),mc=null}else return t=ms(i),t!==null&&Pp(t),e.blockedOn=i,!1;t.shift()}return!0}function e0(e,t,i){ao(e)&&i.delete(t)}function Z1(){pf=!1,xi!==null&&ao(xi)&&(xi=null),Si!==null&&ao(Si)&&(Si=null),Ti!==null&&ao(Ti)&&(Ti=null),da.forEach(e0),ha.forEach(e0)}function ro(e,t){e.blockedOn===t&&(e.blockedOn=null,pf||(pf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Z1)))}var oo=null;function t0(e){oo!==e&&(oo=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){oo===e&&(oo=null);for(var t=0;t<e.length;t+=3){var i=e[t],r=e[t+1],c=e[t+2];if(typeof r!="function"){if(gf(r||i)===null)continue;break}var u=ms(i);u!==null&&(e.splice(t,3),t-=3,hu(u,{pending:!0,data:c,method:i.method,action:r},r,c))}}))}function Ps(e){function t(S){return ro(S,e)}xi!==null&&ro(xi,e),Si!==null&&ro(Si,e),Ti!==null&&ro(Ti,e),da.forEach(t),ha.forEach(t);for(var i=0;i<wi.length;i++){var r=wi[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<wi.length&&(i=wi[0],i.blockedOn===null);)$p(i),i.blockedOn===null&&wi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(r=0;r<i.length;r+=3){var c=i[r],u=i[r+1],g=c[Lt]||null;if(typeof u=="function")g||t0(i);else if(g){var v=null;if(u&&u.hasAttribute("formAction")){if(c=u,g=u[Lt]||null)v=g.formAction;else if(gf(c)!==null)continue}else v=g.action;typeof v=="function"?i[r+1]=v:(i.splice(r,3),r-=3),t0(i)}}}function n0(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),r||setTimeout(i,20)}function i(){if(!r&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function yf(e){this._internalRoot=e}co.prototype.render=yf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var i=t.current,r=tn();Kp(i,r,e,t,null,null)},co.prototype.unmount=yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kp(e.current,2,null,e,null,null),qr(),t[ds]=null}};function co(e){this._internalRoot=e}co.prototype.unstable_scheduleHydration=function(e){if(e){var t=dh();e={blockedOn:null,target:e,priority:t};for(var i=0;i<wi.length&&t!==0&&t<wi[i].priority;i++);wi.splice(i,0,e),i===0&&$p(e)}};var i0=n.version;if(i0!=="19.2.4")throw Error(a(527,i0,"19.2.4"));j.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=y(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var W1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uo.isDisabled&&uo.supportsFiber)try{Tl=uo.inject(W1),Kt=uo}catch{}}return ga.createRoot=function(e,t){if(!o(e))throw Error(a(299));var i=!1,r="",c=ug,u=fg,g=dg;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError)),t=Yp(e,1,!1,null,null,i,r,null,c,u,g,n0),e[ds]=t.current,Wu(e),new yf(t)},ga.hydrateRoot=function(e,t,i){if(!o(e))throw Error(a(299));var r=!1,c="",u=ug,g=fg,v=dg,S=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.formState!==void 0&&(S=i.formState)),t=Yp(e,1,!0,t,i??null,r,c,S,u,g,v,n0),t.context=Xp(null),i=t.current,r=tn(),r=ac(r),c=ci(r),c.callback=null,ui(i,c,r),i=r,t.current.lanes=i,Cl(t,i),An(t),e[ds]=t.current,Wu(e),new co(t)},ga.version="19.2.4",ga}var c0;function ox(){if(c0)return vf.exports;c0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),vf.exports=rx(),vf.exports}var cx=ox();const ux="modulepreload",fx=function(s){return"/"+s},u0={},Sa=function(n,l,a){let o=Promise.resolve();if(l&&l.length>0){let p=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");o=p(l.map(y=>{if(y=fx(y),y in u0)return;u0[y]=!0;const x=y.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${b}`))return;const _=document.createElement("link");if(_.rel=x?"stylesheet":ux,x||(_.as="script"),_.crossOrigin="",_.href=y,h&&_.setAttribute("nonce",h),document.head.appendChild(_),x)return new Promise((C,z)=>{_.addEventListener("load",C),_.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${y}`)))})}))}function f(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return o.then(d=>{for(const h of d||[])h.status==="rejected"&&f(h.reason);return n().catch(f)})},f0=s=>{let n;const l=new Set,a=(y,x)=>{const b=typeof y=="function"?y(n):y;if(!Object.is(b,n)){const _=n;n=x??(typeof b!="object"||b===null)?b:Object.assign({},n,b),l.forEach(C=>C(n,_))}},o=()=>n,h={setState:a,getState:o,getInitialState:()=>p,subscribe:y=>(l.add(y),()=>l.delete(y))},p=n=s(a,o,h);return h},dx=(s=>s?f0(s):f0),hx=s=>s;function mx(s,n=hx){const l=Ce.useSyncExternalStore(s.subscribe,Ce.useCallback(()=>n(s.getState()),[s,n]),Ce.useCallback(()=>n(s.getInitialState()),[s,n]));return Ce.useDebugValue(l),l}const d0=s=>{const n=dx(s),l=a=>mx(n,a);return Object.assign(l,n),l},gx=(s=>s?d0(s):d0),Q=gx(s=>({queue:[],addToQueue:n=>s(l=>!n||!n.videoId||!n.title?l:{queue:[...l.queue,n]}),insertToQueue:(n,l)=>s(a=>{if(!n||!n.videoId||!n.title)return a;const o=[...a.queue];return l<0&&(l=0),l>o.length&&(l=o.length),o.splice(l,0,n),{queue:o}}),removeFromQueue:n=>s(l=>({queue:l.queue.filter(a=>a.id!==n)})),updateQueueItem:(n,l)=>s(a=>({queue:a.queue.map(o=>o.id===n?{...o,...l}:o)})),reorderQueue:n=>s({queue:n}),manualOrder:JSON.parse(localStorage.getItem("karaoke_manualOrder")||"null"),setManualOrder:n=>{localStorage.setItem("karaoke_manualOrder",JSON.stringify(n)),s({manualOrder:n})},clearManualOrder:()=>{localStorage.removeItem("karaoke_manualOrder"),s({manualOrder:null})},queueMode:"auto",toggleQueueMode:()=>s(n=>({queueMode:n.queueMode==="auto"?"manual":"auto"})),invitedSongId:null,setInvitedSongId:n=>s({invitedSongId:n}),currentSong:null,isPlaying:!1,waitingForGuest:!1,setWaitingForGuest:n=>s({waitingForGuest:n}),waitCountdown:30,setWaitCountdown:n=>s({waitCountdown:n}),countdownPaused:!1,setCountdownPaused:n=>s({countdownPaused:n}),micAttemptHint:null,setMicAttemptHint:n=>s({micAttemptHint:n}),restartTrigger:0,setCurrentSong:n=>s({currentSong:n}),setIsPlaying:n=>s({isPlaying:n}),triggerRestart:()=>s(n=>({restartTrigger:n.restartTrigger+1,isPlaying:!0})),volume:100,isMuted:!1,setVolume:n=>s({volume:n}),setIsMuted:n=>s({isMuted:n}),isProjectionOpen:!1,setProjectionOpen:n=>s({isProjectionOpen:n}),songHistory:[],showHistoryModal:!1,setShowHistoryModal:n=>s({showHistoryModal:n}),showMicSettingsModal:!1,setShowMicSettingsModal:n=>s({showMicSettingsModal:n}),micSensitivity:Number(localStorage.getItem("karaoke_micSensitivity")||6),micDelay:Number(localStorage.getItem("karaoke_micDelay")||.8),micMinVol:Number(localStorage.getItem("karaoke_micMinVol")||-100),micBassFilter:Number(localStorage.getItem("karaoke_micBassFilter")||2),micTransient:Number(localStorage.getItem("karaoke_micTransient")||2.5),micAdaptation:Number(localStorage.getItem("karaoke_micAdaptation")||.02),setMicSensitivity:n=>{localStorage.setItem("karaoke_micSensitivity",n),s({micSensitivity:n})},setMicDelay:n=>{localStorage.setItem("karaoke_micDelay",n),s({micDelay:n})},setMicMinVol:n=>{localStorage.setItem("karaoke_micMinVol",n),s({micMinVol:n})},setMicBassFilter:n=>{localStorage.setItem("karaoke_micBassFilter",n),s({micBassFilter:n})},setMicTransient:n=>{localStorage.setItem("karaoke_micTransient",n),s({micTransient:n})},setMicAdaptation:n=>{localStorage.setItem("karaoke_micAdaptation",n),s({micAdaptation:n})},addToHistory:n=>s(l=>{if(!n||!n.videoId)return l;const a=[n,...l.songHistory],o=`karaoke_history_${new Date().toISOString().slice(0,10)}`;try{localStorage.setItem(o,JSON.stringify(a))}catch(f){console.warn("[History] Failed to persist:",f)}return{songHistory:a}}),loadHistory:()=>{const n=new Date,l=`karaoke_history_${n.toISOString().slice(0,10)}`;try{const a=localStorage.getItem(l);if(a){const o=JSON.parse(a);s({songHistory:Array.isArray(o)?o:[]})}else s({songHistory:[]});for(let o=localStorage.length-1;o>=0;o--){const f=localStorage.key(o);if(f&&f.startsWith("karaoke_history_")&&f!==l){const d=f.replace("karaoke_history_",""),h=new Date(d);(n-h)/(1e3*60*60*24)>7&&localStorage.removeItem(f)}}}catch(a){console.warn("[History] Failed to load:",a),s({songHistory:[]})}},clearHistory:()=>{const n=`karaoke_history_${new Date().toISOString().slice(0,10)}`;localStorage.removeItem(n),s({songHistory:[]})}})),px=(s,n)=>{const l=new Array(s.length+n.length);for(let a=0;a<s.length;a++)l[a]=s[a];for(let a=0;a<n.length;a++)l[s.length+a]=n[a];return l},yx=(s,n)=>({classGroupId:s,validator:n}),wy=(s=new Map,n=null,l)=>({nextPart:s,validators:n,classGroupId:l}),yo="-",h0=[],vx="arbitrary..",bx=s=>{const n=xx(s),{conflictingClassGroups:l,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return _x(d);const h=d.split(yo),p=h[0]===""&&h.length>1?1:0;return Cy(h,p,n)},getConflictingClassGroupIds:(d,h)=>{if(h){const p=a[d],y=l[d];return p?y?px(y,p):p:y||h0}return l[d]||h0}}},Cy=(s,n,l)=>{if(s.length-n===0)return l.classGroupId;const o=s[n],f=l.nextPart.get(o);if(f){const y=Cy(s,n+1,f);if(y)return y}const d=l.validators;if(d===null)return;const h=n===0?s.join(yo):s.slice(n).join(yo),p=d.length;for(let y=0;y<p;y++){const x=d[y];if(x.validator(h))return x.classGroupId}},_x=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const n=s.slice(1,-1),l=n.indexOf(":"),a=n.slice(0,l);return a?vx+a:void 0})(),xx=s=>{const{theme:n,classGroups:l}=s;return Sx(l,n)},Sx=(s,n)=>{const l=wy();for(const a in s){const o=s[a];hd(o,l,a,n)}return l},hd=(s,n,l,a)=>{const o=s.length;for(let f=0;f<o;f++){const d=s[f];Tx(d,n,l,a)}},Tx=(s,n,l,a)=>{if(typeof s=="string"){wx(s,n,l);return}if(typeof s=="function"){Cx(s,n,l,a);return}Nx(s,n,l,a)},wx=(s,n,l)=>{const a=s===""?n:Ny(n,s);a.classGroupId=l},Cx=(s,n,l,a)=>{if(Ex(s)){hd(s(a),n,l,a);return}n.validators===null&&(n.validators=[]),n.validators.push(yx(l,s))},Nx=(s,n,l,a)=>{const o=Object.entries(s),f=o.length;for(let d=0;d<f;d++){const[h,p]=o[d];hd(p,Ny(n,h),l,a)}},Ny=(s,n)=>{let l=s;const a=n.split(yo),o=a.length;for(let f=0;f<o;f++){const d=a[f];let h=l.nextPart.get(d);h||(h=wy(),l.nextPart.set(d,h)),l=h}return l},Ex=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,Ax=s=>{if(s<1)return{get:()=>{},set:()=>{}};let n=0,l=Object.create(null),a=Object.create(null);const o=(f,d)=>{l[f]=d,n++,n>s&&(n=0,a=l,l=Object.create(null))};return{get(f){let d=l[f];if(d!==void 0)return d;if((d=a[f])!==void 0)return o(f,d),d},set(f,d){f in l?l[f]=d:o(f,d)}}},Bf="!",m0=":",Mx=[],g0=(s,n,l,a,o)=>({modifiers:s,hasImportantModifier:n,baseClassName:l,maybePostfixModifierPosition:a,isExternal:o}),Rx=s=>{const{prefix:n,experimentalParseClassName:l}=s;let a=o=>{const f=[];let d=0,h=0,p=0,y;const x=o.length;for(let D=0;D<x;D++){const q=o[D];if(d===0&&h===0){if(q===m0){f.push(o.slice(p,D)),p=D+1;continue}if(q==="/"){y=D;continue}}q==="["?d++:q==="]"?d--:q==="("?h++:q===")"&&h--}const b=f.length===0?o:o.slice(p);let _=b,C=!1;b.endsWith(Bf)?(_=b.slice(0,-1),C=!0):b.startsWith(Bf)&&(_=b.slice(1),C=!0);const z=y&&y>p?y-p:void 0;return g0(f,C,_,z)};if(n){const o=n+m0,f=a;a=d=>d.startsWith(o)?f(d.slice(o.length)):g0(Mx,!1,d,void 0,!0)}if(l){const o=a;a=f=>l({className:f,parseClassName:o})}return a},kx=s=>{const n=new Map;return s.orderSensitiveModifiers.forEach((l,a)=>{n.set(l,1e6+a)}),l=>{const a=[];let o=[];for(let f=0;f<l.length;f++){const d=l[f],h=d[0]==="[",p=n.has(d);h||p?(o.length>0&&(o.sort(),a.push(...o),o=[]),a.push(d)):o.push(d)}return o.length>0&&(o.sort(),a.push(...o)),a}},Dx=s=>({cache:Ax(s.cacheSize),parseClassName:Rx(s),sortModifiers:kx(s),...bx(s)}),jx=/\s+/,Ox=(s,n)=>{const{parseClassName:l,getClassGroupId:a,getConflictingClassGroupIds:o,sortModifiers:f}=n,d=[],h=s.trim().split(jx);let p="";for(let y=h.length-1;y>=0;y-=1){const x=h[y],{isExternal:b,modifiers:_,hasImportantModifier:C,baseClassName:z,maybePostfixModifierPosition:D}=l(x);if(b){p=x+(p.length>0?" "+p:p);continue}let q=!!D,P=a(q?z.substring(0,D):z);if(!P){if(!q){p=x+(p.length>0?" "+p:p);continue}if(P=a(z),!P){p=x+(p.length>0?" "+p:p);continue}q=!1}const F=_.length===0?"":_.length===1?_[0]:f(_).join(":"),G=C?F+Bf:F,J=G+P;if(d.indexOf(J)>-1)continue;d.push(J);const le=o(P,q);for(let ue=0;ue<le.length;++ue){const U=le[ue];d.push(G+U)}p=x+(p.length>0?" "+p:p)}return p},zx=(...s)=>{let n=0,l,a,o="";for(;n<s.length;)(l=s[n++])&&(a=Ey(l))&&(o&&(o+=" "),o+=a);return o},Ey=s=>{if(typeof s=="string")return s;let n,l="";for(let a=0;a<s.length;a++)s[a]&&(n=Ey(s[a]))&&(l&&(l+=" "),l+=n);return l},Ix=(s,...n)=>{let l,a,o,f;const d=p=>{const y=n.reduce((x,b)=>b(x),s());return l=Dx(y),a=l.cache.get,o=l.cache.set,f=h,h(p)},h=p=>{const y=a(p);if(y)return y;const x=Ox(p,l);return o(p,x),x};return f=d,(...p)=>f(zx(...p))},Lx=[],bt=s=>{const n=l=>l[s]||Lx;return n.isThemeGetter=!0,n},Ay=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,My=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Hx=/^\d+\/\d+$/,Bx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ux=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Gx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qx=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zs=s=>Hx.test(s),Ee=s=>!!s&&!Number.isNaN(Number(s)),Ni=s=>!!s&&Number.isInteger(Number(s)),xf=s=>s.endsWith("%")&&Ee(s.slice(0,-1)),Zn=s=>Bx.test(s),Qx=()=>!0,Yx=s=>Ux.test(s)&&!Vx.test(s),Ry=()=>!1,Xx=s=>Gx.test(s),Kx=s=>qx.test(s),Fx=s=>!ne(s)&&!ie(s),Px=s=>gl(s,jy,Ry),ne=s=>Ay.test(s),$i=s=>gl(s,Oy,Yx),Sf=s=>gl(s,eS,Ee),p0=s=>gl(s,ky,Ry),Zx=s=>gl(s,Dy,Kx),fo=s=>gl(s,zy,Xx),ie=s=>My.test(s),pa=s=>pl(s,Oy),Wx=s=>pl(s,tS),y0=s=>pl(s,ky),Jx=s=>pl(s,jy),$x=s=>pl(s,Dy),ho=s=>pl(s,zy,!0),gl=(s,n,l)=>{const a=Ay.exec(s);return a?a[1]?n(a[1]):l(a[2]):!1},pl=(s,n,l=!1)=>{const a=My.exec(s);return a?a[1]?n(a[1]):l:!1},ky=s=>s==="position"||s==="percentage",Dy=s=>s==="image"||s==="url",jy=s=>s==="length"||s==="size"||s==="bg-size",Oy=s=>s==="length",eS=s=>s==="number",tS=s=>s==="family-name",zy=s=>s==="shadow",nS=()=>{const s=bt("color"),n=bt("font"),l=bt("text"),a=bt("font-weight"),o=bt("tracking"),f=bt("leading"),d=bt("breakpoint"),h=bt("container"),p=bt("spacing"),y=bt("radius"),x=bt("shadow"),b=bt("inset-shadow"),_=bt("text-shadow"),C=bt("drop-shadow"),z=bt("blur"),D=bt("perspective"),q=bt("aspect"),P=bt("ease"),F=bt("animate"),G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],le=()=>[...J(),ie,ne],ue=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto","contain","none"],K=()=>[ie,ne,p],pe=()=>[Zs,"full","auto",...K()],ve=()=>[Ni,"none","subgrid",ie,ne],be=()=>["auto",{span:["full",Ni,ie,ne]},Ni,ie,ne],Se=()=>[Ni,"auto",ie,ne],Ne=()=>["auto","min","max","fr",ie,ne],Re=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ke=()=>["start","end","center","stretch","center-safe","end-safe"],k=()=>["auto",...K()],j=()=>[Zs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...K()],B=()=>[s,ie,ne],fe=()=>[...J(),y0,p0,{position:[ie,ne]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],re=()=>["auto","cover","contain",Jx,Px,{size:[ie,ne]}],V=()=>[xf,pa,$i],Y=()=>["","none","full",y,ie,ne],te=()=>["",Ee,pa,$i],ge=()=>["solid","dashed","dotted","double"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>[Ee,xf,y0,p0],X=()=>["","none",z,ie,ne],$=()=>["none",Ee,ie,ne],he=()=>["none",Ee,ie,ne],xe=()=>[Ee,ie,ne],ze=()=>[Zs,"full",...K()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Zn],breakpoint:[Zn],color:[Qx],container:[Zn],"drop-shadow":[Zn],ease:["in","out","in-out"],font:[Fx],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Zn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Zn],shadow:[Zn],spacing:["px",Ee],text:[Zn],"text-shadow":[Zn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Zs,ne,ie,q]}],container:["container"],columns:[{columns:[Ee,ne,ie,h]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:le()}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:pe()}],"inset-x":[{"inset-x":pe()}],"inset-y":[{"inset-y":pe()}],start:[{start:pe()}],end:[{end:pe()}],top:[{top:pe()}],right:[{right:pe()}],bottom:[{bottom:pe()}],left:[{left:pe()}],visibility:["visible","invisible","collapse"],z:[{z:[Ni,"auto",ie,ne]}],basis:[{basis:[Zs,"full","auto",h,...K()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ee,Zs,"auto","initial","none",ne]}],grow:[{grow:["",Ee,ie,ne]}],shrink:[{shrink:["",Ee,ie,ne]}],order:[{order:[Ni,"first","last","none",ie,ne]}],"grid-cols":[{"grid-cols":ve()}],"col-start-end":[{col:be()}],"col-start":[{"col-start":Se()}],"col-end":[{"col-end":Se()}],"grid-rows":[{"grid-rows":ve()}],"row-start-end":[{row:be()}],"row-start":[{"row-start":Se()}],"row-end":[{"row-end":Se()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ne()}],"auto-rows":[{"auto-rows":Ne()}],gap:[{gap:K()}],"gap-x":[{"gap-x":K()}],"gap-y":[{"gap-y":K()}],"justify-content":[{justify:[...Re(),"normal"]}],"justify-items":[{"justify-items":[...ke(),"normal"]}],"justify-self":[{"justify-self":["auto",...ke()]}],"align-content":[{content:["normal",...Re()]}],"align-items":[{items:[...ke(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ke(),{baseline:["","last"]}]}],"place-content":[{"place-content":Re()}],"place-items":[{"place-items":[...ke(),"baseline"]}],"place-self":[{"place-self":["auto",...ke()]}],p:[{p:K()}],px:[{px:K()}],py:[{py:K()}],ps:[{ps:K()}],pe:[{pe:K()}],pt:[{pt:K()}],pr:[{pr:K()}],pb:[{pb:K()}],pl:[{pl:K()}],m:[{m:k()}],mx:[{mx:k()}],my:[{my:k()}],ms:[{ms:k()}],me:[{me:k()}],mt:[{mt:k()}],mr:[{mr:k()}],mb:[{mb:k()}],ml:[{ml:k()}],"space-x":[{"space-x":K()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":K()}],"space-y-reverse":["space-y-reverse"],size:[{size:j()}],w:[{w:[h,"screen",...j()]}],"min-w":[{"min-w":[h,"screen","none",...j()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[d]},...j()]}],h:[{h:["screen","lh",...j()]}],"min-h":[{"min-h":["screen","lh","none",...j()]}],"max-h":[{"max-h":["screen","lh",...j()]}],"font-size":[{text:["base",l,pa,$i]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,ie,Sf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",xf,ne]}],"font-family":[{font:[Wx,ne,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ie,ne]}],"line-clamp":[{"line-clamp":[Ee,"none",ie,Sf]}],leading:[{leading:[f,...K()]}],"list-image":[{"list-image":["none",ie,ne]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ie,ne]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ee,"from-font","auto",ie,$i]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Ee,"auto",ie,ne]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ie,ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ie,ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:fe()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:re()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ni,ie,ne],radial:["",ie,ne],conic:[Ni,ie,ne]},$x,Zx]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ee,ie,ne]}],"outline-w":[{outline:["",Ee,pa,$i]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",x,ho,fo]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",b,ho,fo]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Ee,$i]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",_,ho,fo]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Ee,ie,ne]}],"mix-blend":[{"mix-blend":[..._e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ee]}],"mask-image-linear-from-pos":[{"mask-linear-from":oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":oe()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":oe()}],"mask-image-t-to-pos":[{"mask-t-to":oe()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":oe()}],"mask-image-r-to-pos":[{"mask-r-to":oe()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":oe()}],"mask-image-b-to-pos":[{"mask-b-to":oe()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":oe()}],"mask-image-l-to-pos":[{"mask-l-to":oe()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":oe()}],"mask-image-x-to-pos":[{"mask-x-to":oe()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":oe()}],"mask-image-y-to-pos":[{"mask-y-to":oe()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[ie,ne]}],"mask-image-radial-from-pos":[{"mask-radial-from":oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":oe()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":J()}],"mask-image-conic-pos":[{"mask-conic":[Ee]}],"mask-image-conic-from-pos":[{"mask-conic-from":oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":oe()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:fe()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:re()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ie,ne]}],filter:[{filter:["","none",ie,ne]}],blur:[{blur:X()}],brightness:[{brightness:[Ee,ie,ne]}],contrast:[{contrast:[Ee,ie,ne]}],"drop-shadow":[{"drop-shadow":["","none",C,ho,fo]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Ee,ie,ne]}],"hue-rotate":[{"hue-rotate":[Ee,ie,ne]}],invert:[{invert:["",Ee,ie,ne]}],saturate:[{saturate:[Ee,ie,ne]}],sepia:[{sepia:["",Ee,ie,ne]}],"backdrop-filter":[{"backdrop-filter":["","none",ie,ne]}],"backdrop-blur":[{"backdrop-blur":X()}],"backdrop-brightness":[{"backdrop-brightness":[Ee,ie,ne]}],"backdrop-contrast":[{"backdrop-contrast":[Ee,ie,ne]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ee,ie,ne]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ee,ie,ne]}],"backdrop-invert":[{"backdrop-invert":["",Ee,ie,ne]}],"backdrop-opacity":[{"backdrop-opacity":[Ee,ie,ne]}],"backdrop-saturate":[{"backdrop-saturate":[Ee,ie,ne]}],"backdrop-sepia":[{"backdrop-sepia":["",Ee,ie,ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":K()}],"border-spacing-x":[{"border-spacing-x":K()}],"border-spacing-y":[{"border-spacing-y":K()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ie,ne]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ee,"initial",ie,ne]}],ease:[{ease:["linear","initial",P,ie,ne]}],delay:[{delay:[Ee,ie,ne]}],animate:[{animate:["none",F,ie,ne]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,ie,ne]}],"perspective-origin":[{"perspective-origin":le()}],rotate:[{rotate:$()}],"rotate-x":[{"rotate-x":$()}],"rotate-y":[{"rotate-y":$()}],"rotate-z":[{"rotate-z":$()}],scale:[{scale:he()}],"scale-x":[{"scale-x":he()}],"scale-y":[{"scale-y":he()}],"scale-z":[{"scale-z":he()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[ie,ne,"","none","gpu","cpu"]}],"transform-origin":[{origin:le()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ze()}],"translate-x":[{"translate-x":ze()}],"translate-y":[{"translate-y":ze()}],"translate-z":[{"translate-z":ze()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ie,ne]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ie,ne]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Ee,pa,$i,Sf]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},md=Ix(nS),Js=({children:s,className:n,glass:l=!1,...a})=>m.jsx("div",{className:md("rounded-3xl p-6 transition-shadow duration-200",l?"bg-white/90 border border-white/60":"bg-white border border-slate-100",n),...a,children:s}),Qt=({children:s,className:n,variant:l="primary",...a})=>{const o="px-6 py-3 rounded-2xl font-semibold transition-colors duration-150 active:scale-95 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",f={primary:"bg-slate-800 text-white hover:bg-slate-900",secondary:"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50",danger:"bg-red-50 text-red-600 hover:bg-red-100",ghost:"bg-transparent text-slate-500 hover:bg-slate-100",glass:"bg-white/70 border border-white/50 text-slate-800 hover:bg-white/80"};return m.jsx("button",{className:md(o,f[l],n),...a,children:s})};const Iy=(...s)=>s.filter((n,l,a)=>!!n&&n.trim()!==""&&a.indexOf(n)===l).join(" ").trim();const iS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const sS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,l,a)=>a?a.toUpperCase():l.toLowerCase());const v0=s=>{const n=sS(s);return n.charAt(0).toUpperCase()+n.slice(1)};var lS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const aS=s=>{for(const n in s)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1};const rS=E.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:a,className:o="",children:f,iconNode:d,...h},p)=>E.createElement("svg",{ref:p,...lS,width:n,height:n,stroke:s,strokeWidth:a?Number(l)*24/Number(n):l,className:Iy("lucide",o),...!f&&!aS(h)&&{"aria-hidden":"true"},...h},[...d.map(([y,x])=>E.createElement(y,x)),...Array.isArray(f)?f:[f]]));const Ye=(s,n)=>{const l=E.forwardRef(({className:a,...o},f)=>E.createElement(rS,{ref:f,iconNode:n,className:Iy(`lucide-${iS(v0(s))}`,`lucide-${s}`,a),...o}));return l.displayName=v0(s),l};const oS=[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]],Ly=Ye("arrow-up-to-line",oS);const cS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uS=Ye("check",cS);const fS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dS=Ye("chevron-down",fS);const hS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],mS=Ye("chevron-up",hS);const gS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uf=Ye("clock",gS);const pS=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],yS=Ye("external-link",pS);const vS=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],bS=Ye("grip-vertical",vS);const _S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ya=Ye("info",_S);const xS=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],SS=Ye("link",xS);const TS=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],wS=Ye("maximize",TS);const CS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],ss=Ye("mic",CS);const NS=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],ES=Ye("minimize",NS);const AS=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],gd=Ye("music",AS);const MS=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Hy=Ye("pause",MS);const RS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],vo=Ye("play",RS);const kS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],DS=Ye("plus",kS);const jS=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],OS=Ye("refresh-ccw",jS);const zS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],IS=Ye("rotate-ccw",zS);const LS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],By=Ye("search",LS);const HS=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],BS=Ye("settings",HS);const US=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Uy=Ye("skip-forward",US);const VS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Vf=Ye("sparkles",VS);const GS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],qS=Ye("square",GS);const QS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pd=Ye("trash-2",QS);const YS=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],b0=Ye("trophy",YS);const XS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],KS=Ye("user",XS);const FS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],PS=Ye("users",FS);const ZS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}]],WS=Ye("volume-1",ZS);const JS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],$S=Ye("volume-2",JS);const eT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],tT=Ye("volume-x",eT);const nT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],el=Ye("x",nT),iT=()=>{};var _0={};const Vy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const Z=function(s,n){if(!s)throw yl(n)},yl=function(s){return new Error("Firebase Database ("+Vy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};const Gy=function(s){const n=[];let l=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?n[l++]=o:o<2048?(n[l++]=o>>6|192,n[l++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),n[l++]=o>>18|240,n[l++]=o>>12&63|128,n[l++]=o>>6&63|128,n[l++]=o&63|128):(n[l++]=o>>12|224,n[l++]=o>>6&63|128,n[l++]=o&63|128)}return n},sT=function(s){const n=[];let l=0,a=0;for(;l<s.length;){const o=s[l++];if(o<128)n[a++]=String.fromCharCode(o);else if(o>191&&o<224){const f=s[l++];n[a++]=String.fromCharCode((o&31)<<6|f&63)}else if(o>239&&o<365){const f=s[l++],d=s[l++],h=s[l++],p=((o&7)<<18|(f&63)<<12|(d&63)<<6|h&63)-65536;n[a++]=String.fromCharCode(55296+(p>>10)),n[a++]=String.fromCharCode(56320+(p&1023))}else{const f=s[l++],d=s[l++];n[a++]=String.fromCharCode((o&15)<<12|(f&63)<<6|d&63)}}return n.join("")},yd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,n){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const l=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const f=s[o],d=o+1<s.length,h=d?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,x=f>>2,b=(f&3)<<4|h>>4;let _=(h&15)<<2|y>>6,C=y&63;p||(C=64,d||(_=64)),a.push(l[x],l[b],l[_],l[C])}return a.join("")},encodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(s):this.encodeByteArray(Gy(s),n)},decodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(s):sT(this.decodeStringToByteArray(s,n))},decodeStringToByteArray(s,n){this.init_();const l=n?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const f=l[s.charAt(o++)],h=o<s.length?l[s.charAt(o)]:0;++o;const y=o<s.length?l[s.charAt(o)]:64;++o;const b=o<s.length?l[s.charAt(o)]:64;if(++o,f==null||h==null||y==null||b==null)throw new lT;const _=f<<2|h>>4;if(a.push(_),y!==64){const C=h<<4&240|y>>2;if(a.push(C),b!==64){const z=y<<6&192|b;a.push(z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class lT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qy=function(s){const n=Gy(s);return yd.encodeByteArray(n,!0)},bo=function(s){return qy(s).replace(/\./g,"")},Gf=function(s){try{return yd.decodeString(s,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function aT(s){return Qy(void 0,s)}function Qy(s,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:const l=n;return new Date(l.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return n}for(const l in n)!n.hasOwnProperty(l)||!rT(l)||(s[l]=Qy(s[l],n[l]));return s}function rT(s){return s!=="__proto__"}function oT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const cT=()=>oT().__FIREBASE_DEFAULTS__,uT=()=>{if(typeof process>"u"||typeof _0>"u")return;const s=_0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},fT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=s&&Gf(s[1]);return n&&JSON.parse(n)},Yy=()=>{try{return iT()||cT()||uT()||fT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},dT=s=>Yy()?.emulatorHosts?.[s],hT=s=>{const n=dT(s);if(!n)return;const l=n.lastIndexOf(":");if(l<=0||l+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const a=parseInt(n.substring(l+1),10);return n[0]==="["?[n.substring(1,l-1),a]:[n.substring(0,l),a]},Xy=()=>Yy()?.config;class Ua{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,l)=>{this.resolve=n,this.reject=l})}wrapCallback(n){return(l,a)=>{l?this.reject(l):this.resolve(a),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(l):n(l,a))}}}function vd(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mT(s){return(await fetch(s,{credentials:"include"})).ok}function gT(s,n){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const l={alg:"none",type:"JWT"},a=n||"demo-project",o=s.iat||0,f=s.sub||s.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...s};return[bo(JSON.stringify(l)),bo(JSON.stringify(d)),""].join(".")}const Ta={};function pT(){const s={prod:[],emulator:[]};for(const n of Object.keys(Ta))Ta[n]?s.emulator.push(n):s.prod.push(n);return s}function yT(s){let n=document.getElementById(s),l=!1;return n||(n=document.createElement("div"),n.setAttribute("id",s),l=!0),{created:l,element:n}}let x0=!1;function vT(s,n){if(typeof window>"u"||typeof document>"u"||!vd(window.location.host)||Ta[s]===n||Ta[s]||x0)return;Ta[s]=n;function l(_){return`__firebase__banner__${_}`}const a="__firebase__banner",f=pT().prod.length>0;function d(){const _=document.getElementById(a);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function p(_,C){_.setAttribute("width","24"),_.setAttribute("id",C),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function y(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{x0=!0,d()},_}function x(_,C){_.setAttribute("id",C),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function b(){const _=yT(a),C=l("text"),z=document.getElementById(C)||document.createElement("span"),D=l("learnmore"),q=document.getElementById(D)||document.createElement("a"),P=l("preprendIcon"),F=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const G=_.element;h(G),x(q,D);const J=y();p(F,P),G.append(F,z,q,J),document.body.appendChild(G)}f?(z.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function bT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ky(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bT())}function _T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xT(){return Vy.NODE_ADMIN===!0}function ST(){try{return typeof indexedDB=="object"}catch{return!1}}function TT(){return new Promise((s,n)=>{try{let l=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),l||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{l=!1},o.onerror=()=>{n(o.error?.message||"")}}catch(l){n(l)}})}const wT="FirebaseError";class Va extends Error{constructor(n,l,a){super(l),this.code=n,this.customData=a,this.name=wT,Object.setPrototypeOf(this,Va.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fy.prototype.create)}}class Fy{constructor(n,l,a){this.service=n,this.serviceName=l,this.errors=a}create(n,...l){const a=l[0]||{},o=`${this.service}/${n}`,f=this.errors[n],d=f?CT(f,a):"Error",h=`${this.serviceName}: ${d} (${o}).`;return new Va(o,h,a)}}function CT(s,n){return s.replace(NT,(l,a)=>{const o=n[a];return o!=null?String(o):`<${a}?>`})}const NT=/\{\$([^}]+)}/g;function Ra(s){return JSON.parse(s)}function xt(s){return JSON.stringify(s)}const Py=function(s){let n={},l={},a={},o="";try{const f=s.split(".");n=Ra(Gf(f[0])||""),l=Ra(Gf(f[1])||""),o=f[2],a=l.d||{},delete l.d}catch{}return{header:n,claims:l,data:a,signature:o}},ET=function(s){const n=Py(s),l=n.claims;return!!l&&typeof l=="object"&&l.hasOwnProperty("iat")},AT=function(s){const n=Py(s).claims;return typeof n=="object"&&n.admin===!0};function Rn(s,n){return Object.prototype.hasOwnProperty.call(s,n)}function al(s,n){if(Object.prototype.hasOwnProperty.call(s,n))return s[n]}function S0(s){for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n))return!1;return!0}function _o(s,n,l){const a={};for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=n.call(l,s[o],o,s));return a}function xo(s,n){if(s===n)return!0;const l=Object.keys(s),a=Object.keys(n);for(const o of l){if(!a.includes(o))return!1;const f=s[o],d=n[o];if(T0(f)&&T0(d)){if(!xo(f,d))return!1}else if(f!==d)return!1}for(const o of a)if(!l.includes(o))return!1;return!0}function T0(s){return s!==null&&typeof s=="object"}function MT(s){const n=[];for(const[l,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{n.push(encodeURIComponent(l)+"="+encodeURIComponent(o))}):n.push(encodeURIComponent(l)+"="+encodeURIComponent(a));return n.length?"&"+n.join("&"):""}class RT{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,l){l||(l=0);const a=this.W_;if(typeof n=="string")for(let b=0;b<16;b++)a[b]=n.charCodeAt(l)<<24|n.charCodeAt(l+1)<<16|n.charCodeAt(l+2)<<8|n.charCodeAt(l+3),l+=4;else for(let b=0;b<16;b++)a[b]=n[l]<<24|n[l+1]<<16|n[l+2]<<8|n[l+3],l+=4;for(let b=16;b<80;b++){const _=a[b-3]^a[b-8]^a[b-14]^a[b-16];a[b]=(_<<1|_>>>31)&4294967295}let o=this.chain_[0],f=this.chain_[1],d=this.chain_[2],h=this.chain_[3],p=this.chain_[4],y,x;for(let b=0;b<80;b++){b<40?b<20?(y=h^f&(d^h),x=1518500249):(y=f^d^h,x=1859775393):b<60?(y=f&d|h&(f|d),x=2400959708):(y=f^d^h,x=3395469782);const _=(o<<5|o>>>27)+y+p+x+a[b]&4294967295;p=h,h=d,d=(f<<30|f>>>2)&4294967295,f=o,o=_}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+f&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(n,l){if(n==null)return;l===void 0&&(l=n.length);const a=l-this.blockSize;let o=0;const f=this.buf_;let d=this.inbuf_;for(;o<l;){if(d===0)for(;o<=a;)this.compress_(n,o),o+=this.blockSize;if(typeof n=="string"){for(;o<l;)if(f[d]=n.charCodeAt(o),++d,++o,d===this.blockSize){this.compress_(f),d=0;break}}else for(;o<l;)if(f[d]=n[o],++d,++o,d===this.blockSize){this.compress_(f),d=0;break}}this.inbuf_=d,this.total_+=l}digest(){const n=[];let l=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=l&255,l/=256;this.compress_(this.buf_);let a=0;for(let o=0;o<5;o++)for(let f=24;f>=0;f-=8)n[a]=this.chain_[o]>>f&255,++a;return n}}function Vo(s,n){return`${s} failed: ${n} argument `}const kT=function(s){const n=[];let l=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);if(o>=55296&&o<=56319){const f=o-55296;a++,Z(a<s.length,"Surrogate pair missing trail surrogate.");const d=s.charCodeAt(a)-56320;o=65536+(f<<10)+d}o<128?n[l++]=o:o<2048?(n[l++]=o>>6|192,n[l++]=o&63|128):o<65536?(n[l++]=o>>12|224,n[l++]=o>>6&63|128,n[l++]=o&63|128):(n[l++]=o>>18|240,n[l++]=o>>12&63|128,n[l++]=o>>6&63|128,n[l++]=o&63|128)}return n},Go=function(s){let n=0;for(let l=0;l<s.length;l++){const a=s.charCodeAt(l);a<128?n++:a<2048?n+=2:a>=55296&&a<=56319?(n+=4,l++):n+=3}return n};function os(s){return s&&s._delegate?s._delegate:s}class ka{constructor(n,l,a){this.name=n,this.instanceFactory=l,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}const es="[DEFAULT]";class DT{constructor(n,l){this.name=n,this.container=l,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const l=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(l)){const a=new Ua;if(this.instancesDeferred.set(l,a),this.isInitialized(l)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:l});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(l).promise}getImmediate(n){const l=this.normalizeInstanceIdentifier(n?.identifier),a=n?.optional??!1;if(this.isInitialized(l)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:l})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(OT(n))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[l,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(l);try{const f=this.getOrInitializeService({instanceIdentifier:o});a.resolve(f)}catch{}}}}clearInstance(n=es){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(l=>"INTERNAL"in l).map(l=>l.INTERNAL.delete()),...n.filter(l=>"_delete"in l).map(l=>l._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=es){return this.instances.has(n)}getOptions(n=es){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:l={}}=n,a=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:l});for(const[f,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(f);a===h&&d.resolve(o)}return o}onInit(n,l){const a=this.normalizeInstanceIdentifier(l),o=this.onInitCallbacks.get(a)??new Set;o.add(n),this.onInitCallbacks.set(a,o);const f=this.instances.get(a);return f&&n(f,a),()=>{o.delete(n)}}invokeOnInitCallbacks(n,l){const a=this.onInitCallbacks.get(l);if(a)for(const o of a)try{o(n,l)}catch{}}getOrInitializeService({instanceIdentifier:n,options:l={}}){let a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:jT(n),options:l}),this.instances.set(n,a),this.instancesOptions.set(n,l),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch{}return a||null}normalizeInstanceIdentifier(n=es){return this.component?this.component.multipleInstances?n:es:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jT(s){return s===es?void 0:s}function OT(s){return s.instantiationMode==="EAGER"}class zT{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const l=this.getProvider(n.name);if(l.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);l.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const l=new DT(n,this);return this.providers.set(n,l),l}getProviders(){return Array.from(this.providers.values())}}var nt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(nt||(nt={}));const IT={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},LT=nt.INFO,HT={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},BT=(s,n,...l)=>{if(n<s.logLevel)return;const a=new Date().toISOString(),o=HT[n];if(o)console[o](`[${a}]  ${s.name}:`,...l);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class Zy{constructor(n){this.name=n,this._logLevel=LT,this._logHandler=BT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in nt))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?IT[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...n),this._logHandler(this,nt.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...n),this._logHandler(this,nt.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...n),this._logHandler(this,nt.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...n),this._logHandler(this,nt.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...n),this._logHandler(this,nt.ERROR,...n)}}const UT=(s,n)=>n.some(l=>s instanceof l);let w0,C0;function VT(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GT(){return C0||(C0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wy=new WeakMap,qf=new WeakMap,Jy=new WeakMap,Tf=new WeakMap,bd=new WeakMap;function qT(s){const n=new Promise((l,a)=>{const o=()=>{s.removeEventListener("success",f),s.removeEventListener("error",d)},f=()=>{l(Ai(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",f),s.addEventListener("error",d)});return n.then(l=>{l instanceof IDBCursor&&Wy.set(l,s)}).catch(()=>{}),bd.set(n,s),n}function QT(s){if(qf.has(s))return;const n=new Promise((l,a)=>{const o=()=>{s.removeEventListener("complete",f),s.removeEventListener("error",d),s.removeEventListener("abort",d)},f=()=>{l(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",f),s.addEventListener("error",d),s.addEventListener("abort",d)});qf.set(s,n)}let Qf={get(s,n,l){if(s instanceof IDBTransaction){if(n==="done")return qf.get(s);if(n==="objectStoreNames")return s.objectStoreNames||Jy.get(s);if(n==="store")return l.objectStoreNames[1]?void 0:l.objectStore(l.objectStoreNames[0])}return Ai(s[n])},set(s,n,l){return s[n]=l,!0},has(s,n){return s instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in s}};function YT(s){Qf=s(Qf)}function XT(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...l){const a=s.call(wf(this),n,...l);return Jy.set(a,n.sort?n.sort():[n]),Ai(a)}:GT().includes(s)?function(...n){return s.apply(wf(this),n),Ai(Wy.get(this))}:function(...n){return Ai(s.apply(wf(this),n))}}function KT(s){return typeof s=="function"?XT(s):(s instanceof IDBTransaction&&QT(s),UT(s,VT())?new Proxy(s,Qf):s)}function Ai(s){if(s instanceof IDBRequest)return qT(s);if(Tf.has(s))return Tf.get(s);const n=KT(s);return n!==s&&(Tf.set(s,n),bd.set(n,s)),n}const wf=s=>bd.get(s);function FT(s,n,{blocked:l,upgrade:a,blocking:o,terminated:f}={}){const d=indexedDB.open(s,n),h=Ai(d);return a&&d.addEventListener("upgradeneeded",p=>{a(Ai(d.result),p.oldVersion,p.newVersion,Ai(d.transaction),p)}),l&&d.addEventListener("blocked",p=>l(p.oldVersion,p.newVersion,p)),h.then(p=>{f&&p.addEventListener("close",()=>f()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}const PT=["get","getKey","getAll","getAllKeys","count"],ZT=["put","add","delete","clear"],Cf=new Map;function N0(s,n){if(!(s instanceof IDBDatabase&&!(n in s)&&typeof n=="string"))return;if(Cf.get(n))return Cf.get(n);const l=n.replace(/FromIndex$/,""),a=n!==l,o=ZT.includes(l);if(!(l in(a?IDBIndex:IDBObjectStore).prototype)||!(o||PT.includes(l)))return;const f=async function(d,...h){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(h.shift())),(await Promise.all([y[l](...h),o&&p.done]))[0]};return Cf.set(n,f),f}YT(s=>({...s,get:(n,l,a)=>N0(n,l)||s.get(n,l,a),has:(n,l)=>!!N0(n,l)||s.has(n,l)}));class WT{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(l=>{if(JT(l)){const a=l.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(l=>l).join(" ")}}function JT(s){return s.getComponent()?.type==="VERSION"}const Yf="@firebase/app",E0="0.14.8";const $n=new Zy("@firebase/app"),$T="@firebase/app-compat",ew="@firebase/analytics-compat",tw="@firebase/analytics",nw="@firebase/app-check-compat",iw="@firebase/app-check",sw="@firebase/auth",lw="@firebase/auth-compat",aw="@firebase/database",rw="@firebase/data-connect",ow="@firebase/database-compat",cw="@firebase/functions",uw="@firebase/functions-compat",fw="@firebase/installations",dw="@firebase/installations-compat",hw="@firebase/messaging",mw="@firebase/messaging-compat",gw="@firebase/performance",pw="@firebase/performance-compat",yw="@firebase/remote-config",vw="@firebase/remote-config-compat",bw="@firebase/storage",_w="@firebase/storage-compat",xw="@firebase/firestore",Sw="@firebase/ai",Tw="@firebase/firestore-compat",ww="firebase",Cw="12.9.0";const Xf="[DEFAULT]",Nw={[Yf]:"fire-core",[$T]:"fire-core-compat",[tw]:"fire-analytics",[ew]:"fire-analytics-compat",[iw]:"fire-app-check",[nw]:"fire-app-check-compat",[sw]:"fire-auth",[lw]:"fire-auth-compat",[aw]:"fire-rtdb",[rw]:"fire-data-connect",[ow]:"fire-rtdb-compat",[cw]:"fire-fn",[uw]:"fire-fn-compat",[fw]:"fire-iid",[dw]:"fire-iid-compat",[hw]:"fire-fcm",[mw]:"fire-fcm-compat",[gw]:"fire-perf",[pw]:"fire-perf-compat",[yw]:"fire-rc",[vw]:"fire-rc-compat",[bw]:"fire-gcs",[_w]:"fire-gcs-compat",[xw]:"fire-fst",[Tw]:"fire-fst-compat",[Sw]:"fire-vertex","fire-js":"fire-js",[ww]:"fire-js-all"};const So=new Map,Ew=new Map,Kf=new Map;function A0(s,n){try{s.container.addComponent(n)}catch(l){$n.debug(`Component ${n.name} failed to register with FirebaseApp ${s.name}`,l)}}function To(s){const n=s.name;if(Kf.has(n))return $n.debug(`There were multiple attempts to register component ${n}.`),!1;Kf.set(n,s);for(const l of So.values())A0(l,s);for(const l of Ew.values())A0(l,s);return!0}function Aw(s,n){const l=s.container.getProvider("heartbeat").getImmediate({optional:!0});return l&&l.triggerHeartbeat(),s.container.getProvider(n)}function Mw(s){return s==null?!1:s.settings!==void 0}const Rw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new Fy("app","Firebase",Rw);class kw{constructor(n,l,a){this._isDeleted=!1,this._options={...n},this._config={...l},this._name=l.name,this._automaticDataCollectionEnabled=l.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ka("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}const Dw=Cw;function $y(s,n={}){let l=s;typeof n!="object"&&(n={name:n});const a={name:Xf,automaticDataCollectionEnabled:!0,...n},o=a.name;if(typeof o!="string"||!o)throw Mi.create("bad-app-name",{appName:String(o)});if(l||(l=Xy()),!l)throw Mi.create("no-options");const f=So.get(o);if(f){if(xo(l,f.options)&&xo(a,f.config))return f;throw Mi.create("duplicate-app",{appName:o})}const d=new zT(o);for(const p of Kf.values())d.addComponent(p);const h=new kw(l,a,d);return So.set(o,h),h}function jw(s=Xf){const n=So.get(s);if(!n&&s===Xf&&Xy())return $y();if(!n)throw Mi.create("no-app",{appName:s});return n}function tl(s,n,l){let a=Nw[s]??s;l&&(a+=`-${l}`);const o=a.match(/\s|\//),f=n.match(/\s|\//);if(o||f){const d=[`Unable to register library "${a}" with version "${n}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&f&&d.push("and"),f&&d.push(`version name "${n}" contains illegal characters (whitespace or "/")`),$n.warn(d.join(" "));return}To(new ka(`${a}-version`,()=>({library:a,version:n}),"VERSION"))}const Ow="firebase-heartbeat-database",zw=1,Da="firebase-heartbeat-store";let Nf=null;function ev(){return Nf||(Nf=FT(Ow,zw,{upgrade:(s,n)=>{switch(n){case 0:try{s.createObjectStore(Da)}catch(l){console.warn(l)}}}}).catch(s=>{throw Mi.create("idb-open",{originalErrorMessage:s.message})})),Nf}async function Iw(s){try{const l=(await ev()).transaction(Da),a=await l.objectStore(Da).get(tv(s));return await l.done,a}catch(n){if(n instanceof Va)$n.warn(n.message);else{const l=Mi.create("idb-get",{originalErrorMessage:n?.message});$n.warn(l.message)}}}async function M0(s,n){try{const a=(await ev()).transaction(Da,"readwrite");await a.objectStore(Da).put(n,tv(s)),await a.done}catch(l){if(l instanceof Va)$n.warn(l.message);else{const a=Mi.create("idb-set",{originalErrorMessage:l?.message});$n.warn(a.message)}}}function tv(s){return`${s.name}!${s.options.appId}`}const Lw=1024,Hw=30;class Bw{constructor(n){this.container=n,this._heartbeatsCache=null;const l=this.container.getProvider("app").getImmediate();this._storage=new Vw(l),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=R0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats.length>Hw){const o=Gw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){$n.warn(n)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=R0(),{heartbeatsToSend:l,unsentEntries:a}=Uw(this._heartbeatsCache.heartbeats),o=bo(JSON.stringify({version:2,heartbeats:l}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return $n.warn(n),""}}}function R0(){return new Date().toISOString().substring(0,10)}function Uw(s,n=Lw){const l=[];let a=s.slice();for(const o of s){const f=l.find(d=>d.agent===o.agent);if(f){if(f.dates.push(o.date),k0(l)>n){f.dates.pop();break}}else if(l.push({agent:o.agent,dates:[o.date]}),k0(l)>n){l.pop();break}a=a.slice(1)}return{heartbeatsToSend:l,unsentEntries:a}}class Vw{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ST()?TT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const l=await Iw(this.app);return l?.heartbeats?l:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){if(await this._canUseIndexedDBPromise){const a=await this.read();return M0(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){if(await this._canUseIndexedDBPromise){const a=await this.read();return M0(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...n.heartbeats]})}else return}}function k0(s){return bo(JSON.stringify({version:2,heartbeats:s})).length}function Gw(s){if(s.length===0)return-1;let n=0,l=s[0].date;for(let a=1;a<s.length;a++)s[a].date<l&&(l=s[a].date,n=a);return n}function qw(s){To(new ka("platform-logger",n=>new WT(n),"PRIVATE")),To(new ka("heartbeat",n=>new Bw(n),"PRIVATE")),tl(Yf,E0,s),tl(Yf,E0,"esm2020"),tl("fire-js","")}qw("");var D0={};const j0="@firebase/database",O0="1.1.0";let nv="";function iv(s){nv=s}class Qw{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,l){l==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),xt(l))}get(n){const l=this.domStorage_.getItem(this.prefixedName_(n));return l==null?null:Ra(l)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class Yw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,l){l==null?delete this.cache_[n]:this.cache_[n]=l}get(n){return Rn(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const sv=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const n=window[s];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Qw(n)}}catch{}return new Yw},ns=sv("localStorage"),Xw=sv("sessionStorage");const nl=new Zy("@firebase/database"),Kw=(function(){let s=1;return function(){return s++}})(),lv=function(s){const n=kT(s),l=new RT;l.update(n);const a=l.digest();return yd.encodeByteArray(a)},Ga=function(...s){let n="";for(let l=0;l<s.length;l++){const a=s[l];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?n+=Ga.apply(null,a):typeof a=="object"?n+=xt(a):n+=a,n+=" "}return n};let wa=null,z0=!0;const Fw=function(s,n){Z(!0,"Can't turn on custom loggers persistently."),nl.logLevel=nt.VERBOSE,wa=nl.log.bind(nl)},Dt=function(...s){if(z0===!0&&(z0=!1,wa===null&&Xw.get("logging_enabled")===!0&&Fw()),wa){const n=Ga.apply(null,s);wa(n)}},qa=function(s){return function(...n){Dt(s,...n)}},Ff=function(...s){const n="FIREBASE INTERNAL ERROR: "+Ga(...s);nl.error(n)},ei=function(...s){const n=`FIREBASE FATAL ERROR: ${Ga(...s)}`;throw nl.error(n),new Error(n)},It=function(...s){const n="FIREBASE WARNING: "+Ga(...s);nl.warn(n)},Pw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&It("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_d=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},Zw=function(s){if(document.readyState==="complete")s();else{let n=!1;const l=function(){if(!document.body){setTimeout(l,Math.floor(10));return}n||(n=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&l()}),window.attachEvent("onload",l))}},rl="[MIN_NAME]",ls="[MAX_NAME]",cs=function(s,n){if(s===n)return 0;if(s===rl||n===ls)return-1;if(n===rl||s===ls)return 1;{const l=I0(s),a=I0(n);return l!==null?a!==null?l-a===0?s.length-n.length:l-a:-1:a!==null?1:s<n?-1:1}},Ww=function(s,n){return s===n?0:s<n?-1:1},va=function(s,n){if(n&&s in n)return n[s];throw new Error("Missing required key ("+s+") in object: "+xt(n))},xd=function(s){if(typeof s!="object"||s===null)return xt(s);const n=[];for(const a in s)n.push(a);n.sort();let l="{";for(let a=0;a<n.length;a++)a!==0&&(l+=","),l+=xt(n[a]),l+=":",l+=xd(s[n[a]]);return l+="}",l},av=function(s,n){const l=s.length;if(l<=n)return[s];const a=[];for(let o=0;o<l;o+=n)o+n>l?a.push(s.substring(o,l)):a.push(s.substring(o,o+n));return a};function jt(s,n){for(const l in s)s.hasOwnProperty(l)&&n(l,s[l])}const rv=function(s){Z(!_d(s),"Invalid JSON number");const n=11,l=52,a=(1<<n-1)-1;let o,f,d,h,p;s===0?(f=0,d=0,o=1/s===-1/0?1:0):(o=s<0,s=Math.abs(s),s>=Math.pow(2,1-a)?(h=Math.min(Math.floor(Math.log(s)/Math.LN2),a),f=h+a,d=Math.round(s*Math.pow(2,l-h)-Math.pow(2,l))):(f=0,d=Math.round(s/Math.pow(2,1-a-l))));const y=[];for(p=l;p;p-=1)y.push(d%2?1:0),d=Math.floor(d/2);for(p=n;p;p-=1)y.push(f%2?1:0),f=Math.floor(f/2);y.push(o?1:0),y.reverse();const x=y.join("");let b="";for(p=0;p<64;p+=8){let _=parseInt(x.substr(p,8),2).toString(16);_.length===1&&(_="0"+_),b=b+_}return b.toLowerCase()},Jw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$w=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function eC(s,n){let l="Unknown Error";s==="too_big"?l="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?l="Client doesn't have permission to access the desired data.":s==="unavailable"&&(l="The service is unavailable");const a=new Error(s+" at "+n._path.toString()+": "+l);return a.code=s.toUpperCase(),a}const tC=new RegExp("^-?(0*)\\d{1,10}$"),nC=-2147483648,iC=2147483647,I0=function(s){if(tC.test(s)){const n=Number(s);if(n>=nC&&n<=iC)return n}return null},vl=function(s){try{s()}catch(n){setTimeout(()=>{const l=n.stack||"";throw It("Exception was thrown by user callback.",l),n},Math.floor(0))}},sC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ca=function(s,n){const l=setTimeout(s,n);return typeof l=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):typeof l=="object"&&l.unref&&l.unref(),l};class lC{constructor(n,l){this.appCheckProvider=l,this.appName=n.name,Mw(n)&&n.settings.appCheckToken&&(this.serverAppAppCheckToken=n.settings.appCheckToken),this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(a=>this.appCheck=a)}getToken(n){if(this.serverAppAppCheckToken){if(n)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(n):new Promise((l,a)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(l,a):l(null)},0)})}addTokenChangeListener(n){this.appCheckProvider?.get().then(l=>l.addTokenListener(n))}notifyForInvalidToken(){It(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class aC{constructor(n,l,a){this.appName_=n,this.firebaseOptions_=l,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(o=>this.auth_=o)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(l=>l&&l.code==="auth/token-not-initialized"?(Dt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,a)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(l,a):l(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(l=>l.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(l=>l.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',It(n)}}class po{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}po.OWNER="owner";const Sd="5",ov="v",cv="s",uv="r",fv="f",dv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hv="ls",mv="p",Pf="ac",gv="websocket",pv="long_polling";class yv{constructor(n,l,a,o,f=!1,d="",h=!1,p=!1,y=null){this.secure=l,this.namespace=a,this.webSocketOnly=o,this.nodeAdmin=f,this.persistenceKey=d,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this.emulatorOptions=y,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ns.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&ns.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){const n=this.secure?"https://":"http://",l=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${l}`}}function rC(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function vv(s,n,l){Z(typeof n=="string","typeof type must == string"),Z(typeof l=="object","typeof params must == object");let a;if(n===gv)a=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(n===pv)a=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);rC(s)&&(l.ns=s.namespace);const o=[];return jt(l,(f,d)=>{o.push(f+"="+d)}),a+o.join("&")}class oC{constructor(){this.counters_={}}incrementCounter(n,l=1){Rn(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=l}get(){return aT(this.counters_)}}const Ef={},Af={};function Td(s){const n=s.toString();return Ef[n]||(Ef[n]=new oC),Ef[n]}function cC(s,n){const l=s.toString();return Af[l]||(Af[l]=n()),Af[l]}class uC{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,l){this.closeAfterResponse=n,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,l){for(this.pendingResponses[n]=l;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<a.length;++o)a[o]&&vl(()=>{this.onMessage_(a[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const L0="start",fC="close",dC="pLPCommand",hC="pRTLPCB",bv="id",_v="pw",xv="ser",mC="cb",gC="seg",pC="ts",yC="d",vC="dframe",Sv=1870,Tv=30,bC=Sv-Tv,_C=25e3,xC=3e4;class $s{constructor(n,l,a,o,f,d,h){this.connId=n,this.repoInfo=l,this.applicationId=a,this.appCheckToken=o,this.authToken=f,this.transportSessionId=d,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qa(n),this.stats_=Td(l),this.urlFn=p=>(this.appCheckToken&&(p[Pf]=this.appCheckToken),vv(l,pv,p))}open(n,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new uC(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(xC)),Zw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wd((...f)=>{const[d,h,p,y,x]=f;if(this.incrementIncomingBytes_(f),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===L0)this.id=h,this.password=p;else if(d===fC)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...f)=>{const[d,h]=f;this.incrementIncomingBytes_(f),this.myPacketOrderer.handleResponse(d,h)},()=>{this.onClosed_()},this.urlFn);const a={};a[L0]="t",a[xv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[mC]=this.scriptTagHolder.uniqueCallbackIdentifier),a[ov]=Sd,this.transportSessionId&&(a[cv]=this.transportSessionId),this.lastSessionId&&(a[hv]=this.lastSessionId),this.applicationId&&(a[mv]=this.applicationId),this.appCheckToken&&(a[Pf]=this.appCheckToken),typeof location<"u"&&location.hostname&&dv.test(location.hostname)&&(a[uv]=fv);const o=this.urlFn(a);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$s.forceAllow_=!0}static forceDisallow(){$s.forceDisallow_=!0}static isAvailable(){return $s.forceAllow_?!0:!$s.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Jw()&&!$w()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const l=xt(n);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const a=qy(l),o=av(a,bC);for(let f=0;f<o.length;f++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[f]),this.curSegmentNum++}addDisconnectPingFrame(n,l){this.myDisconnFrame=document.createElement("iframe");const a={};a[vC]="t",a[bv]=n,a[_v]=l,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const l=xt(n).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class wd{constructor(n,l,a,o){this.onDisconnect=a,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Kw(),window[dC+this.uniqueCallbackIdentifier]=n,window[hC+this.uniqueCallbackIdentifier]=l,this.myIFrame=wd.createIFrame_();let f="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(f='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+f+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(h){Dt("frame writing exception"),h.stack&&Dt(h.stack),Dt(h)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Dt("No IE domain setting required")}catch{const a=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,l){for(this.myID=n,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n[bv]=this.myID,n[_v]=this.myPW,n[xv]=this.currentSerial;let l=this.urlFn(n),a="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Tv+a.length<=Sv;){const d=this.pendingSegs.shift();a=a+"&"+gC+o+"="+d.seg+"&"+pC+o+"="+d.ts+"&"+yC+o+"="+d.d,o++}return l=l+a,this.addLongPollTag_(l,this.currentSerial),!0}else return!1}enqueueSegment(n,l,a){this.pendingSegs.push({seg:n,ts:l,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(n,l){this.outstandingRequests.add(l);const a=()=>{this.outstandingRequests.delete(l),this.newRequest_()},o=setTimeout(a,Math.floor(_C)),f=()=>{clearTimeout(o),a()};this.addTag(n,f)}addTag(n,l){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=n,a.onload=a.onreadystatechange=function(){const o=a.readyState;(!o||o==="loaded"||o==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),l())},a.onerror=()=>{Dt("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}const SC=16384,TC=45e3;let wo=null;typeof MozWebSocket<"u"?wo=MozWebSocket:typeof WebSocket<"u"&&(wo=WebSocket);class xn{constructor(n,l,a,o,f,d,h){this.connId=n,this.applicationId=a,this.appCheckToken=o,this.authToken=f,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qa(this.connId),this.stats_=Td(l),this.connURL=xn.connectionURL_(l,d,h,o,a),this.nodeAdmin=l.nodeAdmin}static connectionURL_(n,l,a,o,f){const d={};return d[ov]=Sd,typeof location<"u"&&location.hostname&&dv.test(location.hostname)&&(d[uv]=fv),l&&(d[cv]=l),a&&(d[hv]=a),o&&(d[Pf]=o),f&&(d[mv]=f),vv(n,gv,d)}open(n,l){this.onDisconnect=l,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ns.set("previous_websocket_failure",!0);try{let a;xT(),this.mySock=new wo(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const o=a.message||a.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const o=a.message||a.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){xn.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const l=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(l);a&&a.length>1&&parseFloat(a[1])<4.4&&(n=!0)}return!n&&wo!==null&&!xn.forceDisallow_}static previouslyFailed(){return ns.isInMemoryStorage||ns.get("previous_websocket_failure")===!0}markConnectionHealthy(){ns.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const l=this.frames.join("");this.frames=null;const a=Ra(l);this.onMessage(a)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Z(this.frames===null,"We already have a frame buffer"),n.length<=6){const l=Number(n);if(!isNaN(l))return this.handleNewFrameCount_(l),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;const l=n.data;if(this.bytesReceived+=l.length,this.stats_.incrementCounter("bytes_received",l.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(l);else{const a=this.extractFrameCount_(l);a!==null&&this.appendFrame_(a)}}send(n){this.resetKeepAlive();const l=xt(n);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const a=av(l,SC);a.length>1&&this.sendString_(String(a.length));for(let o=0;o<a.length;o++)this.sendString_(a[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(TC))}sendString_(n){try{this.mySock.send(n)}catch(l){this.log_("Exception thrown from WebSocket.send():",l.message||l.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xn.responsesRequiredToBeHealthy=2;xn.healthyTimeout=3e4;class ja{static get ALL_TRANSPORTS(){return[$s,xn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){const l=xn&&xn.isAvailable();let a=l&&!xn.previouslyFailed();if(n.webSocketOnly&&(l||It("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[xn];else{const o=this.transports_=[];for(const f of ja.ALL_TRANSPORTS)f&&f.isAvailable()&&o.push(f);ja.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ja.globalTransportInitialized_=!1;const wC=6e4,CC=5e3,NC=10*1024,EC=100*1024,Mf="t",H0="d",AC="s",B0="r",MC="e",U0="o",V0="a",G0="n",q0="p",RC="h";class kC{constructor(n,l,a,o,f,d,h,p,y,x){this.id=n,this.repoInfo_=l,this.applicationId_=a,this.appCheckToken_=o,this.authToken_=f,this.onMessage_=d,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qa("c:"+this.id+":"),this.transportManager_=new ja(l),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,a)},Math.floor(0));const o=n.healthyTimeout||0;o>0&&(this.healthyTimeout_=Ca(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>EC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>NC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return l=>{n===this.conn_?this.onConnectionLost_(l):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return l=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(l):n===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(n){const l={t:"d",d:n};this.sendData_(l)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(Mf in n){const l=n[Mf];l===V0?this.upgradeIfSecondaryHealthy_():l===B0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):l===U0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const l=va("t",n),a=va("d",n);if(l==="c")this.onSecondaryControl_(a);else if(l==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+l)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:q0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:V0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:G0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const l=va("t",n),a=va("d",n);l==="c"?this.onControl_(a):l==="d"&&this.onDataMessage_(a)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const l=va(Mf,n);if(H0 in n){const a=n[H0];if(l===RC){const o={...a};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(l===G0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else l===AC?this.onConnectionShutdown_(a):l===B0?this.onReset_(a):l===MC?Ff("Server Error: "+a):l===U0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ff("Unknown control packet command: "+l)}}onHandshake_(n){const l=n.ts,a=n.v,o=n.h;this.sessionId=n.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),Sd!==a&&It("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,a),Ca(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(wC))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,l){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ca(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:q0,d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ns.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class wv{put(n,l,a,o){}merge(n,l,a,o){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,l,a){}onDisconnectMerge(n,l,a){}onDisconnectCancel(n,l){}reportStats(n){}}class Cv{constructor(n){this.allowedEvents_=n,this.listeners_={},Z(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...l){if(Array.isArray(this.listeners_[n])){const a=[...this.listeners_[n]];for(let o=0;o<a.length;o++)a[o].callback.apply(a[o].context,l)}}on(n,l,a){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:l,context:a});const o=this.getInitialEvent(n);o&&l.apply(a,o)}off(n,l,a){this.validateEventType_(n);const o=this.listeners_[n]||[];for(let f=0;f<o.length;f++)if(o[f].callback===l&&(!a||a===o[f].context)){o.splice(f,1);return}}validateEventType_(n){Z(this.allowedEvents_.find(l=>l===n),"Unknown event: "+n)}}class Co extends Cv{static getInstance(){return new Co}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ky()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(n){return Z(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}const Q0=32,Y0=768;class Je{constructor(n,l){if(l===void 0){this.pieces_=n.split("/");let a=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[a]=this.pieces_[o],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=l}toString(){let n="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)this.pieces_[l]!==""&&(n+="/"+this.pieces_[l]);return n||"/"}}function Ge(){return new Je("")}function Ae(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Di(s){return s.pieces_.length-s.pieceNum_}function it(s){let n=s.pieceNum_;return n<s.pieces_.length&&n++,new Je(s.pieces_,n)}function Cd(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function DC(s){let n="";for(let l=s.pieceNum_;l<s.pieces_.length;l++)s.pieces_[l]!==""&&(n+="/"+encodeURIComponent(String(s.pieces_[l])));return n||"/"}function Oa(s,n=0){return s.pieces_.slice(s.pieceNum_+n)}function Nv(s){if(s.pieceNum_>=s.pieces_.length)return null;const n=[];for(let l=s.pieceNum_;l<s.pieces_.length-1;l++)n.push(s.pieces_[l]);return new Je(n,0)}function ut(s,n){const l=[];for(let a=s.pieceNum_;a<s.pieces_.length;a++)l.push(s.pieces_[a]);if(n instanceof Je)for(let a=n.pieceNum_;a<n.pieces_.length;a++)l.push(n.pieces_[a]);else{const a=n.split("/");for(let o=0;o<a.length;o++)a[o].length>0&&l.push(a[o])}return new Je(l,0)}function Oe(s){return s.pieceNum_>=s.pieces_.length}function zt(s,n){const l=Ae(s),a=Ae(n);if(l===null)return n;if(l===a)return zt(it(s),it(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+s+")")}function jC(s,n){const l=Oa(s,0),a=Oa(n,0);for(let o=0;o<l.length&&o<a.length;o++){const f=cs(l[o],a[o]);if(f!==0)return f}return l.length===a.length?0:l.length<a.length?-1:1}function Nd(s,n){if(Di(s)!==Di(n))return!1;for(let l=s.pieceNum_,a=n.pieceNum_;l<=s.pieces_.length;l++,a++)if(s.pieces_[l]!==n.pieces_[a])return!1;return!0}function gn(s,n){let l=s.pieceNum_,a=n.pieceNum_;if(Di(s)>Di(n))return!1;for(;l<s.pieces_.length;){if(s.pieces_[l]!==n.pieces_[a])return!1;++l,++a}return!0}class OC{constructor(n,l){this.errorPrefix_=l,this.parts_=Oa(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=Go(this.parts_[a]);Ev(this)}}function zC(s,n){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(n),s.byteLength_+=Go(n),Ev(s)}function IC(s){const n=s.parts_.pop();s.byteLength_-=Go(n),s.parts_.length>0&&(s.byteLength_-=1)}function Ev(s){if(s.byteLength_>Y0)throw new Error(s.errorPrefix_+"has a key path longer than "+Y0+" bytes ("+s.byteLength_+").");if(s.parts_.length>Q0)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Q0+") or object contains a cycle "+ts(s))}function ts(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}class Ed extends Cv{static getInstance(){return new Ed}constructor(){super(["visible"]);let n,l;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const a=!document[n];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(n){return Z(n==="visible","Unknown event type: "+n),[this.visible_]}}const ba=1e3,LC=300*1e3,X0=30*1e3,HC=1.3,BC=3e4,UC="server_kill",K0=3;class Jn extends wv{constructor(n,l,a,o,f,d,h,p){if(super(),this.repoInfo_=n,this.applicationId_=l,this.onDataUpdate_=a,this.onConnectStatus_=o,this.onServerInfoUpdate_=f,this.authTokenProvider_=d,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=Jn.nextPersistentConnectionId_++,this.log_=qa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ba,this.maxReconnectDelay_=LC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ed.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Co.getInstance().on("online",this.onOnline_,this)}sendRequest(n,l,a){const o=++this.requestNumber_,f={r:o,a:n,b:l};this.log_(xt(f)),Z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(f),a&&(this.requestCBHash_[o]=a)}get(n){this.initConnection_();const l=new Ua,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:d=>{const h=d.d;d.s==="ok"?l.resolve(h):l.reject(h)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const f=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(f),l.promise}listen(n,l,a,o){this.initConnection_();const f=n._queryIdentifier,d=n._path.toString();this.log_("Listen called for "+d+" "+f),this.listens.has(d)||this.listens.set(d,new Map),Z(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Z(!this.listens.get(d).has(f),"listen() called twice for same path/queryId.");const h={onComplete:o,hashFn:l,query:n,tag:a};this.listens.get(d).set(f,h),this.connected_&&this.sendListen_(h)}sendGet_(n){const l=this.outstandingGets_[n];this.sendRequest("g",l.request,a=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),l.onComplete&&l.onComplete(a)})}sendListen_(n){const l=n.query,a=l._path.toString(),o=l._queryIdentifier;this.log_("Listen on "+a+" for "+o);const f={p:a},d="q";n.tag&&(f.q=l._queryObject,f.t=n.tag),f.h=n.hashFn(),this.sendRequest(d,f,h=>{const p=h.d,y=h.s;Jn.warnOnListenWarnings_(p,l),(this.listens.get(a)&&this.listens.get(a).get(o))===n&&(this.log_("listen response",h),y!=="ok"&&this.removeListen_(a,o),n.onComplete&&n.onComplete(y,p))})}static warnOnListenWarnings_(n,l){if(n&&typeof n=="object"&&Rn(n,"w")){const a=al(n,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const o='".indexOn": "'+l._queryParams.getIndex().toString()+'"',f=l._path.toString();It(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${f} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||AT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=X0)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,l=ET(n)?"auth":"gauth",a={cred:n};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(l,a,o=>{const f=o.s,d=o.d||"error";this.authToken_===n&&(f==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(f,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const l=n.s,a=n.d||"error";l==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(l,a)})}unlisten(n,l){const a=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+a+" "+o),Z(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,o)&&this.connected_&&this.sendUnlisten_(a,o,n._queryObject,l)}sendUnlisten_(n,l,a,o){this.log_("Unlisten on "+n+" for "+l);const f={p:n},d="n";o&&(f.q=a,f.t=o),this.sendRequest(d,f)}onDisconnectPut(n,l,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,l,a):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:l,onComplete:a})}onDisconnectMerge(n,l,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,l,a):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:l,onComplete:a})}onDisconnectCancel(n,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,l):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:l})}sendOnDisconnect_(n,l,a,o){const f={p:l,d:a};this.log_("onDisconnect "+n,f),this.sendRequest(n,f,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(n,l,a,o){this.putInternal("p",n,l,a,o)}merge(n,l,a,o){this.putInternal("m",n,l,a,o)}putInternal(n,l,a,o,f){this.initConnection_();const d={p:l,d:a};f!==void 0&&(d.h=f),this.outstandingPuts_.push({action:n,request:d,onComplete:o}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+l)}sendPut_(n){const l=this.outstandingPuts_[n].action,a=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(l,a,f=>{this.log_(l+" response",f),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(f.s,f.d)})}reportStats(n){if(this.connected_){const l={c:n};this.log_("reportStats",l),this.sendRequest("s",l,a=>{if(a.s!=="ok"){const f=a.d;this.log_("reportStats","Error sending stats: "+f)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+xt(n));const l=n.r,a=this.requestCBHash_[l];a&&(delete this.requestCBHash_[l],a(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,l){this.log_("handleServerMessage",n,l),n==="d"?this.onDataUpdate_(l.p,l.d,!1,l.t):n==="m"?this.onDataUpdate_(l.p,l.d,!0,l.t):n==="c"?this.onListenRevoked_(l.p,l.q):n==="ac"?this.onAuthRevoked_(l.s,l.d):n==="apc"?this.onAppCheckRevoked_(l.s,l.d):n==="sd"?this.onSecurityDebugPacket_(l):Ff("Unrecognized action received from server: "+xt(n)+`
Are you using the latest client?`)}onReady_(n,l){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=l,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ba,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ba,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BC&&(this.reconnectDelay_=ba),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let l=Math.max(0,this.reconnectDelay_-n);l=Math.random()*l,this.log_("Trying to reconnect in "+l+"ms"),this.scheduleConnect_(l),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*HC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const n=this.onDataMessage_.bind(this),l=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Jn.nextConnectionId_++,f=this.lastSessionId;let d=!1,h=null;const p=function(){h?h.close():(d=!0,a())},y=function(b){Z(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(b)};this.realtime_={close:p,sendRequest:y};const x=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,_]=await Promise.all([this.authTokenProvider_.getToken(x),this.appCheckTokenProvider_.getToken(x)]);d?Dt("getToken() completed but was canceled"):(Dt("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=_&&_.token,h=new kC(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,l,a,C=>{It(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(UC)},f))}catch(b){this.log_("Failed to get token: "+b),d||(this.repoInfo_.nodeAdmin&&It(b),p())}}}interrupt(n){Dt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Dt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],S0(this.interruptReasons_)&&(this.reconnectDelay_=ba,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const l=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:l})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const l=this.outstandingPuts_[n];l&&"h"in l.request&&l.queued&&(l.onComplete&&l.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,l){let a;l?a=l.map(f=>xd(f)).join("$"):a="default";const o=this.removeListen_(n,a);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,l){const a=new Je(n).toString();let o;if(this.listens.has(a)){const f=this.listens.get(a);o=f.get(l),f.delete(l),f.size===0&&this.listens.delete(a)}else o=void 0;return o}onAuthRevoked_(n,l){Dt("Auth token revoked: "+n+"/"+l),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=K0&&(this.reconnectDelay_=X0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,l){Dt("App check token revoked: "+n+"/"+l),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=K0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const l of n.values())this.sendListen_(l);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let l="js";n["sdk."+l+"."+nv.replace(/\./g,"-")]=1,Ky()?n["framework.cordova"]=1:_T()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Co.getInstance().currentlyOnline();return S0(this.interruptReasons_)&&n}}Jn.nextPersistentConnectionId_=0;Jn.nextConnectionId_=0;class Me{constructor(n,l){this.name=n,this.node=l}static Wrap(n,l){return new Me(n,l)}}class qo{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,l){const a=new Me(rl,n),o=new Me(rl,l);return this.compare(a,o)!==0}minPost(){return Me.MIN}}let mo;class Av extends qo{static get __EMPTY_NODE(){return mo}static set __EMPTY_NODE(n){mo=n}compare(n,l){return cs(n.name,l.name)}isDefinedOn(n){throw yl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,l){return!1}minPost(){return Me.MIN}maxPost(){return new Me(ls,mo)}makePost(n,l){return Z(typeof n=="string","KeyIndex indexValue must always be a string."),new Me(n,mo)}toString(){return".key"}}const il=new Av;class go{constructor(n,l,a,o,f=null){this.isReverse_=o,this.resultGenerator_=f,this.nodeStack_=[];let d=1;for(;!n.isEmpty();)if(n=n,d=l?a(n.key,l):1,o&&(d*=-1),d<0)this.isReverse_?n=n.left:n=n.right;else if(d===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),l;if(this.resultGenerator_?l=this.resultGenerator_(n.key,n.value):l={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}class Nt{constructor(n,l,a,o,f){this.key=n,this.value=l,this.color=a??Nt.RED,this.left=o??Yt.EMPTY_NODE,this.right=f??Yt.EMPTY_NODE}copy(n,l,a,o,f){return new Nt(n??this.key,l??this.value,a??this.color,o??this.left,f??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,l,a){let o=this;const f=a(n,o.key);return f<0?o=o.copy(null,null,null,o.left.insert(n,l,a),null):f===0?o=o.copy(null,l,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,l,a)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,l){let a,o;if(a=this,l(n,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(n,l),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),l(n,a.key)===0){if(a.right.isEmpty())return Yt.EMPTY_NODE;o=a.right.min_(),a=a.copy(o.key,o.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(n,l))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),l=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,l)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}Nt.RED=!0;Nt.BLACK=!1;class VC{copy(n,l,a,o,f){return this}insert(n,l,a){return new Nt(n,l,null)}remove(n,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Yt{constructor(n,l=Yt.EMPTY_NODE){this.comparator_=n,this.root_=l}insert(n,l){return new Yt(this.comparator_,this.root_.insert(n,l,this.comparator_).copy(null,null,Nt.BLACK,null,null))}remove(n){return new Yt(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Nt.BLACK,null,null))}get(n){let l,a=this.root_;for(;!a.isEmpty();){if(l=this.comparator_(n,a.key),l===0)return a.value;l<0?a=a.left:l>0&&(a=a.right)}return null}getPredecessorKey(n){let l,a=this.root_,o=null;for(;!a.isEmpty();)if(l=this.comparator_(n,a.key),l===0){if(a.left.isEmpty())return o?o.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else l<0?a=a.left:l>0&&(o=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new go(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,l){return new go(this.root_,n,this.comparator_,!1,l)}getReverseIteratorFrom(n,l){return new go(this.root_,n,this.comparator_,!0,l)}getReverseIterator(n){return new go(this.root_,null,this.comparator_,!0,n)}}Yt.EMPTY_NODE=new VC;function GC(s,n){return cs(s.name,n.name)}function Ad(s,n){return cs(s,n)}let Zf;function qC(s){Zf=s}const Mv=function(s){return typeof s=="number"?"number:"+rv(s):"string:"+s},Rv=function(s){if(s.isLeafNode()){const n=s.val();Z(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Rn(n,".sv"),"Priority must be a string or number.")}else Z(s===Zf||s.isEmpty(),"priority of unexpected type.");Z(s===Zf||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let F0;class Ct{static set __childrenNodeConstructor(n){F0=n}static get __childrenNodeConstructor(){return F0}constructor(n,l=Ct.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=l,this.lazyHash_=null,Z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Rv(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new Ct(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:Ct.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Oe(n)?this:Ae(n)===".priority"?this.priorityNode_:Ct.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,l){return null}updateImmediateChild(n,l){return n===".priority"?this.updatePriority(l):l.isEmpty()&&n!==".priority"?this:Ct.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,l).updatePriority(this.priorityNode_)}updateChild(n,l){const a=Ae(n);return a===null?l:l.isEmpty()&&a!==".priority"?this:(Z(a!==".priority"||Di(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,Ct.__childrenNodeConstructor.EMPTY_NODE.updateChild(it(n),l)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,l){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Mv(this.priorityNode_.val())+":");const l=typeof this.value_;n+=l+":",l==="number"?n+=rv(this.value_):n+=this.value_,this.lazyHash_=lv(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===Ct.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof Ct.__childrenNodeConstructor?-1:(Z(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const l=typeof n.value_,a=typeof this.value_,o=Ct.VALUE_TYPE_ORDER.indexOf(l),f=Ct.VALUE_TYPE_ORDER.indexOf(a);return Z(o>=0,"Unknown leaf type: "+l),Z(f>=0,"Unknown leaf type: "+a),o===f?a==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:f-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const l=n;return this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_)}else return!1}}Ct.VALUE_TYPE_ORDER=["object","boolean","number","string"];let kv,Dv;function QC(s){kv=s}function YC(s){Dv=s}class XC extends qo{compare(n,l){const a=n.node.getPriority(),o=l.node.getPriority(),f=a.compareTo(o);return f===0?cs(n.name,l.name):f}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,l){return!n.getPriority().equals(l.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(ls,new Ct("[PRIORITY-POST]",Dv))}makePost(n,l){const a=kv(n);return new Me(l,new Ct("[PRIORITY-POST]",a))}toString(){return".priority"}}const ft=new XC;const KC=Math.log(2);class FC{constructor(n){const l=f=>parseInt(Math.log(f)/KC,10),a=f=>parseInt(Array(f+1).join("1"),2);this.count=l(n+1),this.current_=this.count-1;const o=a(this.count);this.bits_=n+1&o}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const No=function(s,n,l,a){s.sort(n);const o=function(p,y){const x=y-p;let b,_;if(x===0)return null;if(x===1)return b=s[p],_=l?l(b):b,new Nt(_,b.node,Nt.BLACK,null,null);{const C=parseInt(x/2,10)+p,z=o(p,C),D=o(C+1,y);return b=s[C],_=l?l(b):b,new Nt(_,b.node,Nt.BLACK,z,D)}},f=function(p){let y=null,x=null,b=s.length;const _=function(z,D){const q=b-z,P=b;b-=z;const F=o(q+1,P),G=s[q],J=l?l(G):G;C(new Nt(J,G.node,D,null,F))},C=function(z){y?(y.left=z,y=z):(x=z,y=z)};for(let z=0;z<p.count;++z){const D=p.nextBitIsOne(),q=Math.pow(2,p.count-(z+1));D?_(q,Nt.BLACK):(_(q,Nt.BLACK),_(q,Nt.RED))}return x},d=new FC(s.length),h=f(d);return new Yt(a||n,h)};let Rf;const Ws={};class Wn{static get Default(){return Z(Ws&&ft,"ChildrenNode.ts has not been loaded"),Rf=Rf||new Wn({".priority":Ws},{".priority":ft}),Rf}constructor(n,l){this.indexes_=n,this.indexSet_=l}get(n){const l=al(this.indexes_,n);if(!l)throw new Error("No index defined for "+n);return l instanceof Yt?l:null}hasIndex(n){return Rn(this.indexSet_,n.toString())}addIndex(n,l){Z(n!==il,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let o=!1;const f=l.getIterator(Me.Wrap);let d=f.getNext();for(;d;)o=o||n.isDefinedOn(d.node),a.push(d),d=f.getNext();let h;o?h=No(a,n.getCompare()):h=Ws;const p=n.toString(),y={...this.indexSet_};y[p]=n;const x={...this.indexes_};return x[p]=h,new Wn(x,y)}addToIndexes(n,l){const a=_o(this.indexes_,(o,f)=>{const d=al(this.indexSet_,f);if(Z(d,"Missing index implementation for "+f),o===Ws)if(d.isDefinedOn(n.node)){const h=[],p=l.getIterator(Me.Wrap);let y=p.getNext();for(;y;)y.name!==n.name&&h.push(y),y=p.getNext();return h.push(n),No(h,d.getCompare())}else return Ws;else{const h=l.get(n.name);let p=o;return h&&(p=p.remove(new Me(n.name,h))),p.insert(n,n.node)}});return new Wn(a,this.indexSet_)}removeFromIndexes(n,l){const a=_o(this.indexes_,o=>{if(o===Ws)return o;{const f=l.get(n.name);return f?o.remove(new Me(n.name,f)):o}});return new Wn(a,this.indexSet_)}}let _a;class ye{static get EMPTY_NODE(){return _a||(_a=new ye(new Yt(Ad),null,Wn.Default))}constructor(n,l,a){this.children_=n,this.priorityNode_=l,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&Rv(this.priorityNode_),this.children_.isEmpty()&&Z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_a}updatePriority(n){return this.children_.isEmpty()?this:new ye(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{const l=this.children_.get(n);return l===null?_a:l}}getChild(n){const l=Ae(n);return l===null?this:this.getImmediateChild(l).getChild(it(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,l){if(Z(l,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(l);{const a=new Me(n,l);let o,f;l.isEmpty()?(o=this.children_.remove(n),f=this.indexMap_.removeFromIndexes(a,this.children_)):(o=this.children_.insert(n,l),f=this.indexMap_.addToIndexes(a,this.children_));const d=o.isEmpty()?_a:this.priorityNode_;return new ye(o,d,f)}}updateChild(n,l){const a=Ae(n);if(a===null)return l;{Z(Ae(n)!==".priority"||Di(n)===1,".priority must be the last token in a path");const o=this.getImmediateChild(a).updateChild(it(n),l);return this.updateImmediateChild(a,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const l={};let a=0,o=0,f=!0;if(this.forEachChild(ft,(d,h)=>{l[d]=h.val(n),a++,f&&ye.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):f=!1}),!n&&f&&o<2*a){const d=[];for(const h in l)d[h]=l[h];return d}else return n&&!this.getPriority().isEmpty()&&(l[".priority"]=this.getPriority().val()),l}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Mv(this.getPriority().val())+":"),this.forEachChild(ft,(l,a)=>{const o=a.hash();o!==""&&(n+=":"+l+":"+o)}),this.lazyHash_=n===""?"":lv(n)}return this.lazyHash_}getPredecessorChildName(n,l,a){const o=this.resolveIndex_(a);if(o){const f=o.getPredecessorKey(new Me(n,l));return f?f.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){const l=this.resolveIndex_(n);if(l){const a=l.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(n){const l=this.getFirstChildName(n);return l?new Me(l,this.children_.get(l)):null}getLastChildName(n){const l=this.resolveIndex_(n);if(l){const a=l.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(n){const l=this.getLastChildName(n);return l?new Me(l,this.children_.get(l)):null}forEachChild(n,l){const a=this.resolveIndex_(n);return a?a.inorderTraversal(o=>l(o.name,o.node)):this.children_.inorderTraversal(l)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,l){const a=this.resolveIndex_(l);if(a)return a.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,Me.Wrap);let f=o.peek();for(;f!=null&&l.compare(f,n)<0;)o.getNext(),f=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,l){const a=this.resolveIndex_(l);if(a)return a.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,Me.Wrap);let f=o.peek();for(;f!=null&&l.compare(f,n)>0;)o.getNext(),f=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Qa?-1:0}withIndex(n){if(n===il||this.indexMap_.hasIndex(n))return this;{const l=this.indexMap_.addIndex(n,this.children_);return new ye(this.children_,this.priorityNode_,l)}}isIndexed(n){return n===il||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const l=n;if(this.getPriority().equals(l.getPriority()))if(this.children_.count()===l.children_.count()){const a=this.getIterator(ft),o=l.getIterator(ft);let f=a.getNext(),d=o.getNext();for(;f&&d;){if(f.name!==d.name||!f.node.equals(d.node))return!1;f=a.getNext(),d=o.getNext()}return f===null&&d===null}else return!1;else return!1}}resolveIndex_(n){return n===il?null:this.indexMap_.get(n.toString())}}ye.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class PC extends ye{constructor(){super(new Yt(Ad),ye.EMPTY_NODE,Wn.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return ye.EMPTY_NODE}isEmpty(){return!1}}const Qa=new PC;Object.defineProperties(Me,{MIN:{value:new Me(rl,ye.EMPTY_NODE)},MAX:{value:new Me(ls,Qa)}});Av.__EMPTY_NODE=ye.EMPTY_NODE;Ct.__childrenNodeConstructor=ye;qC(Qa);YC(Qa);const ZC=!0;function _t(s,n=null){if(s===null)return ye.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(n=s[".priority"]),Z(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const l=s;return new Ct(l,_t(n))}if(!(s instanceof Array)&&ZC){const l=[];let a=!1;if(jt(s,(d,h)=>{if(d.substring(0,1)!=="."){const p=_t(h);p.isEmpty()||(a=a||!p.getPriority().isEmpty(),l.push(new Me(d,p)))}}),l.length===0)return ye.EMPTY_NODE;const f=No(l,GC,d=>d.name,Ad);if(a){const d=No(l,ft.getCompare());return new ye(f,_t(n),new Wn({".priority":d},{".priority":ft}))}else return new ye(f,_t(n),Wn.Default)}else{let l=ye.EMPTY_NODE;return jt(s,(a,o)=>{if(Rn(s,a)&&a.substring(0,1)!=="."){const f=_t(o);(f.isLeafNode()||!f.isEmpty())&&(l=l.updateImmediateChild(a,f))}}),l.updatePriority(_t(n))}}QC(_t);class WC extends qo{constructor(n){super(),this.indexPath_=n,Z(!Oe(n)&&Ae(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,l){const a=this.extractChild(n.node),o=this.extractChild(l.node),f=a.compareTo(o);return f===0?cs(n.name,l.name):f}makePost(n,l){const a=_t(n),o=ye.EMPTY_NODE.updateChild(this.indexPath_,a);return new Me(l,o)}maxPost(){const n=ye.EMPTY_NODE.updateChild(this.indexPath_,Qa);return new Me(ls,n)}toString(){return Oa(this.indexPath_,0).join("/")}}class JC extends qo{compare(n,l){const a=n.node.compareTo(l.node);return a===0?cs(n.name,l.name):a}isDefinedOn(n){return!0}indexedValueChanged(n,l){return!n.equals(l)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(n,l){const a=_t(n);return new Me(l,a)}toString(){return".value"}}const $C=new JC;function jv(s){return{type:"value",snapshotNode:s}}function ol(s,n){return{type:"child_added",snapshotNode:n,childName:s}}function za(s,n){return{type:"child_removed",snapshotNode:n,childName:s}}function Ia(s,n,l){return{type:"child_changed",snapshotNode:n,childName:s,oldSnap:l}}function eN(s,n){return{type:"child_moved",snapshotNode:n,childName:s}}class Md{constructor(n){this.index_=n}updateChild(n,l,a,o,f,d){Z(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=n.getImmediateChild(l);return h.getChild(o).equals(a.getChild(o))&&h.isEmpty()===a.isEmpty()||(d!=null&&(a.isEmpty()?n.hasChild(l)?d.trackChildChange(za(l,h)):Z(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?d.trackChildChange(ol(l,a)):d.trackChildChange(Ia(l,a,h))),n.isLeafNode()&&a.isEmpty())?n:n.updateImmediateChild(l,a).withIndex(this.index_)}updateFullNode(n,l,a){return a!=null&&(n.isLeafNode()||n.forEachChild(ft,(o,f)=>{l.hasChild(o)||a.trackChildChange(za(o,f))}),l.isLeafNode()||l.forEachChild(ft,(o,f)=>{if(n.hasChild(o)){const d=n.getImmediateChild(o);d.equals(f)||a.trackChildChange(Ia(o,f,d))}else a.trackChildChange(ol(o,f))})),l.withIndex(this.index_)}updatePriority(n,l){return n.isEmpty()?ye.EMPTY_NODE:n.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class La{constructor(n){this.indexedFilter_=new Md(n.getIndex()),this.index_=n.getIndex(),this.startPost_=La.getStartPost_(n),this.endPost_=La.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,a=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return l&&a}updateChild(n,l,a,o,f,d){return this.matches(new Me(l,a))||(a=ye.EMPTY_NODE),this.indexedFilter_.updateChild(n,l,a,o,f,d)}updateFullNode(n,l,a){l.isLeafNode()&&(l=ye.EMPTY_NODE);let o=l.withIndex(this.index_);o=o.updatePriority(ye.EMPTY_NODE);const f=this;return l.forEachChild(ft,(d,h)=>{f.matches(new Me(d,h))||(o=o.updateImmediateChild(d,ye.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,o,a)}updatePriority(n,l){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const l=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),l)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const l=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),l)}else return n.getIndex().maxPost()}}class tN{constructor(n){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=l=>{const a=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new La(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,l,a,o,f,d){return this.rangedFilter_.matches(new Me(l,a))||(a=ye.EMPTY_NODE),n.getImmediateChild(l).equals(a)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,l,a,o,f,d):this.fullLimitUpdateChild_(n,l,a,f,d)}updateFullNode(n,l,a){let o;if(l.isLeafNode()||l.isEmpty())o=ye.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<l.numChildren()&&l.isIndexed(this.index_)){o=ye.EMPTY_NODE.withIndex(this.index_);let f;this.reverse_?f=l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f=l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;f.hasNext()&&d<this.limit_;){const h=f.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))o=o.updateImmediateChild(h.name,h.node),d++;else break;else continue}}else{o=l.withIndex(this.index_),o=o.updatePriority(ye.EMPTY_NODE);let f;this.reverse_?f=o.getReverseIterator(this.index_):f=o.getIterator(this.index_);let d=0;for(;f.hasNext();){const h=f.getNext();d<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?d++:o=o.updateImmediateChild(h.name,ye.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,o,a)}updatePriority(n,l){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,l,a,o,f){let d;if(this.reverse_){const b=this.index_.getCompare();d=(_,C)=>b(C,_)}else d=this.index_.getCompare();const h=n;Z(h.numChildren()===this.limit_,"");const p=new Me(l,a),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),x=this.rangedFilter_.matches(p);if(h.hasChild(l)){const b=h.getImmediateChild(l);let _=o.getChildAfterChild(this.index_,y,this.reverse_);for(;_!=null&&(_.name===l||h.hasChild(_.name));)_=o.getChildAfterChild(this.index_,_,this.reverse_);const C=_==null?1:d(_,p);if(x&&!a.isEmpty()&&C>=0)return f?.trackChildChange(Ia(l,a,b)),h.updateImmediateChild(l,a);{f?.trackChildChange(za(l,b));const D=h.updateImmediateChild(l,ye.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(f?.trackChildChange(ol(_.name,_.node)),D.updateImmediateChild(_.name,_.node)):D}}else return a.isEmpty()?n:x&&d(y,p)>=0?(f!=null&&(f.trackChildChange(za(y.name,y.node)),f.trackChildChange(ol(l,a))),h.updateImmediateChild(l,a).updateImmediateChild(y.name,ye.EMPTY_NODE)):n}}class Qo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rl}hasEnd(){return this.endSet_}getIndexEndValue(){return Z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ls}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ft}copy(){const n=new Qo;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function nN(s){return s.loadsAllData()?new Md(s.getIndex()):s.hasLimit()?new tN(s):new La(s)}function P0(s){const n={};if(s.isDefault())return n;let l;if(s.index_===ft?l="$priority":s.index_===$C?l="$value":s.index_===il?l="$key":(Z(s.index_ instanceof WC,"Unrecognized index type!"),l=s.index_.toString()),n.orderBy=xt(l),s.startSet_){const a=s.startAfterSet_?"startAfter":"startAt";n[a]=xt(s.indexStartValue_),s.startNameSet_&&(n[a]+=","+xt(s.indexStartName_))}if(s.endSet_){const a=s.endBeforeSet_?"endBefore":"endAt";n[a]=xt(s.indexEndValue_),s.endNameSet_&&(n[a]+=","+xt(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?n.limitToFirst=s.limit_:n.limitToLast=s.limit_),n}function Z0(s){const n={};if(s.startSet_&&(n.sp=s.indexStartValue_,s.startNameSet_&&(n.sn=s.indexStartName_),n.sin=!s.startAfterSet_),s.endSet_&&(n.ep=s.indexEndValue_,s.endNameSet_&&(n.en=s.indexEndName_),n.ein=!s.endBeforeSet_),s.limitSet_){n.l=s.limit_;let l=s.viewFrom_;l===""&&(s.isViewFromLeft()?l="l":l="r"),n.vf=l}return s.index_!==ft&&(n.i=s.index_.toString()),n}class Eo extends wv{reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,l){return l!==void 0?"tag$"+l:(Z(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}constructor(n,l,a,o){super(),this.repoInfo_=n,this.onDataUpdate_=l,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.log_=qa("p:rest:"),this.listens_={}}listen(n,l,a,o){const f=n._path.toString();this.log_("Listen called for "+f+" "+n._queryIdentifier);const d=Eo.getListenId_(n,a),h={};this.listens_[d]=h;const p=P0(n._queryParams);this.restRequest_(f+".json",p,(y,x)=>{let b=x;if(y===404&&(b=null,y=null),y===null&&this.onDataUpdate_(f,b,!1,a),al(this.listens_,d)===h){let _;y?y===401?_="permission_denied":_="rest_error:"+y:_="ok",o(_,null)}})}unlisten(n,l){const a=Eo.getListenId_(n,l);delete this.listens_[a]}get(n){const l=P0(n._queryParams),a=n._path.toString(),o=new Ua;return this.restRequest_(a+".json",l,(f,d)=>{let h=d;f===404&&(h=null,f=null),f===null?(this.onDataUpdate_(a,h,!1,null),o.resolve(h)):o.reject(new Error(h))}),o.promise}refreshAuthToken(n){}restRequest_(n,l={},a){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,f])=>{o&&o.accessToken&&(l.auth=o.accessToken),f&&f.token&&(l.ac=f.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+MT(l);this.log_("Sending REST request for "+d);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(a&&h.readyState===4){this.log_("REST Response for "+d+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=Ra(h.responseText)}catch{It("Failed to parse JSON response for "+d+": "+h.responseText)}a(null,p)}else h.status!==401&&h.status!==404&&It("Got unsuccessful REST response for "+d+" Status: "+h.status),a(h.status);a=null}},h.open("GET",d,!0),h.send()})}}class iN{constructor(){this.rootNode_=ye.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,l){this.rootNode_=this.rootNode_.updateChild(n,l)}}function Ao(){return{value:null,children:new Map}}function Ov(s,n,l){if(Oe(n))s.value=l,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(n,l);else{const a=Ae(n);s.children.has(a)||s.children.set(a,Ao());const o=s.children.get(a);n=it(n),Ov(o,n,l)}}function Wf(s,n,l){s.value!==null?l(n,s.value):sN(s,(a,o)=>{const f=new Je(n.toString()+"/"+a);Wf(o,f,l)})}function sN(s,n){s.children.forEach((l,a)=>{n(a,l)})}class lN{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),l={...n};return this.last_&&jt(this.last_,(a,o)=>{l[a]=l[a]-o}),this.last_=n,l}}const W0=10*1e3,aN=30*1e3,rN=300*1e3;class oN{constructor(n,l){this.server_=l,this.statsToReport_={},this.statsListener_=new lN(n);const a=W0+(aN-W0)*Math.random();Ca(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const n=this.statsListener_.get(),l={};let a=!1;jt(n,(o,f)=>{f>0&&Rn(this.statsToReport_,o)&&(l[o]=f,a=!0)}),a&&this.server_.reportStats(l),Ca(this.reportStats_.bind(this),Math.floor(Math.random()*2*rN))}}var Sn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Sn||(Sn={}));function Rd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Dd(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}class Mo{constructor(n,l,a){this.path=n,this.affectedTree=l,this.revert=a,this.type=Sn.ACK_USER_WRITE,this.source=Rd()}operationForChild(n){if(Oe(this.path)){if(this.affectedTree.value!=null)return Z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new Je(n));return new Mo(Ge(),l,this.revert)}}else return Z(Ae(this.path)===n,"operationForChild called for unrelated child."),new Mo(it(this.path),this.affectedTree,this.revert)}}class Ha{constructor(n,l){this.source=n,this.path=l,this.type=Sn.LISTEN_COMPLETE}operationForChild(n){return Oe(this.path)?new Ha(this.source,Ge()):new Ha(this.source,it(this.path))}}class as{constructor(n,l,a){this.source=n,this.path=l,this.snap=a,this.type=Sn.OVERWRITE}operationForChild(n){return Oe(this.path)?new as(this.source,Ge(),this.snap.getImmediateChild(n)):new as(this.source,it(this.path),this.snap)}}class cl{constructor(n,l,a){this.source=n,this.path=l,this.children=a,this.type=Sn.MERGE}operationForChild(n){if(Oe(this.path)){const l=this.children.subtree(new Je(n));return l.isEmpty()?null:l.value?new as(this.source,Ge(),l.value):new cl(this.source,Ge(),l)}else return Z(Ae(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new cl(this.source,it(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ji{constructor(n,l,a){this.node_=n,this.fullyInitialized_=l,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(Oe(n))return this.isFullyInitialized()&&!this.filtered_;const l=Ae(n);return this.isCompleteForChild(l)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class cN{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function uN(s,n,l,a){const o=[],f=[];return n.forEach(d=>{d.type==="child_changed"&&s.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&f.push(eN(d.childName,d.snapshotNode))}),xa(s,o,"child_removed",n,a,l),xa(s,o,"child_added",n,a,l),xa(s,o,"child_moved",f,a,l),xa(s,o,"child_changed",n,a,l),xa(s,o,"value",n,a,l),o}function xa(s,n,l,a,o,f){const d=a.filter(h=>h.type===l);d.sort((h,p)=>dN(s,h,p)),d.forEach(h=>{const p=fN(s,h,f);o.forEach(y=>{y.respondsTo(h.type)&&n.push(y.createEvent(p,s.query_))})})}function fN(s,n,l){return n.type==="value"||n.type==="child_removed"||(n.prevName=l.getPredecessorChildName(n.childName,n.snapshotNode,s.index_)),n}function dN(s,n,l){if(n.childName==null||l.childName==null)throw yl("Should only compare child_ events.");const a=new Me(n.childName,n.snapshotNode),o=new Me(l.childName,l.snapshotNode);return s.index_.compare(a,o)}function Yo(s,n){return{eventCache:s,serverCache:n}}function Na(s,n,l,a){return Yo(new ji(n,l,a),s.serverCache)}function zv(s,n,l,a){return Yo(s.eventCache,new ji(n,l,a))}function Ro(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function rs(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}let kf;const hN=()=>(kf||(kf=new Yt(Ww)),kf);class tt{static fromObject(n){let l=new tt(null);return jt(n,(a,o)=>{l=l.set(new Je(a),o)}),l}constructor(n,l=hN()){this.value=n,this.children=l}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,l){if(this.value!=null&&l(this.value))return{path:Ge(),value:this.value};if(Oe(n))return null;{const a=Ae(n),o=this.children.get(a);if(o!==null){const f=o.findRootMostMatchingPathAndValue(it(n),l);return f!=null?{path:ut(new Je(a),f.path),value:f.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(Oe(n))return this;{const l=Ae(n),a=this.children.get(l);return a!==null?a.subtree(it(n)):new tt(null)}}set(n,l){if(Oe(n))return new tt(l,this.children);{const a=Ae(n),f=(this.children.get(a)||new tt(null)).set(it(n),l),d=this.children.insert(a,f);return new tt(this.value,d)}}remove(n){if(Oe(n))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const l=Ae(n),a=this.children.get(l);if(a){const o=a.remove(it(n));let f;return o.isEmpty()?f=this.children.remove(l):f=this.children.insert(l,o),this.value===null&&f.isEmpty()?new tt(null):new tt(this.value,f)}else return this}}get(n){if(Oe(n))return this.value;{const l=Ae(n),a=this.children.get(l);return a?a.get(it(n)):null}}setTree(n,l){if(Oe(n))return l;{const a=Ae(n),f=(this.children.get(a)||new tt(null)).setTree(it(n),l);let d;return f.isEmpty()?d=this.children.remove(a):d=this.children.insert(a,f),new tt(this.value,d)}}fold(n){return this.fold_(Ge(),n)}fold_(n,l){const a={};return this.children.inorderTraversal((o,f)=>{a[o]=f.fold_(ut(n,o),l)}),l(n,this.value,a)}findOnPath(n,l){return this.findOnPath_(n,Ge(),l)}findOnPath_(n,l,a){const o=this.value?a(l,this.value):!1;if(o)return o;if(Oe(n))return null;{const f=Ae(n),d=this.children.get(f);return d?d.findOnPath_(it(n),ut(l,f),a):null}}foreachOnPath(n,l){return this.foreachOnPath_(n,Ge(),l)}foreachOnPath_(n,l,a){if(Oe(n))return this;{this.value&&a(l,this.value);const o=Ae(n),f=this.children.get(o);return f?f.foreachOnPath_(it(n),ut(l,o),a):new tt(null)}}foreach(n){this.foreach_(Ge(),n)}foreach_(n,l){this.children.inorderTraversal((a,o)=>{o.foreach_(ut(n,a),l)}),this.value&&l(n,this.value)}foreachChild(n){this.children.inorderTraversal((l,a)=>{a.value&&n(l,a.value)})}}class Tn{constructor(n){this.writeTree_=n}static empty(){return new Tn(new tt(null))}}function Ea(s,n,l){if(Oe(n))return new Tn(new tt(l));{const a=s.writeTree_.findRootMostValueAndPath(n);if(a!=null){const o=a.path;let f=a.value;const d=zt(o,n);return f=f.updateChild(d,l),new Tn(s.writeTree_.set(o,f))}else{const o=new tt(l),f=s.writeTree_.setTree(n,o);return new Tn(f)}}}function Jf(s,n,l){let a=s;return jt(l,(o,f)=>{a=Ea(a,ut(n,o),f)}),a}function J0(s,n){if(Oe(n))return Tn.empty();{const l=s.writeTree_.setTree(n,new tt(null));return new Tn(l)}}function $f(s,n){return us(s,n)!=null}function us(s,n){const l=s.writeTree_.findRootMostValueAndPath(n);return l!=null?s.writeTree_.get(l.path).getChild(zt(l.path,n)):null}function $0(s){const n=[],l=s.writeTree_.value;return l!=null?l.isLeafNode()||l.forEachChild(ft,(a,o)=>{n.push(new Me(a,o))}):s.writeTree_.children.inorderTraversal((a,o)=>{o.value!=null&&n.push(new Me(a,o.value))}),n}function Ri(s,n){if(Oe(n))return s;{const l=us(s,n);return l!=null?new Tn(new tt(l)):new Tn(s.writeTree_.subtree(n))}}function ed(s){return s.writeTree_.isEmpty()}function ul(s,n){return Iv(Ge(),s.writeTree_,n)}function Iv(s,n,l){if(n.value!=null)return l.updateChild(s,n.value);{let a=null;return n.children.inorderTraversal((o,f)=>{o===".priority"?(Z(f.value!==null,"Priority writes must always be leaf nodes"),a=f.value):l=Iv(ut(s,o),f,l)}),!l.getChild(s).isEmpty()&&a!==null&&(l=l.updateChild(ut(s,".priority"),a)),l}}function Xo(s,n){return Uv(n,s)}function mN(s,n,l,a,o){Z(a>s.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),s.allWrites.push({path:n,snap:l,writeId:a,visible:o}),o&&(s.visibleWrites=Ea(s.visibleWrites,n,l)),s.lastWriteId=a}function gN(s,n,l,a){Z(a>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:n,children:l,writeId:a,visible:!0}),s.visibleWrites=Jf(s.visibleWrites,n,l),s.lastWriteId=a}function pN(s,n){for(let l=0;l<s.allWrites.length;l++){const a=s.allWrites[l];if(a.writeId===n)return a}return null}function yN(s,n){const l=s.allWrites.findIndex(h=>h.writeId===n);Z(l>=0,"removeWrite called with nonexistent writeId.");const a=s.allWrites[l];s.allWrites.splice(l,1);let o=a.visible,f=!1,d=s.allWrites.length-1;for(;o&&d>=0;){const h=s.allWrites[d];h.visible&&(d>=l&&vN(h,a.path)?o=!1:gn(a.path,h.path)&&(f=!0)),d--}if(o){if(f)return bN(s),!0;if(a.snap)s.visibleWrites=J0(s.visibleWrites,a.path);else{const h=a.children;jt(h,p=>{s.visibleWrites=J0(s.visibleWrites,ut(a.path,p))})}return!0}else return!1}function vN(s,n){if(s.snap)return gn(s.path,n);for(const l in s.children)if(s.children.hasOwnProperty(l)&&gn(ut(s.path,l),n))return!0;return!1}function bN(s){s.visibleWrites=Lv(s.allWrites,_N,Ge()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function _N(s){return s.visible}function Lv(s,n,l){let a=Tn.empty();for(let o=0;o<s.length;++o){const f=s[o];if(n(f)){const d=f.path;let h;if(f.snap)gn(l,d)?(h=zt(l,d),a=Ea(a,h,f.snap)):gn(d,l)&&(h=zt(d,l),a=Ea(a,Ge(),f.snap.getChild(h)));else if(f.children){if(gn(l,d))h=zt(l,d),a=Jf(a,h,f.children);else if(gn(d,l))if(h=zt(d,l),Oe(h))a=Jf(a,Ge(),f.children);else{const p=al(f.children,Ae(h));if(p){const y=p.getChild(it(h));a=Ea(a,Ge(),y)}}}else throw yl("WriteRecord should have .snap or .children")}}return a}function Hv(s,n,l,a,o){if(!a&&!o){const f=us(s.visibleWrites,n);if(f!=null)return f;{const d=Ri(s.visibleWrites,n);if(ed(d))return l;if(l==null&&!$f(d,Ge()))return null;{const h=l||ye.EMPTY_NODE;return ul(d,h)}}}else{const f=Ri(s.visibleWrites,n);if(!o&&ed(f))return l;if(!o&&l==null&&!$f(f,Ge()))return null;{const d=function(y){return(y.visible||o)&&(!a||!~a.indexOf(y.writeId))&&(gn(y.path,n)||gn(n,y.path))},h=Lv(s.allWrites,d,n),p=l||ye.EMPTY_NODE;return ul(h,p)}}}function xN(s,n,l){let a=ye.EMPTY_NODE;const o=us(s.visibleWrites,n);if(o)return o.isLeafNode()||o.forEachChild(ft,(f,d)=>{a=a.updateImmediateChild(f,d)}),a;if(l){const f=Ri(s.visibleWrites,n);return l.forEachChild(ft,(d,h)=>{const p=ul(Ri(f,new Je(d)),h);a=a.updateImmediateChild(d,p)}),$0(f).forEach(d=>{a=a.updateImmediateChild(d.name,d.node)}),a}else{const f=Ri(s.visibleWrites,n);return $0(f).forEach(d=>{a=a.updateImmediateChild(d.name,d.node)}),a}}function SN(s,n,l,a,o){Z(a||o,"Either existingEventSnap or existingServerSnap must exist");const f=ut(n,l);if($f(s.visibleWrites,f))return null;{const d=Ri(s.visibleWrites,f);return ed(d)?o.getChild(l):ul(d,o.getChild(l))}}function TN(s,n,l,a){const o=ut(n,l),f=us(s.visibleWrites,o);if(f!=null)return f;if(a.isCompleteForChild(l)){const d=Ri(s.visibleWrites,o);return ul(d,a.getNode().getImmediateChild(l))}else return null}function wN(s,n){return us(s.visibleWrites,n)}function CN(s,n,l,a,o,f,d){let h;const p=Ri(s.visibleWrites,n),y=us(p,Ge());if(y!=null)h=y;else if(l!=null)h=ul(p,l);else return[];if(h=h.withIndex(d),!h.isEmpty()&&!h.isLeafNode()){const x=[],b=d.getCompare(),_=f?h.getReverseIteratorFrom(a,d):h.getIteratorFrom(a,d);let C=_.getNext();for(;C&&x.length<o;)b(C,a)!==0&&x.push(C),C=_.getNext();return x}else return[]}function NN(){return{visibleWrites:Tn.empty(),allWrites:[],lastWriteId:-1}}function ko(s,n,l,a){return Hv(s.writeTree,s.treePath,n,l,a)}function jd(s,n){return xN(s.writeTree,s.treePath,n)}function ey(s,n,l,a){return SN(s.writeTree,s.treePath,n,l,a)}function Do(s,n){return wN(s.writeTree,ut(s.treePath,n))}function EN(s,n,l,a,o,f){return CN(s.writeTree,s.treePath,n,l,a,o,f)}function Od(s,n,l){return TN(s.writeTree,s.treePath,n,l)}function Bv(s,n){return Uv(ut(s.treePath,n),s.writeTree)}function Uv(s,n){return{treePath:s,writeTree:n}}class AN{constructor(){this.changeMap=new Map}trackChildChange(n){const l=n.type,a=n.childName;Z(l==="child_added"||l==="child_changed"||l==="child_removed","Only child changes supported for tracking"),Z(a!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(a);if(o){const f=o.type;if(l==="child_added"&&f==="child_removed")this.changeMap.set(a,Ia(a,n.snapshotNode,o.snapshotNode));else if(l==="child_removed"&&f==="child_added")this.changeMap.delete(a);else if(l==="child_removed"&&f==="child_changed")this.changeMap.set(a,za(a,o.oldSnap));else if(l==="child_changed"&&f==="child_added")this.changeMap.set(a,ol(a,n.snapshotNode));else if(l==="child_changed"&&f==="child_changed")this.changeMap.set(a,Ia(a,n.snapshotNode,o.oldSnap));else throw yl("Illegal combination of changes: "+n+" occurred after "+o)}else this.changeMap.set(a,n)}getChanges(){return Array.from(this.changeMap.values())}}class MN{getCompleteChild(n){return null}getChildAfterChild(n,l,a){return null}}const Vv=new MN;class zd{constructor(n,l,a=null){this.writes_=n,this.viewCache_=l,this.optCompleteServerCache_=a}getCompleteChild(n){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(n))return l.getNode().getImmediateChild(n);{const a=this.optCompleteServerCache_!=null?new ji(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Od(this.writes_,n,a)}}getChildAfterChild(n,l,a){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:rs(this.viewCache_),f=EN(this.writes_,o,l,1,a,n);return f.length===0?null:f[0]}}function RN(s){return{filter:s}}function kN(s,n){Z(n.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Z(n.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function DN(s,n,l,a,o){const f=new AN;let d,h;if(l.type===Sn.OVERWRITE){const y=l;y.source.fromUser?d=td(s,n,y.path,y.snap,a,o,f):(Z(y.source.fromServer,"Unknown source."),h=y.source.tagged||n.serverCache.isFiltered()&&!Oe(y.path),d=jo(s,n,y.path,y.snap,a,o,h,f))}else if(l.type===Sn.MERGE){const y=l;y.source.fromUser?d=ON(s,n,y.path,y.children,a,o,f):(Z(y.source.fromServer,"Unknown source."),h=y.source.tagged||n.serverCache.isFiltered(),d=nd(s,n,y.path,y.children,a,o,h,f))}else if(l.type===Sn.ACK_USER_WRITE){const y=l;y.revert?d=LN(s,n,y.path,a,o,f):d=zN(s,n,y.path,y.affectedTree,a,o,f)}else if(l.type===Sn.LISTEN_COMPLETE)d=IN(s,n,l.path,a,f);else throw yl("Unknown operation type: "+l.type);const p=f.getChanges();return jN(n,d,p),{viewCache:d,changes:p}}function jN(s,n,l){const a=n.eventCache;if(a.isFullyInitialized()){const o=a.getNode().isLeafNode()||a.getNode().isEmpty(),f=Ro(s);(l.length>0||!s.eventCache.isFullyInitialized()||o&&!a.getNode().equals(f)||!a.getNode().getPriority().equals(f.getPriority()))&&l.push(jv(Ro(n)))}}function Gv(s,n,l,a,o,f){const d=n.eventCache;if(Do(a,l)!=null)return n;{let h,p;if(Oe(l))if(Z(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const y=rs(n),x=y instanceof ye?y:ye.EMPTY_NODE,b=jd(a,x);h=s.filter.updateFullNode(n.eventCache.getNode(),b,f)}else{const y=ko(a,rs(n));h=s.filter.updateFullNode(n.eventCache.getNode(),y,f)}else{const y=Ae(l);if(y===".priority"){Z(Di(l)===1,"Can't have a priority with additional path components");const x=d.getNode();p=n.serverCache.getNode();const b=ey(a,l,x,p);b!=null?h=s.filter.updatePriority(x,b):h=d.getNode()}else{const x=it(l);let b;if(d.isCompleteForChild(y)){p=n.serverCache.getNode();const _=ey(a,l,d.getNode(),p);_!=null?b=d.getNode().getImmediateChild(y).updateChild(x,_):b=d.getNode().getImmediateChild(y)}else b=Od(a,y,n.serverCache);b!=null?h=s.filter.updateChild(d.getNode(),y,b,x,o,f):h=d.getNode()}}return Na(n,h,d.isFullyInitialized()||Oe(l),s.filter.filtersNodes())}}function jo(s,n,l,a,o,f,d,h){const p=n.serverCache;let y;const x=d?s.filter:s.filter.getIndexedFilter();if(Oe(l))y=x.updateFullNode(p.getNode(),a,null);else if(x.filtersNodes()&&!p.isFiltered()){const C=p.getNode().updateChild(l,a);y=x.updateFullNode(p.getNode(),C,null)}else{const C=Ae(l);if(!p.isCompleteForPath(l)&&Di(l)>1)return n;const z=it(l),q=p.getNode().getImmediateChild(C).updateChild(z,a);C===".priority"?y=x.updatePriority(p.getNode(),q):y=x.updateChild(p.getNode(),C,q,z,Vv,null)}const b=zv(n,y,p.isFullyInitialized()||Oe(l),x.filtersNodes()),_=new zd(o,b,f);return Gv(s,b,l,o,_,h)}function td(s,n,l,a,o,f,d){const h=n.eventCache;let p,y;const x=new zd(o,n,f);if(Oe(l))y=s.filter.updateFullNode(n.eventCache.getNode(),a,d),p=Na(n,y,!0,s.filter.filtersNodes());else{const b=Ae(l);if(b===".priority")y=s.filter.updatePriority(n.eventCache.getNode(),a),p=Na(n,y,h.isFullyInitialized(),h.isFiltered());else{const _=it(l),C=h.getNode().getImmediateChild(b);let z;if(Oe(_))z=a;else{const D=x.getCompleteChild(b);D!=null?Cd(_)===".priority"&&D.getChild(Nv(_)).isEmpty()?z=D:z=D.updateChild(_,a):z=ye.EMPTY_NODE}if(C.equals(z))p=n;else{const D=s.filter.updateChild(h.getNode(),b,z,_,x,d);p=Na(n,D,h.isFullyInitialized(),s.filter.filtersNodes())}}}return p}function ty(s,n){return s.eventCache.isCompleteForChild(n)}function ON(s,n,l,a,o,f,d){let h=n;return a.foreach((p,y)=>{const x=ut(l,p);ty(n,Ae(x))&&(h=td(s,h,x,y,o,f,d))}),a.foreach((p,y)=>{const x=ut(l,p);ty(n,Ae(x))||(h=td(s,h,x,y,o,f,d))}),h}function ny(s,n,l){return l.foreach((a,o)=>{n=n.updateChild(a,o)}),n}function nd(s,n,l,a,o,f,d,h){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let p=n,y;Oe(l)?y=a:y=new tt(null).setTree(l,a);const x=n.serverCache.getNode();return y.children.inorderTraversal((b,_)=>{if(x.hasChild(b)){const C=n.serverCache.getNode().getImmediateChild(b),z=ny(s,C,_);p=jo(s,p,new Je(b),z,o,f,d,h)}}),y.children.inorderTraversal((b,_)=>{const C=!n.serverCache.isCompleteForChild(b)&&_.value===null;if(!x.hasChild(b)&&!C){const z=n.serverCache.getNode().getImmediateChild(b),D=ny(s,z,_);p=jo(s,p,new Je(b),D,o,f,d,h)}}),p}function zN(s,n,l,a,o,f,d){if(Do(o,l)!=null)return n;const h=n.serverCache.isFiltered(),p=n.serverCache;if(a.value!=null){if(Oe(l)&&p.isFullyInitialized()||p.isCompleteForPath(l))return jo(s,n,l,p.getNode().getChild(l),o,f,h,d);if(Oe(l)){let y=new tt(null);return p.getNode().forEachChild(il,(x,b)=>{y=y.set(new Je(x),b)}),nd(s,n,l,y,o,f,h,d)}else return n}else{let y=new tt(null);return a.foreach((x,b)=>{const _=ut(l,x);p.isCompleteForPath(_)&&(y=y.set(x,p.getNode().getChild(_)))}),nd(s,n,l,y,o,f,h,d)}}function IN(s,n,l,a,o){const f=n.serverCache,d=zv(n,f.getNode(),f.isFullyInitialized()||Oe(l),f.isFiltered());return Gv(s,d,l,a,Vv,o)}function LN(s,n,l,a,o,f){let d;if(Do(a,l)!=null)return n;{const h=new zd(a,n,o),p=n.eventCache.getNode();let y;if(Oe(l)||Ae(l)===".priority"){let x;if(n.serverCache.isFullyInitialized())x=ko(a,rs(n));else{const b=n.serverCache.getNode();Z(b instanceof ye,"serverChildren would be complete if leaf node"),x=jd(a,b)}x=x,y=s.filter.updateFullNode(p,x,f)}else{const x=Ae(l);let b=Od(a,x,n.serverCache);b==null&&n.serverCache.isCompleteForChild(x)&&(b=p.getImmediateChild(x)),b!=null?y=s.filter.updateChild(p,x,b,it(l),h,f):n.eventCache.getNode().hasChild(x)?y=s.filter.updateChild(p,x,ye.EMPTY_NODE,it(l),h,f):y=p,y.isEmpty()&&n.serverCache.isFullyInitialized()&&(d=ko(a,rs(n)),d.isLeafNode()&&(y=s.filter.updateFullNode(y,d,f)))}return d=n.serverCache.isFullyInitialized()||Do(a,Ge())!=null,Na(n,y,d,s.filter.filtersNodes())}}class HN{constructor(n,l){this.query_=n,this.eventRegistrations_=[];const a=this.query_._queryParams,o=new Md(a.getIndex()),f=nN(a);this.processor_=RN(f);const d=l.serverCache,h=l.eventCache,p=o.updateFullNode(ye.EMPTY_NODE,d.getNode(),null),y=f.updateFullNode(ye.EMPTY_NODE,h.getNode(),null),x=new ji(p,d.isFullyInitialized(),o.filtersNodes()),b=new ji(y,h.isFullyInitialized(),f.filtersNodes());this.viewCache_=Yo(b,x),this.eventGenerator_=new cN(this.query_)}get query(){return this.query_}}function BN(s){return s.viewCache_.serverCache.getNode()}function UN(s){return Ro(s.viewCache_)}function VN(s,n){const l=rs(s.viewCache_);return l&&(s.query._queryParams.loadsAllData()||!Oe(n)&&!l.getImmediateChild(Ae(n)).isEmpty())?l.getChild(n):null}function iy(s){return s.eventRegistrations_.length===0}function GN(s,n){s.eventRegistrations_.push(n)}function sy(s,n,l){const a=[];if(l){Z(n==null,"A cancel should cancel all event registrations.");const o=s.query._path;s.eventRegistrations_.forEach(f=>{const d=f.createCancelEvent(l,o);d&&a.push(d)})}if(n){let o=[];for(let f=0;f<s.eventRegistrations_.length;++f){const d=s.eventRegistrations_[f];if(!d.matches(n))o.push(d);else if(n.hasAnyCallback()){o=o.concat(s.eventRegistrations_.slice(f+1));break}}s.eventRegistrations_=o}else s.eventRegistrations_=[];return a}function ly(s,n,l,a){n.type===Sn.MERGE&&n.source.queryId!==null&&(Z(rs(s.viewCache_),"We should always have a full cache before handling merges"),Z(Ro(s.viewCache_),"Missing event cache, even though we have a server cache"));const o=s.viewCache_,f=DN(s.processor_,o,n,l,a);return kN(s.processor_,f.viewCache),Z(f.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=f.viewCache,qv(s,f.changes,f.viewCache.eventCache.getNode(),null)}function qN(s,n){const l=s.viewCache_.eventCache,a=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(ft,(f,d)=>{a.push(ol(f,d))}),l.isFullyInitialized()&&a.push(jv(l.getNode())),qv(s,a,l.getNode(),n)}function qv(s,n,l,a){const o=a?[a]:s.eventRegistrations_;return uN(s.eventGenerator_,n,l,o)}let Oo;class Qv{constructor(){this.views=new Map}}function QN(s){Z(!Oo,"__referenceConstructor has already been defined"),Oo=s}function YN(){return Z(Oo,"Reference.ts has not been loaded"),Oo}function XN(s){return s.views.size===0}function Id(s,n,l,a){const o=n.source.queryId;if(o!==null){const f=s.views.get(o);return Z(f!=null,"SyncTree gave us an op for an invalid query."),ly(f,n,l,a)}else{let f=[];for(const d of s.views.values())f=f.concat(ly(d,n,l,a));return f}}function Yv(s,n,l,a,o){const f=n._queryIdentifier,d=s.views.get(f);if(!d){let h=ko(l,o?a:null),p=!1;h?p=!0:a instanceof ye?(h=jd(l,a),p=!1):(h=ye.EMPTY_NODE,p=!1);const y=Yo(new ji(h,p,!1),new ji(a,o,!1));return new HN(n,y)}return d}function KN(s,n,l,a,o,f){const d=Yv(s,n,a,o,f);return s.views.has(n._queryIdentifier)||s.views.set(n._queryIdentifier,d),GN(d,l),qN(d,l)}function FN(s,n,l,a){const o=n._queryIdentifier,f=[];let d=[];const h=Oi(s);if(o==="default")for(const[p,y]of s.views.entries())d=d.concat(sy(y,l,a)),iy(y)&&(s.views.delete(p),y.query._queryParams.loadsAllData()||f.push(y.query));else{const p=s.views.get(o);p&&(d=d.concat(sy(p,l,a)),iy(p)&&(s.views.delete(o),p.query._queryParams.loadsAllData()||f.push(p.query)))}return h&&!Oi(s)&&f.push(new(YN())(n._repo,n._path)),{removed:f,events:d}}function Xv(s){const n=[];for(const l of s.views.values())l.query._queryParams.loadsAllData()||n.push(l);return n}function ki(s,n){let l=null;for(const a of s.views.values())l=l||VN(a,n);return l}function Kv(s,n){if(n._queryParams.loadsAllData())return Ko(s);{const a=n._queryIdentifier;return s.views.get(a)}}function Fv(s,n){return Kv(s,n)!=null}function Oi(s){return Ko(s)!=null}function Ko(s){for(const n of s.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let zo;function PN(s){Z(!zo,"__referenceConstructor has already been defined"),zo=s}function ZN(){return Z(zo,"Reference.ts has not been loaded"),zo}let WN=1;class ay{constructor(n){this.listenProvider_=n,this.syncPointTree_=new tt(null),this.pendingWriteTree_=NN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Pv(s,n,l,a,o){return mN(s.pendingWriteTree_,n,l,a,o),o?bl(s,new as(Rd(),n,l)):[]}function JN(s,n,l,a){gN(s.pendingWriteTree_,n,l,a);const o=tt.fromObject(l);return bl(s,new cl(Rd(),n,o))}function Ei(s,n,l=!1){const a=pN(s.pendingWriteTree_,n);if(yN(s.pendingWriteTree_,n)){let f=new tt(null);return a.snap!=null?f=f.set(Ge(),!0):jt(a.children,d=>{f=f.set(new Je(d),!0)}),bl(s,new Mo(a.path,f,l))}else return[]}function Ya(s,n,l){return bl(s,new as(kd(),n,l))}function $N(s,n,l){const a=tt.fromObject(l);return bl(s,new cl(kd(),n,a))}function eE(s,n){return bl(s,new Ha(kd(),n))}function tE(s,n,l){const a=Hd(s,l);if(a){const o=Bd(a),f=o.path,d=o.queryId,h=zt(f,n),p=new Ha(Dd(d),h);return Ud(s,f,p)}else return[]}function Io(s,n,l,a,o=!1){const f=n._path,d=s.syncPointTree_.get(f);let h=[];if(d&&(n._queryIdentifier==="default"||Fv(d,n))){const p=FN(d,n,l,a);XN(d)&&(s.syncPointTree_=s.syncPointTree_.remove(f));const y=p.removed;if(h=p.events,!o){const x=y.findIndex(_=>_._queryParams.loadsAllData())!==-1,b=s.syncPointTree_.findOnPath(f,(_,C)=>Oi(C));if(x&&!b){const _=s.syncPointTree_.subtree(f);if(!_.isEmpty()){const C=sE(_);for(let z=0;z<C.length;++z){const D=C[z],q=D.query,P=$v(s,D);s.listenProvider_.startListening(Aa(q),Ba(s,q),P.hashFn,P.onComplete)}}}!b&&y.length>0&&!a&&(x?s.listenProvider_.stopListening(Aa(n),null):y.forEach(_=>{const C=s.queryToTagMap.get(Fo(_));s.listenProvider_.stopListening(Aa(_),C)}))}lE(s,y)}return h}function Zv(s,n,l,a){const o=Hd(s,a);if(o!=null){const f=Bd(o),d=f.path,h=f.queryId,p=zt(d,n),y=new as(Dd(h),p,l);return Ud(s,d,y)}else return[]}function nE(s,n,l,a){const o=Hd(s,a);if(o){const f=Bd(o),d=f.path,h=f.queryId,p=zt(d,n),y=tt.fromObject(l),x=new cl(Dd(h),p,y);return Ud(s,d,x)}else return[]}function id(s,n,l,a=!1){const o=n._path;let f=null,d=!1;s.syncPointTree_.foreachOnPath(o,(_,C)=>{const z=zt(_,o);f=f||ki(C,z),d=d||Oi(C)});let h=s.syncPointTree_.get(o);h?(d=d||Oi(h),f=f||ki(h,Ge())):(h=new Qv,s.syncPointTree_=s.syncPointTree_.set(o,h));let p;f!=null?p=!0:(p=!1,f=ye.EMPTY_NODE,s.syncPointTree_.subtree(o).foreachChild((C,z)=>{const D=ki(z,Ge());D&&(f=f.updateImmediateChild(C,D))}));const y=Fv(h,n);if(!y&&!n._queryParams.loadsAllData()){const _=Fo(n);Z(!s.queryToTagMap.has(_),"View does not exist, but we have a tag");const C=aE();s.queryToTagMap.set(_,C),s.tagToQueryMap.set(C,_)}const x=Xo(s.pendingWriteTree_,o);let b=KN(h,n,l,x,f,p);if(!y&&!d&&!a){const _=Kv(h,n);b=b.concat(rE(s,n,_))}return b}function Ld(s,n,l){const o=s.pendingWriteTree_,f=s.syncPointTree_.findOnPath(n,(d,h)=>{const p=zt(d,n),y=ki(h,p);if(y)return y});return Hv(o,n,f,l,!0)}function iE(s,n){const l=n._path;let a=null;s.syncPointTree_.foreachOnPath(l,(y,x)=>{const b=zt(y,l);a=a||ki(x,b)});let o=s.syncPointTree_.get(l);o?a=a||ki(o,Ge()):(o=new Qv,s.syncPointTree_=s.syncPointTree_.set(l,o));const f=a!=null,d=f?new ji(a,!0,!1):null,h=Xo(s.pendingWriteTree_,n._path),p=Yv(o,n,h,f?d.getNode():ye.EMPTY_NODE,f);return UN(p)}function bl(s,n){return Wv(n,s.syncPointTree_,null,Xo(s.pendingWriteTree_,Ge()))}function Wv(s,n,l,a){if(Oe(s.path))return Jv(s,n,l,a);{const o=n.get(Ge());l==null&&o!=null&&(l=ki(o,Ge()));let f=[];const d=Ae(s.path),h=s.operationForChild(d),p=n.children.get(d);if(p&&h){const y=l?l.getImmediateChild(d):null,x=Bv(a,d);f=f.concat(Wv(h,p,y,x))}return o&&(f=f.concat(Id(o,s,a,l))),f}}function Jv(s,n,l,a){const o=n.get(Ge());l==null&&o!=null&&(l=ki(o,Ge()));let f=[];return n.children.inorderTraversal((d,h)=>{const p=l?l.getImmediateChild(d):null,y=Bv(a,d),x=s.operationForChild(d);x&&(f=f.concat(Jv(x,h,p,y)))}),o&&(f=f.concat(Id(o,s,a,l))),f}function $v(s,n){const l=n.query,a=Ba(s,l);return{hashFn:()=>(BN(n)||ye.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return a?tE(s,l._path,a):eE(s,l._path);{const f=eC(o,l);return Io(s,l,null,f)}}}}function Ba(s,n){const l=Fo(n);return s.queryToTagMap.get(l)}function Fo(s){return s._path.toString()+"$"+s._queryIdentifier}function Hd(s,n){return s.tagToQueryMap.get(n)}function Bd(s){const n=s.indexOf("$");return Z(n!==-1&&n<s.length-1,"Bad queryKey."),{queryId:s.substr(n+1),path:new Je(s.substr(0,n))}}function Ud(s,n,l){const a=s.syncPointTree_.get(n);Z(a,"Missing sync point for query tag that we're tracking");const o=Xo(s.pendingWriteTree_,n);return Id(a,l,o,null)}function sE(s){return s.fold((n,l,a)=>{if(l&&Oi(l))return[Ko(l)];{let o=[];return l&&(o=Xv(l)),jt(a,(f,d)=>{o=o.concat(d)}),o}})}function Aa(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(ZN())(s._repo,s._path):s}function lE(s,n){for(let l=0;l<n.length;++l){const a=n[l];if(!a._queryParams.loadsAllData()){const o=Fo(a),f=s.queryToTagMap.get(o);s.queryToTagMap.delete(o),s.tagToQueryMap.delete(f)}}}function aE(){return WN++}function rE(s,n,l){const a=n._path,o=Ba(s,n),f=$v(s,l),d=s.listenProvider_.startListening(Aa(n),o,f.hashFn,f.onComplete),h=s.syncPointTree_.subtree(a);if(o)Z(!Oi(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,x,b)=>{if(!Oe(y)&&x&&Oi(x))return[Ko(x).query];{let _=[];return x&&(_=_.concat(Xv(x).map(C=>C.query))),jt(b,(C,z)=>{_=_.concat(z)}),_}});for(let y=0;y<p.length;++y){const x=p[y];s.listenProvider_.stopListening(Aa(x),Ba(s,x))}}return d}class Vd{constructor(n){this.node_=n}getImmediateChild(n){const l=this.node_.getImmediateChild(n);return new Vd(l)}node(){return this.node_}}class Gd{constructor(n,l){this.syncTree_=n,this.path_=l}getImmediateChild(n){const l=ut(this.path_,n);return new Gd(this.syncTree_,l)}node(){return Ld(this.syncTree_,this.path_)}}const oE=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},ry=function(s,n,l){if(!s||typeof s!="object")return s;if(Z(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return cE(s[".sv"],n,l);if(typeof s[".sv"]=="object")return uE(s[".sv"],n);Z(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},cE=function(s,n,l){if(s==="timestamp")return l.timestamp;Z(!1,"Unexpected server value: "+s)},uE=function(s,n,l){s.hasOwnProperty("increment")||Z(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const a=s.increment;typeof a!="number"&&Z(!1,"Unexpected increment value: "+a);const o=n.node();if(Z(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return a;const d=o.getValue();return typeof d!="number"?a:d+a},eb=function(s,n,l,a){return qd(n,new Gd(l,s),a)},tb=function(s,n,l){return qd(s,new Vd(n),l)};function qd(s,n,l){const a=s.getPriority().val(),o=ry(a,n.getImmediateChild(".priority"),l);let f;if(s.isLeafNode()){const d=s,h=ry(d.getValue(),n,l);return h!==d.getValue()||o!==d.getPriority().val()?new Ct(h,_t(o)):s}else{const d=s;return f=d,o!==d.getPriority().val()&&(f=f.updatePriority(new Ct(o))),d.forEachChild(ft,(h,p)=>{const y=qd(p,n.getImmediateChild(h),l);y!==p&&(f=f.updateImmediateChild(h,y))}),f}}class Qd{constructor(n="",l=null,a={children:{},childCount:0}){this.name=n,this.parent=l,this.node=a}}function Yd(s,n){let l=n instanceof Je?n:new Je(n),a=s,o=Ae(l);for(;o!==null;){const f=al(a.node.children,o)||{children:{},childCount:0};a=new Qd(o,a,f),l=it(l),o=Ae(l)}return a}function _l(s){return s.node.value}function nb(s,n){s.node.value=n,sd(s)}function ib(s){return s.node.childCount>0}function fE(s){return _l(s)===void 0&&!ib(s)}function Po(s,n){jt(s.node.children,(l,a)=>{n(new Qd(l,s,a))})}function sb(s,n,l,a){l&&n(s),Po(s,o=>{sb(o,n,!0)})}function dE(s,n,l){let a=s.parent;for(;a!==null;){if(n(a))return!0;a=a.parent}return!1}function Xa(s){return new Je(s.parent===null?s.name:Xa(s.parent)+"/"+s.name)}function sd(s){s.parent!==null&&hE(s.parent,s.name,s)}function hE(s,n,l){const a=fE(l),o=Rn(s.node.children,n);a&&o?(delete s.node.children[n],s.node.childCount--,sd(s)):!a&&!o&&(s.node.children[n]=l.node,s.node.childCount++,sd(s))}const mE=/[\[\].#$\/\u0000-\u001F\u007F]/,gE=/[\[\].#$\u0000-\u001F\u007F]/,Df=10*1024*1024,Xd=function(s){return typeof s=="string"&&s.length!==0&&!mE.test(s)},lb=function(s){return typeof s=="string"&&s.length!==0&&!gE.test(s)},pE=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),lb(s)},yE=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!_d(s)||s&&typeof s=="object"&&Rn(s,".sv")},ab=function(s,n,l,a){a&&n===void 0||Zo(Vo(s,"value"),n,l)},Zo=function(s,n,l){const a=l instanceof Je?new OC(l,s):l;if(n===void 0)throw new Error(s+"contains undefined "+ts(a));if(typeof n=="function")throw new Error(s+"contains a function "+ts(a)+" with contents = "+n.toString());if(_d(n))throw new Error(s+"contains "+n.toString()+" "+ts(a));if(typeof n=="string"&&n.length>Df/3&&Go(n)>Df)throw new Error(s+"contains a string greater than "+Df+" utf8 bytes "+ts(a)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let o=!1,f=!1;if(jt(n,(d,h)=>{if(d===".value")o=!0;else if(d!==".priority"&&d!==".sv"&&(f=!0,!Xd(d)))throw new Error(s+" contains an invalid key ("+d+") "+ts(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);zC(a,d),Zo(s,h,a),IC(a)}),o&&f)throw new Error(s+' contains ".value" child '+ts(a)+" in addition to actual children.")}},vE=function(s,n){let l,a;for(l=0;l<n.length;l++){a=n[l];const f=Oa(a);for(let d=0;d<f.length;d++)if(!(f[d]===".priority"&&d===f.length-1)){if(!Xd(f[d]))throw new Error(s+"contains an invalid key ("+f[d]+") in path "+a.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(jC);let o=null;for(l=0;l<n.length;l++){if(a=n[l],o!==null&&gn(o,a))throw new Error(s+"contains a path "+o.toString()+" that is ancestor of another path "+a.toString());o=a}},bE=function(s,n,l,a){const o=Vo(s,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");const f=[];jt(n,(d,h)=>{const p=new Je(d);if(Zo(o,h,ut(l,p)),Cd(p)===".priority"&&!yE(h))throw new Error(o+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");f.push(p)}),vE(o,f)},Kd=function(s,n,l,a){if(!lb(l))throw new Error(Vo(s,n)+'was an invalid path = "'+l+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},_E=function(s,n,l,a){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Kd(s,n,l)},Wo=function(s,n){if(Ae(n)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},xE=function(s,n){const l=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!Xd(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||l.length!==0&&!pE(l))throw new Error(Vo(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class SE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Jo(s,n){let l=null;for(let a=0;a<n.length;a++){const o=n[a],f=o.getPath();l!==null&&!Nd(f,l.path)&&(s.eventLists_.push(l),l=null),l===null&&(l={events:[],path:f}),l.events.push(o)}l&&s.eventLists_.push(l)}function rb(s,n,l){Jo(s,l),ob(s,a=>Nd(a,n))}function pn(s,n,l){Jo(s,l),ob(s,a=>gn(a,n)||gn(n,a))}function ob(s,n){s.recursionDepth_++;let l=!0;for(let a=0;a<s.eventLists_.length;a++){const o=s.eventLists_[a];if(o){const f=o.path;n(f)?(TE(s.eventLists_[a]),s.eventLists_[a]=null):l=!1}}l&&(s.eventLists_=[]),s.recursionDepth_--}function TE(s){for(let n=0;n<s.events.length;n++){const l=s.events[n];if(l!==null){s.events[n]=null;const a=l.getEventRunner();wa&&Dt("event: "+l.toString()),vl(a)}}}const wE="repo_interrupt",CE=25;class NE{constructor(n,l,a,o){this.repoInfo_=n,this.forceRestClient_=l,this.authTokenProvider_=a,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ao(),this.transactionQueueTree_=new Qd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function EE(s,n,l){if(s.stats_=Td(s.repoInfo_),s.forceRestClient_||sC())s.server_=new Eo(s.repoInfo_,(a,o,f,d)=>{oy(s,a,o,f,d)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>cy(s,!0),0);else{if(typeof l<"u"&&l!==null){if(typeof l!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xt(l)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}s.persistentConnection_=new Jn(s.repoInfo_,n,(a,o,f,d)=>{oy(s,a,o,f,d)},a=>{cy(s,a)},a=>{AE(s,a)},s.authTokenProvider_,s.appCheckProvider_,l),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(a=>{s.server_.refreshAuthToken(a)}),s.appCheckProvider_.addTokenChangeListener(a=>{s.server_.refreshAppCheckToken(a.token)}),s.statsReporter_=cC(s.repoInfo_,()=>new oN(s.stats_,s.server_)),s.infoData_=new iN,s.infoSyncTree_=new ay({startListening:(a,o,f,d)=>{let h=[];const p=s.infoData_.getNode(a._path);return p.isEmpty()||(h=Ya(s.infoSyncTree_,a._path,p),setTimeout(()=>{d("ok")},0)),h},stopListening:()=>{}}),Fd(s,"connected",!1),s.serverSyncTree_=new ay({startListening:(a,o,f,d)=>(s.server_.listen(a,f,o,(h,p)=>{const y=d(h,p);pn(s.eventQueue_,a._path,y)}),[]),stopListening:(a,o)=>{s.server_.unlisten(a,o)}})}function cb(s){const l=s.infoData_.getNode(new Je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+l}function $o(s){return oE({timestamp:cb(s)})}function oy(s,n,l,a,o){s.dataUpdateCount++;const f=new Je(n);l=s.interceptServerDataCallback_?s.interceptServerDataCallback_(n,l):l;let d=[];if(o)if(a){const p=_o(l,y=>_t(y));d=nE(s.serverSyncTree_,f,p,o)}else{const p=_t(l);d=Zv(s.serverSyncTree_,f,p,o)}else if(a){const p=_o(l,y=>_t(y));d=$N(s.serverSyncTree_,f,p)}else{const p=_t(l);d=Ya(s.serverSyncTree_,f,p)}let h=f;d.length>0&&(h=fl(s,f)),pn(s.eventQueue_,h,d)}function cy(s,n){Fd(s,"connected",n),n===!1&&DE(s)}function AE(s,n){jt(n,(l,a)=>{Fd(s,l,a)})}function Fd(s,n,l){const a=new Je("/.info/"+n),o=_t(l);s.infoData_.updateSnapshot(a,o);const f=Ya(s.infoSyncTree_,a,o);pn(s.eventQueue_,a,f)}function Pd(s){return s.nextWriteId_++}function ME(s,n,l){const a=iE(s.serverSyncTree_,n);return a!=null?Promise.resolve(a):s.server_.get(n).then(o=>{const f=_t(o).withIndex(n._queryParams.getIndex());id(s.serverSyncTree_,n,l,!0);let d;if(n._queryParams.loadsAllData())d=Ya(s.serverSyncTree_,n._path,f);else{const h=Ba(s.serverSyncTree_,n);d=Zv(s.serverSyncTree_,n._path,f,h)}return pn(s.eventQueue_,n._path,d),Io(s.serverSyncTree_,n,l,null,!0),f},o=>(Ka(s,"get for query "+xt(n)+" failed: "+o),Promise.reject(new Error(o))))}function RE(s,n,l,a,o){Ka(s,"set",{path:n.toString(),value:l,priority:a});const f=$o(s),d=_t(l,a),h=Ld(s.serverSyncTree_,n),p=tb(d,h,f),y=Pd(s),x=Pv(s.serverSyncTree_,n,p,y,!0);Jo(s.eventQueue_,x),s.server_.put(n.toString(),d.val(!0),(_,C)=>{const z=_==="ok";z||It("set at "+n+" failed: "+_);const D=Ei(s.serverSyncTree_,y,!z);pn(s.eventQueue_,n,D),ld(s,o,_,C)});const b=Wd(s,n);fl(s,b),pn(s.eventQueue_,b,[])}function kE(s,n,l,a){Ka(s,"update",{path:n.toString(),value:l});let o=!0;const f=$o(s),d={};if(jt(l,(h,p)=>{o=!1,d[h]=eb(ut(n,h),_t(p),s.serverSyncTree_,f)}),o)Dt("update() called with empty data.  Don't do anything."),ld(s,a,"ok",void 0);else{const h=Pd(s),p=JN(s.serverSyncTree_,n,d,h);Jo(s.eventQueue_,p),s.server_.merge(n.toString(),l,(y,x)=>{const b=y==="ok";b||It("update at "+n+" failed: "+y);const _=Ei(s.serverSyncTree_,h,!b),C=_.length>0?fl(s,n):n;pn(s.eventQueue_,C,_),ld(s,a,y,x)}),jt(l,y=>{const x=Wd(s,ut(n,y));fl(s,x)}),pn(s.eventQueue_,n,[])}}function DE(s){Ka(s,"onDisconnectEvents");const n=$o(s),l=Ao();Wf(s.onDisconnect_,Ge(),(o,f)=>{const d=eb(o,f,s.serverSyncTree_,n);Ov(l,o,d)});let a=[];Wf(l,Ge(),(o,f)=>{a=a.concat(Ya(s.serverSyncTree_,o,f));const d=Wd(s,o);fl(s,d)}),s.onDisconnect_=Ao(),pn(s.eventQueue_,Ge(),a)}function jE(s,n,l){let a;Ae(n._path)===".info"?a=id(s.infoSyncTree_,n,l):a=id(s.serverSyncTree_,n,l),rb(s.eventQueue_,n._path,a)}function OE(s,n,l){let a;Ae(n._path)===".info"?a=Io(s.infoSyncTree_,n,l):a=Io(s.serverSyncTree_,n,l),rb(s.eventQueue_,n._path,a)}function zE(s){s.persistentConnection_&&s.persistentConnection_.interrupt(wE)}function Ka(s,...n){let l="";s.persistentConnection_&&(l=s.persistentConnection_.id+":"),Dt(l,...n)}function ld(s,n,l,a){n&&vl(()=>{if(l==="ok")n(null);else{const o=(l||"error").toUpperCase();let f=o;a&&(f+=": "+a);const d=new Error(f);d.code=o,n(d)}})}function ub(s,n,l){return Ld(s.serverSyncTree_,n,l)||ye.EMPTY_NODE}function Zd(s,n=s.transactionQueueTree_){if(n||ec(s,n),_l(n)){const l=db(s,n);Z(l.length>0,"Sending zero length transaction queue"),l.every(o=>o.status===0)&&IE(s,Xa(n),l)}else ib(n)&&Po(n,l=>{Zd(s,l)})}function IE(s,n,l){const a=l.map(y=>y.currentWriteId),o=ub(s,n,a);let f=o;const d=o.hash();for(let y=0;y<l.length;y++){const x=l[y];Z(x.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const b=zt(n,x.path);f=f.updateChild(b,x.currentOutputSnapshotRaw)}const h=f.val(!0),p=n;s.server_.put(p.toString(),h,y=>{Ka(s,"transaction put response",{path:p.toString(),status:y});let x=[];if(y==="ok"){const b=[];for(let _=0;_<l.length;_++)l[_].status=2,x=x.concat(Ei(s.serverSyncTree_,l[_].currentWriteId)),l[_].onComplete&&b.push(()=>l[_].onComplete(null,!0,l[_].currentOutputSnapshotResolved)),l[_].unwatcher();ec(s,Yd(s.transactionQueueTree_,n)),Zd(s,s.transactionQueueTree_),pn(s.eventQueue_,n,x);for(let _=0;_<b.length;_++)vl(b[_])}else{if(y==="datastale")for(let b=0;b<l.length;b++)l[b].status===3?l[b].status=4:l[b].status=0;else{It("transaction at "+p.toString()+" failed: "+y);for(let b=0;b<l.length;b++)l[b].status=4,l[b].abortReason=y}fl(s,n)}},d)}function fl(s,n){const l=fb(s,n),a=Xa(l),o=db(s,l);return LE(s,o,a),a}function LE(s,n,l){if(n.length===0)return;const a=[];let o=[];const d=n.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<n.length;h++){const p=n[h],y=zt(l,p.path);let x=!1,b;if(Z(y!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)x=!0,b=p.abortReason,o=o.concat(Ei(s.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=CE)x=!0,b="maxretry",o=o.concat(Ei(s.serverSyncTree_,p.currentWriteId,!0));else{const _=ub(s,p.path,d);p.currentInputSnapshot=_;const C=n[h].update(_.val());if(C!==void 0){Zo("transaction failed: Data returned ",C,p.path);let z=_t(C);typeof C=="object"&&C!=null&&Rn(C,".priority")||(z=z.updatePriority(_.getPriority()));const q=p.currentWriteId,P=$o(s),F=tb(z,_,P);p.currentOutputSnapshotRaw=z,p.currentOutputSnapshotResolved=F,p.currentWriteId=Pd(s),d.splice(d.indexOf(q),1),o=o.concat(Pv(s.serverSyncTree_,p.path,F,p.currentWriteId,p.applyLocally)),o=o.concat(Ei(s.serverSyncTree_,q,!0))}else x=!0,b="nodata",o=o.concat(Ei(s.serverSyncTree_,p.currentWriteId,!0))}pn(s.eventQueue_,l,o),o=[],x&&(n[h].status=2,(function(_){setTimeout(_,Math.floor(0))})(n[h].unwatcher),n[h].onComplete&&(b==="nodata"?a.push(()=>n[h].onComplete(null,!1,n[h].currentInputSnapshot)):a.push(()=>n[h].onComplete(new Error(b),!1,null))))}ec(s,s.transactionQueueTree_);for(let h=0;h<a.length;h++)vl(a[h]);Zd(s,s.transactionQueueTree_)}function fb(s,n){let l,a=s.transactionQueueTree_;for(l=Ae(n);l!==null&&_l(a)===void 0;)a=Yd(a,l),n=it(n),l=Ae(n);return a}function db(s,n){const l=[];return hb(s,n,l),l.sort((a,o)=>a.order-o.order),l}function hb(s,n,l){const a=_l(n);if(a)for(let o=0;o<a.length;o++)l.push(a[o]);Po(n,o=>{hb(s,o,l)})}function ec(s,n){const l=_l(n);if(l){let a=0;for(let o=0;o<l.length;o++)l[o].status!==2&&(l[a]=l[o],a++);l.length=a,nb(n,l.length>0?l:void 0)}Po(n,a=>{ec(s,a)})}function Wd(s,n){const l=Xa(fb(s,n)),a=Yd(s.transactionQueueTree_,n);return dE(a,o=>{jf(s,o)}),jf(s,a),sb(a,o=>{jf(s,o)}),l}function jf(s,n){const l=_l(n);if(l){const a=[];let o=[],f=-1;for(let d=0;d<l.length;d++)l[d].status===3||(l[d].status===1?(Z(f===d-1,"All SENT items should be at beginning of queue."),f=d,l[d].status=3,l[d].abortReason="set"):(Z(l[d].status===0,"Unexpected transaction status in abort"),l[d].unwatcher(),o=o.concat(Ei(s.serverSyncTree_,l[d].currentWriteId,!0)),l[d].onComplete&&a.push(l[d].onComplete.bind(null,new Error("set"),!1,null))));f===-1?nb(n,void 0):l.length=f+1,pn(s.eventQueue_,Xa(n),o);for(let d=0;d<a.length;d++)vl(a[d])}}function HE(s){let n="";const l=s.split("/");for(let a=0;a<l.length;a++)if(l[a].length>0){let o=l[a];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}n+="/"+o}return n}function BE(s){const n={};s.charAt(0)==="?"&&(s=s.substring(1));for(const l of s.split("&")){if(l.length===0)continue;const a=l.split("=");a.length===2?n[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):It(`Invalid query segment '${l}' in query '${s}'`)}return n}const uy=function(s,n){const l=UE(s),a=l.namespace;l.domain==="firebase.com"&&ei(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&l.domain!=="localhost"&&ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||Pw();const o=l.scheme==="ws"||l.scheme==="wss";return{repoInfo:new yv(l.host,l.secure,a,o,n,"",a!==l.subdomain),path:new Je(l.pathString)}},UE=function(s){let n="",l="",a="",o="",f="",d=!0,h="https",p=443;if(typeof s=="string"){let y=s.indexOf("//");y>=0&&(h=s.substring(0,y-1),s=s.substring(y+2));let x=s.indexOf("/");x===-1&&(x=s.length);let b=s.indexOf("?");b===-1&&(b=s.length),n=s.substring(0,Math.min(x,b)),x<b&&(o=HE(s.substring(x,b)));const _=BE(s.substring(Math.min(s.length,b)));y=n.indexOf(":"),y>=0?(d=h==="https"||h==="wss",p=parseInt(n.substring(y+1),10)):y=n.length;const C=n.slice(0,y);if(C.toLowerCase()==="localhost")l="localhost";else if(C.split(".").length<=2)l=C;else{const z=n.indexOf(".");a=n.substring(0,z).toLowerCase(),l=n.substring(z+1),f=a}"ns"in _&&(f=_.ns)}return{host:n,port:p,domain:l,subdomain:a,secure:d,scheme:h,pathString:o,namespace:f}};const fy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",VE=(function(){let s=0;const n=[];return function(l){const a=l===s;s=l;let o;const f=new Array(8);for(o=7;o>=0;o--)f[o]=fy.charAt(l%64),l=Math.floor(l/64);Z(l===0,"Cannot push at time == 0");let d=f.join("");if(a){for(o=11;o>=0&&n[o]===63;o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)d+=fy.charAt(n[o]);return Z(d.length===20,"nextPushId: Length should be 20."),d}})();class GE{constructor(n,l,a,o){this.eventType=n,this.eventRegistration=l,this.snapshot=a,this.prevName=o}getPath(){const n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+xt(this.snapshot.exportVal())}}class qE{constructor(n,l,a){this.eventRegistration=n,this.error=l,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class mb{constructor(n,l){this.snapshotCallback=n,this.cancelCallback=l}onValue(n,l){this.snapshotCallback.call(null,n,l)}onCancel(n){return Z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class tc{constructor(n,l,a,o){this._repo=n,this._path=l,this._queryParams=a,this._orderByCalled=o}get key(){return Oe(this._path)?null:Cd(this._path)}get ref(){return new kn(this._repo,this._path)}get _queryIdentifier(){const n=Z0(this._queryParams),l=xd(n);return l==="{}"?"default":l}get _queryObject(){return Z0(this._queryParams)}isEqual(n){if(n=os(n),!(n instanceof tc))return!1;const l=this._repo===n._repo,a=Nd(this._path,n._path),o=this._queryIdentifier===n._queryIdentifier;return l&&a&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+DC(this._path)}}class kn extends tc{constructor(n,l){super(n,l,new Qo,!1)}get parent(){const n=Nv(this._path);return n===null?null:new kn(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}}class dl{constructor(n,l,a){this._node=n,this.ref=l,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const l=new Je(n),a=hl(this.ref,n);return new dl(this._node.getChild(l),a,ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,o)=>n(new dl(o,hl(this.ref,a),ft)))}hasChild(n){const l=new Je(n);return!this._node.getChild(l).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nn(s,n){return s=os(s),s._checkNotDeleted("ref"),n!==void 0?hl(s._root,n):s._root}function hl(s,n){return s=os(s),Ae(s._path)===null?_E("child","path",n):Kd("child","path",n),new kn(s._repo,ut(s._path,n))}function gb(s,n){s=os(s),Wo("push",s._path),ab("push",n,s._path,!0);const l=cb(s._repo),a=VE(l),o=hl(s,a),f=hl(s,a);let d;return d=Promise.resolve(f),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}function Jd(s){return Wo("remove",s._path),xl(s,null)}function xl(s,n){s=os(s),Wo("set",s._path),ab("set",n,s._path,!1);const l=new Ua;return RE(s._repo,s._path,n,null,l.wrapCallback(()=>{})),l.promise}function is(s,n){bE("update",n,s._path);const l=new Ua;return kE(s._repo,s._path,n,l.wrapCallback(()=>{})),l.promise}function ml(s){s=os(s);const n=new mb(()=>{}),l=new nc(n);return ME(s._repo,s,l).then(a=>new dl(a,new kn(s._repo,s._path),s._queryParams.getIndex()))}class nc{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,l){const a=l._queryParams.getIndex();return new GE("value",this,new dl(n.snapshotNode,new kn(l._repo,l._path),a))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,l){return this.callbackContext.hasCancelCallback?new qE(this,n,l):null}matches(n){return n instanceof nc?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function QE(s,n,l,a,o){const f=new mb(l,void 0),d=new nc(f);return jE(s._repo,s,d),()=>OE(s._repo,s,d)}function $d(s,n,l,a){return QE(s,"value",n)}QN(kn);PN(kn);const YE="FIREBASE_DATABASE_EMULATOR_HOST",ad={};let XE=!1;function KE(s,n,l,a){const o=n.lastIndexOf(":"),f=n.substring(0,o),d=vd(f);s.repoInfo_=new yv(n,d,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,l),a&&(s.authTokenProvider_=a)}function pb(s,n,l,a,o){let f=a||s.options.databaseURL;f===void 0&&(s.options.projectId||ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Dt("Using default host for project ",s.options.projectId),f=`${s.options.projectId}-default-rtdb.firebaseio.com`);let d=uy(f,o),h=d.repoInfo,p;typeof process<"u"&&D0&&(p=D0[YE]),p?(f=`http://${p}?ns=${h.namespace}`,d=uy(f,o),h=d.repoInfo):d.repoInfo.secure;const y=new aC(s.name,s.options,n);xE("Invalid Firebase Database URL",d),Oe(d.path)||ei("Database URL must point to the root of a Firebase Database (not including a child path).");const x=PE(h,s,y,new lC(s,l));return new yb(x,s)}function FE(s,n){const l=ad[n];(!l||l[s.key]!==s)&&ei(`Database ${n}(${s.repoInfo_}) has already been deleted.`),zE(s),delete l[s.key]}function PE(s,n,l,a){let o=ad[n.name];o||(o={},ad[n.name]=o);let f=o[s.toURLString()];return f&&ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),f=new NE(s,XE,l,a),o[s.toURLString()]=f,f}class yb{constructor(n,l){this._repoInternal=n,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(EE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new kn(this._repo,Ge())),this._rootInternal}_delete(){return this._rootInternal!==null&&(FE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&ei("Cannot call "+n+" on a deleted database.")}}function vb(s=jw(),n){const l=Aw(s,"database").getImmediate({identifier:n});if(!l._instanceStarted){const a=hT("database");a&&bb(l,...a)}return l}function bb(s,n,l,a={}){s=os(s),s._checkNotDeleted("useEmulator");const o=`${n}:${l}`,f=s._repoInternal;if(s._instanceStarted){if(o===s._repoInternal.repoInfo_.host&&xo(a,f.repoInfo_.emulatorOptions))return;ei("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(f.repoInfo_.nodeAdmin)a.mockUserToken&&ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new po(po.OWNER);else if(a.mockUserToken){const h=typeof a.mockUserToken=="string"?a.mockUserToken:gT(a.mockUserToken,s.app.options.projectId);d=new po(h)}vd(n)&&(mT(n),vT("Database",!0)),KE(f,o,a,d)}function ZE(s){iv(Dw),To(new ka("database",(n,{instanceIdentifier:l})=>{const a=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),f=n.getProvider("app-check-internal");return pb(a,o,f,l)},"PUBLIC").setMultipleInstances(!0)),tl(j0,O0,s),tl(j0,O0,"esm2020")}Jn.prototype.simpleListen=function(s,n){this.sendRequest("q",{p:s},n)};Jn.prototype.echo=function(s,n){this.sendRequest("echo",{d:s},n)};ZE();const WE=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:dl,Database:yb,_QueryImpl:tc,_QueryParams:Qo,_ReferenceImpl:kn,_repoManagerDatabaseFromApp:pb,_setSDKVersion:iv,_validatePathString:Kd,_validateWritablePath:Wo,child:hl,connectDatabaseEmulator:bb,get:ml,getDatabase:vb,onValue:$d,push:gb,ref:nn,remove:Jd,set:xl,update:is},Symbol.toStringTag,{value:"Module"}));var JE="firebase",$E="12.9.0";tl(JE,$E,"app");const dy={apiKey:"AIzaSyAweEeSIFt434-nnNBi5sYy1hTXvTe7XmE",authDomain:"karaoke-sau-nhan-e798b.firebaseapp.com",databaseURL:"https://karaoke-sau-nhan-e798b-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"karaoke-sau-nhan-e798b"};let rt=null,yn=!1;try{if(dy.databaseURL){const s=$y(dy);rt=vb(s),yn=!0}else console.warn("[Firebase] databaseURL not configured. Queue sync disabled.")}catch(s){console.error("[Firebase] Init failed:",s.message)}const hy="karaoke_device_id";function e2(){let s=localStorage.getItem(hy);return s||(s="user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem(hy,s)),s}function t2(s){const n=[];for(const l of Object.values(s||{}))_b(l.songs).filter(f=>!f.isPriority).length>0&&n.push(l.startRound||1);return n.length>0?Math.min(...n):1}function n2(s){if(!s||Object.keys(s).length===0)return[];const n=[],l=[];for(const[d,h]of Object.entries(s)){const p=_b(h.songs),y=p.filter(b=>b.isPriority),x=p.filter(b=>!b.isPriority).sort((b,_)=>(b.addedAt||0)-(_.addedAt||0));for(const b of y)n.push({...b,customerId:d,customerName:h.name,isPriority:!0,firebaseKey:b.id||b.firebaseKey});x.length>0&&l.push({id:d,name:h.name,firstOrderTime:h.firstOrderTime||0,startRound:h.startRound||1,songs:x})}if(n.sort((d,h)=>(h.addedAt||0)-(d.addedAt||0)),l.sort((d,h)=>d.firstOrderTime-h.firstOrderTime),l.length===0)return n;const a=Math.min(...l.map(d=>d.startRound)),o=Math.max(...l.map(d=>d.startRound+d.songs.length-1)),f=[];for(let d=a;d<=o;d++)for(const h of l){const p=d-h.startRound;if(p>=0&&p<h.songs.length){const y=h.songs[p];f.push({...y,customerId:h.id,customerName:h.name,round:d,originalSongIndex:p,firebaseKey:y.id||y.firebaseKey||`${h.id}_${p}`})}}return[...n,...f]}function _b(s){return s?Array.isArray(s)?[...s]:Object.values(s):[]}function ic(){return!yn||!rt?null:nn(rt,"customerQueues")}function xb(){return!yn||!rt?null:nn(rt,"playQueue")}async function eh(){if(!(!yn||!rt))try{const n=(await ml(ic())).val()||{},l=n2(n);await xl(xb(),l)}catch(s){console.error("Failed to sync play queue:",s)}}function i2(s){return`guest_${(s||"").trim().toLowerCase().replace(/[.#$\[\]\/]/g,"").replace(/\s+/g,"_")||"unknown"}`}async function s2(s,n){if(!yn||!rt)return Promise.resolve();const l=n||e2(),a=nn(rt,`customerQueues/${l}`),f=(await ml(a)).val(),d=Date.now(),p=(await ml(ic())).val()||{},y=t2(p);if(!f)await is(a,{name:s.addedBy||"Khch mi",firstOrderTime:d,startRound:y});else if((f.songs?Object.values(f.songs):[]).some(D=>!D.isPriority))await is(a,{name:s.addedBy});else{const D=Math.max(f.startRound||1,y);await is(a,{startRound:D,name:s.addedBy})}const x=nn(rt,`customerQueues/${l}/songs`),b=gb(x),_=b.key;return await xl(b,{id:_,videoId:s.videoId,title:s.title,cleanTitle:s.cleanTitle||s.title,artist:s.artist||"",addedBy:s.addedBy,thumbnail:s.thumbnail||"",addedAt:d,isPriority:s.isPriority||!1,source:s.source||"web"}),await eh(),{key:_}}const sl=new Set;async function rd(s){if(!(!yn||!rt||!s)&&!sl.has(s)){sl.add(s);try{const l=(await ml(ic())).val();if(!l)return;let a=null;for(const[o,f]of Object.entries(l))if(f.songs&&f.songs[s]){a=`customerQueues/${o}/songs/${s}`;break}a&&(await Jd(nn(rt,a)),await eh())}catch(n){console.error("Error removing song:",n)}finally{sl.delete(s)}}}async function Sb(s){if(!(!yn||!rt||!s)&&!sl.has(s)){sl.add(s);try{const l=(await ml(ic())).val();if(!l)return;for(const[a,o]of Object.entries(l))if(o.songs&&o.songs[s]){const f=o.songs[s];if(await Jd(nn(rt,`customerQueues/${a}/songs/${s}`)),!f.isPriority){const d=o.startRound||1;await is(nn(rt,`customerQueues/${a}`),{startRound:d+1})}await eh();return}}catch(n){console.error("Error completing song:",n)}finally{sl.delete(s)}}}function l2(){if(!yn||!rt)return Promise.resolve();const s={};return s.customerQueues=null,s.playQueue=null,is(nn(rt),s)}function th(s){if(!yn||!rt)return Promise.resolve();const n=nn(rt,"nowPlaying"),l={...s};return Object.keys(l).forEach(a=>{l[a]===void 0&&(l[a]=null)}),xl(n,{...l,startedAt:Date.now()})}function od(s,n){if(!yn||!rt)return Promise.resolve();const l=nn(rt,"nowPlaying");return is(l,{currentTime:s,duration:n,updatedAt:Date.now()})}function nh(){if(!yn||!rt)return Promise.resolve();const s=nn(rt,"nowPlaying");return xl(s,null)}function a2(s){if(!yn||!rt)return s(null),()=>{};const n=nn(rt,"nowPlaying");return $d(n,l=>{s(l.val()||null)})}function Tb(s){const n=xb();return n?$d(n,l=>{const a=l.val(),o=a?(Array.isArray(a)?a:Object.values(a)).filter(Boolean):[];s(o)}):(s([]),()=>{})}const wb=Object.freeze(Object.defineProperty({__proto__:null,clearFirebaseQueue:l2,clearNowPlaying:nh,completeSong:Sb,guestNameToCustomerKey:i2,listenToFirebaseQueue:Tb,listenToNowPlaying:a2,pushToFirebaseQueue:s2,removeFromFirebaseQueue:rd,setNowPlaying:th,updateNowPlayingProgress:od},Symbol.toStringTag,{value:"Module"}));function r2(s,n,l,a){return n==null||l==null||l<0||s===n?0:l<n&&s>=l&&s<n?a:l>n&&s>n&&s<=l?-a:0}const o2=Ce.memo(({item:s,index:n,onRemove:l,onReplace:a,onPlay:o,onInvite:f,isFirst:d,hasCurrentSong:h,queueMode:p,invitedSongId:y,dragState:x,onDragStart:b,itemHeight:_})=>{const C=x?.dragIndex===n,z=x?r2(n,x.dragIndex,x.overIndex,_):0;return m.jsx("div",{className:`queue-item relative ${C?"opacity-20 scale-[0.96]":""}`,"data-index":n,style:{transform:C?"scale(0.96)":`translateY(${z}px)`,transition:x?"transform 200ms cubic-bezier(0.2, 0, 0, 1)":"none",zIndex:C?0:z!==0?2:1},children:m.jsxs(Js,{className:"flex flex-col gap-2 p-2 border-0 shadow-sm relative group rounded-lg select-none",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"text-slate-300 mt-1 cursor-grab active:cursor-grabbing hover:text-slate-500 transition-colors touch-none p-1",onPointerDown:D=>b(D,n),children:m.jsx(bS,{size:16})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"font-bold text-slate-800 text-sm leading-snug truncate uppercase tracking-tight",title:s.title,children:s.title||"Khng c tiu "}),m.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[m.jsx("span",{className:"text-[10px] font-bold text-slate-500 bg-slate-100 px-2 py-0.5 rounded border border-slate-200 uppercase tracking-wider",children:s.addedBy}),s.isPriority&&m.jsx("span",{className:"text-[10px] font-bold text-white bg-red-500 px-2 py-0.5 rounded border border-red-600 uppercase tracking-wider",children:"u Tin"}),s.round&&!s.isPriority&&m.jsxs("span",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 px-2 py-0.5 rounded border border-indigo-100 uppercase tracking-wider",children:["Vng ",s.round]})]})]}),m.jsxs("div",{className:"flex items-center gap-0.5",children:[h&&m.jsx("button",{onClick:()=>a(s),className:"text-slate-300 hover:text-indigo-500 transition-colors p-1 rounded-md cursor-pointer active:scale-90",title:"Thay th bi ang pht",children:m.jsx(Ly,{size:16})}),m.jsx("button",{onClick:()=>l(s.id),className:"text-slate-300 hover:text-red-500 transition-colors p-1 rounded-md cursor-pointer active:scale-90",title:"Xa",children:m.jsx(pd,{size:16})})]})]}),d&&p==="manual"&&m.jsxs("div",{className:"mt-1 pt-2 border-t border-slate-100 flex gap-2",children:[m.jsx(Qt,{size:"sm",onClick:()=>f(s),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider flex-1",children:"Mi Ln Sn Khu"}),m.jsx(Qt,{size:"sm",onClick:()=>o(s),className:`text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider flex-1 ${y===s.id?"bg-green-600 hover:bg-green-700":"bg-slate-800 hover:bg-slate-900"}`,children:"Pht Ngay"})]}),d&&p==="auto"&&m.jsx("div",{className:"mt-1 pt-2 border-t border-slate-100 flex justify-end",children:m.jsx(Qt,{size:"sm",onClick:()=>o(s),className:"bg-slate-800 hover:bg-slate-900 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider w-full",children:"Pht Ngay"})})]})})},(s,n)=>s.item.id===n.item.id&&s.index===n.index&&s.isFirst===n.isFirst&&s.hasCurrentSong===n.hasCurrentSong&&s.queueMode===n.queueMode&&s.invitedSongId===n.invitedSongId&&s.dragState===n.dragState&&s.itemHeight===n.itemHeight),c2=({onReAnnounce:s})=>{const n=Q(V=>V.queue),l=Q(V=>V.removeFromQueue),a=Q(V=>V.currentSong),o=Q(V=>V.setCurrentSong),f=Q(V=>V.setIsPlaying),d=Q(V=>V.isPlaying),h=Q(V=>V.reorderQueue),p=Q(V=>V.setManualOrder),y=Q(V=>V.queueMode),x=Q(V=>V.invitedSongId),b=Q(V=>V.setInvitedSongId),_=Q(V=>V.waitingForGuest),[C,z]=E.useState(!1),[D,q]=E.useState(null),[P,F]=E.useState(null),G=E.useRef(null),J=E.useRef(null),[le,ue]=E.useState(null),[U,K]=E.useState(0),pe=E.useRef({active:!1,startIndex:-1}),ve=E.useRef(null),be=E.useCallback(()=>J.current?.closest(".overflow-y-auto"),[]),Se=E.useCallback(V=>{if(!J.current)return-1;const Y=J.current.querySelectorAll(".queue-item");for(let te=0;te<Y.length;te++){const ge=Y[te].getBoundingClientRect(),_e=ge.top+ge.height*.3;if(V<_e)return te}return Y.length-1},[]),Ne=E.useCallback((V,Y)=>{if(!G.current)return!1;const te=G.current.getBoundingClientRect();return V>=te.left&&V<=te.right&&Y>=te.top&&Y<=te.bottom},[]),Re=E.useCallback((V,Y)=>{V.preventDefault(),V.target.setPointerCapture(V.pointerId),pe.current={active:!0,startIndex:Y};const te=J.current?.querySelectorAll(".queue-item");let ge=null,_e=0;if(te?.[Y]){const M=te[Y].getBoundingClientRect();K(M.height+8),_e=V.clientY-M.top,ge=te[Y].cloneNode(!0),ge.style.cssText=`
                position: fixed;
                left: ${M.left}px;
                top: ${V.clientY-_e}px;
                width: ${M.width}px;
                z-index: 9999;
                pointer-events: none;
                opacity: 0.9;
                transform: scale(1.03);
                box-shadow: 0 12px 32px rgba(0,0,0,0.18);
                border-radius: 12px;
                transition: transform 0.15s, box-shadow 0.15s;
            `,document.body.appendChild(ge)}ue({dragIndex:Y,overIndex:Y,overNP:!1});const oe=60,X=8,$=M=>{const W=be();if(!W)return;const ae=W.getBoundingClientRect(),Be=M-ae.top,qe=ae.bottom-M;if(Be<oe&&W.scrollTop>0){const St=X*(1-Be/oe);W.scrollTop-=St}else if(qe<oe&&W.scrollTop<W.scrollHeight-W.clientHeight){const St=X*(1-qe/oe);W.scrollTop+=St}};let he=V.clientY;const xe=()=>{pe.current.active&&($(he),ve.current=requestAnimationFrame(xe))};ve.current=requestAnimationFrame(xe);const ze=M=>{if(!pe.current.active)return;he=M.clientY,ge&&(ge.style.top=`${M.clientY-_e}px`);const W=Ne(M.clientX,M.clientY),ae=W?-1:Se(M.clientY);ue(Be=>Be?.overIndex===ae&&Be?.overNP===W?Be:{dragIndex:pe.current.startIndex,overIndex:ae,overNP:W})},Xe=()=>{if(ve.current&&cancelAnimationFrame(ve.current),ge&&(ge.remove(),ge=null),pe.current.active){const M=pe.current.startIndex;pe.current.active=!1,ue(W=>{if(!W)return null;const ae=Q.getState().queue,Be=ae[M];if(W.overNP&&Be)return setTimeout(()=>F(Be),0),null;if(W.overIndex>=0&&W.overIndex!==M){const qe=[...ae],[St]=qe.splice(M,1);qe.splice(W.overIndex,0,St),h(qe),p(qe.map(sn=>sn.id))}return null})}document.removeEventListener("pointermove",ze),document.removeEventListener("pointerup",Xe)};document.addEventListener("pointermove",ze),document.addEventListener("pointerup",Xe)},[Se,Ne,be,h]),ke=V=>{const Y=n.find(te=>te.id===V);Y&&q(Y)},k=V=>F(V),j=()=>{D&&(a?.id===D.id&&(o(null),f(!1)),l(D.id),D.firebaseKey&&rd(D.firebaseKey).catch(()=>{}),q(null))},B=V=>{o(V),l(V.id)},fe=V=>b(V.id),de=async()=>{try{const{clearFirebaseQueue:V}=await Sa(async()=>{const{clearFirebaseQueue:Y}=await Promise.resolve().then(()=>wb);return{clearFirebaseQueue:Y}},void 0);await V(),n.forEach(Y=>l(Y.id)),z(!1)}catch(V){console.error("[QueueList] Clear queue failed:",V)}},re=async()=>{if(P){try{await rd(P.id),await th(P),l(P.id),o({...P,isReplaced:!0}),f(!1)}catch(V){console.error("Replace failed:",V)}F(null)}};return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-4",children:[a?m.jsxs("div",{ref:G,className:`mb-6 relative rounded-2xl border-2 border-dashed transition-colors duration-200 ${le?.overNP?"border-indigo-400 bg-indigo-50/50 p-1.5":"border-transparent p-1.5"}`,children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[m.jsx("span",{className:`inline-flex rounded-full h-3 w-3 ${d?"bg-indigo-500":"bg-orange-500"}`}),m.jsx("h2",{className:`text-xs font-black uppercase tracking-widest ${d?"text-indigo-500":"text-orange-500"}`,children:le?.overNP?"Th  thay th":_?"ang Ch Khch...":d?"ang Pht":"Sn Sng"})]}),m.jsxs(Js,{className:`p-3 border-0 relative rounded-xl text-white shadow-sm overflow-hidden ${d?"bg-indigo-600":"bg-slate-800"}`,children:[m.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/5 rounded-full -ml-8 -mb-8"}),m.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[m.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0 border border-white/10 cursor-pointer hover:bg-white/30 transition-colors",onClick:()=>f(!d),children:d?m.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[m.jsx("div",{className:"w-0.5 bg-white h-1.5"}),m.jsx("div",{className:"w-0.5 bg-white h-3"}),m.jsx("div",{className:"w-0.5 bg-white h-2"}),m.jsx("div",{className:"w-0.5 bg-white h-2.5"})]}):m.jsx(vo,{size:20,className:"text-white fill-current ml-0.5"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"font-bold text-sm leading-normal truncate mb-0.5",title:a.title,style:{paddingBottom:"2px"},children:a.title}),m.jsxs("div",{className:"flex items-center text-[10px] text-white/80 gap-1.5",children:[m.jsxs("div",{className:"flex items-center gap-1 bg-white/20 px-1.5 py-0.5 rounded-md border border-white/10",children:[m.jsx("span",{className:"opacity-70 font-medium",children:"Ht:"}),m.jsx("span",{className:"font-black text-white uppercase truncate max-w-[80px]",children:a.addedBy||"Khch"})]}),!d&&m.jsx("span",{className:"text-orange-300 font-bold text-[9px] uppercase border border-orange-500/50 px-1.5 py-0.5 rounded ml-auto",children:"ang ch pht"})]})]})]}),y==="manual"&&!d&&m.jsxs("div",{className:"mt-2 pt-2 border-t border-white/20 flex gap-2 relative z-10",children:[!d&&m.jsxs("button",{onClick:()=>f(!0),className:"flex-1 bg-green-500 hover:bg-green-600 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider rounded-lg transition-all cursor-pointer active:scale-95 flex items-center justify-center gap-1 shadow-lg shadow-green-900/20",children:[m.jsx(vo,{size:12,fill:"currentColor"})," Pht Ngay"]}),m.jsx("button",{onClick:s,className:"flex-1 bg-white/20 hover:bg-white/30 text-white font-black text-[10px] px-3 py-1.5 uppercase tracking-wider rounded-lg transition-all cursor-pointer active:scale-95",children:" Mi Li"})]})]})]}):null,m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between items-end px-1 mb-2",children:[m.jsx("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Hng Ch"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] font-black text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full",children:n.length}),n.length>0&&m.jsx("button",{onClick:()=>z(!0),className:"text-slate-400 hover:text-red-500 transition-colors p-1 rounded-md cursor-pointer active:scale-90 hover:bg-red-50",title:"Xa hng ch",children:m.jsx(pd,{size:14})})]})]}),n.length===0&&!a&&m.jsx("div",{className:"text-center py-10 text-slate-300 text-xs font-bold uppercase tracking-widest",children:"Cha c bi no"}),m.jsx("div",{ref:J,className:"space-y-2",children:n.map((V,Y)=>m.jsx(o2,{item:V,index:Y,onRemove:ke,onReplace:k,onPlay:B,onInvite:fe,isFirst:!a&&Y===0,hasCurrentSong:!!a,queueMode:y,invitedSongId:x,dragState:le,itemHeight:U,onDragStart:Re},V.id))})]})]}),P&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-lg",children:[m.jsxs("div",{className:"p-4 border-b border-slate-100 bg-indigo-50 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-black text-indigo-800 uppercase tracking-tighter",children:"Thay Th Bi Ht"}),m.jsx("button",{onClick:()=>F(null),className:"p-2 hover:bg-slate-200 rounded-full transition-colors cursor-pointer",children:m.jsx(el,{size:20,className:"text-slate-500"})})]}),m.jsxs("div",{className:"p-5 space-y-3",children:[m.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200 opacity-50",children:[m.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider",children:"ang Pht"}),m.jsx("h4",{className:"font-bold text-slate-500 text-sm line-clamp-2 line-through mt-1",children:a?.title||"Khng c bi"}),a?.addedBy&&m.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-2 py-0.5 rounded border border-slate-200 uppercase tracking-wider mt-1.5 inline-block",children:a.addedBy})]}),m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center",children:m.jsx(Ly,{size:16,className:"text-indigo-600 rotate-180"})})}),m.jsxs("div",{className:"bg-indigo-50 p-3 rounded-xl border-2 border-indigo-200",children:[m.jsx("span",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-wider",children:"Bi Mi"}),m.jsx("h4",{className:"font-black text-slate-800 text-sm line-clamp-2 mt-1",children:P.title}),P.addedBy&&m.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-100 px-2 py-0.5 rounded border border-indigo-200 uppercase tracking-wider mt-1.5 inline-block",children:P.addedBy})]})]}),m.jsxs("div",{className:"p-4 bg-slate-50 flex gap-3 border-t border-slate-100",children:[m.jsx(Qt,{onClick:()=>F(null),variant:"ghost",className:"font-bold text-slate-600 px-4",children:"Hy"}),m.jsx(Qt,{onClick:re,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-black",children:"Thay Th"})]})]})}),C&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-lg",children:[m.jsxs("div",{className:"p-4 border-b border-slate-100 bg-red-50 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-black text-red-600 uppercase tracking-tighter",children:"Xa Hng Ch?"}),m.jsx("button",{onClick:()=>z(!1),className:"p-2 hover:bg-red-100 rounded-full transition-colors",children:m.jsx(el,{size:20,className:"text-red-500"})})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("p",{className:"text-slate-700 font-bold mb-1",children:["Bn mun xa tt c ",m.jsx("span",{className:"text-red-600",children:n.length})," bi ht?"]}),m.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Hnh ng ny khng th hon tc."})]}),m.jsxs("div",{className:"p-4 bg-slate-50 flex gap-3 border-t border-slate-100",children:[m.jsx(Qt,{onClick:()=>z(!1),variant:"ghost",className:"flex-1 font-bold text-slate-600",children:"Hy"}),m.jsx(Qt,{onClick:de,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-black",children:"Xa Tt C"})]})]})}),D&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-lg",children:[m.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter",children:"Xc Nhn Xa"}),m.jsx("button",{onClick:()=>q(null),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:m.jsx(el,{size:20,className:"text-slate-500"})})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"Bn c chc mun xa bi ht ny?"}),m.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200",children:[m.jsx("h4",{className:"font-black text-slate-800 text-sm line-clamp-2",children:D.title}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Ht:"}),m.jsx("span",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded border border-indigo-100 uppercase",children:D.addedBy})]})]})]}),m.jsxs("div",{className:"p-4 bg-slate-50 flex gap-3 border-t border-slate-100",children:[m.jsx(Qt,{onClick:()=>q(null),variant:"ghost",className:"flex-1 font-bold text-slate-600",children:"Gi Li"}),m.jsx(Qt,{onClick:j,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-black",children:"Xa Bi"})]})]})})]})},Cb=Ce.forwardRef(({className:s,error:n,...l},a)=>m.jsxs("div",{className:"w-full",children:[m.jsx("input",{ref:a,className:md("w-full px-5 py-4 rounded-2xl bg-slate-50 border border-slate-200 text-slate-800 placeholder-slate-400 outline-none transition-all duration-300 focus:bg-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 shadow-inner",n&&"border-red-500 focus:border-red-500 focus:ring-red-500/10 bg-red-50/50",s),...l}),n&&m.jsx("p",{className:"mt-2 text-sm text-red-500 ml-2",children:n})]}));async function u2(s){if(!s)return[];const n=s.toLowerCase().includes("karaoke")?s:`${s} karaoke`;try{const l=new AbortController,a=setTimeout(()=>l.abort(),8e3),o=await fetch(`/api/yt/search?q=${encodeURIComponent(n)}`,{signal:l.signal});if(clearTimeout(a),!o.ok)throw new Error(o.status);const f=await o.json(),d=["karaoke","beat","instrumental","nhc sng","tone","phi"];return f.filter(h=>{const p=h.title.toLowerCase();return d.some(y=>p.includes(y))}).map(h=>{let p=h.viewCount||0,y=1;const x=h.title.toLowerCase(),b=s.toLowerCase(),_=b.split(/\s+/).filter(q=>q.length>0);x.includes(b)&&(y*=2),b.includes("tone nam")&&x.includes("tone nam")&&(y*=3),b.includes("tone n")&&x.includes("tone n")&&(y*=3),b.includes("tone nu")&&x.includes("tone n")&&(y*=3),x.includes("karaoke")&&(y*=1.2),(x.includes("beat")||x.includes("instrumental"))&&(y*=1.1);let C=0;_.forEach(q=>{x.includes(q)&&C++}),y+=C*.1,C===_.length&&(y*=1.5),["live","concert","fancam","cover","remix"].forEach(q=>{x.includes(q)&&!b.includes(q)&&(y*=.5)}),(x.includes("official")||x.includes("mv"))&&!x.includes("karaoke")&&(y*=.5);let D=p*y;return D===0&&C>0&&(D=1e3*y),{...h,score:D}}).sort((h,p)=>p.score-h.score).map(h=>({...h,videoId:h.id,isApi:!0}))}catch(l){return console.error("YouTube Search Failed:",l),[]}}const f2=[["Duyn Phn","Nh Qunh"],["Su Tm Thip Hng","Quang L - L Quyn"],["Vng L Me Bay","Nh Qunh"],["Chuyn Gin Thin L","Mnh Qunh"],["Em Ca Ngy Hm Qua","Sn Tng M-TP"],["Lc Tri","Sn Tng M-TP"],["Ni Ny C Anh","Sn Tng M-TP"],["Hng Nhan","Jack"],["Bc Phn","Jack"],["Sng Gi","Jack - K-ICM"],["Ai Chung Tnh c Mi","inh Tng Huy"],["Thuyn Quyn","Diu Kin"],["Mi Anh V Thm Qu Em","Thy Trang"],["o Mi C Mau","Phi Nhung"],["Trch Ai V Tnh","Phi Nhung"],["Chim Trng M Ci","an Trng - Cm Ly"],["Ct i Ni Su","Tng Duy Tn"],["Bn Trn Tng Lu","Tng Duy Tn"],["See Tnh","Hong Thy Linh"],[" M Ni Cho M Nghe","Hong Thy Linh"],["Ngy Mai Ngi Ta Ly Chng","Thnh t"],["Hoa N Khng Mu","Hoi Lm"],["Bun Lm Chi Em i","Hoi Lm"],["G Ca Tri Tim","Quang L - Mai Thin Vn"],["p M Cuc Tnh","an Nguyn"],["Li Nh Ngi Yu","an Nguyn"],["Xun Ny Con Khng V","Quang L"],["Cnh Thip u Xun","Nh Qunh"],["Cu Hn Cu Th","nh Dng"],[" Vng","nh Dng"],["Ph m","Nh Qunh"],["Ma m Tnh Nh","Quang L"],["Chuyn Tu Hong Hn","L Quyn"],["Sng Trng Min Qu Ngoi","Quang L"],["Nhn C Cho Em","Mnh Qunh"],["Tnh Ch p Khi Cn Dang D","L Quyn"],["i Thng Hai M","L Quyn"],["Lu i Tnh i","m Vnh Hng"],["Bin Tnh","m Vnh Hng"],["Xin Li Tnh Yu","m Vnh Hng"],["Say Tnh","m Vnh Hng"],["Na Vng Trng","m Vnh Hng"],["Chc Ai  S V","Sn Tng M-TP"],["Mun Ri M Sao Cn","Sn Tng M-TP"],["Chng Ta Ca Hin Ti","Sn Tng M-TP"],["Hy Trao Cho Anh","Sn Tng M-TP"],["C Chc Yu L y","Sn Tng M-TP"],["Em Gi Ma","Hng Trm"],["Ngc","Hng Trm"],["Duyn Mnh L","Hng Trm"]];function Nb(s){return s?s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"D").toLowerCase():""}const my=f2.map(s=>{const[n,l]=s;return{title:n,artist:l,searchStr:Nb(`${n} ${l}`),raw:s}}),d2=s=>{if(!s||s.length<2)return[];const n=Nb(s.trim()),l=[];for(let a=0;a<my.length;a++){const o=my[a];if(o.searchStr.includes(n)&&l.push({title:o.title,artist:o.artist,query:`${o.title} ${o.artist}`,source:"local",score:1}),l.length>=10)break}return l},Eb=s=>{if(!s)return null;let n=s.replace(/```json/g,"").replace(/```/g,"").trim();n=n.replace(/([{,]\s*)([a-zA-Z0-9_]+)(\s*:)/g,'$1"$2"$3'),n=n.replace(/([{,]\s*)'([a-zA-Z0-9_]+)'(\s*:)/g,'$1"$2"$3');const l=n.indexOf("["),a=n.lastIndexOf("]");if(l!==-1){if(a!==-1&&a>l)return n.substring(l,a+1);{let d=n.substring(l);const h=d.lastIndexOf("}");if(h!==-1)return d.substring(0,h+1)+"]"}}const o=n.indexOf("{"),f=n.lastIndexOf("}");return o!==-1?f!==-1&&f>o?n.substring(o,f+1):n.substring(o):n},h2=`Gi  bi ht karaoke.
Input: t kha (c th sai chnh t, g tt, thiu du).
Output: JSON array string 8-10 items "Title|Artist|Query".
Format: ["Title|Artist|Query", "Title|Artist|Query"]
Quy tc:
1. CH gi  bi ht C THT, ph bin ti Vit Nam. TUYT I KHNG BA TN.
2. U TIN SA LI CHNH T & VIT TT (vd: "co"->"cho", "dc"->"c").
3. a dng kt qu, TRNH trng lp.
4. CH TR V JSON ARRAY STRING.
5. Dng du gch ng (|)  ngn cch.`,m2=async(s,n)=>{if(!s||s.trim().length<2)return null;try{const l=await fetch("/api/gemini/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s.trim().slice(0,100)}]}],systemInstruction:{parts:[{text:h2}]},generationConfig:{response_mime_type:"application/json",response_schema:{type:"ARRAY",items:{type:"STRING"}},max_output_tokens:2048,temperature:.3,thinkingConfig:{thinkingBudget:0}}}),signal:n});if(!l.ok){const f=await l.text().catch(()=>"");return console.warn("Gemini API Error:",l.status,f),null}const o=(await l.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!o)return null;try{const f=Eb(o);if(!f)return null;const d=JSON.parse(f);if(!Array.isArray(d))return null;const h=[],p=new Set;return d.forEach(y=>{if(typeof y!="string")return;const x=y.split("|"),b=x[0]?.trim(),_=x[1]?.trim()||"";if(!b)return;const C=`${b.toLowerCase()}-${_.toLowerCase()}`;p.has(C)||(p.add(C),h.push({title:b,artist:_,query:x[2]?.trim()||b}))}),h}catch(f){throw console.warn("Gemini JSON Parse Error (Suggestions):",f.message),console.debug("Raw Text:",o),new Error("JSON_PARSE_ERROR")}}catch(l){if(l.name==="AbortError"||l.message==="JSON_PARSE_ERROR")throw l;return console.warn("Gemini Request Failed:",l),null}},cd=async(s,n,l=2)=>{for(let a=0;a<=l;a++)try{const o=await m2(s,n);if(o)return o}catch(o){if(o.name==="AbortError")throw o;if(o.message==="JSON_PARSE_ERROR"&&a<l){console.warn(`Gemini JSON Error, Retrying (${a+1}/${l})...`);continue}a===l&&console.warn("Gemini Suggestions Failed after retries:",o)}return null},g2=`Extract ONLY the Song Title.
Input: raw youtube title.
Output: JSON { "title": "Song Name", "artist": "Artist Name" }
Rules:
1. EXCLUDE Artist Name from Title.
2. If format is "Artist - Title" or "Artist | Title", extract Title correctly.
3. Remove 'karaoke', 'remix', 'beat', 'cover', 'mv', 'official', 'lyrics', '[...]', '(...)' tags.
4. Remove 'tone', 'h tone', 'nng tone', 'd ht', 'tone nam', 'tone n', 'h beat', 'gc'.
5. Capitalize correctly.`,p2=async s=>{if(!s)return null;try{const n=await fetch("/api/gemini/clean-title",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s.slice(0,150)}]}],systemInstruction:{parts:[{text:g2}]},generationConfig:{response_mime_type:"application/json",max_output_tokens:100,temperature:.1,thinkingConfig:{thinkingBudget:0}}})});if(!n.ok)return null;const a=(await n.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!a)return null;try{const o=Eb(a);return o?JSON.parse(o):null}catch(o){return console.warn("Gemini JSON Parse Error (Clean Title):",o.message),console.debug("Raw Text:",a),null}}catch(n){return console.warn("LLM Clean Title Request Failed:",n),null}},y2=Object.freeze(Object.defineProperty({__proto__:null,cleanSongTitle:p2,fetchGeminiSuggestions:cd,getSmartSuggestions:cd},Symbol.toStringTag,{value:"Module"})),gy="karaoke_history",py="youtube_id_cache",v2=(s,n)=>{try{const a=JSON.parse(localStorage.getItem(gy)||"[]").filter(o=>o.title!==s);a.unshift({title:s,artist:n,timestamp:Date.now()}),localStorage.setItem(gy,JSON.stringify(a.slice(0,50)))}catch(l){console.error("Record play failed",l)}},b2=(s,n,l)=>{try{const a=JSON.parse(localStorage.getItem(py)||"{}"),o=`${s}-${n}`;a[o]=l,localStorage.setItem(py,JSON.stringify(a))}catch{}},Of=new Map,Ab=async(s,n,l)=>{if(!s||s.trim().length<2)return[];const a=s.trim(),o=d2(a);if(Of.has(a)){const f=Of.get(a);return l&&setTimeout(()=>l(f),0),o}return cd(s,n).then(f=>{if(!n.aborted&&f&&Array.isArray(f)&&f.length>0){const d=f.map(h=>({...h,source:"ai"}));Of.set(a,d),l&&l(d)}}).catch(f=>{}),o},_2=Object.freeze(Object.defineProperty({__proto__:null,cacheYoutubeId:b2,getSmartSuggestions:Ab,recordPlay:v2},Symbol.toStringTag,{value:"Module"})),x2=(s,n)=>{const[l,a]=E.useState([]),[o,f]=E.useState(!1),d=E.useRef(null),h=E.useRef(null),p=E.useRef(null),y=E.useCallback(async x=>{if(!x||x.trim().length<2){a([]),f(!1);return}const b=x.trim();f(!0),d.current&&d.current.abort(),d.current=new AbortController;const _=d.current.signal;try{const z=await Ab(b,_,D=>{_.aborted||(a(q=>[...q,...D]),f(!1))});_.aborted||(a(z),p.current=b,z.length>=2&&f(!1))}catch(C){C.name!=="AbortError"&&console.warn("Suggestion chain failed",C),_.aborted||f(!1)}},[]);return E.useEffect(()=>(h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{y(s)},50),()=>{h.current&&clearTimeout(h.current),d.current&&d.current.abort()}),[s,y]),E.useEffect(()=>{n&&s&&s.trim().length>=2&&l.length===0&&y(s)},[n,s,l.length,y]),{suggestions:l,isLoading:o}},S2=({suggestions:s,isLoading:n,onSelect:l,selectedIndex:a=-1})=>n?m.jsx("div",{className:"absolute top-full left-0 right-0 bg-white shadow-xl rounded-b-xl border border-slate-200 mt-1 z-50 p-4",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400",children:[m.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}),m.jsx("span",{className:"text-sm font-medium",children:"ang tm  tng..."})]})}):!s||s.length===0?null:m.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white shadow-xl rounded-b-xl border border-slate-200 z-50 overflow-hidden",children:[m.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar",children:s.map((o,f)=>{const d=f===a,h=o.source==="ai"&&(f===0||s[f-1].source!=="ai");return m.jsxs(E.Fragment,{children:[h&&m.jsxs("div",{className:"px-4 py-2 bg-indigo-50 text-xs font-bold text-indigo-500 uppercase tracking-widest flex items-center gap-2 mt-1 border-t border-indigo-100",children:[m.jsx(Vf,{size:12}),"Gi  t AI"]}),m.jsxs("div",{onMouseDown:p=>{p.preventDefault(),l(o.query)},className:`flex items-center gap-4 p-4 cursor-pointer transition-colors border-b border-slate-50 last:border-0 group
                                    ${d?"bg-indigo-50 border-l-4 border-l-indigo-500":"hover:bg-indigo-50 border-l-4 border-l-transparent"}
                                    ${o.source==="ai"?"bg-indigo-50/30":""}
                                `,children:[m.jsx("div",{className:`p-2 rounded-full transition-colors ${d?"bg-indigo-100 text-indigo-600":o.source==="ai"?"bg-purple-100/50 text-purple-500":"bg-slate-100 text-slate-400 group-hover:bg-indigo-100 group-hover:text-indigo-600"}`,children:o.source==="ai"?m.jsx(Vf,{size:20}):m.jsx(gd,{size:20})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsx("div",{className:`text-lg font-bold truncate transition-colors ${d?"text-indigo-700":"text-slate-800 group-hover:text-indigo-700"}`,children:o.title})})]})]},f)})}),m.jsx("div",{className:"bg-slate-50 p-2 text-center text-[10px] font-bold text-slate-300 uppercase tracking-widest",children:"Thng minh bi Gemini AI"})]}),T2={a:["A","","","","",""],an:["An","n","n","n","n"],anh:["Anh","nh","nh"],au:["u","u"],ba:["Ba","B","B","B","B"],bac:["Bc","Bc","Bc"],bach:["Bch","Bch"],ban:["Ban","Bn","Bn","Bn","Bn"],bang:["Bang","Bng","Bng","Bng","Bng"],bao:["Bao","Bo","Bo","Bo","Bo"],bay:["Bay","By","By","By","By"],be:["B","B","B","B"],ben:["Bn","Bn"],bi:["Bi","B","B","B"],bia:["Bia","Ba"],bich:["Bch"],bien:["Bin","Bin","Bin"],binh:["Binh","Bnh","Bnh"],bo:["Bo","B","B","B","B","B","B","B","B"],boi:["Bi","Bi"],bon:["Bn","Bn"],bong:["Bong","Bng","Bng","Bng","Bng"],bu:["Bu","B","B","B"],bui:["Bi","Bi"],buon:["Bun","Bun"],buong:["Bung","Bung","Bng"],buoi:["Bi"],ca:["Ca","C","C","C"],cac:["Cc"],cai:["Cai","Ci","Ci"],cam:["Cam","Cm","Cm","Cm"],can:["Can","Cn","Cn","Cn","Cn","Cn"],canh:["Canh","Cnh","Cnh","Cnh"],cao:["Cao","Co","Co","Co"],cat:["Ct","Ct"],chi:["Chi","Ch","Ch","Ch"],chien:["Chin","Chin"],chinh:["Chinh","Chnh","Chnh"],chu:["Chu","Ch","Ch","Ch","Chu","Chu"],chung:["Chung","Chng","Chng","Chng"],chuong:["Chng","Chng","Chng"],co:["Co","C","C","C","C","C","C","C","C","C"],cong:["Cong","Cong","Cng","Cng","Cng","Cng"],cu:["Cu","C","C","C","C","C","C","C"],cuc:["Cc","Cc"],cuong:["Cng","Cng","Cng"],cuu:["Cu","Cu","Cu"],da:["Da","D","a","","",""],dac:["c","c"],dai:["Dai","Di","i","ai"],dam:["m","m","m"],dan:["Dan","Dn","Dn","Dn","an","n","n"],dang:["Dang","Dng","ang","ng","ng","ng","ng"],dao:["Dao","Do","Do","o","o","o"],dat:["t","t"],dau:["Du","Du","Du","au","u","u","u","u"],de:["D","","",""],di:["Di","D","D","i"],diep:["Dip","ip"],dieu:["Diu","Diu","Diu","iu","iu","iu"],dinh:["Dinh","Dnh","inh","nh","nh","nh"],do:["Do","D","o","","","","","",""],doan:["Doan","oan","on","on"],doi:["i","i","i","i"],don:["n","n","n"],dong:["Dong","Dng","ng","ng","ng"],du:["Du","D","D","D","u","","","D"],duc:["Dc","c"],dung:["Dung","Dng","Dng","Dng","ng"],duoc:["c"],duong:["Dng","Dng","ng"],duy:["Duy","Dy"],duyen:["Duyn"],gia:["Gia","Gi","Gi"],giai:["Giai","Gii"],giam:["Giam","Gim","Gim"],gian:["Gian","Gin","Gin","Gin"],giang:["Giang","Ging","Ging"],giao:["Giao","Gio"],giap:["Gip"],giau:["Giu"],gio:["Gio","Gi","Gi"],gioi:["Gii","Gii"],giu:["Gi"],ha:["Ha","H","H","H"],hai:["Hai","Hi","Hi","Hi"],ham:["Hm"],han:["Han","Hn","Hn","Hn","Hn","Hn"],hang:["Hang","Hng","Hng","Hng"],hanh:["Hanh","Hnh","Hnh"],hao:["Hao","Ho","Ho","Ho"],hat:["Ht","Ht"],hau:["Hau","Hu","Hu"],hien:["Hin","Hin","Hin","Hin","Hin"],hieu:["Hiu","Hiu","Hiu","Hiu","Hiu"],hinh:["Hnh"],hoa:["Hoa","Ha","Ha","Ha","Ha"],hoai:["Hoi"],hoan:["Hoan","Hon","Hon","Hon"],hoang:["Hoang","Hong","Hong"],hoc:["Hc"],hoi:["Hoi","Hi","Hi","Hi","Hi"],hop:["Hp","Hp"],hue:["Hu","Hu"],hung:["Hung","Hng","Hng","Hng"],huy:["Huy","Hy"],huyen:["Huyn","Huyn"],huynh:["Huynh","Hunh"],huong:["Hng","Hng","Hng","Hng"],kha:["Kha","Kh","Kh"],khai:["Khai","Khi"],khanh:["Khanh","Khnh"],khiem:["Khim","Khim"],khoa:["Khoa","Kha"],khoi:["Khi","Khi"],khuong:["Khng"],khuyen:["Khuyn","Khuyn"],kien:["Kin","Kin","Kin"],kieu:["Kiu"],kim:["Kim","Km"],kinh:["Kinh","Knh"],ky:["Ky","K","K","K","K"],lai:["Lai","Li","Li","Li"],lam:["Lam","Lm","Lm","Lm"],lan:["Lan","Ln","Ln","Ln"],lang:["Lang","Lng","Lng"],lanh:["Lanh","Lnh","Lnh"],le:["Le","L","L","L"],lien:["Lin"],lieu:["Liu","Liu","Liu","Liu"],linh:["Linh","Lnh","Lnh"],loan:["Loan","Lon"],loc:["Lc","Lc"],loi:["Li","Li","Li"],long:["Long","Lng"],lua:["La","La"],luan:["Lun","Lun"],luat:["Lut"],luc:["Lc","Lc"],luong:["Lng","Lng"],luu:["Lu"],ly:["Ly","L","L"],ma:["Ma","M","M","M","M"],mai:["Mai","Mi","Mi"],man:["Mn","Mn","Mn","Mn"],manh:["Manh","Mnh"],mao:["Mao","Mo","Mo"],may:["May","My","My"],me:["M","M","M"],men:["Mn","Mn"],mi:["Mi","M","M","M","M"],mien:["Min","Min","Min"],minh:["Minh","Mnh"],mo:["M","M","M","M"],moc:["Mc","Mc"],moi:["Mi","Mi","Mi","Mi"],mong:["Mong","Mng","Mng"],mu:["Mu","M","M"],mua:["Mua","Ma","Ma"],muc:["Mc","Mc"],mui:["Mi","Mi"],my:["My","M","M"],na:["Na","N"],nam:["Nam","Nm","Nm","Nm"],nan:["Nan","Nn"],nang:["Nang","Nng","Nng","Nng"],nga:["Nga","Ng","Ng"],ngai:["Ngi","Ngi"],ngan:["Ngn","Ngn","Ngn","Ngn"],nghi:["Nghi","Ngh","Ngh","Ngh"],nghia:["Ngha"],nghiep:["Nghip"],ngoc:["Ngc"],ngu:["Ng","Ng","Ng","Ng"],nguyen:["Nguyn","Nguyn","Nguyn"],nguyet:["Nguyt"],nhan:["Nhan","Nhn","Nhn","Nhn","Nhn"],nhat:["Nht","Nht"],nhi:["Nhi","Nh","Nh","Nh"],nhien:["Nhin"],nhieu:["Nhiu"],nho:["Nho","Nh","Nh","Nh"],nhu:["Nhu","Nh","Nh"],nhung:["Nhung","Nhng"],ni:["Ni","N"],nien:["Nin"],ninh:["Ninh"],no:["No","N","N","N","N"],noi:["Ni","Ni","Ni","Ni","Ni"],nu:["Nu","N","N"],nuong:["Nng"],o:["O","","","","","","","","","","","","",""],oa:["Oa"],oanh:["Oanh"],on:["n","n","n"],ong:["Ong","ng"],pa:["Pa"],pham:["Phm","Phm"],phan:["Phan","Phn","Phn","Phn","Phn"],phat:["Pht","Pht"],phi:["Phi","Ph","Ph"],phong:["Phong","Phng","Phng","Phng"],phu:["Phu","Ph","Ph","Ph","Ph"],phuc:["Phc","Phc"],phung:["Phung","Phng","Phng"],phuoc:["Phc"],phuong:["Phng","Phng","Phng"],qua:["Qua","Qu","Qu","Qu"],quan:["Quan","Qun","Qun","Qun","Qun","Qun"],quang:["Quang","Qung"],que:["Qu","Qu"],quoc:["Quc"],quy:["Quy","Qu","Qu","Qu","Qu"],quyen:["Quyn","Quyn","Quyn"],quynh:["Qunh"],ra:["Ra","R"],rang:["Rang","Rng","Rng","Rng"],ri:["Ri","R"],ro:["R","R","R"],roi:["Roi","Ri","Ri"],rom:["Rm"],ru:["Ru","R","R"],run:["Run"],rung:["Rung","Rng"],ruot:["Rut"],sa:["Sa","S"],sac:["Sc"],sai:["Sai","Si"],sam:["Sam","Sm","Sm"],san:["San","Sn","Sn","Sn"],sang:["Sang","Sng","Sng","Sng"],sanh:["Sanh","Snh","Snh"],sao:["Sao","So"],sat:["St","St"],sau:["Sau","Su","Su","Su","Su"],se:["Se","S","S"],sen:["Sen"],seo:["So","So"],si:["Si","S"],sinh:["Sinh"],so:["So","S","S","S","S","S","S"],soc:["Sc"],soi:["Soi","Si","Si"],son:["Son","Sn"],song:["Song","Sng","Sng","Sng"],su:["Su","Susu","S","S","S","S"],sua:["Sua","Sa","Sa"],suc:["Sc","Sc"],sung:["Sung","Sng","Sng"],suoi:["Sui"],suong:["Sng","Sng"],sy:["Sy","S"],ta:["Ta","T","T","T","T"],tac:["Tc","Tc","Tc"],tai:["Tai","Ti","Ti","Ti"],tam:["Tam","Tm","Tm","Tm","Tm","Tm","Tm","Tm"],tan:["Tan","Tn","Tn","Tn","Tn","Tn","Tn","Tn"],tang:["Tang","Tng","Tng","Tng","Tng","Tng","Tng"],tao:["Tao","To","To","To","To"],tap:["Tp","Tp"],tat:["Tt","Tt","Tt"],tay:["Tay","Ty","Ty"],te:["Te","T","T","T"],ten:["Ten","Tn"],teo:["Teo","To"],tet:["Tt"],tha:["Tha","Th","Th"],thac:["Thc"],thai:["Thai","Thi","Thi"],tham:["Tham","Thm","Thm","Thm","Thm","Thm"],than:["Than","Thn","Thn","Thn"],thang:["Thang","Thng","Thng","Thng","Thng"],thanh:["Thanh","Thnh","Thnh","Thnh","Thnh"],thao:["Thao","Tho","Tho"],that:["Tht","Tht"],the:["The","Th","Th","Th","Th","Th"],them:["Thm","Thm"],theo:["Theo","Tho"],thi:["Thi","Th","Th","Th","Th"],thien:["Thin","Thin","Thin"],thiep:["Thip","Thip"],thieu:["Thiu","Thiu","Thiu","Thiu"],thinh:["Thinh","Thnh","Thnh","Thnh","Thnh"],tho:["Tho","Th","Th","Th","Th","Th","Th","Th"],thoa:["Thoa","Tha"],thoai:["Thoi","Thoi"],thom:["Thm"],thon:["Thon","Thn"],thong:["Thong","Thng","Thng","Thng"],thu:["Thu","Th","Th","Th","Th","Th","Th","Th","Th"],thua:["Thua","Tha"],thuan:["Thun","Thun","Thun"],thuc:["Thc","Thc","Thc","Thc"],thui:["Thui","Thi"],thuy:["Thuy","Thy","Thy","Thy","Thy"],thuyen:["Thuyn","Thuyn"],thuong:["Thng","Thng","Thng","Thng"],ti:["Ti","T","T","T","T"],tien:["Tin","Tin","Tin","Tin","Tin"],tiep:["Tip","Tip"],tieu:["Tiu","Tiu","Tiu"],tim:["Tim","Tm","Tm"],tin:["Tin","Tn"],tinh:["Tinh","Tinh","Tnh","Tnh","Tnh","Tnh"],to:["To","T","T","T","T","T","T","T","T","T","T"],toa:["Toa","Ta","Ta","Ta","Ta"],toai:["Toi"],toan:["Toan","Ton","Ton"],toc:["Tc","Tc"],toi:["Ti","Ti","Ti","Ti","Ti"],tom:["Tm"],ton:["Ton","Tn","Tn","Tn"],tong:["Tong","Tng","Tng","Tng","Tng"],tot:["Tt"],tra:["Tra","Tr","Tr"],trac:["Trc","Trc"],trai:["Trai","Tri","Tri","Tri"],tram:["Tram","Trm","Trm","Trm","Trm"],tran:["Tran","Trn","Trn","Trn","Trn","Trn"],trang:["Trang","Trng","Trng","Trng","Trng"],tranh:["Tranh","Trnh"]," trao":["Trao","Tro"],tre:["Tre","Tr","Tr"],tri:["Tri","Tr","Tr","Tr"],trieu:["Triu","Triu","Triu"],trinh:["Trinh","Trnh","Trnh"],tro:["Tro","Tr","Tr","Tr","Tr","Tr"],trong:["Trong","Trng","Trng","Trng","Trng","Trng"],tru:["Tru","Tr","Tr","Tr","Tr","Tr"],truc:["Trc","Trc","Trc"],trung:["Trung","Trng","Trng","Trng"],truong:["Trng","Trng","Trng"],truyen:["Chuyn","Truyn","Truyn"],tu:["Tu","T","T","T","T","T","T","T","T","T"],tuan:["Tun","Tun","Tun"],tue:["Tu"],tung:["Tung","Tng","Tng","Tng"],tuyen:["Tuyn","Tuyn","Tuyn","Tuyt"],tuyet:["Tuyt","Tuyt"],ty:["Ty","T","T","T"],u:["U","","","","","","","","",""],uan:["Un"],uc:["c","c"],uoc:["c"],uy:["Uy","y","y"],uyen:["Uyn","Uyn"],va:["Va","V","V","V"],vai:["Vai","Vi","Vi"],van:["Van","Vn","Vn","Vn","Vn","Vn","Vn","Vn"],vang:["Vang","Vng","Vng","Vng"],vao:["Vo"],vat:["Vt","Vt"],vay:["Vay","Vy","Vy","Vy","Vy"],ve:["Ve","V","V","V","V","V"],len:["Ln","Ln"],vi:["Vi","V","V","V","V"],vien:["Vin","Vin","Vin","Vin"],viet:["Vit","Vit"],vinh:["Vinh","Vnh","Vnh"],vit:["Vt"],vo:["Vo","V","V","V","V","V","V","V"],voi:["Voi","Vi","Vi","Vi","Vi"],vong:["Vong","Vng","Vng","Vng"],vu:["Vu","V","V","V","V"],vui:["Vui"],vuong:["Vng","Vng","Vng"],vuon:["Vn"],vy:["Vy","V","V"],xa:["Xa","X","X","X"],xac:["Xc"],xanh:["Xanh"],xam:["Xm","Xm"],xan:["X"],xau:["Xu","Xu"],xe:["Xe","X"],xem:["Xem"],xen:["Xen"],xeo:["Xo","Xo"],xi:["Xi","X","X"],xin:["Xin","Xn"],xinh:["Xinh"],xo:["Xo","X","X"],xoa:["Xoa","Xa"],xoai:["Xoi"],xom:["Xm"],xon:["Xn"],xu:["Xu","X","X"],xuan:["Xun"],xuc:["Xc"],xue:["Xu"],xui:["Xui"],xung:["Xung"],xuy:["Xy"],xuyen:["Xuyn","Xuyn"],y:["Y","","","","Y"],yen:["Yn","Yn"],yeu:["Yu","Yu"]};function w2(s){return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(//g,"D").toLowerCase()}function C2(s){return s?s.charAt(0).toUpperCase()+s.slice(1):""}function N2(s){return s.length===0?[]:s.map(a=>{const o=T2[a];return o||[C2(a)]}).reduce((a,o)=>{const f=[];return a.forEach(d=>{o.forEach(h=>{f.push(d?`${d} ${h}`:h)})}),f},[""])}const E2=s=>{if(!s||s.trim().length===0)return[];const l=w2(s.trim()).split(/\s+/);if(l.length>5)return[];let a=N2(l);const o=s.trim();return a=a.filter(f=>f.toLowerCase()!==o.toLowerCase()),a.unshift(o),a.slice(0,15)},A2=({isOpen:s,onClose:n,onConfirm:l,songTitle:a})=>{const[o,f]=E.useState(""),[d,h]=E.useState([]),[p,y]=E.useState(0),[x,b]=E.useState(!1),_=E.useRef(null),C=E.useRef(null);E.useEffect(()=>{s&&(f(""),h([]),y(0),b(!1),setTimeout(()=>_.current?.focus(),100))},[s]),E.useEffect(()=>{h(E2(o)),y(0)},[o]);const z=F=>{f(F),_.current?.focus()},D=(F=!1)=>{const G=o.trim();!G||x||(b(!0),typeof l=="function"&&l(G,F),n())},q=F=>{let G=p;if(F.key==="ArrowDown")F.preventDefault(),G=p+1,G>=d.length&&(G=0),G>=d.length&&(G=d.length-1);else if(F.key==="ArrowUp")F.preventDefault(),G=p-1,G<0&&(G=0);else if(F.key==="Enter"){F.preventDefault(),d.length>0&&z(d[p]);return}else if(F.key==="Tab"){F.preventDefault(),d.length>0&&z(d[p]);return}G!==p&&(y(G),P(G))},P=F=>{if(C.current){const G=C.current.children[F];G&&G.scrollIntoView({block:"nearest",behavior:"smooth"})}};return s?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[m.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase tracking-tighter",children:"Thm Bi Ht & Khch Mi"}),m.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:m.jsx(el,{size:28,className:"text-slate-500"})})]}),m.jsxs("div",{className:"p-4 flex-1 overflow-hidden flex flex-col gap-4",children:[m.jsxs("div",{className:"bg-indigo-50 p-3 rounded-2xl border border-indigo-100",children:[m.jsx("p",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wide mb-1",children:"Bi ht  chn"}),m.jsx("p",{className:"text-xl font-bold text-indigo-900 leading-tight",children:a})]}),m.jsxs("div",{className:"space-y-3 flex-shrink-0",children:[m.jsx("label",{className:"text-sm font-bold text-slate-500 uppercase tracking-wide ml-1",children:"Tn Khch Ht"}),m.jsxs("div",{className:"relative",children:[m.jsx(KS,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:24}),m.jsx(Cb,{ref:_,value:o,onChange:F=>f(F.target.value),onKeyDown:q,placeholder:"Nhp tn (v d: anh 7...)",className:"pl-12 h-14 text-xl font-black border-2 border-slate-200 focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 rounded-2xl w-full transition-all text-slate-800 placeholder:text-slate-300"})]})]}),d.length>0&&m.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2",children:[m.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wide mb-2 ml-1",children:"Gi  (Chn bng phm mi tn)"}),m.jsx("div",{ref:C,className:"flex flex-col gap-2",children:d.map((F,G)=>m.jsxs("button",{onClick:()=>z(F),className:`p-3 rounded-xl text-left transition-all flex items-center justify-between group cursor-pointer border
                                            ${G===p?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200":"bg-white text-slate-700 hover:bg-slate-50 border-slate-100 hover:border-slate-200"}`,children:[m.jsx("span",{className:"text-xl font-bold",children:F}),G===p&&m.jsx(uS,{size:24,className:"animate-in fade-in zoom-in"})]},G))})]}),d.length===0&&o.length>0&&m.jsx("div",{className:"text-center p-4 text-slate-400",children:m.jsxs("p",{children:["Nhn Enter  xc nhn: ",m.jsxs("span",{className:"font-bold text-slate-600",children:['"',o,'"']})]})})]}),m.jsxs("div",{className:"p-4 bg-slate-50 flex justify-end gap-3 border-t border-slate-100",children:[m.jsx(Qt,{variant:"ghost",onClick:n,size:"lg",className:"text-slate-500 hover:text-slate-700 font-bold text-lg",children:"Hy"}),m.jsx(Qt,{onClick:()=>D(!1),disabled:!o.trim(),size:"lg",className:"px-8 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-black text-lg",children:"Thm Vo Hng Ch"}),m.jsx(Qt,{onClick:()=>D(!0),disabled:!o.trim(),size:"lg",className:"px-8 bg-green-600 hover:bg-green-700 text-white rounded-xl font-black text-lg shadow-lg shadow-green-200",children:"u Tin (Ln u)"})]})]})}):null};function ih(s){if(!s)return"";let n=s.replace(/\[.*?\]/g,"").replace(/\(.*?\)/g,"").replace(/(^|\s)(karaoke|beat|tone|tong|nam|n|nu|h tng|ha tong|gc|goc|d ht|de hat|chun|chuan|nhc sng|nhac song|full hd|hd|4k|official|mv|lyric|lyrics|video|audio|remix|cover|live|lofi|lo-fi|ver|version)(?=$|\s)/gi,"").trim();return n=n.replace(/^[ \-|]+|[ \-|]+$/g,"").trim(),n.split(/[-|]/).map(a=>a.trim()).filter(a=>a.length>0)[0]||""}function yy(s){const n=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/];for(const l of n){const a=s.trim().match(l);if(a)return a[1]}return null}const M2=({isExpanded:s=!1})=>{const[n,l]=E.useState(""),[a,o]=E.useState([]),[f,d]=E.useState(!1),[h,p]=E.useState(!1),[y,x]=E.useState(-1),[b,_]=E.useState(!1),[C,z]=E.useState(null),[D,q]=E.useState(!1),[P,F]=E.useState(""),[G,J]=E.useState(""),[le,ue]=E.useState(""),U=E.useRef(null),K=E.useRef(null),pe=E.useRef(null),ve=E.useRef([]),be=E.useRef(null),Se=E.useRef(!("webkitSpeechRecognition"in window||"SpeechRecognition"in window)),{suggestions:Ne,isLoading:Re}=x2(n,h),{addToQueue:ke,updateQueueItem:k,queueMode:j}=Q(),B=async X=>{const $=await X.arrayBuffer(),he=btoa(String.fromCharCode(...new Uint8Array($))),xe=await fetch("/api/gemini/transcribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{inlineData:{mimeType:X.type||"audio/webm",data:he}},{text:"Transcribe this Vietnamese audio. Return ONLY the spoken text, nothing else. If no speech is detected, return empty string."}]}],generationConfig:{max_output_tokens:200,temperature:.1,thinkingConfig:{thinkingBudget:0}}})});if(!xe.ok)throw new Error(`Gemini API error: ${xe.status}`);return(await xe.json()).candidates?.[0]?.content?.parts?.[0]?.text?.trim()||""},fe=E.useCallback(()=>{const X=window.SpeechRecognition||window.webkitSpeechRecognition,$=new X;$.lang="vi-VN",$.continuous=!1,$.interimResults=!0,$.maxAlternatives=1,U.current=$;let he=!1,xe=!1;q(!0),F("listening"),J(""),ue(""),$.onresult=ze=>{let Xe="",M="";for(let W=ze.resultIndex;W<ze.results.length;W++){const ae=ze.results[W][0].transcript;ze.results[W].isFinal?Xe+=ae:M+=ae}Xe?(he=!0,ue(""),l(Xe),Y(Xe),q(!1),F("")):ue(M)},$.onerror=ze=>{xe=!0,console.error("[Voice] Web Speech error:",ze.error),ze.error==="no-speech"?J("Khng nghe thy ging ni, th li nh"):ze.error==="not-allowed"?J("Khng th truy cp microphone"):J("Li nhn dng ging ni"),setTimeout(()=>{q(!1),F(""),ue("")},1500)},$.onend=()=>{!he&&!xe&&(q(!1),F(""),ue(""))},$.start()},[]),de=E.useCallback(async()=>{pe.current&&pe.current.getTracks().forEach(X=>X.stop()),clearTimeout(be.current),q(!0),F("listening"),J(""),ve.current=[];try{const X=await navigator.mediaDevices.getUserMedia({audio:!0});pe.current=X;const $=new MediaRecorder(X);K.current=$,$.ondataavailable=he=>{he.data.size>0&&ve.current.push(he.data)},$.onstop=async()=>{if(X.getTracks().forEach(he=>he.stop()),pe.current=null,ve.current.length===0){q(!1),F("");return}F("processing");try{const he=new Blob(ve.current,{type:$.mimeType}),xe=await B(he);xe?(l(xe),Y(xe)):(J("Khng nghe thy ging ni, th li nh"),await new Promise(ze=>setTimeout(ze,1500)))}catch(he){console.error("[Voice] Gemini transcribe failed:",he),J("Li nhn dng ging ni"),await new Promise(xe=>setTimeout(xe,1500))}finally{q(!1),F("")}},$.start(),be.current=setTimeout(()=>V(),1e4)}catch(X){console.error("[Voice] Mic access failed:",X),J("Khng th truy cp microphone"),setTimeout(()=>{q(!1),F("")},1500)}},[]),re=E.useCallback(()=>{Se.current?de():fe()},[fe,de]),V=E.useCallback(()=>{U.current&&(U.current.stop(),U.current=null),clearTimeout(be.current),K.current&&K.current.state==="recording"&&K.current.stop()},[]);E.useEffect(()=>()=>{U.current&&U.current.abort(),clearTimeout(be.current),pe.current&&pe.current.getTracks().forEach(X=>X.stop()),K.current&&K.current.state==="recording"&&K.current.stop()},[]);const Y=async X=>{const $=X||n;if($.trim()){X&&l(X),p(!1),x(-1),d(!0);try{const he=yy($);if(he){const xe=await fetch(`/api/yt/video?id=${encodeURIComponent(he)}`);if(xe.ok){const ze=await xe.json();o([ze])}else o([])}else{const xe=await u2($);o(xe)}}catch(he){console.error("Search failed",he)}finally{d(!1)}}},te=X=>{X.key==="ArrowDown"?(X.preventDefault(),x($=>$<Ne.length-1?$+1:$)):X.key==="ArrowUp"?(X.preventDefault(),x($=>$>-1?$-1:$)):X.key==="Enter"&&(X.preventDefault(),y>=0&&Ne[y]?Y(Ne[y].query):Y())},ge=X=>{!X||!X.title||(z(X),_(!0))},_e=async(X,$=!1)=>{if(!C)return;const he=C.title,xe=C.artist;let ze=he;C.source==="local"?ze=C.title:ze=ih(he);let Xe=null;try{const{pushToFirebaseQueue:M,guestNameToCustomerKey:W}=await Sa(async()=>{const{pushToFirebaseQueue:qe,guestNameToCustomerKey:St}=await Promise.resolve().then(()=>wb);return{pushToFirebaseQueue:qe,guestNameToCustomerKey:St}},void 0),ae=W(X);Xe=(await M({videoId:C.videoId,title:he,cleanTitle:ze,artist:xe,addedBy:X,thumbnail:C.thumbnail,isPriority:$},ae))?.key}catch(M){console.warn("Firebase push failed, will add locally:",M),Xe=Date.now().toString()}Xe&&Xe!==Date.now().toString()||ke({id:Xe,firebaseKey:null,videoId:C.videoId,title:he,cleanTitle:ze,artist:xe,addedBy:X,thumbnail:C.thumbnail}),_(!1),z(null),Sa(async()=>{const{recordPlay:M,cacheYoutubeId:W}=await Promise.resolve().then(()=>_2);return{recordPlay:M,cacheYoutubeId:W}},void 0).then(({recordPlay:M,cacheYoutubeId:W})=>{M(he,xe),C.videoId&&W(he,xe,C.videoId)}),Sa(async()=>{const{cleanSongTitle:M}=await Promise.resolve().then(()=>y2);return{cleanSongTitle:M}},void 0).then(({cleanSongTitle:M})=>{M(he).then(W=>{W&&Xe&&(Xe&&Xe!==Date.now().toString()?Sa(async()=>{const{ref:ae,update:Be,getDatabase:qe}=await Promise.resolve().then(()=>WE);return{ref:ae,update:Be,getDatabase:qe}},void 0).then(({ref:ae,update:Be,getDatabase:qe})=>{const St=qe(),sn=ae(St,`queue/${Xe}`);Be(sn,{cleanTitle:W.title,cleanArtist:W.artist}).catch(()=>{})}):k(Xe,{cleanTitle:W.title,cleanArtist:W.artist}))})})},oe=E.useRef(null);return E.useEffect(()=>{oe.current&&(oe.current.scrollTop=0)},[a]),m.jsxs("div",{className:"flex flex-col h-full bg-slate-50 relative",children:[m.jsxs("div",{className:"p-2 bg-white border-b border-slate-100 sticky top-0 z-30",children:[m.jsxs("div",{className:"relative",children:[m.jsx(By,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400",size:16}),m.jsx(Cb,{placeholder:"Tm bi ht...",className:"pl-8 pr-10 h-9 text-sm font-bold rounded-lg border-slate-200 focus:border-indigo-500 focus:ring-indigo-100 block w-full bg-slate-50 text-slate-800 placeholder:text-slate-300 transition-all",value:n,onChange:X=>{const $=X.target.value;l($),x(-1),h||p(!0),yy($)&&Y($)},onKeyDown:te,onFocus:()=>p(!0),onBlur:()=>setTimeout(()=>p(!1),200)}),m.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center",children:f?m.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-indigo-500 border-t-transparent rounded-full"}):m.jsx("button",{type:"button",onClick:D?V:re,className:`p-1 rounded-full transition-all cursor-pointer ${D?"text-red-500 bg-red-50 animate-pulse":"text-slate-400 hover:text-indigo-600 hover:bg-indigo-50"}`,title:D?"ang nghe...":"Tm bng ging ni",children:m.jsx(ss,{size:16,strokeWidth:2.5})})}),h&&n.trim().length>=2&&m.jsx(S2,{suggestions:Ne,isLoading:Re,onSelect:Y,selectedIndex:y})]}),m.jsxs("div",{className:"flex gap-1.5 mt-2 overflow-x-auto pb-0.5 scrollbar-hide",children:[["Tone Nam","Tone N","Song Ca","Remix"].map(X=>m.jsxs("button",{onClick:()=>{if(!n.toLowerCase().includes(X.toLowerCase())){const $=(n+" "+X).trim();l($),Y($)}},className:"px-2 py-0.5 bg-white hover:bg-indigo-50 text-slate-500 hover:text-indigo-600 rounded-full text-[10px] font-bold transition-all whitespace-nowrap border border-slate-200 hover:border-indigo-200 cursor-pointer active:scale-95",children:["+ ",X]},X)),m.jsxs("button",{onClick:()=>{const X=n.trim()||"karaoke",$=X.toLowerCase().includes("karaoke")?X:`${X} karaoke`;window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent($)}`,"_blank","noopener")},className:"px-2 py-0.5 bg-red-600 hover:bg-red-700 text-white rounded-full text-[10px] font-bold transition-all whitespace-nowrap cursor-pointer active:scale-95 flex items-center gap-1",children:[m.jsx(yS,{size:10}),"YouTube"]})]})]}),m.jsxs("div",{ref:oe,className:"flex-1 overflow-y-auto p-1.5 custom-scrollbar",children:[!f&&a.length===0&&m.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300 space-y-3",children:[m.jsx(gd,{size:48,strokeWidth:1}),m.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50",children:n.trim()?"Khng tm thy kt qu":"Nhp tn  tm kim"}),n.trim()&&m.jsxs("p",{className:"text-[10px] text-slate-400 font-medium flex items-center gap-1.5",children:[m.jsx(SS,{size:12}),"Bm ",m.jsx("span",{className:"text-red-500 font-bold",children:"YouTube"}),"  sao chp link  dn vo  tm kim"]})]}),m.jsx("div",{className:`gap-2 pb-16 ${s?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 auto-rows-max":"flex flex-col"}`,children:a.map(X=>m.jsxs("div",{className:`flex ${s?"flex-col p-3 gap-3":"flex-row items-center p-1.5 gap-2"} bg-white hover:bg-indigo-50 rounded-lg cursor-pointer group transition-all border border-transparent hover:border-indigo-100 active:scale-[0.98] shadow-sm hover:shadow-md h-full`,onClick:()=>ge(X),children:[m.jsxs("div",{className:`relative ${s?"w-full aspect-video rounded-lg":"w-14 h-10 rounded-md"} overflow-hidden bg-slate-200 flex-shrink-0`,children:[m.jsx("img",{src:X.thumbnail,alt:"",className:"w-full h-full object-cover",loading:"lazy"}),X.duration&&m.jsx("span",{className:"absolute bottom-1 right-1 bg-black/80 text-white text-[10px] font-bold px-1 py-0.5 rounded",children:X.duration})]}),m.jsxs("div",{className:`flex-1 min-w-0 flex flex-col ${s?"justify-between gap-1":""}`,children:[m.jsxs("div",{children:[m.jsx("h4",{className:`font-bold text-slate-800 leading-snug group-hover:text-indigo-700 transition-colors ${s?"text-base line-clamp-2 mb-1":"text-xs line-clamp-2"}`,title:X.title,children:X.cleanTitle||X.title}),s&&m.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[X.score>5e4&&m.jsxs("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-[10px] font-black px-1.5 py-0.5 rounded flex items-center gap-1 shadow-sm",children:[m.jsx(Vf,{size:10,fill:"currentColor"}),"NGON"]}),X.views&&m.jsxs("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded flex items-center gap-1",children:[m.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-400"}),X.views," lt xem"]})]}),m.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:X.tags&&X.tags.slice(0,s?4:2).map(($,he)=>m.jsx("span",{className:`text-[8px] font-bold px-1.5 py-0.5 rounded uppercase tracking-wide
                                                ${$.includes("Tone")?"bg-blue-50 text-blue-600 border border-blue-100":$==="Remix"?"bg-purple-50 text-purple-600 border border-purple-100":"bg-slate-100 text-slate-500 border border-slate-200"}`,children:$},he))})]}),m.jsxs("div",{className:`flex items-center justify-between mt-1 ${s?"border-t border-slate-100 pt-2":""}`,children:[m.jsxs("span",{className:"text-[10px] font-bold text-slate-400 truncate max-w-[120px] uppercase flex items-center gap-1",children:[m.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"}),X.artist]}),s&&m.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white text-[10px] font-bold px-3 py-1.5 rounded-full transition-all active:scale-95 shadow-lg shadow-indigo-200",children:"CHN"})]})]}),!s&&m.jsx("button",{className:"p-1.5 rounded-full text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition-all flex-shrink-0",children:m.jsx(DS,{size:16,strokeWidth:3})})]},X.id||X.videoId))})]}),D&&m.jsxs("div",{className:"fixed inset-0 z-[9999] bg-white flex flex-col items-center justify-center",children:[m.jsxs("div",{className:"relative mb-8",children:[P==="listening"&&!G&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"absolute inset-0 w-28 h-28 -m-6 rounded-full bg-red-100 animate-ping opacity-30"}),m.jsx("div",{className:"absolute inset-0 w-24 h-24 -m-4 rounded-full bg-red-50 animate-pulse opacity-50"})]}),m.jsx("button",{onClick:P==="listening"?V:void 0,className:`relative w-16 h-16 rounded-full flex items-center justify-center shadow-lg transition-all cursor-pointer active:scale-95 ${P==="processing"?"bg-indigo-500 shadow-indigo-200":G?"bg-slate-400 shadow-slate-200":"bg-red-500 hover:bg-red-600 shadow-red-200"} text-white`,children:P==="processing"?m.jsx("div",{className:"animate-spin h-6 w-6 border-3 border-white border-t-transparent rounded-full"}):m.jsx(ss,{size:28,strokeWidth:2.5})})]}),le&&!G&&m.jsxs("p",{className:"text-xl font-bold text-indigo-600 mb-3 px-8 text-center animate-pulse",children:['"',le,'"']}),m.jsx("p",{className:`text-lg font-bold mb-2 ${G?"text-red-500":"text-slate-700"}`,children:G||(P==="processing"?"ang nhn dng...":"ang nghe...")}),m.jsx("p",{className:"text-xs text-slate-400 font-medium",children:G?"":P==="listening"?Se.current?"Ni xong th bm nt mic  tm":"Ni tn bi ht...":"ang x l ging ni"}),P==="listening"&&m.jsx("button",{onClick:()=>{U.current&&(U.current.abort(),U.current=null),clearTimeout(be.current),pe.current&&(pe.current.getTracks().forEach(X=>X.stop()),pe.current=null),K.current&&K.current.state==="recording"&&(K.current.stop(),K.current=null),q(!1),F(""),ue("")},className:"mt-8 text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors cursor-pointer uppercase tracking-widest",children:"Hu"})]}),m.jsx(A2,{isOpen:b,onClose:()=>_(!1),onConfirm:_e,songTitle:C?.title||""})]})};let et=null,wn=!1,sh=100,Mb=!1,ud=0,fd=0,R2=new Set;const k2=s=>{et=s,wn=!0},D2=()=>{et=null,wn=!1},j2=(s,n)=>{ud=s,n>0&&(fd=n)},O2=()=>{R2.forEach(s=>s())},Mn=()=>{if(!wn||!et)return!1;try{const s=et.getIframe?.();return!!(s&&s.src)}catch{return!1}},z2=()=>et,Lo=()=>{try{return!et||!wn?ud:et.getCurrentTime()||0}catch{return ud}},Ho=()=>{try{return!et||!wn?fd:et.getDuration()||0}catch{return fd}},vy=(s,n=!0)=>{try{if(!et||!wn)return;const l=Math.max(0,Math.min(100,s));l>0&&(sh=l),et.setVolume(l),l>0&&n&&et.unMute()}catch{}},dd=()=>{try{if(!et||!wn)return;et.mute()}catch{}},Ma=()=>{try{if(!et||!wn||Mb)return;et.unMute(),et.setVolume(sh)}catch{}},by=s=>{Mb=s;try{if(!et||!wn)return;s?et.mute():(et.unMute(),et.setVolume(sh))}catch{}},I2=()=>{try{return!et||!wn?-1:et.getPlayerState()??-1}catch{return-1}},Rb=()=>{try{if(!et||!wn)return!1;const s=et.getIframe?.();return!!(s&&s.src)}catch{return!1}},ll=()=>{try{Rb()&&et.playVideo()}catch{}},L2=()=>{try{Rb()&&et.pauseVideo()}catch{}},H2="karaoke_sync_channel",zf=()=>null,If=()=>0,_y=()=>!1,kb=(s="host",{onSongEnded:n}={})=>{const l=s==="host",a=Q(j=>j.isPlaying),o=Q(j=>j.waitingForGuest),f=Q(l?j=>j.currentSong:zf),d=Q(l?j=>j.waitCountdown:If),h=Q(l?j=>j.countdownPaused:_y),p=Q(l?j=>j.micAttemptHint:zf),y=Q(l?j=>j.restartTrigger:If),x=Q(l?j=>j.queue:zf),b=Q(j=>j.setCurrentSong),_=Q(j=>j.setIsPlaying),C=Q(j=>j.setWaitingForGuest),z=Q(j=>j.setWaitCountdown),D=Q(j=>j.setCountdownPaused),q=Q(j=>j.setMicAttemptHint),P=Q(j=>j.triggerRestart),F=E.useRef(null),G=E.useRef(null),J=E.useRef(null),le=E.useRef(new Set),ue=E.useCallback(()=>(F.current||(F.current=new BroadcastChannel(H2)),F.current),[]),U=E.useCallback((j,B)=>{try{ue().postMessage({type:j,payload:B})}catch{}},[ue]);E.useEffect(()=>{if(s!=="projection")return;const j=ue();j.onmessage=fe=>{const{type:de,payload:re}=fe.data;switch(de){case"SET_SONG":{G.current!==re?.videoId&&(G.current=re?.videoId||null,b(re),_(!1),J.current&&clearInterval(J.current),Mn()&&dd());break}case"PLAY":{J.current&&(clearInterval(J.current),J.current=null),_(!0);const V=()=>{Ma(),ll()};if(Mn())V();else{const Y=setInterval(()=>{Mn()&&(clearInterval(Y),le.current.delete(Y),le.current.delete(te),V())},300),te=setTimeout(()=>{clearInterval(Y),le.current.delete(Y),le.current.delete(te)},1e4);le.current.add(Y),le.current.add(te)}break}case"PAUSE":{_(!1),Mn()&&dd();break}case"WAITING_FOR_GUEST":C(re);break;case"COUNTDOWN":z(re);break;case"COUNTDOWN_PAUSED":D(re);break;case"MIC_ATTEMPT":q(re);break;case"RESTART":{if(Mn()){const V=z2();V&&V.seekTo(0,!0)}P();break}case"SET_VOLUME":vy(re,Q.getState().isPlaying);break;case"SET_MUTE":by(re);break;case"SYNC_QUEUE":Q.getState().reorderQueue(re);break;case"FULL_SYNC":{const{song:V,playing:Y,waiting:te,countdown:ge,paused:_e,micHint:oe,queue:X}=re;if(J.current&&(clearInterval(J.current),J.current=null),V&&(G.current=V.videoId,b(V),Y)){const $=setInterval(()=>{Mn()&&(clearInterval($),le.current.delete($),le.current.delete(he),ll(),setTimeout(()=>Ma(),300),_(!0))},300),he=setTimeout(()=>{clearInterval($),le.current.delete($),le.current.delete(he)},1e4);le.current.add($),le.current.add(he)}C(te),z(ge),D(_e||!1),q(oe||null),X&&Q.getState().reorderQueue(X),typeof re.volume=="number"&&vy(re.volume,Y),typeof re.isMuted=="boolean"&&by(re.isMuted);break}}},j.postMessage({type:"REQUEST_SYNC"});const B=setInterval(()=>{Mn()&&U("SYNC_TIME",{time:Lo(),duration:Ho()})},3e3);return()=>{clearInterval(B),le.current.forEach(fe=>{clearInterval(fe),clearTimeout(fe)}),le.current.clear(),J.current&&(clearInterval(J.current),J.current=null),j.close(),F.current=null}},[s,ue,b,_,C,z,D,q,P,U]);const K=E.useRef(!1);E.useEffect(()=>{s==="projection"&&(K.current&&!o&&a&&Mn()&&(Ma(),ll()),K.current=o)},[s,o,a]),E.useEffect(()=>{if(s!=="host")return;const j=ue();return j.onmessage=B=>{const{type:fe,payload:de}=B.data;if(fe==="REQUEST_SYNC"){const re=Q.getState();U("FULL_SYNC",{song:re.currentSong,playing:re.isPlaying,waiting:re.waitingForGuest,countdown:re.waitCountdown,paused:re.countdownPaused,micHint:re.micAttemptHint,queue:re.queue,volume:re.volume,isMuted:re.isMuted})}else fe==="SYNC_TIME"?j2(de.time,de.duration):fe==="SONG_ENDED"&&(O2(),n&&n())},()=>{j.close(),F.current=null}},[s,ue,U,n]);const pe=E.useRef(null);E.useEffect(()=>{if(s!=="host")return;if(f?.isStaged){U("SET_SONG",null);return}const j=f?.videoId||null;j!==pe.current&&(pe.current=j,f&&U("SET_SONG",f))},[s,f,U]);const ve=E.useRef(null);E.useEffect(()=>{s==="host"&&a!==ve.current&&(ve.current=a,U(a?"PLAY":"PAUSE"))},[s,a,U]);const be=E.useRef(null);E.useEffect(()=>{s==="host"&&o!==be.current&&(be.current=o,U("WAITING_FOR_GUEST",o))},[s,o,U]);const Se=E.useRef(null);E.useEffect(()=>{if(s==="host")return Se.current&&clearTimeout(Se.current),Se.current=setTimeout(()=>{U("SYNC_QUEUE",x)},500),()=>{Se.current&&clearTimeout(Se.current)}},[s,x,U]),E.useEffect(()=>{s==="host"&&U("COUNTDOWN",d)},[s,d,U]),E.useEffect(()=>{s==="host"&&U("COUNTDOWN_PAUSED",h)},[s,h,U]),E.useEffect(()=>{s==="host"&&U("MIC_ATTEMPT",p)},[s,p,U]);const Ne=Q(l?j=>j.volume:If),Re=Q(l?j=>j.isMuted:_y),ke=E.useRef(100);E.useEffect(()=>{s==="host"&&Ne!==ke.current&&(ke.current=Ne,U("SET_VOLUME",Ne))},[s,Ne,U]);const k=E.useRef(!1);return E.useEffect(()=>{s==="host"&&Re!==k.current&&(k.current=Re,U("SET_MUTE",Re))},[s,Re,U]),E.useEffect(()=>{s!=="host"||y===0||U("RESTART")},[s,y,U]),{sendMessage:U}},B2=m.jsx("style",{children:`
        .ytp-endscreen-container { display: none !important; }
        .ytp-suggestions { display: none !important; }
    `}),U2=Ce.memo(({className:s,onReady:n,onStateChange:l,onEnded:a,muted:o=!1,controls:f=!0,quality:d=null,autoUnmute:h=!1,passive:p=!1})=>{const y=Q(U=>U.currentSong),x=Q(U=>U.isPlaying),b=Q(U=>U.setIsPlaying),_=Q(U=>U.restartTrigger),C=Q(U=>U.waitingForGuest),z=E.useRef(null),D=E.useRef(!1),q=E.useRef(null),P=E.useRef(null),F=E.useRef(null),G=E.useRef(null),J=Ce.useMemo(()=>({height:"100%",width:"100%",playerVars:{autoplay:h?1:0,controls:f?1:0,mute:h||o?1:0,disablekb:f?0:1,modestbranding:1,playsinline:1,enablejsapi:1,fs:0,iv_load_policy:3,rel:0,origin:window.location.origin}}),[f,o,h]);E.useEffect(()=>{if(!h)return;const U=()=>{z.current&&z.current.unMute()};return document.addEventListener("click",U,{once:!0}),()=>document.removeEventListener("click",U)},[h]);const le=U=>{z.current=U.target,k2(U.target);const K=U.target.getIframe();K&&(K.removeAttribute("allowfullscreen"),K.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen");const pe=()=>{d&&U.target.setPlaybackQuality&&U.target.setPlaybackQuality(d)};pe(),window.ytQualityInterval&&clearInterval(window.ytQualityInterval),window.ytQualityInterval=setInterval(pe,3e4),D.current=!0,P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{D.current=!1},1500);const ve=Q.getState(),be=ve.isPlaying&&!ve.waitingForGuest;p?be?U.target.unMute():U.target.mute():be?U.target.playVideo():(U.target.mute(),U.target.pauseVideo()),n&&n(U)};E.useEffect(()=>()=>{window.ytQualityInterval&&clearInterval(window.ytQualityInterval),P.current&&clearTimeout(P.current),F.current&&clearTimeout(F.current),G.current&&clearTimeout(G.current),y?.videoId||(D2(),z.current=null)},[y?.videoId,h,d]);const ue=U=>{const K=Q.getState();if(d&&(U.data===1||U.data===3)&&U.target.setPlaybackQuality(d),p&&U.data===1&&(!K.isPlaying||K.waitingForGuest)){U.target.mute(),U.target.pauseVideo();return}if(!p&&K.waitingForGuest&&U.data===1){U.target.pauseVideo();return}if(D.current&&U.data===1&&!K.isPlaying&&!p){U.target.pauseVideo();return}l&&l(U),p?U.data===1&&(K.isPlaying&&!K.waitingForGuest?U.target.unMute():U.target.mute()):(U.data===1&&b(!0),U.data===2&&b(!1)),U.data===0&&a&&a()};return E.useEffect(()=>{Mn()&&(p||(x&&!C?h?z.current&&(z.current.mute(),z.current.playVideo(),F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{z.current&&(z.current.unMute(),z.current.setVolume(100))},500)):ll():L2()))},[x,C,h]),E.useEffect(()=>{_>0&&Mn()&&(z.current.seekTo(0,!0),G.current&&clearTimeout(G.current),G.current=setTimeout(()=>ll(),100))},[_]),y?m.jsxs("div",{ref:q,className:s,style:{position:"relative",overflow:"hidden"},children:[B2,m.jsx(sx,{videoId:y.videoId,opts:J,onReady:le,onStateChange:ue,className:"w-full h-full"})]}):m.jsx("div",{className:"bg-black text-white flex items-center justify-center h-full w-full",children:"Cha pht bi no"})}),V2={left:"30%",width:"350px",height:"350px",animationDelay:"0s"},G2={animationDelay:"0s"},q2=({countdown:s,onSkip:n,onPauseToggle:l})=>{const a=Q(D=>D.waitingForGuest),o=Q(D=>D.currentSong),f=Q(D=>D.waitCountdown),d=Q(D=>D.countdownPaused),h=Q(D=>D.micAttemptHint),p=s??f,[y,x]=E.useState(!1);if(E.useEffect(()=>{if(a){const D=setTimeout(()=>x(!0),100);return()=>clearTimeout(D)}else x(!1)},[a]),!a)return null;const b=o?.addedBy||"Khch",_=o?.cleanTitle||o?.title||"",C=30,z=Math.max(0,(p??C)/C);return m.jsxs(m.Fragment,{children:[y&&s0.createPortal(m.jsxs("div",{className:`inv-overlay ${y?"inv-overlay--entered":""}`,children:[m.jsx("div",{className:"inv-orbs",children:m.jsx("div",{className:"inv-orb",style:V2})}),m.jsxs("div",{className:"inv-top-controls",children:[m.jsxs("div",{className:"inv-countdown-row",children:[m.jsxs("span",{className:"inv-countdown-num",children:[p,"s"]}),l&&m.jsxs("button",{className:"inv-pause-btn",onClick:D=>{D.stopPropagation(),l?.()},children:[d?m.jsx(vo,{size:16,fill:"currentColor"}):m.jsx(Hy,{size:16,fill:"currentColor"}),d?"Tip Tc":"Dng m"]})]}),m.jsxs("button",{className:"inv-start-btn",onClick:n,children:["BT U NGAY ",m.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M5 12l14 0"}),m.jsx("path",{d:"M13 18l6 -6"}),m.jsx("path",{d:"M13 6l6 6"})]})]})]}),m.jsxs("div",{className:"inv-content",children:[m.jsxs("div",{className:"inv-mic-wrap",onClick:n,children:[m.jsx("div",{className:"inv-rings",children:m.jsx("div",{className:"inv-ring",style:G2})}),m.jsxs("svg",{className:"inv-countdown-svg",viewBox:"0 0 100 100",children:[m.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"3"}),m.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"#22d3ee",strokeWidth:"3",strokeDasharray:"301.6",strokeDashoffset:301.6*(1-z),strokeLinecap:"round",style:{transition:d?"none":"stroke-dashoffset 1s linear"},transform:"rotate(-90 50 50)"})]}),m.jsx("div",{className:"inv-mic-btn",children:m.jsx(ss,{size:80,color:"#fff",strokeWidth:2.5})})]}),m.jsx("h1",{className:"inv-singer",children:b}),m.jsx("h2",{className:"inv-subtitle",children:"MI LN SN KHU"}),m.jsxs("div",{className:"inv-song",children:["TRNH BY BI HT: ",m.jsx("span",{className:"inv-song-title",children:_})]})]}),m.jsx("div",{className:"inv-footer",children:m.jsxs("p",{className:"inv-instruction",children:["G nh vo mic hoc ni ",m.jsx("span",{className:"inv-alo",children:"A L"}),"  bt u"]})})]}),document.body),h&&s0.createPortal(m.jsxs("div",{className:`inv-hint ${h==="weak"?"inv-hint--amber":"inv-hint--green"}`,children:[h==="weak"&&" Hy g mnh hn vo mic!",h==="medium"&&" Gn ri! Ni to hn na!"]}),document.body)]})},Db=Ce.memo(q2),Q2=Ce.memo(()=>{const s=Q(p=>p.currentSong),n=Q(p=>p.queue[0]?.videoId??null),l=Q(p=>p.queue[0]?.cleanTitle||p.queue[0]?.title||null),a=Q(p=>p.queue[0]?.addedBy??null),[o,f]=E.useState(!1);if(E.useEffect(()=>{if(s){const y=[],x=()=>{f(!0),y.push(setTimeout(()=>f(!1),8e3))};let b=0;if(s.duration)if(typeof s.duration=="string"&&s.duration.includes(":")){const _=s.duration.split(":").map(Number);_.length===2?b=_[0]*60+_[1]:_.length===3&&(b=_[0]*3600+_[1]*60+_[2])}else b=parseInt(s.duration,10)||0;if(y.push(setTimeout(x,5e3)),b>0){let _=b*1e3-35e3;_<0&&(_=b*1e3*.85),_>15e3&&y.push(setTimeout(x,_))}return()=>{y.forEach(_=>{clearTimeout(_),clearInterval(_)})}}else f(!1)},[s]),!s)return null;const d=s.cleanTitle||ih(s.title),h=s.addedBy||"Khch";return m.jsx("div",{className:`absolute top-0 left-0 right-0 z-50 pointer-events-none flex justify-center px-8 pt-8 transition-[opacity,transform] duration-500 ease-in-out ${o?"opacity-100 translate-y-0":"opacity-0 -translate-y-full"}`,children:m.jsxs("div",{className:"flex items-stretch gap-0 w-[95vw] max-w-[95vw] rounded-3xl overflow-hidden bg-black/85 border border-white/10",children:[m.jsxs("div",{className:"flex-1 w-1/2 flex items-center gap-6 px-8 py-7 min-w-0 border-r border-white/10",children:[m.jsx("div",{className:"w-20 h-20 rounded-2xl bg-yellow-500/20 flex items-center justify-center flex-shrink-0",children:m.jsx(ss,{size:40,className:"text-yellow-400 drop-shadow-md"})}),m.jsxs("div",{className:"min-w-0 flex flex-col justify-center flex-1",children:[m.jsx("div",{className:"text-yellow-500 text-lg font-bold uppercase tracking-[0.2em] leading-none mb-2",children:"ANG HT"}),m.jsx("div",{className:"text-white font-black text-4xl uppercase line-clamp-2 w-full leading-[1.1] break-words",children:d}),m.jsx("div",{className:"text-yellow-300 text-3xl font-extrabold uppercase tracking-wide mt-2 truncate",children:h})]})]}),m.jsxs("div",{className:"flex-1 w-1/2 flex items-center gap-6 bg-indigo-950/40 px-8 py-7 min-w-0",children:[m.jsx("div",{className:"w-20 h-20 rounded-2xl bg-indigo-500/20 flex items-center justify-center flex-shrink-0",children:m.jsx(Uy,{size:36,className:"text-indigo-300"})}),m.jsxs("div",{className:"min-w-0 flex flex-col justify-center flex-1",children:[m.jsx("div",{className:"text-indigo-300 text-sm font-bold uppercase tracking-widest leading-none mb-2",children:"TIP THEO"}),n?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"text-white/90 font-bold text-3xl uppercase line-clamp-2 w-full leading-tight break-words",children:l}),m.jsx("div",{className:"text-white text-2xl font-bold uppercase tracking-wide mt-1 truncate",children:a||"Khch"})]}):m.jsx("div",{className:"text-white/50 font-bold text-xl uppercase",children:"Chc b con ht vui v!"})]})]})]})})}),Y2="/bg.mp4";class X2 extends Ce.Component{constructor(n){super(n),this.state={hasError:!1,errorKey:0},this._recoverTimer=null}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(){this._recoverTimer&&clearTimeout(this._recoverTimer),this._recoverTimer=setTimeout(()=>this.setState({hasError:!1}),500)}componentDidUpdate(n){n.videoId!==this.props.videoId&&this.state.hasError&&this.setState({hasError:!1})}componentWillUnmount(){this._recoverTimer&&clearTimeout(this._recoverTimer)}render(){return this.state.hasError?m.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center",children:m.jsx("div",{className:"text-white/50 text-xl",children:"ang ti..."})}):this.props.children}}const K2=Ce.memo(()=>{const s=Q(o=>o.isPlaying),n=Q(o=>o.waitingForGuest),l=E.useRef(!0),a=E.useRef(null);return E.useEffect(()=>{const o=setTimeout(()=>{l.current=!1},15e3);return()=>clearTimeout(o)},[]),E.useEffect(()=>{if(!s||n)return;const o=l.current?2e3:3e3,f=setInterval(()=>{const d=I2();d===1?Ma():(d===-1||d===5)&&(dd(),ll(),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>Ma(),500))},o);return()=>{clearInterval(f),a.current&&clearTimeout(a.current)}},[s,n]),null}),F2=()=>{const{sendMessage:s}=kb("projection"),n=Q(G=>G.currentSong),l=Q(G=>G.isPlaying),[a,o]=E.useState(!!document.fullscreenElement),[f,d]=E.useState(!0),h=E.useRef(null),p=E.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().catch(()=>{}):document.documentElement.requestFullscreen().catch(()=>{})},[]),[y,x]=E.useState(!1),[b,_]=E.useState(!1),C=E.useRef(null);E.useEffect(()=>{const G=setTimeout(()=>x(!0),2e3);return()=>clearTimeout(G)},[]),E.useEffect(()=>{if(!b)return;const G=window.AudioContext||window.webkitAudioContext;if(!G)return;const J=new G;C.current=J,J.state==="suspended"&&J.resume();const le=J.createOscillator(),ue=J.createGain();le.type="sine",le.frequency.value=1,ue.gain.value=.001,le.connect(ue),ue.connect(J.destination),le.start(),le.stop(J.currentTime+.5);const U=J.createOscillator(),K=J.createGain();return U.frequency.value=440,K.gain.value=0,U.connect(K),K.connect(J.destination),U.start(),()=>{U.stop(),J.close(),C.current=null}},[b]);const z=E.useCallback(()=>{s("SONG_ENDED")},[s]);E.useEffect(()=>{const G=()=>o(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",G),()=>document.removeEventListener("fullscreenchange",G)},[]);const D=E.useCallback(()=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>d(!1),3e3)},[]),q=E.useRef(null),P=E.useRef(null);E.useEffect(()=>{const G=()=>{q.current||(q.current=!0,d(!0),D(),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{q.current=!1},500))};return D(),window.addEventListener("mousemove",G),()=>{window.removeEventListener("mousemove",G),h.current&&clearTimeout(h.current),P.current&&clearTimeout(P.current)}},[D]);const F=E.useCallback(()=>{_(!0),document.fullscreenElement||document.documentElement.requestFullscreen().catch(()=>{}),window.__unlocked=!0,window.opener&&window.opener.postMessage({type:"tv-ready"},"*")},[]);return m.jsxs("div",{className:"h-screen w-screen bg-black overflow-hidden flex items-center justify-center relative cursor-pointer",onClick:F,children:[m.jsx(K2,{}),m.jsx("div",{className:`w-full h-full relative z-10 transition-opacity duration-500 ${n&&l?"opacity-100":"opacity-0 pointer-events-none"}`,children:n?m.jsxs("div",{className:"w-full h-full relative",children:[m.jsx(X2,{videoId:n.videoId,children:m.jsx(U2,{className:"w-full h-full",autoUnmute:!0,quality:"hd1080",controls:!1,passive:!0,onEnded:z})}),m.jsx("div",{className:"absolute inset-0 z-10"}),m.jsx(Q2,{})]}):m.jsx("div",{className:"w-full h-full"})}),m.jsx("div",{className:`absolute inset-0 z-0 overflow-hidden transition-opacity duration-300 ${n&&l?"opacity-0 pointer-events-none":"opacity-100"}`,children:y&&m.jsx("video",{src:Y2,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"})}),m.jsx(Db,{onPauseToggle:()=>{const G=Q.getState();G.setCountdownPaused(!G.countdownPaused)}}),m.jsx("button",{onClick:p,className:`absolute top-4 right-4 z-50 p-3 bg-black/50 hover:bg-black/80 text-white rounded-xl transition-all duration-500 cursor-pointer active:scale-90 ${f?"opacity-100":"opacity-0 pointer-events-none"}`,title:a?"Thot ton mn hnh":"Ton mn hnh",children:a?m.jsx(ES,{size:28}):m.jsx(wS,{size:28})})]})},P2=Ce.memo(({className:s})=>{const n=Q(h=>h.currentSong),l=Q(h=>h.isPlaying),a=E.useRef(null),[o,f]=E.useState(!1);E.useEffect(()=>{a.current&&(a.current.style.animationPlayState=l?"running":"paused")},[l]);const d=E.useMemo(()=>n?`https://img.youtube.com/vi/${n.videoId}/hqdefault.jpg`:null,[n?.videoId]);return n?m.jsxs("div",{className:`${s} bg-black flex items-center justify-center relative overflow-hidden`,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[m.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-30 object-cover",style:{backgroundImage:`url(${d})`}}),m.jsxs("div",{ref:a,className:"relative z-10 h-[92%] aspect-square rounded-full border-4 border-slate-800 shadow-2xl overflow-hidden will-change-transform",style:{animation:"disc-spin 10s linear infinite",animationPlayState:l?"running":"paused"},children:[m.jsx("img",{src:d,alt:"Song Thumbnail",className:"w-full h-full object-cover scale-110"}),m.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-black rounded-full border-2 border-slate-700 flex items-center justify-center",children:m.jsx("div",{className:"w-6 h-6 bg-slate-900 rounded-full"})})]}),m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 flex items-center gap-3 px-4 py-3 bg-black/85",style:{opacity:o?1:0,transform:o?"translateY(0)":"translateY(100%)",transition:"opacity 0.3s ease, transform 0.3s ease"},children:[m.jsx(ss,{size:16,className:"text-yellow-400 flex-shrink-0"}),m.jsxs("div",{className:"min-w-0 flex items-center gap-2 flex-1",children:[m.jsx("span",{className:"text-yellow-400 font-black text-sm uppercase truncate",children:n.title}),m.jsx("span",{className:"text-white/30 flex-shrink-0",children:""}),m.jsx("span",{className:"text-white/60 font-bold text-xs uppercase flex-shrink-0",children:n.addedBy||"Khch"})]}),m.jsx("div",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase ${l?"bg-red-600 text-white":"bg-orange-500 text-white"}`,children:l?"ANG HT":"TM NGNG"})]})]}):m.jsx("div",{className:"bg-black text-white flex items-center justify-center h-full w-full",children:"Cha pht bi no"})}),xy=s=>{if(!s||isNaN(s))return"0:00";const n=Math.floor(s/60),l=Math.floor(s%60);return`${n}:${l.toString().padStart(2,"0")}`},Z2=()=>{const s=Q(P=>P.currentSong),n=Q(P=>P.restartTrigger),l=Q(P=>P.volume),a=Q(P=>P.setVolume),o=Q(P=>P.isMuted),f=Q(P=>P.setIsMuted),[d,h]=E.useState(0),[p,y]=E.useState(0),x=E.useRef(!1),b=E.useRef(100),_=E.useRef(null);E.useEffect(()=>(n>0&&(x.current=!0,h(0),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{x.current=!1},1e3)),()=>{_.current&&clearTimeout(_.current)}),[n]),E.useEffect(()=>{if(!s)return;const P=setInterval(()=>{if(!x.current){const F=Lo(),G=Ho();h(J=>{const le=Math.floor(F);return Math.floor(J)===le?J:le}),y(J=>{const le=Math.floor(G);return Math.floor(J)===le?J:le})}},1e3);return()=>clearInterval(P)},[s]);const C=P=>{const F=Number(P.target.value);a(F),F>0&&(f(!1),b.current=F)},z=()=>{o?(f(!1),a(b.current)):(b.current=l,f(!0),a(0))};if(!s)return null;const D=p>0?d/p*100:0,q=o||l===0?tT:l<50?WS:$S;return m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${D}%`}})}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-bold text-slate-400 tabular-nums",children:xy(d)}),m.jsx("span",{className:"text-[10px] font-bold text-slate-400 tabular-nums",children:xy(p)})]})]}),m.jsx("div",{className:"flex items-center gap-3",children:m.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[m.jsxs("button",{onClick:z,className:"p-1.5 rounded-lg hover:bg-slate-100 text-slate-500 hover:text-slate-700 transition-all cursor-pointer active:scale-90 flex items-center gap-1",title:"m lng TV",children:[m.jsx("span",{className:"text-[9px] font-black text-indigo-500 uppercase",children:"TV"}),m.jsx(q,{size:16})]}),m.jsxs("div",{className:"relative flex-1 group max-w-[140px]",children:[m.jsx("div",{className:"h-1 bg-slate-200 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-indigo-400 rounded-full transition-all duration-75",style:{width:`${l}%`}})}),m.jsx("input",{type:"range",min:0,max:100,step:1,value:l,onChange:C,onMouseUp:P=>P.target.blur(),onTouchEnd:P=>P.target.blur(),tabIndex:-1,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),m.jsxs("span",{className:"text-[10px] font-bold text-slate-400 w-7 text-right tabular-nums",children:[l,"%"]})]})})]})},W2=({openTV:s,closeTV:n,isTVOpen:l})=>{const[a,o]=E.useState("duplicate"),[f,d]=E.useState(!1),h=E.useRef(null),p=E.useCallback(async x=>{if(!(x===a||f)){d(!0);try{x==="duplicate"&&(l&&n(),Q.getState().setIsPlaying(!1),window.open("https://www.youtube.com","_blank"));const _=await(await fetch(`/api/display/${x}`,{method:"POST"})).json();o(_.mode),x==="extend"&&(h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{s();const{currentSong:C}=Q.getState();C&&Q.getState().setIsPlaying(!0)},3e3))}catch{}finally{d(!1)}}},[a,f,s,n,l]),y=a==="extend";return m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs("div",{className:"relative flex bg-slate-200 rounded-lg p-[3px]",style:{opacity:f?.6:1},children:[m.jsx("div",{className:`absolute top-[3px] bottom-[3px] rounded-md transition-all duration-300 ease-in-out ${y?"bg-green-600":"bg-red-500"}`,style:{width:"50%",left:y?"50%":"3px"}}),m.jsxs("button",{type:"button",disabled:f,className:`relative z-10 flex items-center justify-center gap-1.5 px-4 py-1.5 rounded-md text-xs font-extrabold uppercase tracking-wide cursor-pointer transition-colors duration-200 ${y?"text-slate-400 hover:text-slate-600":"text-white"}`,onClick:()=>p("duplicate"),children:[m.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),m.jsx("path",{d:"M8 21h8"}),m.jsx("path",{d:"M12 17v4"})]}),"YouTube"]}),m.jsxs("button",{type:"button",disabled:f,className:`relative z-10 flex items-center justify-center gap-1.5 px-4 py-1.5 rounded-md text-xs font-extrabold uppercase tracking-wide cursor-pointer transition-colors duration-200 ${y?"text-white":"text-slate-400 hover:text-slate-600"}`,onClick:()=>p("extend"),children:[m.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12 2a3 3 0 00-3 3v7a3 3 0 006 0V5a3 3 0 00-3-3z"}),m.jsx("path",{d:"M19 10v2a7 7 0 01-14 0v-2"}),m.jsx("path",{d:"M12 19v3"})]}),"Karaoke"]})]})})},J2=()=>{const{setShowHistoryModal:s,songHistory:n}=Q();return m.jsxs("button",{onClick:l=>{l.stopPropagation(),s(!0)},className:"relative p-1.5 rounded-lg text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all cursor-pointer active:scale-90",title:"Lch s bi ht hm nay",children:[m.jsx(Uf,{size:16}),n.length>0&&m.jsx("span",{className:"absolute -top-1 -right-1 min-w-[16px] h-4 bg-indigo-600 text-white text-[9px] font-black rounded-full flex items-center justify-center px-1",children:n.length})]})},$2=()=>{const{songHistory:s,showHistoryModal:n,setShowHistoryModal:l,clearHistory:a}=Q(),o=E.useMemo(()=>{if(!s||s.length===0)return{totalSongs:0,uniqueGuests:0,topGuest:null,topGuestCount:0,guestList:[]};const f={};s.forEach(p=>{const y=p.addedBy||"Khch";f[y]=(f[y]||0)+1});const d=Object.entries(f).map(([p,y])=>({name:p,count:y})).sort((p,y)=>y.count-p.count),h=d[0]||null;return{totalSongs:s.length,uniqueGuests:Object.keys(f).length,topGuest:h?.name||null,topGuestCount:h?.count||0,guestList:d}},[s]);return n?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4",children:m.jsxs($1.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},className:"bg-white rounded-3xl border border-slate-200 w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Uf,{size:20,className:"text-indigo-600"}),m.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase tracking-tighter",children:"Lch S Hm Nay"})]}),m.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-200 rounded-full transition-colors cursor-pointer",children:m.jsx(el,{size:24,className:"text-slate-500"})})]}),m.jsxs("div",{className:"p-4 grid grid-cols-3 gap-3",children:[m.jsxs("div",{className:"bg-indigo-50 rounded-2xl p-3 border border-indigo-100 text-center",children:[m.jsx(gd,{size:20,className:"text-indigo-500 mx-auto mb-1"}),m.jsx("p",{className:"text-3xl font-black text-indigo-700",children:o.totalSongs}),m.jsx("p",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-wider",children:"Bi  Ht"})]}),m.jsxs("div",{className:"bg-emerald-50 rounded-2xl p-3 border border-emerald-100 text-center",children:[m.jsx(PS,{size:20,className:"text-emerald-500 mx-auto mb-1"}),m.jsx("p",{className:"text-3xl font-black text-emerald-700",children:o.uniqueGuests}),m.jsx("p",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-wider",children:"Khch Ht"})]}),m.jsxs("div",{className:"bg-amber-50 rounded-2xl p-3 border border-amber-100 text-center",children:[m.jsx(b0,{size:20,className:"text-amber-500 mx-auto mb-1"}),m.jsx("p",{className:"text-lg font-black text-amber-700 truncate",children:o.topGuest||"---"}),m.jsx("p",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-wider",children:o.topGuestCount>0?`${o.topGuestCount} bi`:"Ht Nhiu Nht"})]})]}),o.guestList.length>1&&m.jsxs("div",{className:"px-4 pb-2",children:[m.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"Bng Xp Hng Khch"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:o.guestList.map((f,d)=>m.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold border ${d===0?"bg-amber-100 text-amber-700 border-amber-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:[d===0&&m.jsx(b0,{size:12}),m.jsx("span",{className:"uppercase",children:f.name}),m.jsx("span",{className:"bg-white/60 px-1.5 py-0.5 rounded-full text-[10px]",children:f.count})]},f.name))})]}),m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar border-t border-slate-100",children:m.jsx("div",{className:"p-3 space-y-2",children:s.length===0?m.jsxs("div",{className:"text-center py-12 text-slate-300",children:[m.jsx(Uf,{size:48,strokeWidth:1,className:"mx-auto mb-3"}),m.jsx("p",{className:"text-xs font-bold uppercase tracking-widest",children:"Cha c bi no c ht hm nay"})]}):s.map((f,d)=>m.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-xl hover:bg-slate-50 transition-colors",children:[m.jsx("span",{className:"text-xs font-black text-slate-300 w-6 text-right",children:s.length-d}),m.jsx("div",{className:"w-10 h-7 rounded-md overflow-hidden bg-slate-200 flex-shrink-0",children:f.thumbnail&&m.jsx("img",{src:f.thumbnail,alt:"",className:"w-full h-full object-cover",loading:"lazy"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"font-bold text-slate-800 text-xs leading-snug truncate",children:f.cleanTitle||f.title}),m.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[m.jsx("span",{className:"text-[10px] font-bold text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200 uppercase tracking-wider",children:f.addedBy||"Khch"}),m.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(f.completedAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})]})]},f.id))})}),m.jsxs("div",{className:"p-4 bg-slate-50 flex justify-between items-center border-t border-slate-100",children:[s.length>0?m.jsxs(Qt,{variant:"danger",onClick:a,className:"text-xs font-bold flex items-center gap-1",children:[m.jsx(pd,{size:14}),"Xa Lch S"]}):m.jsx("div",{}),m.jsx(Qt,{variant:"ghost",onClick:()=>l(!1),className:"font-bold text-slate-600",children:"ng"})]})]})}):null},e3=()=>{const s=Q(n=>n.setShowMicSettingsModal);return m.jsx("button",{onClick:n=>{n.stopPropagation(),s(!0)},className:"relative p-1.5 rounded-lg text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all cursor-pointer active:scale-90",title:"Ci t  nhy & visualization",children:m.jsx(ss,{size:16})})},Lf={LOW:[20,150],MID:[150,3400],HIGH:[3400,8e3]},t3=()=>{const{showMicSettingsModal:s,setShowMicSettingsModal:n,micSensitivity:l,setMicSensitivity:a,micDelay:o,setMicDelay:f,micMinVol:d,setMicMinVol:h,micBassFilter:p,setMicBassFilter:y,micTransient:x,setMicTransient:b,micAdaptation:_,setMicAdaptation:C}=Q(),z=E.useRef(null),D=E.useRef(null),q=E.useRef(null),P=E.useRef(null),F=E.useRef(null),[G,J]=E.useState(!1),le=E.useRef(null),[ue,U]=E.useState(!1);E.useEffect(()=>{if(!s){K();return}return(async()=>{try{const be=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});P.current=be;const Se=new AudioContext;D.current=Se,await Se.resume();const Ne=Se.createMediaStreamSource(be),Re=Se.createAnalyser();Re.fftSize=2048,Re.smoothingTimeConstant=.5,Ne.connect(Re),q.current=Re,pe()}catch(be){console.error("Mic access failed for settings:",be)}})(),()=>K()},[s]);const K=()=>{F.current&&cancelAnimationFrame(F.current),P.current&&P.current.getTracks().forEach(ve=>ve.stop()),D.current&&D.current.close()},pe=()=>{if(!z.current||!q.current)return;const ve=z.current,be=ve.getContext("2d"),Se=ve.width,Ne=ve.height,Re=q.current,ke=Re.frequencyBinCount,k=new Float32Array(ke);Re.getFloatFrequencyData(k),be.clearRect(0,0,Se,Ne);const j=D.current.sampleRate,B=([M,W])=>[Math.floor(M/(j/Re.fftSize)),Math.ceil(W/(j/Re.fftSize))],[fe,de]=B(Lf.LOW),[re,V]=B(Lf.MID),[Y,te]=B(Lf.HIGH),ge=(M,W)=>{let ae=0,Be=0;for(let qe=M;qe<=W;qe++)ae+=Math.pow(10,k[qe]/10),Be++;return Be>0?10*Math.log10(ae/Be):-100},_e=ge(fe,de),oe=ge(re,V),X=ge(Y,te),$=M=>Math.min(1,Math.max(0,(M-d)/Math.abs(d))),he=[{label:"BASS",value:$(_e),color:"#3b82f6"},{label:"MID (VOICE)",value:$(oe),color:"#8b5cf6"},{label:"TREBLE",value:$(X),color:"#10b981"}],xe=Se/3;he.forEach((M,W)=>{const ae=W*xe,Be=M.value*Ne,qe=Ne-Be,St=be.createLinearGradient(0,Ne,0,qe);St.addColorStop(0,M.color+"40"),St.addColorStop(1,M.color),be.fillStyle=St,be.fillRect(ae+10,qe,xe-20,Be),be.fillStyle=M.color,be.fillRect(ae+10,qe-2,xe-20,2),be.fillStyle="#64748b",be.font="10px Inter",be.textAlign="center",be.fillText(M.label,ae+xe/2,Ne-5)});const ze=oe-_e,Xe=Math.max(2,12-l);ze>p&&oe>_e+Xe&&oe>-60&&(J(!0),le.current&&clearTimeout(le.current),le.current=setTimeout(()=>J(!1),200)),F.current=requestAnimationFrame(pe)};return s?m.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col transition-all duration-300 ${ue?"h-[90vh]":"h-auto"}`,children:[m.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50 flex-shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`p-2 rounded-full transition-colors duration-300 ${G?"bg-green-100 text-green-600":"bg-indigo-100 text-indigo-600"}`,children:m.jsx(ss,{size:20})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-black text-slate-800",children:"Cu hnh Micro"}),m.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"iu chnh  nhy  t ng pht"})]})]}),m.jsx("button",{onClick:()=>n(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors",children:m.jsx(el,{size:20})})]}),m.jsxs("div",{className:"relative bg-slate-900 h-48 w-full flex-shrink-0",children:[m.jsx("canvas",{ref:z,width:500,height:200,className:"w-full h-full block"}),m.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-1",children:m.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold transition-all duration-200 ${G?"bg-green-500 text-white scale-110":"bg-slate-700 text-slate-400"}`,children:G?"DETECTED":"LISTENING"})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:[" Nhy (Sensitivity)",m.jsxs("div",{className:"group relative",children:[m.jsx(ya,{size:14,className:"text-slate-400 cursor-help"}),m.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:" nhy cng cao th micro cng d bt ging ni. Gim nu b nhiu."})]})]}),m.jsxs("span",{className:"text-sm font-black text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded",children:[l," / 10"]})]}),m.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:l,onChange:ve=>a(parseFloat(ve.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[m.jsx("span",{children:"Kh bt (n)"}),m.jsx("span",{children:"D bt (Yn tnh)"})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:["Thi gian xc nhn (Delay)",m.jsxs("div",{className:"group relative",children:[m.jsx(ya,{size:14,className:"text-slate-400 cursor-help"}),m.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:"Thi gian cn duy tr ging ni  xc nhn. Tng ln nu b bt nhm ting ho."})]})]}),m.jsxs("span",{className:"text-sm font-black text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded",children:[o,"s"]})]}),m.jsx("input",{type:"range",min:"0.2",max:"2.0",step:"0.1",value:o,onChange:ve=>f(parseFloat(ve.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[m.jsx("span",{children:"Nhanh (0.2s)"}),m.jsx("span",{children:"Chm (2.0s)"})]})]}),m.jsxs("div",{className:"pt-2",children:[m.jsxs("button",{onClick:()=>U(!ue),className:"flex items-center gap-2 text-xs font-bold text-slate-500 hover:text-indigo-600 uppercase tracking-widest transition-colors w-full justify-center py-2 border-t border-slate-100",children:[m.jsx(BS,{size:14}),"Ci t nng cao (Advanced)",ue?m.jsx(mS,{size:14}):m.jsx(dS,{size:14})]}),ue&&m.jsxs("div",{className:"pt-4 space-y-6 animate-in slide-in-from-top-2 duration-300",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:["Lc Bass (Bass Filter)",m.jsxs("div",{className:"group relative",children:[m.jsx(ya,{size:14,className:"text-slate-400 cursor-help"}),m.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:" chnh lch bt buc gia ging (Mid) v nn (Bass). Tng cao  lc ting /bass."})]})]}),m.jsxs("span",{className:"text-sm font-black text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:[p," dB"]})]}),m.jsx("input",{type:"range",min:"0",max:"10",step:"0.5",value:p,onChange:ve=>y(parseFloat(ve.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-500"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[m.jsx("span",{children:"t lc"}),m.jsx("span",{children:"Lc mnh"})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:["Chng Gai (Transient)",m.jsxs("div",{className:"group relative",children:[m.jsx(ya,{size:14,className:"text-slate-400 cursor-help"}),m.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:"Ngng b qua cc ting ng ln t ngt (g mic, v tay)."})]})]}),m.jsxs("span",{className:"text-sm font-black text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:[x,"x"]})]}),m.jsx("input",{type:"range",min:"1.5",max:"5.0",step:"0.1",value:x,onChange:ve=>b(parseFloat(ve.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-500"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[m.jsx("span",{children:"Nhy cm"}),m.jsx("span",{children:"B qua nhiu"})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:["Hc Mi Trng (Adaptation)",m.jsxs("div",{className:"group relative",children:[m.jsx(ya,{size:14,className:"text-slate-400 cursor-help"}),m.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-2 w-48 p-2 bg-slate-800 text-white text-[10px] rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:"Tc  micro lm quen vi ting n nn mi."})]})]}),m.jsx("span",{className:"text-sm font-black text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:_})]}),m.jsx("input",{type:"range",min:"0.005",max:"0.1",step:"0.005",value:_,onChange:ve=>C(parseFloat(ve.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-500"}),m.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 font-bold uppercase",children:[m.jsx("span",{children:"Chm (n nh)"}),m.jsx("span",{children:"Nhanh (Thch ng tt)"})]})]})]})]}),m.jsxs("div",{className:"pt-4 border-t border-slate-100 flex justify-between items-center",children:[m.jsxs("button",{onClick:()=>{a(6),f(.8),y(2),b(2.5),C(.02)},className:"flex items-center gap-2 text-xs font-bold text-slate-500 hover:text-indigo-600 transition-colors",children:[m.jsx(OS,{size:14}),"Khi phc mc nh"]}),m.jsx("button",{onClick:()=>n(!1),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg shadow-lg shadow-indigo-200 transition-all active:scale-95",children:"Xong"})]})]})]})}):null},n3=()=>({announce:E.useCallback(n=>{if(!n||!window.speechSynthesis)return Promise.resolve();const l=n.replace(/[\[\]\(\)\|\-]/g," ").replace(/\b(karaoke|beat|gc|tng|tone|nam|n|song ca|h|ca s|full|hd|official|video|music|lyrics|lyric|mv|audio|remix|cover|live|lofi|nhc sng|mi nht|hay nht|acoustic|ver|version)\b/gi,"").replace(/\s+/g," ").trim();return l?(o=>new Promise(async f=>{try{const d=`/tts?ie=UTF-8&tl=vi&client=gtx&q=${encodeURIComponent(o)}`,p=await(await fetch(d)).blob(),y=URL.createObjectURL(p),x=new Audio(y);x.playbackRate=1,x.onended=()=>{URL.revokeObjectURL(y),f()},x.onerror=b=>{URL.revokeObjectURL(y),console.error("Audio playback error",b),f()},await x.play()}catch(d){console.error("TTS Error:",d),f()}}))(l):Promise.resolve()},[]),isPlaying:!1}),Hf=45e3,i3=5e3,s3=50,l3=[20,150],a3=[150,3400],r3=[3400,8e3],o3=3,c3=!0,u3=()=>{const s=E.useRef(null),n=E.useRef(null),l=E.useRef(null),a=E.useCallback(()=>{if(l.current&&(clearInterval(l.current),l.current=null),n.current){try{n.current.close()}catch{}n.current=null}s.current&&(s.current.getTracks().forEach(f=>f.stop()),s.current=null)},[]);return{waitForPresence:E.useCallback((f,d,h)=>new Promise(async p=>{if(f?.aborted){p("abort");return}let y=!1,x=0,b=0,_=Date.now();const C=setInterval(()=>{const D=Date.now();Q?.getState?.()?.countdownPaused||(b+=D-_),_=D;const P=Math.max(0,Math.ceil((Hf-b)/1e3));d&&d(P),b>=Hf&&z("timeout")},1e3),z=D=>{y||(y=!0,clearInterval(C),a(),p(D))};f&&f.addEventListener("abort",()=>z("abort"),{once:!0}),d&&d(Math.ceil(Hf/1e3));try{const D=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});if(s.current=D,y){a();return}const q=new AudioContext;n.current=q,q.state==="suspended"&&await q.resume();const P=q.createMediaStreamSource(D),F=q.createAnalyser();F.fftSize=2048,F.smoothingTimeConstant=.3,P.connect(F);const G=q.sampleRate,J=F.frequencyBinCount,le=G/F.fftSize,ue=([ge,_e])=>[Math.max(0,Math.floor(ge/le)),Math.min(J-1,Math.ceil(_e/le))],[U,K]=ue(l3),[pe,ve]=ue(a3),[be,Se]=ue(r3),Ne=new Float32Array(J),Re=new Float32Array(F.fftSize);let ke=null,k=null,j=null,B=0,fe=null,de=0,re=!1;const V=(ge,_e)=>{let oe=0,X=0;for(let $=ge;$<=_e;$++){const he=Math.pow(10,Ne[$]/10);oe+=he,X++}return X===0?-100:10*Math.log10(oe/X)},Y=()=>{let ge=0;for(let _e=0;_e<Re.length;_e++)ge+=Re[_e]*Re[_e];return Math.sqrt(ge/Re.length)},te=()=>{if(y)return;if(f?.aborted){z("abort");return}F.getFloatFrequencyData(Ne),F.getFloatTimeDomainData(Re);const ge=V(U,K),_e=V(pe,ve),oe=Y();if(b<i3){b>=2e3&&(B++,ke===null?(ke=ge,k=_e,j=oe):(ke=ke*(1-.1)+ge*.1,k=k*(1-.1)+_e*.1,j=j*(1-.1)+oe*.1));return}if(k===null){ke=ge,k=_e,j=oe;return}const X=_e-k,$=ge-ke,he=X-$,xe=j>1e-4?oe/j:0,{micSensitivity:ze,micDelay:Xe,micBassFilter:M,micTransient:W,micAdaptation:ae}=Q.getState(),Be=Math.max(2,12-ze),qe=Xe*1e3;if(xe>W){if(de++,de>=o3){z("mic");return}}else de=Math.max(0,de-1);if(X>Be&&he>M){if(re=!0,!fe)fe=Date.now();else if(Date.now()-fe>=qe){z("mic");return}}else fe&&Date.now()-fe<300||(fe=null,re=!1);if(h){const sn=Date.now();if(sn-x>2e3){const Sl=Be>0?X/Be:0,sc=xe/W,fs=Math.max(Sl,sc);fs>.5&&fs<1?(x=sn,h("medium")):fs>.25&&fs<.5&&(x=sn,h("weak"))}}(!re||!c3)&&(ke=ke*(1-ae)+ge*ae,k=k*(1-ae)+_e*ae,j=j*(1-ae)+oe*ae)};l.current=setInterval(te,s3)}catch(D){console.warn("Mic detection unavailable:",D.message)}}),[a]),cancelDetection:a}},f3=()=>{const[s,n]=E.useState(!1),l=E.useRef(null),a=E.useCallback(()=>{l.current&&l.current.closed&&(l.current=null,n(!1))},[]);E.useEffect(()=>{const d=setInterval(a,3e3);return()=>clearInterval(d)},[a]);const o=E.useCallback(async()=>{if(l.current&&!l.current.closed){l.current.focus();return}let d=0,h=0,p=window.screen.width,y=window.screen.height,x=null;if("getScreenDetails"in window)try{const C=await window.getScreenDetails();x=C.screens.find(z=>z!==C.currentScreen),x&&(d=x.left,h=x.top,p=x.width,y=x.height)}catch{}const b=`popup,left=${d},top=${h},width=${p},height=${y},fullscreen=yes`,_=window.open("/projection","karaoke_tv",b);_&&(l.current=_,n(!0),x&&(_.__targetScreen=x))},[]),f=E.useCallback(()=>{l.current&&!l.current.closed&&l.current.close(),l.current=null,n(!1)},[]);return{isTVOpen:s,openTV:o,closeTV:f}};function d3(s){const n=Q(f=>f.reorderQueue),[l,a]=E.useState(!1),o=E.useRef(!0);return E.useEffect(()=>{const f=Tb(d=>{o.current&&(o.current=!1);const p=(d||[]).map(x=>({id:x.firebaseKey,firebaseKey:x.firebaseKey,videoId:x.videoId,title:x.title,cleanTitle:x.cleanTitle,artist:x.artist,addedBy:x.addedBy||x.customerName||"Khch",thumbnail:x.thumbnail,source:x.source||"web",customerId:x.customerId,round:x.round,isPriority:x.isPriority})),{manualOrder:y}=Q.getState();if(y&&y.length>0){const x=new Map(p.map(D=>[D.id,D])),b=[],_=new Set;for(const D of y){const q=x.get(D);q&&(b.push(q),_.add(D))}const C=[],z=[];for(const D of p)_.has(D.id)||(D.isPriority?C.push(D):z.push(D));b.unshift(...C),b.push(...z),n(b)}else n(p);a(!0)});return()=>f()},[]),{firebaseInitialized:l}}const Sy="__karaoke_session_active__",Bo="__karaoke_current_song__",Uo="__karaoke_queue__";function h3(){return Ce.useMemo(()=>sessionStorage.getItem(Sy)?!0:(sessionStorage.setItem(Sy,"1"),!1),[])}function Ty(s){s?sessionStorage.setItem(Bo,JSON.stringify(s)):sessionStorage.removeItem(Bo)}function m3(s){s&&s.length>0?sessionStorage.setItem(Uo,JSON.stringify(s)):sessionStorage.removeItem(Uo)}function g3(){try{const s=sessionStorage.getItem(Bo);if(s)return JSON.parse(s)}catch(s){console.warn("[useSessionRestore] Failed to parse saved currentSong:",s)}return null}function p3(){try{const s=sessionStorage.getItem(Uo);if(s)return JSON.parse(s)}catch(s){console.warn("[useSessionRestore] Failed to parse saved queue:",s)}return[]}function y3(s,n,l){const a=h3(),[o,f]=Ce.useState(!1),d=Ce.useRef(!1);return Ce.useEffect(()=>{if(d.current)return;if(d.current=!0,!a){nh().catch(()=>{}),sessionStorage.removeItem(Bo),sessionStorage.removeItem(Uo);return}const h=g3();h&&(s(h),n(!0),f(!0));const p=p3();p&&p.length>0&&l&&l(p)},[a,s,n,l]),{isRefresh:a,isRestoredSong:o,setIsRestoredSong:f}}const v3=()=>{const s=Q(M=>M.isPlaying),n=Q(M=>M.setIsPlaying),l=Q(M=>M.triggerRestart),a=Q(M=>M.queue),o=Q(M=>M.removeFromQueue),f=Q(M=>M.reorderQueue),d=Q(M=>M.setCurrentSong),h=Q(M=>M.currentSong),p=Q(M=>M.queueMode),y=Q(M=>M.toggleQueueMode),x=Q(M=>M.invitedSongId),b=Q(M=>M.setInvitedSongId),_=Q(M=>M.setWaitingForGuest),C=Q(M=>M.waitCountdown),z=Q(M=>M.setWaitCountdown),D=Q(M=>M.setCountdownPaused),q=Q(M=>M.setMicAttemptHint),P=Q(M=>M.addToHistory),F=Q(M=>M.loadHistory),{isRefresh:G,isRestoredSong:J,setIsRestoredSong:le}=y3(d,n,f);Ce.useEffect(()=>{m3(a)},[a]),Ce.useEffect(()=>{F()},[]);const ue=()=>{const M=Q.getState().currentSong;M&&M.videoId&&P({id:`${M.videoId}_${Date.now()}`,videoId:M.videoId,title:M.title,cleanTitle:M.cleanTitle||"",addedBy:M.addedBy||"Khch",customerId:M.customerId||"",thumbnail:M.thumbnail||"",completedAt:Date.now()})},U=()=>{if(a.length>0){const M=a[0];d(M),o(M.id)}else n(!1),d(null)},K=Ce.useCallback(()=>{ue(),U()},[a,o,d,n,P]),pe=Ce.useRef(!1);kb("host",{onSongEnded:K}),d3();const[ve,be]=Ce.useState(!G);Ce.useEffect(()=>{G&&(J||h)&&be(!0)},[G,J,h]),Ce.useEffect(()=>{if(G&&!ve){const M=setTimeout(()=>be(!0),500);return()=>clearTimeout(M)}},[G,ve]),Ce.useEffect(()=>{if(ve&&!h&&a.length>0&&p==="auto")if(pe.current){const M=a[0];d(M),o(M.id)}else{const M={...a[0],isStaged:!0};d(M),o(M.id)}},[h,a,p,d,o,ve]);const[Se,Ne]=Ce.useState("center"),{announce:Re}=n3(),{waitForPresence:ke,cancelDetection:k}=u3(),{isTVOpen:j,openTV:B,closeTV:fe}=f3();Ce.useEffect(()=>{sessionStorage.getItem("__karaoke_auto_start__")||(sessionStorage.setItem("__karaoke_auto_start__","1"),fetch("/api/display/duplicate",{method:"POST"}).catch(()=>{}))},[]);const de=Ce.useRef(null),re=Ce.useRef(!1),V=Ce.useRef(null),Y=Ce.useRef(!0);Ce.useEffect(()=>{Y.current&&(Y.current=!1,G&&!h)||(h?(Ty(h),th(h).catch(()=>{}),h.firebaseKey&&Sb(h.firebaseKey).catch(()=>{})):(Ty(null),nh().catch(()=>{})))},[h,G]),Ce.useEffect(()=>{if(!h||!s)return;const M=setInterval(()=>{const Be=Lo(),qe=Ho();qe>0&&od(Be,qe).catch(()=>{})},1e4),W=Lo(),ae=Ho();return ae>0&&od(W,ae).catch(()=>{}),()=>clearInterval(M)},[h,s]);const te=()=>{if(h?.isStaged){pe.current=!0;const M={...h,isStaged:!1};oe(M.id),d(M),n(!0);return}if(!h&&a.length>0){pe.current=!0;const M=a[0];oe(M.id),d(M),o(M.id),n(!0);return}n(!s)},ge=()=>{re.current=!0,de.current&&de.current.abort()},[_e,oe]=Ce.useState(null),X=Ce.useCallback(async M=>{const W=M.addedBy||"qu khch";let ae=M.cleanTitle;ae||(ae=ih(M.title));const Be=[`Xin mi ${W} ln sn khu, trnh by ca khc ${ae}`,`${W} i . Mi ${W} ln sn khu trnh by bi ht ${ae} ca mnh`,`Tip theo chng trnh, xin mi ${W} gi tng mi ngi ca khc ${ae}`,`Mt trng pho tay cho ${W} vi ca khc ${ae}`,`Xin mi ging ca ${W} chun b cho bi ht ${ae}`,`Mi qu v cng thng thc ging ca ca ${W} qua nhc phm ${ae}`,`Sn khu xin c nhng li cho ${W} vi bi ht ${ae}`,` thay i khng kh, mi ${W} gi n mi ngi ca khc ${ae}`,`V sau y, ging ca ${W} s trnh by bi ht ${ae}`,`Xin mi ${W} cm mic v chy ht mnh vi ${ae}`,`Tip ni chng trnh vn ngh, mi ${W} ln sn khu vi bi ${ae}`],qe=Be[Math.floor(Math.random()*Be.length)];await Re(qe)},[Re]);Ce.useEffect(()=>{if(!x||p!=="manual")return;const M=a.find(ae=>ae.id===x);if(!M)return;(async()=>(M.cleanTitle?await X(M):(await new Promise(ae=>setTimeout(ae,3e3)),await X(M)),d(M),o(M.id),n(!0)))()},[x,p,a,X,d,o,n]),Ce.useEffect(()=>{if(!h||h.isStaged)return;if(h.isReplaced){oe(h.id);return}if(h.id===_e)return;if(J){oe(h.id),le(!1);return}if(p==="manual"&&h.id===x){oe(h.id),b(null);return}n(!1),D(!1),de.current&&de.current.abort();const M=new AbortController;de.current=M,re.current=!1;const W=async()=>{if(await X(h),!(M.signal.aborted&&!re.current)){if(p==="manual"){oe(h.id);return}_(!0),await ke(M.signal,z,ae=>{q(ae),V.current&&clearTimeout(V.current),V.current=setTimeout(()=>q(null),3e3)}),_(!1),q(null),!(M.signal.aborted&&!re.current)&&(oe(h.id),n(!0))}};if(h.cleanTitle)W();else{const ae=setTimeout(()=>{h.id!==_e&&W()},3e3);return()=>{clearTimeout(ae),M.abort(),k(),_(!1)}}return()=>{M.abort(),k(),_(!1)}},[h,_e,p,x,J,X,n,b,_,le,ke,k,q]);const $=Ce.useRef(null),he=()=>l(),xe=()=>{if(n(!1),_(!1),de.current&&de.current.abort(),oe(null),a.length>0){const M={...a[0],isStaged:!0};d(M),o(M.id)}else d(null)},ze=Ce.useCallback(()=>{h&&X(h)},[h,X]);Ce.useEffect(()=>{const M=W=>{["INPUT","TEXTAREA","IFRAME"].includes(document.activeElement.tagName)||W.code==="Space"&&(W.preventDefault(),te())};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[s,te]);const Xe=M=>{const W="flex flex-col gap-4 min-w-0 overflow-hidden transition-[flex] duration-500 ease-in-out will-change-[flex]";switch(Se){case"left":return M==="left"?`${W} flex-[5]`:M==="center"?`${W} flex-[4]`:`${W} flex-[3]`;case"right":return M==="left"?`${W} flex-[2]`:M==="center"?`${W} flex-[4]`:`${W} flex-[6]`;default:return M==="left"?`${W} flex-[2]`:M==="center"?`${W} flex-[6]`:`${W} flex-[2]`}};return m.jsxs("div",{className:"flex flex-col lg:flex-row h-screen font-sans p-2 gap-4 bg-slate-100",children:[m.jsx("div",{className:Xe("left"),onClick:()=>Ne("left"),onMouseEnter:()=>Ne("left"),children:m.jsxs(Js,{className:`h-full flex flex-col border border-slate-200 shadow-sm bg-white overflow-hidden transition-all ${Se==="left"?"shadow-md border-slate-300":""}`,children:[m.jsxs("div",{className:"p-3 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[m.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter",children:"HNG CH"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(e3,{}),m.jsx(J2,{}),m.jsxs("button",{onClick:y,className:`inline-flex h-5 px-2 items-center rounded-full transition-colors cursor-pointer gap-1 flex-shrink-0 overflow-hidden ${p==="auto"?"bg-indigo-500":"bg-slate-400"}`,children:[m.jsx("span",{className:"text-[10px] font-bold text-white pointer-events-none whitespace-nowrap leading-tight",children:p==="auto"?"T ng":"Th cng"}),m.jsx("span",{className:`inline-block h-2.5 w-2.5 rounded-full bg-white transition-transform shadow-sm flex-shrink-0 ${p==="auto"?"":"order-first"}`})]})]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:m.jsx(c2,{onReAnnounce:ze})})]})}),m.jsxs("div",{className:Xe("center"),onClick:()=>Ne("center"),onMouseEnter:()=>Ne("center"),children:[m.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-xl shadow-sm border border-slate-200 mb-0",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/logo.svg",alt:"Logo",className:"w-12 h-12 rounded-xl shadow-sm bg-white"}),m.jsx("h1",{className:"text-2xl font-black text-slate-800 tracking-tighter uppercase",children:"KARAOKE SU NHN"})]}),m.jsx(W2,{openTV:B,closeTV:fe,isTVOpen:j})]}),m.jsxs("div",{ref:$,className:"player-container relative bg-black overflow-hidden shadow-lg rounded-xl aspect-video w-full",children:[m.jsx(P2,{className:"w-full h-full"}),m.jsx(Db,{countdown:C,onSkip:ge,onPauseToggle:()=>{const M=Q.getState();M.setCountdownPaused(!M.countdownPaused)}})]}),m.jsx(Js,{className:"bg-white border-0 shadow-sm rounded-xl px-3 py-2",children:m.jsx(Z2,{})}),m.jsx(Js,{className:"bg-white border-0 shadow-sm rounded-xl p-3",children:m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("button",{onClick:te,className:`flex-1 py-4 px-6 rounded-xl flex items-center justify-center gap-3 transition-colors active:scale-95 shadow-sm cursor-pointer ${s?"bg-slate-200 text-slate-600 border border-slate-300 hover:bg-slate-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:[s?m.jsx(Hy,{size:28,fill:"currentColor"}):m.jsx(vo,{size:28,fill:"currentColor"}),m.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:s?"Dng":"Pht"})]}),m.jsxs("button",{onClick:()=>{ue(),U()},disabled:a.length===0,className:"flex-1 py-4 px-6 rounded-xl flex items-center justify-center gap-3 bg-slate-800 text-white transition-colors active:scale-95 shadow-sm cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-900",children:[m.jsx(Uy,{size:28,fill:"currentColor"}),m.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:"Qua Bi"})]}),m.jsxs("button",{onClick:he,disabled:!h,className:"flex-1 py-4 px-6 rounded-xl flex items-center justify-center gap-3 bg-orange-500 text-white transition-colors active:scale-95 shadow-sm cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:bg-orange-600",children:[m.jsx(IS,{size:28}),m.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:"Pht Li"})]}),m.jsxs("button",{onClick:xe,disabled:!h,className:"flex-1 py-4 px-6 rounded-xl flex items-center justify-center gap-3 bg-red-500 text-white transition-colors active:scale-95 shadow-sm cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:bg-red-600",children:[m.jsx(qS,{size:28,fill:"currentColor"}),m.jsx("span",{className:"text-xl font-black uppercase tracking-tight",children:"Xa Bi"})]})]})})]}),m.jsx("div",{className:Xe("right"),onClick:()=>Ne("right"),onMouseEnter:()=>Ne("right"),onFocusCapture:()=>Ne("right"),children:m.jsxs(Js,{className:`h-full flex flex-col border border-slate-200 shadow-sm bg-white overflow-hidden transition-all ${Se==="right"?"shadow-md border-slate-300":""}`,children:[m.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-center gap-2",children:[m.jsx(By,{size:18,className:"text-slate-800"}),m.jsx("h2",{className:"text-lg font-black text-slate-800 uppercase tracking-tighter",children:"Tm Kim"})]}),m.jsx("div",{className:"flex-1 overflow-hidden relative",children:m.jsx(M2,{isExpanded:Se==="right"})})]})}),m.jsx($2,{}),m.jsx(t3,{})]})};function b3(){return m.jsx(nx,{children:m.jsxs(ix,{children:[m.jsx(l0,{path:"/",element:m.jsx(v3,{})}),m.jsx(l0,{path:"/projection",element:m.jsx(F2,{})})]})})}cx.createRoot(document.getElementById("root")).render(m.jsx(b3,{}));
